"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[694],{16694:(s,e,t)=>{t.r(e),t.d(e,{default:()=>h});var a=t(65043),i=t(53969),r=t(55895),n=t(42579),o=t(17873),l=t(94799),d=t(41859),p=t(24343),x=t(17171),c=t(1422),g=t(27421),u=t(73216),f=t(74117),m=t(70579);const h=()=>{const{t:s,i18n:e}=(0,f.Bd)(),[t,h]=(0,a.useState)(""),[j,y]=(0,a.useState)([]),b=(0,a.useRef)(null),A=(0,u.Zp)(),v=e.language&&e.language.startsWith("ja")?"ja-JP":"en-US",{suggestions:C,responses:w}=(0,a.useMemo)(()=>(s=>({suggestions:[s("pages.assistant.suggestions.dealsNotClosedThisMonth"),s("pages.assistant.suggestions.totalClosedValue"),s("pages.assistant.suggestions.createReminderCompanyB"),s("pages.assistant.suggestions.writeThankYouEmail")],responses:{[s("pages.assistant.suggestions.dealsNotClosedThisMonth")]:s("pages.assistant.responses.dealsNotClosedThisMonth"),[s("pages.assistant.suggestions.totalClosedValue")]:s("pages.assistant.responses.totalClosedValue"),[s("pages.assistant.suggestions.createReminderCompanyB")]:s("pages.assistant.responses.createReminderCompanyB"),[s("pages.assistant.suggestions.writeThankYouEmail")]:s("pages.assistant.responses.writeThankYouEmail")}}))(s),[s,e.language]);(0,a.useEffect)(()=>{y([{id:1,text:s("pages.assistant.greeting"),isUser:!1,timestamp:new Date}])},[s,e.language]),(0,a.useEffect)(()=>{var s;null===(s=b.current)||void 0===s||s.scrollIntoView({behavior:"smooth"})},[j]);const k=()=>{if(!t.trim())return;const e={id:Date.now(),text:t,isUser:!0,timestamp:new Date};y(s=>[...s,e]),h(""),setTimeout(()=>{const e={id:Date.now()+1,text:w[t]||s("pages.assistant.noUnderstand"),isUser:!1,timestamp:new Date};y(s=>[...s,e])},800)},T=s=>{if(s.includes("```")){const e=s.split("```");return(0,m.jsx)("div",{children:e.map((s,e)=>e%2===1?(0,m.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"4px",overflowX:"auto",margin:"8px 0",fontFamily:"monospace",whiteSpace:"pre-wrap"},children:s.trim()},e):(0,m.jsx)("div",{children:s},e))})}return(0,m.jsx)("div",{style:{whiteSpace:"pre-line"},children:s})};return(0,m.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[(0,m.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:"1px solid #e0e0e0",backgroundColor:"#fff"},children:[(0,m.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,m.jsx)(c.A,{color:"primary",fontSize:"large"}),(0,m.jsx)(r.A,{variant:"h6",component:"h1",children:s("pages.assistant.title")})]}),(0,m.jsx)(n.A,{onClick:()=>A(-1),children:(0,m.jsx)(g.A,{})})]}),(0,m.jsxs)(i.A,{sx:{flex:1,overflowY:"auto",p:2,bgcolor:"#f9f9f9"},children:[j.map(e=>{return(0,m.jsx)(i.A,{sx:{display:"flex",justifyContent:e.isUser?"flex-end":"flex-start",mb:2},children:(0,m.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",maxWidth:"80%"},children:[(0,m.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:.5,justifyContent:e.isUser?"flex-end":"flex-start"},children:[!e.isUser&&(0,m.jsx)(o.A,{sx:{width:24,height:24,mr:1,bgcolor:"primary.main"},children:(0,m.jsx)(c.A,{sx:{fontSize:16}})}),(0,m.jsxs)(r.A,{variant:"caption",color:"text.secondary",children:[e.isUser?s("pages.assistant.you"):s("pages.assistant.assistant")," \u2022 ",(t=e.timestamp,new Intl.DateTimeFormat(v,{hour:"2-digit",minute:"2-digit"}).format(t))]})]}),(0,m.jsx)(l.A,{elevation:0,sx:{p:2,bgcolor:e.isUser?"primary.light":"background.paper",color:e.isUser?"primary.contrastText":"text.primary",borderRadius:2,borderTopLeftRadius:e.isUser?12:2,borderTopRightRadius:e.isUser?2:12},children:T(e.text)})]})},e.id);var t}),(0,m.jsx)("div",{ref:b})]}),j.length<=1&&(0,m.jsxs)(i.A,{sx:{p:2,borderTop:"1px solid #e0e0e0",bgcolor:"#fff"},children:[(0,m.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:s("pages.assistant.youCanAsk")}),(0,m.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:C.map((s,e)=>(0,m.jsx)(d.A,{variant:"outlined",size:"small",onClick:()=>(s=>{h(s)})(s),sx:{textTransform:"none",borderRadius:4,fontSize:"0.8rem"},children:s},e))})]}),(0,m.jsx)(i.A,{sx:{p:2,borderTop:"1px solid #e0e0e0",bgcolor:"#fff"},children:(0,m.jsx)("form",{onSubmit:s=>{s.preventDefault(),k()},children:(0,m.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,m.jsx)(p.A,{fullWidth:!0,variant:"outlined",placeholder:s("pages.assistant.inputPlaceholder"),value:t,onChange:s=>h(s.target.value),onKeyPress:s=>{"Enter"!==s.key||s.shiftKey||(s.preventDefault(),k())},multiline:!0,maxRows:4,sx:{"& .MuiOutlinedInput-root":{borderRadius:4,backgroundColor:"#f5f5f5","&:hover fieldset":{borderColor:"primary.main"}}}}),(0,m.jsx)(n.A,{type:"submit",color:"primary",sx:{alignSelf:"flex-end",backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},disabled:!t.trim(),children:(0,m.jsx)(x.A,{})})]})})})]})}}}]);
//# sourceMappingURL=694.2d129ae7.chunk.js.map