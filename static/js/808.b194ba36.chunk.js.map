{"version":3,"file":"static/js/808.b194ba36.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Email.js","../node_modules/@mui/material/esm/TableFooter/tableFooterClasses.js","../node_modules/@mui/material/esm/TableFooter/TableFooter.js","../node_modules/@mui/system/esm/Stack/createStack.js","../node_modules/@mui/material/esm/Stack/Stack.js","../node_modules/@mui/system/esm/styled/styled.js","../node_modules/@mui/icons-material/esm/NavigateNext.js","../node_modules/@mui/icons-material/esm/DragIndicator.js","../node_modules/@mui/icons-material/esm/Cancel.js","pages/QuotationManagement/components/FixedPriceTable/index.tsx","pages/QuotationManagement/components/TimeAndMaterialTable/index.tsx","pages/QuotationManagement/components/EstimationStep/index.tsx","pages/QuotationManagement/components/QuotationForm/index.tsx","pages/QuotationManagement/components/EstimationTable/index.tsx","pages/QuotationManagement/components/QuotationDetail/index.tsx","pages/QuotationManagement/components/QuotationPreview/index.tsx","pages/QuotationManagement/components/QuotationList/index.tsx","pages/QuotationManagement/components/EmailQuotationDialog/index.tsx","pages/QuotationManagement/components/QuotationTemplates/index.tsx","pages/QuotationManagement/components/UploadQuoteTemplate/index.tsx","pages/QuotationManagement/index.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z\"\n}), 'Email');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getTableFooterUtilityClass(slot) {\n  return generateUtilityClass('MuiTableFooter', slot);\n}\nconst tableFooterClasses = generateUtilityClasses('MuiTableFooter', ['root']);\nexport default tableFooterClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport Tablelvl2Context from \"../Table/Tablelvl2Context.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { getTableFooterUtilityClass } from \"./tableFooterClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getTableFooterUtilityClass, classes);\n};\nconst TableFooterRoot = styled('tfoot', {\n  name: 'MuiTableFooter',\n  slot: 'Root'\n})({\n  display: 'table-footer-group'\n});\nconst tablelvl2 = {\n  variant: 'footer'\n};\nconst defaultComponent = 'tfoot';\nconst TableFooter = /*#__PURE__*/React.forwardRef(function TableFooter(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiTableFooter'\n  });\n  const {\n    className,\n    component = defaultComponent,\n    ...other\n  } = props;\n  const ownerState = {\n    ...props,\n    component\n  };\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(Tablelvl2Context.Provider, {\n    value: tablelvl2,\n    children: /*#__PURE__*/_jsx(TableFooterRoot, {\n      as: component,\n      className: clsx(classes.root, className),\n      ref: ref,\n      role: component === defaultComponent ? null : 'rowgroup',\n      ownerState: ownerState,\n      ...other\n    })\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? TableFooter.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component, normally `TableRow`.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default TableFooter;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport deepmerge from '@mui/utils/deepmerge';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nimport composeClasses from '@mui/utils/composeClasses';\nimport systemStyled from \"../styled/index.js\";\nimport useThemePropsSystem from \"../useThemeProps/index.js\";\nimport { extendSxProp } from \"../styleFunctionSx/index.js\";\nimport createTheme from \"../createTheme/index.js\";\nimport { handleBreakpoints, mergeBreakpointsInOrder, resolveBreakpointValues } from \"../breakpoints/index.js\";\nimport { createUnarySpacing, getValue } from \"../spacing/index.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultTheme = createTheme();\n// widening Theme to any so that the consumer can own the theme structure.\nconst defaultCreateStyledComponent = systemStyled('div', {\n  name: 'MuiStack',\n  slot: 'Root'\n});\nfunction useThemePropsDefault(props) {\n  return useThemePropsSystem({\n    props,\n    name: 'MuiStack',\n    defaultTheme\n  });\n}\n\n/**\n * Return an array with the separator React element interspersed between\n * each React node of the input children.\n *\n * > joinChildren([1,2,3], 0)\n * [1,0,2,0,3]\n */\nfunction joinChildren(children, separator) {\n  const childrenArray = React.Children.toArray(children).filter(Boolean);\n  return childrenArray.reduce((output, child, index) => {\n    output.push(child);\n    if (index < childrenArray.length - 1) {\n      output.push(/*#__PURE__*/React.cloneElement(separator, {\n        key: `separator-${index}`\n      }));\n    }\n    return output;\n  }, []);\n}\nconst getSideFromDirection = direction => {\n  return {\n    row: 'Left',\n    'row-reverse': 'Right',\n    column: 'Top',\n    'column-reverse': 'Bottom'\n  }[direction];\n};\nexport const style = ({\n  ownerState,\n  theme\n}) => {\n  let styles = {\n    display: 'flex',\n    flexDirection: 'column',\n    ...handleBreakpoints({\n      theme\n    }, resolveBreakpointValues({\n      values: ownerState.direction,\n      breakpoints: theme.breakpoints.values\n    }), propValue => ({\n      flexDirection: propValue\n    }))\n  };\n  if (ownerState.spacing) {\n    const transformer = createUnarySpacing(theme);\n    const base = Object.keys(theme.breakpoints.values).reduce((acc, breakpoint) => {\n      if (typeof ownerState.spacing === 'object' && ownerState.spacing[breakpoint] != null || typeof ownerState.direction === 'object' && ownerState.direction[breakpoint] != null) {\n        acc[breakpoint] = true;\n      }\n      return acc;\n    }, {});\n    const directionValues = resolveBreakpointValues({\n      values: ownerState.direction,\n      base\n    });\n    const spacingValues = resolveBreakpointValues({\n      values: ownerState.spacing,\n      base\n    });\n    if (typeof directionValues === 'object') {\n      Object.keys(directionValues).forEach((breakpoint, index, breakpoints) => {\n        const directionValue = directionValues[breakpoint];\n        if (!directionValue) {\n          const previousDirectionValue = index > 0 ? directionValues[breakpoints[index - 1]] : 'column';\n          directionValues[breakpoint] = previousDirectionValue;\n        }\n      });\n    }\n    const styleFromPropValue = (propValue, breakpoint) => {\n      if (ownerState.useFlexGap) {\n        return {\n          gap: getValue(transformer, propValue)\n        };\n      }\n      return {\n        // The useFlexGap={false} implement relies on each child to give up control of the margin.\n        // We need to reset the margin to avoid double spacing.\n        '& > :not(style):not(style)': {\n          margin: 0\n        },\n        '& > :not(style) ~ :not(style)': {\n          [`margin${getSideFromDirection(breakpoint ? directionValues[breakpoint] : ownerState.direction)}`]: getValue(transformer, propValue)\n        }\n      };\n    };\n    styles = deepmerge(styles, handleBreakpoints({\n      theme\n    }, spacingValues, styleFromPropValue));\n  }\n  styles = mergeBreakpointsInOrder(theme.breakpoints, styles);\n  return styles;\n};\nexport default function createStack(options = {}) {\n  const {\n    // This will allow adding custom styled fn (for example for custom sx style function)\n    createStyledComponent = defaultCreateStyledComponent,\n    useThemeProps = useThemePropsDefault,\n    componentName = 'MuiStack'\n  } = options;\n  const useUtilityClasses = () => {\n    const slots = {\n      root: ['root']\n    };\n    return composeClasses(slots, slot => generateUtilityClass(componentName, slot), {});\n  };\n  const StackRoot = createStyledComponent(style);\n  const Stack = /*#__PURE__*/React.forwardRef(function Grid(inProps, ref) {\n    const themeProps = useThemeProps(inProps);\n    const props = extendSxProp(themeProps); // `color` type conflicts with html color attribute.\n    const {\n      component = 'div',\n      direction = 'column',\n      spacing = 0,\n      divider,\n      children,\n      className,\n      useFlexGap = false,\n      ...other\n    } = props;\n    const ownerState = {\n      direction,\n      spacing,\n      useFlexGap\n    };\n    const classes = useUtilityClasses();\n    return /*#__PURE__*/_jsx(StackRoot, {\n      as: component,\n      ownerState: ownerState,\n      ref: ref,\n      className: clsx(classes.root, className),\n      ...other,\n      children: divider ? joinChildren(children, divider) : children\n    });\n  });\n  process.env.NODE_ENV !== \"production\" ? Stack.propTypes /* remove-proptypes */ = {\n    children: PropTypes.node,\n    direction: PropTypes.oneOfType([PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row']), PropTypes.arrayOf(PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row'])), PropTypes.object]),\n    divider: PropTypes.node,\n    spacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n    sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n  } : void 0;\n  return Stack;\n}","'use client';\n\nimport PropTypes from 'prop-types';\nimport { createStack } from '@mui/system';\nimport styled from \"../styles/styled.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nconst Stack = createStack({\n  createStyledComponent: styled('div', {\n    name: 'MuiStack',\n    slot: 'Root'\n  }),\n  useThemeProps: inProps => useDefaultProps({\n    props: inProps,\n    name: 'MuiStack'\n  })\n});\nprocess.env.NODE_ENV !== \"production\" ? Stack.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * Defines the `flex-direction` style property.\n   * It is applied for all screen sizes.\n   * @default 'column'\n   */\n  direction: PropTypes.oneOfType([PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row']), PropTypes.arrayOf(PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row'])), PropTypes.object]),\n  /**\n   * Add an element between each child.\n   */\n  divider: PropTypes.node,\n  /**\n   * Defines the space between immediate children.\n   * @default 0\n   */\n  spacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n  /**\n   * The system prop, which allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * If `true`, the CSS flexbox `gap` is used instead of applying `margin` to children.\n   *\n   * While CSS `gap` removes the [known limitations](https://mui.com/joy-ui/react-stack/#limitations),\n   * it is not fully supported in some browsers. We recommend checking https://caniuse.com/?search=flex%20gap before using this flag.\n   *\n   * To enable this flag globally, follow the [theme's default props](https://mui.com/material-ui/customization/theme-components/#default-props) configuration.\n   * @default false\n   */\n  useFlexGap: PropTypes.bool\n} : void 0;\nexport default Stack;","import createStyled from \"../createStyled/index.js\";\nconst styled = createStyled();\nexport default styled;","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2\"\n}), 'DragIndicator');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z\"\n}), 'Cancel');","import React, { useState } from 'react';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  TextField,\r\n  IconButton,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  Tooltip,\r\n  TableFooter,\r\n  TablePagination,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Delete as DeleteIcon,\r\n  Edit as EditIcon,\r\n  Save as SaveIcon,\r\n  Cancel as CancelIcon,\r\n  DragIndicator as DragHandleIcon,\r\n} from '@mui/icons-material';\r\nimport { EffortColumn, EstimationRow } from '../../types/quoteTemplate';\r\n\r\n// Các cột cố định không thể xóa\r\nconst FIXED_COLUMNS: Omit<EffortColumn, 'id' | 'key' | 'order'>[] = [\r\n  { name: 'Feature', isFixed: true },\r\n  { name: 'Detail', isFixed: true },\r\n  { name: 'Description', isFixed: true },\r\n  { name: 'Notes', isFixed: true },\r\n  { name: 'IT Req', isFixed: true, isEffort: true },\r\n  { name: 'UX/UI', isFixed: true, isEffort: true },\r\n];\r\n\r\ninterface FixedPriceTableProps {\r\n  rows: EstimationRow[];\r\n  effortColumns: EffortColumn[];\r\n  onRowsChange: (rows: EstimationRow[]) => void;\r\n  onColumnsChange: (columns: EffortColumn[]) => void;\r\n}\r\n\r\nconst FixedPriceTable: React.FC<FixedPriceTableProps> = ({\r\n  rows = [],\r\n  effortColumns = [],\r\n  onRowsChange,\r\n  onColumnsChange,\r\n}) => {\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [newColumnName, setNewColumnName] = useState('');\r\n  const [editingColumn, setEditingColumn] = useState<string | null>(null);\r\n  const [editColumnName, setEditColumnName] = useState('');\r\n\r\n  // Xử lý thay đổi trang\r\n  const handleChangePage = (event: unknown, newPage: number) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  // Xử lý thay đổi số dòng mỗi trang\r\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  // Thêm cột effort mới\r\n  const handleAddColumn = () => {\r\n    if (!newColumnName.trim()) return;\r\n    \r\n    // Đặt thứ tự của cột mới cao hơn các cột cố định nhưng thấp hơn cột hành động\r\n    // Cột hành động sẽ có thứ tự cao nhất (1000)\r\n    const newColumn: EffortColumn = {\r\n      id: `col-${Date.now()}`,\r\n      name: newColumnName.trim(),\r\n      key: `effort-${Date.now()}`,\r\n      order: 900, // Thứ tự cao để đảm bảo nằm sau các cột cố định nhưng trước cột hành động\r\n      isFixed: false,\r\n      color: '#ffffff' // Màu mặc định\r\n    };\r\n\r\n    onColumnsChange([...effortColumns, newColumn]);\r\n    setNewColumnName('');\r\n  };\r\n\r\n  // Bắt đầu chỉnh sửa tên cột\r\n  const startEditingColumn = (columnId: string, currentName: string) => {\r\n    setEditingColumn(columnId);\r\n    setEditColumnName(currentName);\r\n  };\r\n\r\n  // Lưu tên cột đã chỉnh sửa\r\n  const saveColumnName = (columnId: string) => {\r\n    const updatedColumns = effortColumns.map(col => \r\n      col.id === columnId ? { ...col, name: editColumnName } : col\r\n    );\r\n    onColumnsChange(updatedColumns);\r\n    setEditingColumn(null);\r\n  };\r\n\r\n  // Xóa cột\r\n  const handleDeleteColumn = (columnId: string) => {\r\n    const columnToDelete = effortColumns.find(col => col.id === columnId);\r\n    if (!columnToDelete?.isFixed) {\r\n      const updatedColumns = effortColumns.filter(col => col.id !== columnId);\r\n      onColumnsChange(updatedColumns);\r\n      \r\n      // Cập nhật dữ liệu hàng để xóa cột effort tương ứng\r\n      const updatedRows = rows.map(row => {\r\n        const { [columnToDelete?.key || '']: _, ...restEfforts } = row.efforts || {};\r\n        return { ...row, efforts: restEfforts };\r\n      });\r\n      onRowsChange(updatedRows);\r\n    }\r\n  };\r\n\r\n  // Cập nhật giá trị ô\r\n  const handleCellChange = (\r\n    rowId: string,\r\n    field: string,\r\n    value: string | number\r\n  ) => {\r\n    const updatedRows = rows.map(row => {\r\n      if (row.id === rowId) {\r\n        if (field.startsWith('effort-')) {\r\n          return {\r\n            ...row,\r\n            efforts: {\r\n              ...row.efforts,\r\n              [field]: Number(value) || 0,\r\n            },\r\n          };\r\n        }\r\n        return { ...row, [field]: value };\r\n      }\r\n      return row;\r\n    });\r\n    onRowsChange(updatedRows);\r\n  };\r\n\r\n  // Thêm hàng mới\r\n  const handleAddRow = () => {\r\n    const newRow: EstimationRow = {\r\n      id: `row-${Date.now()}`,\r\n      feature: '',\r\n      detail: '',\r\n      description: '',\r\n      notes: '',\r\n      itReq: '',\r\n      uxUi: '',\r\n      efforts: {},\r\n    };\r\n    onRowsChange([...rows, newRow]);\r\n  };\r\n\r\n  // Xóa hàng\r\n  const handleDeleteRow = (rowId: string) => {\r\n    onRowsChange(rows.filter(row => row.id !== rowId));\r\n  };\r\n\r\n  // Tính tổng cho từng cột effort\r\n  const calculateColumnTotal = (columnKey: string) => {\r\n    return rows.reduce((sum, row) => {\r\n      return sum + (Number(row.efforts?.[columnKey]) || 0);\r\n    }, 0);\r\n  };\r\n\r\n  // Lấy tất cả các cột (cố định + động)\r\n  const fixedColumnsWithIds = FIXED_COLUMNS.map((col, index) => ({\r\n    ...col,\r\n    id: `fixed-${index}`,\r\n    key: col.name.toLowerCase().replace(/\\s+/g, '-'),\r\n    order: index, // Các cột cố định có thứ tự thấp (0-5)\r\n  }));\r\n  \r\n  // Chỉ lấy các cột effort không trùng với các cột cố định\r\n  const nonDuplicateEffortColumns = effortColumns.filter(effortCol => \r\n    !fixedColumnsWithIds.some(fixedCol => fixedCol.key === effortCol.key)\r\n  );\r\n  \r\n  // Thêm cột Subtotal (days) với thứ tự cao\r\n  const subtotalColumn = {\r\n    id: 'subtotal-column',\r\n    name: 'Subtotal (days)',\r\n    key: 'subtotal',\r\n    order: 950, // Thứ tự cao để đảm bảo nằm sau các cột effort nhưng trước cột hành động\r\n    isFixed: true,\r\n  };\r\n  \r\n  // Sắp xếp các cột theo thứ tự\r\n  const allColumns = [\r\n    ...fixedColumnsWithIds,\r\n    ...nonDuplicateEffortColumns,\r\n    subtotalColumn, // Thêm cột subtotal\r\n  ].sort((a, b) => a.order - b.order);\r\n\r\n  return (\r\n    <Box>\r\n      {/* Thanh công cụ */}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\r\n        <Box>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleAddRow}\r\n            size=\"small\"\r\n            sx={{ mr: 1 }}\r\n          >\r\n            Thêm dòng\r\n          </Button>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n          <TextField\r\n            size=\"small\"\r\n            placeholder=\"Tên cột mới\"\r\n            value={newColumnName}\r\n            onChange={(e) => setNewColumnName(e.target.value)}\r\n            sx={{ mr: 1, minWidth: 150 }}\r\n          />\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleAddColumn}\r\n            size=\"small\"\r\n            disabled={!newColumnName.trim()}\r\n          >\r\n            Thêm cột\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Bảng dữ liệu */}\r\n      <TableContainer component={Paper} sx={{ maxHeight: 600, overflow: 'auto' }}>\r\n        <Table stickyHeader size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell width={50}>#</TableCell>\r\n              {allColumns.map((column) => (\r\n                <TableCell key={column.id}>\r\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                    <DragHandleIcon \r\n                      sx={{ \r\n                        mr: 1, \r\n                        cursor: 'move',\r\n                        opacity: column.isFixed ? 0.3 : 1,\r\n                        '&:hover': {\r\n                          opacity: 1,\r\n                        },\r\n                      }} \r\n                    />\r\n                    \r\n                    {editingColumn === column.id ? (\r\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                        <TextField\r\n                          value={editColumnName}\r\n                          onChange={(e) => setEditColumnName(e.target.value)}\r\n                          size=\"small\"\r\n                          sx={{ mr: 1 }}\r\n                        />\r\n                        <IconButton \r\n                          size=\"small\" \r\n                          onClick={() => saveColumnName(column.id)}\r\n                          color=\"primary\"\r\n                        >\r\n                          <SaveIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                        <IconButton \r\n                          size=\"small\" \r\n                          onClick={() => setEditingColumn(null)}\r\n                          color=\"error\"\r\n                        >\r\n                          <CancelIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </Box>\r\n                    ) : (\r\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                        <Typography variant=\"subtitle2\">\r\n                          {column.name}\r\n                        </Typography>\r\n                        {!column.isFixed && (\r\n                          <Box sx={{ ml: 1 }}>\r\n                            <IconButton \r\n                              size=\"small\" \r\n                              onClick={() => startEditingColumn(column.id, column.name)}\r\n                              sx={{ p: 0.5 }}\r\n                            >\r\n                              <EditIcon fontSize=\"small\" />\r\n                            </IconButton>\r\n                            <IconButton \r\n                              size=\"small\" \r\n                              onClick={() => handleDeleteColumn(column.id)}\r\n                              sx={{ p: 0.5 }}\r\n                              color=\"error\"\r\n                            >\r\n                              <DeleteIcon fontSize=\"small\" />\r\n                            </IconButton>\r\n                          </Box>\r\n                        )}\r\n                      </Box>\r\n                    )}\r\n                  </Box>\r\n                </TableCell>\r\n              ))}\r\n              {/* Cột hành động luôn ở cuối */}\r\n              <TableCell width={80}>Hành động</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          \r\n          <TableBody>\r\n            {rows\r\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              .map((row, rowIndex) => (\r\n                <TableRow key={row.id} hover>\r\n                  <TableCell>{page * rowsPerPage + rowIndex + 1}</TableCell>\r\n                  \r\n                  {allColumns.map((column) => {\r\n                    // Kiểm tra nếu column key là của các cột effort\r\n                    const isEffortColumn = column.key === 'it-req' || column.key === 'ux/ui' || \r\n                                         column.key.startsWith('effort-') || \r\n                                         (column as EffortColumn).isEffort === true;\r\n                    \r\n                    // Log ra để kiểm tra key của các cột\r\n                    console.log('Column key:', column.key, 'isEffort:', isEffortColumn);\r\n                    \r\n                    // Kiểm tra nếu là cột subtotal\r\n                    const isSubtotalColumn = column.key === 'subtotal';\r\n                    \r\n                    return (\r\n                      <TableCell key={`${row.id}-${column.key}`}>\r\n                        {isEffortColumn ? (\r\n                          <TextField\r\n                            type=\"number\"\r\n                            value={column.key === 'it-req' ? row.itReq || '' : \r\n                                  column.key === 'ux/ui' ? row.uxUi || '' : \r\n                                  row.efforts?.[column.key] || ''}\r\n                            onChange={(e) => {\r\n                              const value = e.target.value;\r\n                              // Xử lý đặc biệt cho các cột IT Req và UX/UI\r\n                              if (column.key === 'it-req') {\r\n                                handleCellChange(row.id, 'itReq', value);\r\n                              } else if (column.key === 'ux/ui') {\r\n                                handleCellChange(row.id, 'uxUi', value);\r\n                              } else {\r\n                                handleCellChange(row.id, column.key, value);\r\n                              }\r\n                            }}\r\n                            size=\"small\"\r\n                            fullWidth\r\n                            inputProps={{ min: 0, step: 0.5 }}\r\n                          />\r\n                        ) : isSubtotalColumn ? (\r\n                          // Hiển thị tổng ngày công cho mỗi dòng\r\n                          <Typography variant=\"body2\" fontWeight=\"bold\">\r\n                            {Object.keys(row.efforts || {}).reduce((sum, key) => sum + (Number(row.efforts?.[key]) || 0), 0) + \r\n                             (Number(row.itReq) || 0) + (Number(row.uxUi) || 0)}\r\n                          </Typography>\r\n                        ) : (\r\n                          <TextField\r\n                            value={row[column.key as keyof EstimationRow] || ''}\r\n                            onChange={(e) => \r\n                              handleCellChange(row.id, column.key, e.target.value)\r\n                            }\r\n                            size=\"small\"\r\n                            fullWidth\r\n                            multiline\r\n                            maxRows={4}\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                  \r\n                  <TableCell>\r\n                    <Tooltip title=\"Xóa dòng\">\r\n                      <IconButton \r\n                        size=\"small\" \r\n                        color=\"error\"\r\n                        onClick={() => handleDeleteRow(row.id)}\r\n                      >\r\n                        <DeleteIcon fontSize=\"small\" />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n          </TableBody>\r\n          \r\n          {/* Dòng tổng cộng */}\r\n          <TableFooter>\r\n            <TableRow>\r\n              <TableCell colSpan={FIXED_COLUMNS.length + 1} align=\"right\">\r\n                <strong>Tổng cộng:</strong>\r\n              </TableCell>\r\n              {effortColumns.map((column) => (\r\n                <TableCell key={`total-${column.key}`}>\r\n                  <strong>{calculateColumnTotal(column.key)}</strong>\r\n                </TableCell>\r\n              ))}\r\n              {/* Cột Subtotal tổng */}\r\n              <TableCell>\r\n                <strong>\r\n                  {rows.reduce((sum, row) => {\r\n                    const rowTotal = Object.keys(row.efforts || {}).reduce(\r\n                      (rowSum, key) => rowSum + (Number(row.efforts?.[key]) || 0), 0\r\n                    ) + (Number(row.itReq) || 0) + (Number(row.uxUi) || 0);\r\n                    return sum + rowTotal;\r\n                  }, 0)}\r\n                </strong>\r\n              </TableCell>\r\n              <TableCell />\r\n            </TableRow>\r\n            {/* Thêm dòng Tổng cộng - Theo giai đoạn (ngày công) */}\r\n            <TableRow sx={{ backgroundColor: '#f5f5f5' }}>\r\n              <TableCell colSpan={FIXED_COLUMNS.length + effortColumns.length + 1} align=\"right\">\r\n                <strong>Tổng cộng - Theo giai đoạn (ngày công):</strong>\r\n              </TableCell>\r\n              <TableCell>\r\n                <strong>\r\n                  {rows.reduce((sum, row) => {\r\n                    const rowTotal = Object.keys(row.efforts || {}).reduce(\r\n                      (rowSum, key) => rowSum + (Number(row.efforts?.[key]) || 0), 0\r\n                    ) + (Number(row.itReq) || 0) + (Number(row.uxUi) || 0);\r\n                    return sum + rowTotal;\r\n                  }, 0)}\r\n                </strong>\r\n              </TableCell>\r\n              <TableCell />\r\n            </TableRow>\r\n          </TableFooter>\r\n        </Table>\r\n      </TableContainer>\r\n      \r\n      {/* Phân trang */}\r\n      <TablePagination\r\n        rowsPerPageOptions={[5, 10, 25, 50]}\r\n        component=\"div\"\r\n        count={rows.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n        onRowsPerPageChange={handleChangeRowsPerPage}\r\n        labelRowsPerPage=\"Số dòng mỗi trang:\"\r\n        labelDisplayedRows={({ from, to, count }) => \r\n          `${from}-${to} trong tổng số ${count}`\r\n        }\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default FixedPriceTable;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  TextField,\r\n  IconButton,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  TableFooter,\r\n  TablePagination,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Tooltip,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Delete as DeleteIcon,\r\n} from '@mui/icons-material';\r\nimport { TimeAndMaterialRate } from '../../types/quoteTemplate';\r\n\r\n// Các vai trò mặc định\r\nconst DEFAULT_ROLES = [\r\n  'Project Manager',\r\n  'Business Analyst',\r\n  'Developer',\r\n  'Tester',\r\n  'UI/UX Designer',\r\n  'DevOps',\r\n  'System Architect',\r\n  'Technical Lead',\r\n];\r\n\r\ninterface TimeAndMaterialTableProps {\r\n  rates: TimeAndMaterialRate[];\r\n  onRatesChange: (rates: TimeAndMaterialRate[]) => void;\r\n}\r\n\r\nconst TimeAndMaterialTable: React.FC<TimeAndMaterialTableProps> = ({\r\n  rates = [],\r\n  onRatesChange,\r\n}) => {\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [newRole, setNewRole] = useState('');\r\n  const [customRole, setCustomRole] = useState('');\r\n\r\n  // Xử lý thay đổi trang\r\n  const handleChangePage = (event: unknown, newPage: number) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  // Xử lý thay đổi số dòng mỗi trang\r\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  // Thêm dòng mới\r\n  const handleAddRow = () => {\r\n    if (!newRole && !customRole) return;\r\n    \r\n    const roleToAdd = newRole === 'custom' ? customRole : newRole;\r\n    \r\n    // Kiểm tra nếu vai trò đã tồn tại\r\n    if (rates.some(rate => rate.role.toLowerCase() === roleToAdd.toLowerCase())) {\r\n      alert('Vai trò này đã tồn tại');\r\n      return;\r\n    }\r\n\r\n    const newRate: TimeAndMaterialRate = {\r\n      id: `rate-${Date.now()}`,\r\n      role: roleToAdd,\r\n      rate: 0,\r\n      unit: 'hour',\r\n      description: ''\r\n    };\r\n\r\n    onRatesChange([...rates, newRate]);\r\n    setNewRole('');\r\n    setCustomRole('');\r\n  };\r\n\r\n  // Cập nhật giá trị\r\n  const handleRateChange = (id: string, field: keyof TimeAndMaterialRate, value: any) => {\r\n    const updatedRates = rates.map(rate => \r\n      rate.id === id ? { ...rate, [field]: value } : rate\r\n    ) as TimeAndMaterialRate[];\r\n    onRatesChange(updatedRates);\r\n  };\r\n\r\n  // Xóa dòng\r\n  const handleDeleteRow = (id: string) => {\r\n    onRatesChange(rates.filter(rate => rate.id !== id));\r\n  };\r\n\r\n  // Tính tổng tiền\r\n  const calculateTotal = () => {\r\n    return rates.reduce((sum, rate) => {\r\n      return sum + (rate.rate || 0);\r\n    }, 0);\r\n  };\r\n\r\n  // Tính tổng số giờ/ngày\r\n  const calculateTotalHours = () => {\r\n    return rates.reduce((sum, rate) => {\r\n      const hours = rate.unit === 'hour' ? 1 : 8; // 1 ngày = 8 giờ\r\n      return sum + (rate.rate || 0) * hours;\r\n    }, 0);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      {/* Thanh công cụ */}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n          <FormControl variant=\"outlined\" size=\"small\" sx={{ minWidth: 200 }}>\r\n            <InputLabel>Chọn vai trò</InputLabel>\r\n            <Select\r\n              value={newRole}\r\n              onChange={(e) => setNewRole(e.target.value as string)}\r\n              label=\"Chọn vai trò\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Chọn vai trò</em>\r\n              </MenuItem>\r\n              {DEFAULT_ROLES.map((role) => (\r\n                <MenuItem key={role} value={role}>\r\n                  {role}\r\n                </MenuItem>\r\n              ))}\r\n              <MenuItem value=\"custom\">\r\n                <em>+ Thêm vai trò khác</em>\r\n              </MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          {newRole === 'custom' && (\r\n            <TextField\r\n              size=\"small\"\r\n              label=\"Tên vai trò\"\r\n              value={customRole}\r\n              onChange={(e) => setCustomRole(e.target.value)}\r\n              sx={{ minWidth: 200 }}\r\n            />\r\n          )}\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleAddRow}\r\n            disabled={!newRole || (newRole === 'custom' && !customRole.trim())}\r\n          >\r\n            Thêm\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Bảng dữ liệu */}\r\n      <TableContainer component={Paper}>\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell width={50}>#</TableCell>\r\n              <TableCell>Vai trò</TableCell>\r\n              <TableCell align=\"right\">Số giờ/MD</TableCell>\r\n              <TableCell>Đơn vị</TableCell>\r\n              <TableCell align=\"right\">Đơn giá</TableCell>\r\n              <TableCell align=\"right\">Thành tiền</TableCell>\r\n              <TableCell width={80}></TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          \r\n          <TableBody>\r\n            {rates\r\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              .map((rate, index) => (\r\n                <TableRow key={rate.id} hover>\r\n                  <TableCell>{page * rowsPerPage + index + 1}</TableCell>\r\n                  \r\n                  <TableCell>\r\n                    <TextField\r\n                      value={rate.role}\r\n                      onChange={(e) => handleRateChange(rate.id, 'role', e.target.value)}\r\n                      size=\"small\"\r\n                      fullWidth\r\n                    />\r\n                  </TableCell>\r\n                  \r\n                  <TableCell>\r\n                    <TextField\r\n                      type=\"number\"\r\n                      value={rate.rate || ''}\r\n                      onChange={(e) => handleRateChange(rate.id, 'rate', Number(e.target.value))}\r\n                      size=\"small\"\r\n                      fullWidth\r\n                      inputProps={{ min: 0, step: 0.01 }}\r\n                    />\r\n                  </TableCell>\r\n                  \r\n                  <TableCell>\r\n                    <Select\r\n                      value={rate.unit}\r\n                      onChange={(e) => handleRateChange(rate.id, 'unit', e.target.value)}\r\n                      size=\"small\"\r\n                      fullWidth\r\n                    >\r\n                      <MenuItem value=\"hour\">Giờ</MenuItem>\r\n                      <MenuItem value=\"day\">Ngày công (MD)</MenuItem>\r\n                    </Select>\r\n                  </TableCell>\r\n                  \r\n                  <TableCell align=\"right\">\r\n                    {new Intl.NumberFormat('vi-VN', {\r\n                      style: 'currency',\r\n                      currency: 'VND',\r\n                    }).format(rate.rate || 0)}\r\n                    <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\r\n                      /{rate.unit === 'hour' ? 'giờ' : 'MD'}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  \r\n                  <TableCell align=\"right\">\r\n                    {new Intl.NumberFormat('vi-VN', {\r\n                      style: 'currency',\r\n                      currency: 'VND',\r\n                    }).format(rate.rate * (rate.unit === 'hour' ? 1 : 8) || 0)}\r\n                    <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\r\n                      ({rate.unit === 'hour' ? '1 giờ' : '1 MD = 8 giờ'})\r\n                    </Typography>\r\n                  </TableCell>\r\n                  \r\n                  <TableCell align=\"center\">\r\n                    <Tooltip title=\"Xóa\">\r\n                      <IconButton \r\n                        size=\"small\" \r\n                        color=\"error\"\r\n                        onClick={() => handleDeleteRow(rate.id)}\r\n                      >\r\n                        <DeleteIcon fontSize=\"small\" />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n          </TableBody>\r\n          \r\n          {/* Tổng cộng */}\r\n          <TableFooter>\r\n            <TableRow>\r\n              <TableCell colSpan={4} align=\"right\">\r\n                <strong>Tổng cộng:</strong>\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                <strong>\r\n                  {new Intl.NumberFormat('vi-VN', {\r\n                    style: 'currency',\r\n                    currency: 'VND',\r\n                  }).format(calculateTotal())}\r\n                </strong>\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                <strong>\r\n                  {new Intl.NumberFormat('vi-VN', {\r\n                    style: 'currency',\r\n                    currency: 'VND',\r\n                  }).format(calculateTotalHours())}\r\n                </strong>\r\n                <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\r\n                  ({calculateTotalHours()} giờ)\r\n                </Typography>\r\n              </TableCell>\r\n              <TableCell />\r\n            </TableRow>\r\n          </TableFooter>\r\n        </Table>\r\n      </TableContainer>\r\n      \r\n      {/* Phân trang */}\r\n      <TablePagination\r\n        rowsPerPageOptions={[5, 10, 25, 50]}\r\n        component=\"div\"\r\n        count={rates.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n        onRowsPerPageChange={handleChangeRowsPerPage}\r\n        labelRowsPerPage=\"Số dòng mỗi trang:\"\r\n        labelDisplayedRows={({ from, to, count }) => \r\n          `${from}-${to} trong tổng số ${count}`\r\n        }\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TimeAndMaterialTable;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Radio, \r\n  RadioGroup, \r\n  FormControlLabel, \r\n  FormControl, \r\n  FormLabel, \r\n  Paper,\r\n  Divider,\r\n  Alert,\r\n  Snackbar\r\n} from '@mui/material';\r\nimport { \r\n  EstimationMode, \r\n  EffortColumn, \r\n  EstimationRow, \r\n  TimeAndMaterialRate \r\n} from '../../types/quoteTemplate';\r\nimport FixedPriceTable from '../FixedPriceTable';\r\nimport TimeAndMaterialTable from '../TimeAndMaterialTable';\r\n\r\n// Các cột effort mặc định cho chế độ Fix Price\r\nconst DEFAULT_EFFORT_COLUMNS: EffortColumn[] = [];\r\n\r\n// Tỷ giá mặc định cho chế độ Time & Material\r\nconst DEFAULT_TM_RATES: TimeAndMaterialRate[] = [\r\n  {\r\n    id: 'rate-1',\r\n    role: 'Developer',\r\n    rate: 50,\r\n    unit: 'hour',\r\n    description: 'Senior Developer'\r\n  },\r\n  {\r\n    id: 'rate-2',\r\n    role: 'Designer',\r\n    rate: 40,\r\n    unit: 'hour',\r\n    description: 'UI/UX Designer'\r\n  }\r\n];\r\n\r\ninterface EstimationStepProps {\r\n  mode: EstimationMode;\r\n  onModeChange: (mode: EstimationMode) => void;\r\n  onEstimationDataChange?: (data: any) => void;\r\n  // Dữ liệu requirement từ bước 1\r\n  initialData?: {\r\n    rows?: any[];\r\n  };\r\n}\r\n\r\nconst EstimationStep: React.FC<EstimationStepProps> = ({\r\n  mode,\r\n  onModeChange,\r\n  onEstimationDataChange,\r\n  initialData,\r\n}) => {\r\n  // State cho chế độ Fix Price\r\n  const [fixedPriceRows, setFixedPriceRows] = useState<EstimationRow[]>([]);\r\n  const [effortColumns, setEffortColumns] = useState<EffortColumn[]>(DEFAULT_EFFORT_COLUMNS);\r\n  \r\n  // State cho chế độ Time & Material\r\n  const [tmRates, setTmRates] = useState<TimeAndMaterialRate[]>(DEFAULT_TM_RATES);\r\n  \r\n  // State thông báo\r\n  const [snackbar, setSnackbar] = useState({\r\n    open: false,\r\n    message: '',\r\n    severity: 'success' as 'success' | 'error' | 'info' | 'warning'\r\n  });\r\n\r\n  // Khởi tạo dữ liệu mẫu khi component mount\r\n  useEffect(() => {\r\n    // Nếu có dữ liệu ban đầu từ requirement, sử dụng nó\r\n    if (initialData?.rows && initialData.rows.length > 0 && fixedPriceRows.length === 0) {\r\n      const mappedRows = initialData.rows.map(item => ({\r\n        id: `row-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`,\r\n        feature: item.feature || '',\r\n        detail: item.detail || '',\r\n        description: item.description || '',\r\n        notes: item.note || '',\r\n        itReq: '',\r\n        uxUi: '',\r\n        efforts: {},\r\n      }));\r\n      setFixedPriceRows(mappedRows);\r\n    } \r\n    // Thêm một dòng trống mặc định cho Fixed Price nếu không có dữ liệu ban đầu\r\n    else if (fixedPriceRows.length === 0) {\r\n      setFixedPriceRows([createNewRow()]);\r\n    }\r\n  }, [fixedPriceRows.length, initialData]);\r\n\r\n  // Tạo một dòng mới cho Fixed Price\r\n  const createNewRow = (): EstimationRow => ({\r\n    id: `row-${Date.now()}`,\r\n    feature: '',\r\n    detail: '',\r\n    description: '',\r\n    notes: '',\r\n    itReq: '',\r\n    uxUi: '',\r\n    efforts: {},\r\n  });\r\n\r\n  // Xử lý thay đổi chế độ\r\n  const handleModeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newMode = event.target.value as EstimationMode;\r\n    onModeChange(newMode);\r\n    \r\n    // Thông báo khi chuyển chế độ\r\n    setSnackbar({\r\n      open: true,\r\n      message: `Đã chuyển sang chế độ ${newMode === 'fixed' ? 'Fix Price' : 'Time & Material'}`,\r\n      severity: 'info'\r\n    });\r\n  };\r\n\r\n  // Xử lý thay đổi dữ liệu Fixed Price\r\n  const handleFixedPriceDataChange = (rows: EstimationRow[], columns: EffortColumn[]) => {\r\n    setFixedPriceRows(rows);\r\n    setEffortColumns(columns);\r\n    \r\n    if (onEstimationDataChange) {\r\n      onEstimationDataChange({\r\n        mode: 'fixed',\r\n        rows,\r\n        columns\r\n      });\r\n    }\r\n  };\r\n\r\n  // Xử lý thay đổi dữ liệu Time & Material\r\n  const handleTimeMaterialDataChange = (rates: TimeAndMaterialRate[]) => {\r\n    setTmRates(rates);\r\n    \r\n    if (onEstimationDataChange) {\r\n      onEstimationDataChange({\r\n        mode: 'timeAndMaterial',\r\n        rates\r\n      });\r\n    }\r\n  };\r\n\r\n  // Đóng thông báo\r\n  const handleCloseSnackbar = () => {\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ mt: 3 }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Bảng ước tính\r\n      </Typography>\r\n      \r\n      <Paper elevation={0} sx={{ p: 3, mb: 3, border: '1px solid #e0e0e0', borderRadius: 1 }}>\r\n        <FormControl component=\"fieldset\" fullWidth>\r\n          <FormLabel component=\"legend\" sx={{ mb: 2, fontWeight: 'bold', color: 'text.primary' }}>\r\n            Chọn phương thức ước tính\r\n          </FormLabel>\r\n          <RadioGroup\r\n            row\r\n            aria-label=\"estimation-mode\"\r\n            name=\"estimation-mode\"\r\n            value={mode}\r\n            onChange={handleModeChange}\r\n          >\r\n            <FormControlLabel\r\n              value=\"fixed\"\r\n              control={<Radio color=\"primary\" />}\r\n              label=\"Fix Price\"\r\n              sx={{ \r\n                mr: 4,\r\n                '& .MuiFormControlLabel-label': { fontWeight: 500 }\r\n              }}\r\n            />\r\n            <FormControlLabel\r\n              value=\"timeAndMaterial\"\r\n              control={<Radio color=\"primary\" />}\r\n              label=\"Time & Material\"\r\n              sx={{ '& .MuiFormControlLabel-label': { fontWeight: 500 } }}\r\n            />\r\n          </RadioGroup>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n            {mode === 'fixed' \r\n              ? 'Chế độ Fix Price: Tạo bảng ước tính chi tiết với các cột effort tùy chỉnh.'\r\n              : 'Chế độ Time & Material: Tạo bảng ước tính dựa trên số giờ và đơn giá.'}\r\n          </Typography>\r\n        </FormControl>\r\n      </Paper>\r\n\r\n      {/* Hiển thị bảng tương ứng với chế độ đã chọn */}\r\n      {mode === 'fixed' ? (\r\n        <FixedPriceTable\r\n          rows={fixedPriceRows}\r\n          effortColumns={effortColumns}\r\n          onRowsChange={(rows) => handleFixedPriceDataChange(rows, effortColumns)}\r\n          onColumnsChange={(columns) => handleFixedPriceDataChange(fixedPriceRows, columns)}\r\n        />\r\n      ) : (\r\n        <TimeAndMaterialTable\r\n          rates={tmRates}\r\n          onRatesChange={handleTimeMaterialDataChange}\r\n        />\r\n      )}\r\n\r\n      {/* Thông báo */}\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={3000}\r\n        onClose={handleCloseSnackbar}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n      >\r\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity}>\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EstimationStep;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Typography,\r\n  TextField,\r\n  Autocomplete,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Paper,\r\n  Divider,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  FormHelperText,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n} from '@mui/material';\r\nimport {\r\n  NavigateNext as NextIcon,\r\n  Save as SaveIcon,\r\n  Description as TemplateIcon,\r\n} from '@mui/icons-material';\r\nimport { QuotationFormProps, Quotation, QuotationItem } from '../../types';\r\nimport { EstimationMode } from '../../types/quoteTemplate';\r\nimport EstimationStep from '../EstimationStep/index';\r\n\r\nconst QuotationForm: React.FC<QuotationFormProps> = ({\r\n  open,\r\n  onClose,\r\n  onSave,\r\n  customers,\r\n  deals,\r\n  requirements,\r\n  templates,\r\n}) => {\r\n  // Form state\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [touched, setTouched] = useState<Record<string, boolean>>({});\r\n  const [estimationMode, setEstimationMode] = useState<EstimationMode>('fixed');\r\n  const [newQuotation, setNewQuotation] = useState<Partial<Quotation>>({\r\n    name: '',\r\n    customer: '',\r\n    dealId: 0,\r\n    dealName: '',\r\n    requirementId: 0,\r\n    requirementName: '',\r\n    status: 'draft',\r\n    createdDate: new Date().toISOString().split('T')[0],\r\n    note: '',\r\n    items: [],\r\n    totalEffort: 0,\r\n    totalAmount: 0,\r\n    templateId: '',\r\n    templateName: '',\r\n    estimationMode: 'fixed',\r\n  });\r\n  \r\n  // Reset touched state when modal is opened/closed\r\n  useEffect(() => {\r\n    if (open) {\r\n      setTouched({});\r\n    }\r\n  }, [open]);\r\n\r\n  // Filtered options based on selections\r\n  const [filteredDeals, setFilteredDeals] = useState(deals);\r\n  const [filteredRequirements, setFilteredRequirements] = useState(requirements);\r\n  \r\n  // Items for estimation table\r\n  const [estimationItems, setEstimationItems] = useState<QuotationItem[]>([]);\r\n\r\n  // Update filtered deals when customer changes\r\n  useEffect(() => {\r\n    if (newQuotation.customer) {\r\n      setFilteredDeals(deals.filter(deal => deal.customer === newQuotation.customer));\r\n    } else {\r\n      setFilteredDeals(deals);\r\n    }\r\n  }, [newQuotation.customer, deals]);\r\n\r\n  // Update filtered requirements when deal changes\r\n  useEffect(() => {\r\n    if (newQuotation.dealId) {\r\n      setFilteredRequirements(requirements.filter(req => req.dealId === newQuotation.dealId));\r\n    } else {\r\n      setFilteredRequirements(requirements);\r\n    }\r\n  }, [newQuotation.dealId, requirements]);\r\n\r\n  // Load requirement features when a requirement is selected\r\n  useEffect(() => {\r\n    if (newQuotation.requirementId) {\r\n      const selectedRequirement = requirements.find(req => req.id === newQuotation.requirementId);\r\n      if (selectedRequirement && selectedRequirement.features && selectedRequirement.features.length > 0) {\r\n        console.log('Requirement features found:', selectedRequirement.features);\r\n        // Convert requirement features to estimation items\r\n        const items: QuotationItem[] = selectedRequirement.features.map((feature: any, index: number) => ({\r\n          id: index + 1,\r\n          feature: feature.feature || '',\r\n          detail: feature.detail || '',\r\n          description: feature.description || '',\r\n          note: feature.notes || feature.note || '',\r\n          frontendEffort: 0,\r\n          backendEffort: 0,\r\n          qcEffort: 0,\r\n          pmEffort: 0,\r\n          totalMD: 0,\r\n          totalMM: 0,\r\n        }));\r\n        setEstimationItems(items);\r\n      } else {\r\n        console.log('No features found for requirement ID:', newQuotation.requirementId);\r\n        setEstimationItems([]);\r\n      }\r\n    } else {\r\n      setEstimationItems([]);\r\n    }\r\n  }, [newQuotation.requirementId, requirements]);\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((prevStep) => prevStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevStep) => prevStep - 1);\r\n  };\r\n\r\n  const handleCustomerChange = (_: any, newValue: string | null) => {\r\n    setNewQuotation({\r\n      ...newQuotation,\r\n      customer: newValue || '',\r\n      dealId: 0,\r\n      dealName: '',\r\n      requirementId: 0,\r\n      requirementName: '',\r\n    });\r\n  };\r\n\r\n  const handleDealChange = (_: any, newValue: { id: number; name: string } | null) => {\r\n    setNewQuotation({\r\n      ...newQuotation,\r\n      dealId: newValue?.id || 0,\r\n      dealName: newValue?.name || '',\r\n      requirementId: 0,\r\n      requirementName: '',\r\n    });\r\n  };\r\n\r\n  const handleRequirementChange = (_: any, newValue: { id: number; name: string } | null) => {\r\n    setNewQuotation({\r\n      ...newQuotation,\r\n      requirementId: newValue?.id || 0,\r\n      requirementName: newValue?.name || '',\r\n    });\r\n  };\r\n\r\n  const handleItemsChange = (updatedItems: QuotationItem[]) => {\r\n    setEstimationItems(updatedItems);\r\n    \r\n    // Calculate totals\r\n    const totalEffort = updatedItems.reduce((sum, item) => sum + item.totalMD, 0);\r\n    \r\n    // Assuming a simple calculation for total amount (e.g., 500,000 VND per MD)\r\n    const totalAmount = totalEffort * 500000;\r\n    \r\n    setNewQuotation({\r\n      ...newQuotation,\r\n      totalEffort,\r\n      totalAmount,\r\n    });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (newQuotation.name && newQuotation.customer && newQuotation.templateId) {\r\n      onSave({\r\n        ...newQuotation as Quotation,\r\n        items: estimationItems,\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  \r\n  const isStepOneValid = () => {\r\n    return !!(newQuotation.name && newQuotation.customer && newQuotation.dealId && newQuotation.requirementId && newQuotation.templateId);\r\n  };\r\n\r\n  const steps = [\r\n    'Thông tin báo giá',\r\n    'Bảng ước tính',\r\n    'Xem trước báo giá',\r\n  ];\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"lg\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle>Tạo báo giá mới</DialogTitle>\r\n      <DialogContent>\r\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n\r\n        {activeStep === 0 && (\r\n          <Box>\r\n            <Typography variant=\"h6\" gutterBottom>Thông tin cơ bản</Typography>\r\n            \r\n            <Box sx={{ mb: 3, border: '1px solid #e0e0e0', borderRadius: 1, p: 2, bgcolor: '#f9f9f9' }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom sx={{ display: 'flex', alignItems: 'center' }}>\r\n                <TemplateIcon fontSize=\"small\" sx={{ mr: 1 }} /> \r\n                Chọn mẫu báo giá\r\n              </Typography>\r\n              <FormControl \r\n                fullWidth \r\n                margin=\"dense\" \r\n                required \r\n                error={touched.templateId && !newQuotation.templateId}\r\n              >\r\n                <InputLabel id=\"template-select-label\">Mẫu báo giá</InputLabel>\r\n                <Select\r\n                  labelId=\"template-select-label\"\r\n                  id=\"template-select\"\r\n                  value={newQuotation.templateId || ''}\r\n                  label=\"Mẫu báo giá\"\r\n                  onChange={(e) => {\r\n                    const templateId = e.target.value;\r\n                    const selectedTemplate = templates.find(t => t.id === templateId);\r\n                    setNewQuotation({\r\n                      ...newQuotation,\r\n                      templateId: templateId,\r\n                      templateName: selectedTemplate?.name || '',\r\n                    });\r\n                    setTouched(prev => ({ ...prev, templateId: true }));\r\n                  }}\r\n                  onBlur={() => setTouched(prev => ({ ...prev, templateId: true }))}\r\n                  size=\"small\"\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Chọn mẫu báo giá</em>\r\n                  </MenuItem>\r\n                  {templates.map((template) => (\r\n                    <MenuItem key={template.id} value={template.id}>\r\n                      {template.name} {template.type === 'internal' ? '(Nội bộ)' : '(Khách hàng)'}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n                {touched.templateId && !newQuotation.templateId && (\r\n                  <FormHelperText>Vui lòng chọn mẫu báo giá</FormHelperText>\r\n                )}\r\n              </FormControl>\r\n            </Box>\r\n            \r\n            <TextField\r\n              label=\"Tên báo giá\"\r\n              fullWidth\r\n              required\r\n              value={newQuotation.name || ''}\r\n              onChange={(e) => setNewQuotation({...newQuotation, name: e.target.value})}\r\n              margin=\"normal\"\r\n              size=\"small\"\r\n              placeholder=\"Nhập tên báo giá\"\r\n            />\r\n            <Box sx={{ display: 'flex', gap: 2, mb: 3, flexWrap: 'wrap' }}>\r\n              <Autocomplete\r\n                options={customers}\r\n                value={newQuotation.customer || null}\r\n                onChange={handleCustomerChange}\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    label=\"Khách hàng\"\r\n                    size=\"small\"\r\n                    sx={{ minWidth: 250, flex: 1 }}\r\n                    required\r\n                  />\r\n                )}\r\n                sx={{ minWidth: 250, flex: 1 }}\r\n              />\r\n              <Autocomplete\r\n                options={filteredDeals}\r\n                getOptionLabel={(option) => option.name}\r\n                value={newQuotation.dealId ? filteredDeals.find(d => d.id === newQuotation.dealId) || null : null}\r\n                onChange={handleDealChange}\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    label=\"Deal\"\r\n                    size=\"small\"\r\n                    sx={{ minWidth: 250, flex: 1 }}\r\n                    required\r\n                  />\r\n                )}\r\n                sx={{ minWidth: 250, flex: 1 }}\r\n                disabled={!newQuotation.customer}\r\n              />\r\n            </Box>\r\n            <Box sx={{ mb: 3 }}>\r\n              <Autocomplete\r\n                options={filteredRequirements}\r\n                getOptionLabel={(option) => option.name}\r\n                value={newQuotation.requirementId ? filteredRequirements.find(r => r.id === newQuotation.requirementId) || null : null}\r\n                onChange={handleRequirementChange}\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    label=\"Requirement\"\r\n                    size=\"small\"\r\n                    required\r\n                  />\r\n                )}\r\n                disabled={!newQuotation.dealId}\r\n              />\r\n            </Box>\r\n            <TextField\r\n              label=\"Trạng thái\"\r\n              value=\"Draft\"\r\n              size=\"small\"\r\n              disabled\r\n              fullWidth\r\n              margin=\"normal\"\r\n            />\r\n            <TextField\r\n              label=\"Ghi chú\"\r\n              multiline\r\n              rows={4}\r\n              fullWidth\r\n              placeholder=\"Nhập ghi chú (nếu có)...\"\r\n              variant=\"outlined\"\r\n              sx={{ mb: 2, mt: 2 }}\r\n              value={newQuotation.note || ''}\r\n              onChange={(e) => setNewQuotation({...newQuotation, note: e.target.value})}\r\n            />\r\n          </Box>\r\n        )}\r\n\r\n        {activeStep === 1 && (\r\n          <Box>\r\n            <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom>Chọn phương thức ước tính</Typography>\r\n              <EstimationStep\r\n                mode={estimationMode as EstimationMode}\r\n                onModeChange={(newMode) => {\r\n                  setEstimationMode(newMode);\r\n                  setNewQuotation(prev => ({ ...prev, estimationMode: newMode }));\r\n                }}\r\n                initialData={{\r\n                  rows: estimationItems\r\n                }}\r\n                onEstimationDataChange={(data) => {\r\n                  if (data.mode === 'fixed') {\r\n                    const convertedItems = data.rows.map((row: any) => ({\r\n                      id: row.id,\r\n                      feature: row.feature || '',\r\n                      detail: row.detail || '',\r\n                      description: row.description || '',\r\n                      note: row.notes || '',\r\n                      frontendEffort: 0,\r\n                      backendEffort: 0,\r\n                      qcEffort: 0,\r\n                      pmEffort: 0,\r\n                      totalMD: Object.values(row.efforts || {}).reduce((sum: number, val: any) => sum + (Number(val) || 0), 0),\r\n                      totalMM: 0,\r\n                    }));\r\n                    \r\n                    setEstimationItems(convertedItems);\r\n                    handleItemsChange(convertedItems);\r\n                    \r\n                    setNewQuotation(prev => ({\r\n                      ...prev,\r\n                      estimationMode: 'fixed',\r\n                      estimationConfig: {\r\n                        rows: data.rows,\r\n                        columns: data.columns\r\n                      }\r\n                    }));\r\n                  } else {\r\n                    const convertedItems = data.rates.map((rate: any) => ({\r\n                      id: rate.id,\r\n                      feature: rate.role || '',\r\n                      detail: rate.description || '',\r\n                      description: '',\r\n                      note: '',\r\n                      frontendEffort: 0,\r\n                      backendEffort: 0,\r\n                      qcEffort: 0,\r\n                      pmEffort: 0,\r\n                      totalMD: rate.rate || 0,\r\n                      totalMM: 0,\r\n                    }));\r\n                    \r\n                    setEstimationItems(convertedItems);\r\n                    handleItemsChange(convertedItems);\r\n                    \r\n                    setNewQuotation(prev => ({\r\n                      ...prev,\r\n                      estimationMode: 'timeAndMaterial',\r\n                      estimationConfig: {\r\n                        rates: data.rates\r\n                      }\r\n                    }));\r\n                  }\r\n                }}\r\n              />\r\n            </Paper>\r\n          </Box>\r\n        )}\r\n\r\n        {activeStep === 2 && (\r\n          <Box>\r\n            <Typography variant=\"h6\" gutterBottom>Xem trước báo giá</Typography>\r\n            <Paper variant=\"outlined\" sx={{ p: 3 }}>\r\n              <Typography variant=\"h5\" gutterBottom sx={{ mb: 3, textAlign: 'center', fontWeight: 'bold' }}>\r\n                BÁO GIÁ DỊCH VỤ\r\n              </Typography>\r\n              \r\n              <Box sx={{ mb: 3 }}>\r\n                <Typography variant=\"subtitle1\" gutterBottom>Thông tin khách hàng</Typography>\r\n                <Box sx={{ pl: 2 }}>\r\n                  <Typography><strong>Tên khách hàng:</strong> {newQuotation.customer}</Typography>\r\n                  <Typography><strong>Dự án:</strong> {newQuotation.dealName}</Typography>\r\n                  <Typography><strong>Yêu cầu:</strong> {newQuotation.requirementName}</Typography>\r\n                </Box>\r\n              </Box>\r\n\r\n              <Box sx={{ mb: 3 }}>\r\n                <Typography variant=\"subtitle1\" gutterBottom>Chi tiết báo giá</Typography>\r\n                <TableContainer component={Paper} variant=\"outlined\">\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>STT</TableCell>\r\n                        <TableCell>Hạng mục</TableCell>\r\n                        <TableCell>Mô tả</TableCell>\r\n                        <TableCell>Số ngày</TableCell>\r\n                        <TableCell>Đơn giá</TableCell>\r\n                        <TableCell>Thành tiền</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      {estimationItems.map((item, index) => (\r\n                        <TableRow key={item.id}>\r\n                          <TableCell>{index + 1}</TableCell>\r\n                          <TableCell>{item.feature}</TableCell>\r\n                          <TableCell>{item.detail}</TableCell>\r\n                          <TableCell>{item.totalMD}</TableCell>\r\n                          <TableCell>500,000 VNĐ/ngày</TableCell>\r\n                          <TableCell>{(item.totalMD * 500000).toLocaleString('vi-VN')} VNĐ</TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                      <TableRow>\r\n                        <TableCell colSpan={5} align=\"right\"><strong>Tổng cộng:</strong></TableCell>\r\n                        <TableCell><strong>{newQuotation.totalAmount?.toLocaleString('vi-VN')} VNĐ</strong></TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Box>\r\n\r\n              <Box sx={{ mb: 3 }}>\r\n                <Typography variant=\"subtitle1\" gutterBottom>Ghi chú</Typography>\r\n                <Typography variant=\"body2\" sx={{ fontStyle: 'italic' }}>\r\n                  {newQuotation.note || 'Không có ghi chú'}\r\n                </Typography>\r\n              </Box>\r\n            </Paper>\r\n          </Box>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions sx={{ p: 2, pt: 3 }}>\r\n        <Button onClick={onClose}>Hủy</Button>\r\n        {activeStep > 0 && (\r\n          <Button onClick={handleBack}>\r\n            Quay lại\r\n          </Button>\r\n        )}\r\n        {activeStep < 2 ? (\r\n          <Button \r\n            variant=\"contained\" \r\n            onClick={handleNext}\r\n            endIcon={<NextIcon />}\r\n            disabled={activeStep === 0 ? !isStepOneValid() : false}\r\n          >\r\n            {activeStep === 1 ? 'Xem trước báo giá' : 'Tiếp theo'}\r\n          </Button>\r\n        ) : (\r\n          <Button \r\n            variant=\"contained\" \r\n            color=\"primary\" \r\n            onClick={handleSave}\r\n            startIcon={<SaveIcon />}\r\n          >\r\n            Lưu báo giá\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuotationForm;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  IconButton,\r\n  Button,\r\n  Typography,\r\n  Tooltip,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Delete as DeleteIcon,\r\n} from '@mui/icons-material';\r\nimport { EstimationTableProps, QuotationItem } from '../../types';\r\n\r\nconst EstimationTable: React.FC<EstimationTableProps> = ({\r\n  items,\r\n  onItemsChange,\r\n  readOnly = false,\r\n  disableFeatureFields = false,\r\n}) => {\r\n  const [tableItems, setTableItems] = useState<QuotationItem[]>(items);\r\n\r\n  useEffect(() => {\r\n    setTableItems(items);\r\n  }, [items]);\r\n\r\n  const handleValueChange = (id: number, field: keyof QuotationItem, value: any) => {\r\n    const updatedItems = tableItems.map(item => {\r\n      if (item.id === id) {\r\n        const updatedItem = { ...item, [field]: value };\r\n        \r\n        // Recalculate totals if effort fields change\r\n        if (['frontendEffort', 'backendEffort', 'qcEffort', 'pmEffort'].includes(field)) {\r\n          const fe = field === 'frontendEffort' ? Number(value) || 0 : updatedItem.frontendEffort;\r\n          const be = field === 'backendEffort' ? Number(value) || 0 : updatedItem.backendEffort;\r\n          const qc = field === 'qcEffort' ? Number(value) || 0 : updatedItem.qcEffort;\r\n          const pm = field === 'pmEffort' ? Number(value) || 0 : updatedItem.pmEffort;\r\n          \r\n          const totalMD = fe + be + qc + pm;\r\n          const totalMM = totalMD / 20; // Assuming 20 working days per month\r\n          \r\n          return {\r\n            ...updatedItem,\r\n            totalMD,\r\n            totalMM,\r\n          };\r\n        }\r\n        \r\n        return updatedItem;\r\n      }\r\n      return item;\r\n    });\r\n    \r\n    setTableItems(updatedItems);\r\n    onItemsChange(updatedItems);\r\n  };\r\n\r\n  const handleAddRow = () => {\r\n    const newId = tableItems.length > 0 ? Math.max(...tableItems.map(item => item.id)) + 1 : 1;\r\n    const newItem: QuotationItem = {\r\n      id: newId,\r\n      feature: '',\r\n      detail: '',\r\n      description: '',\r\n      note: '',\r\n      frontendEffort: 0,\r\n      backendEffort: 0,\r\n      qcEffort: 0,\r\n      pmEffort: 0,\r\n      totalMD: 0,\r\n      totalMM: 0,\r\n    };\r\n    \r\n    const updatedItems = [...tableItems, newItem];\r\n    setTableItems(updatedItems);\r\n    onItemsChange(updatedItems);\r\n  };\r\n\r\n  const handleDeleteRow = (id: number) => {\r\n    const updatedItems = tableItems.filter(item => item.id !== id);\r\n    setTableItems(updatedItems);\r\n    onItemsChange(updatedItems);\r\n  };\r\n\r\n  // Calculate totals\r\n  const totalFE = tableItems.reduce((sum, item) => sum + item.frontendEffort, 0);\r\n  const totalBE = tableItems.reduce((sum, item) => sum + item.backendEffort, 0);\r\n  const totalQC = tableItems.reduce((sum, item) => sum + item.qcEffort, 0);\r\n  const totalPM = tableItems.reduce((sum, item) => sum + item.pmEffort, 0);\r\n  const totalMD = tableItems.reduce((sum, item) => sum + item.totalMD, 0);\r\n  const totalMM = tableItems.reduce((sum, item) => sum + item.totalMM, 0);\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2, alignItems: 'center' }}>\r\n        <Typography variant=\"h6\">Chi tiết ước tính</Typography>\r\n        {!readOnly && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleAddRow}\r\n            size=\"small\"\r\n          >\r\n            Thêm dòng\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      \r\n      {/* Sử dụng cấu trúc bảng có thể cuộn ngang với các cột cố định chiều rộng */}\r\n      <Box sx={{ width: '100%', overflow: 'hidden' }}>\r\n        <TableContainer \r\n          component={Paper} \r\n          variant=\"outlined\"\r\n          sx={{ \r\n            maxWidth: '100%',\r\n            overflowX: 'auto',\r\n          }}\r\n        >\r\n          <Table size=\"small\" sx={{ tableLayout: 'fixed' }}>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell width=\"50px\" sx={{ position: 'sticky', left: 0, backgroundColor: '#fff', zIndex: 1 }}>STT</TableCell>\r\n                <TableCell width=\"150px\" sx={{ position: 'sticky', left: '50px', backgroundColor: '#fff', zIndex: 1 }}>Feature</TableCell>\r\n                <TableCell width=\"200px\" sx={{ position: 'sticky', left: '200px', backgroundColor: '#fff', zIndex: 1 }}>Chi tiết</TableCell>\r\n                <TableCell width=\"250px\" sx={{ position: 'sticky', left: '400px', backgroundColor: '#fff', zIndex: 1 }}>Mô tả</TableCell>\r\n                <TableCell width=\"200px\" sx={{ position: 'sticky', left: '650px', backgroundColor: '#fff', zIndex: 1 }}>Ghi chú</TableCell>\r\n                <TableCell align=\"right\" width=\"80px\">FE (MD)</TableCell>\r\n                <TableCell align=\"right\" width=\"80px\">BE (MD)</TableCell>\r\n                <TableCell align=\"right\" width=\"80px\">QC (MD)</TableCell>\r\n                <TableCell align=\"right\" width=\"80px\">PM (MD)</TableCell>\r\n                <TableCell align=\"right\" width=\"80px\">Tổng MD</TableCell>\r\n                <TableCell align=\"right\" width=\"80px\">Tổng MM</TableCell>\r\n                {!readOnly && <TableCell align=\"center\" width=\"80px\">Hành động</TableCell>}\r\n              </TableRow>\r\n            </TableHead>\r\n          <TableBody>\r\n            {tableItems.map((item, index) => (\r\n              <TableRow key={item.id}>\r\n                <TableCell sx={{ position: 'sticky', left: 0, backgroundColor: '#fff', zIndex: 1 }}>{index + 1}</TableCell>\r\n                <TableCell sx={{ position: 'sticky', left: '50px', backgroundColor: '#fff', zIndex: 1 }}>\r\n                  {readOnly ? (\r\n                    <Tooltip title={item.feature} arrow placement=\"top\">\r\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\r\n                        {item.feature}\r\n                      </div>\r\n                    </Tooltip>\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      value={item.feature}\r\n                      onChange={(e) => handleValueChange(item.id, 'feature', e.target.value)}\r\n                      fullWidth\r\n                      multiline\r\n                      maxRows={3}\r\n                      disabled={disableFeatureFields}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell sx={{ position: 'sticky', left: '200px', backgroundColor: '#fff', zIndex: 1 }}>\r\n                  {readOnly ? (\r\n                    <Tooltip title={item.detail} arrow placement=\"top\">\r\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\r\n                        {item.detail}\r\n                      </div>\r\n                    </Tooltip>\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      value={item.detail}\r\n                      onChange={(e) => handleValueChange(item.id, 'detail', e.target.value)}\r\n                      fullWidth\r\n                      multiline\r\n                      maxRows={3}\r\n                      disabled={disableFeatureFields}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell sx={{ position: 'sticky', left: '400px', backgroundColor: '#fff', zIndex: 1 }}>\r\n                  {readOnly ? (\r\n                    <Tooltip title={item.description} arrow placement=\"top\">\r\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\r\n                        {item.description}\r\n                      </div>\r\n                    </Tooltip>\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      value={item.description}\r\n                      onChange={(e) => handleValueChange(item.id, 'description', e.target.value)}\r\n                      fullWidth\r\n                      multiline\r\n                      maxRows={3}\r\n                      disabled={disableFeatureFields}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell sx={{ position: 'sticky', left: '650px', backgroundColor: '#fff', zIndex: 1 }}>\r\n                  {readOnly ? (\r\n                    <Tooltip title={item.note} arrow placement=\"top\">\r\n                      <div style={{ maxWidth: '150px', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\r\n                        {item.note}\r\n                      </div>\r\n                    </Tooltip>\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      value={item.note}\r\n                      onChange={(e) => handleValueChange(item.id, 'note', e.target.value)}\r\n                      fullWidth\r\n                      multiline\r\n                      maxRows={3}\r\n                      disabled={disableFeatureFields}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  {readOnly ? (\r\n                    item.frontendEffort\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      value={item.frontendEffort}\r\n                      onChange={(e) => handleValueChange(item.id, 'frontendEffort', Number(e.target.value))}\r\n                      inputProps={{ min: 0 }}\r\n                      sx={{ \r\n                        width: '50px',\r\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\r\n                          '-webkit-appearance': 'none',\r\n                          margin: 0,\r\n                        },\r\n                        '& input[type=number]': {\r\n                          '-moz-appearance': 'textfield',\r\n                        },\r\n                      }}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  {readOnly ? (\r\n                    item.backendEffort\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      value={item.backendEffort}\r\n                      onChange={(e) => handleValueChange(item.id, 'backendEffort', Number(e.target.value))}\r\n                      inputProps={{ min: 0 }}\r\n                      sx={{ \r\n                        width: '50px',\r\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\r\n                          '-webkit-appearance': 'none',\r\n                          margin: 0,\r\n                        },\r\n                        '& input[type=number]': {\r\n                          '-moz-appearance': 'textfield',\r\n                        },\r\n                      }}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  {readOnly ? (\r\n                    item.qcEffort\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      value={item.qcEffort}\r\n                      onChange={(e) => handleValueChange(item.id, 'qcEffort', Number(e.target.value))}\r\n                      inputProps={{ min: 0 }}\r\n                      sx={{ \r\n                        width: '50px',\r\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\r\n                          '-webkit-appearance': 'none',\r\n                          margin: 0,\r\n                        },\r\n                        '& input[type=number]': {\r\n                          '-moz-appearance': 'textfield',\r\n                        },\r\n                      }}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  {readOnly ? (\r\n                    item.pmEffort\r\n                  ) : (\r\n                    <TextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      value={item.pmEffort}\r\n                      onChange={(e) => handleValueChange(item.id, 'pmEffort', Number(e.target.value))}\r\n                      inputProps={{ min: 0 }}\r\n                      sx={{ \r\n                        width: '50px',\r\n                        '& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button': {\r\n                          '-webkit-appearance': 'none',\r\n                          margin: 0,\r\n                        },\r\n                        '& input[type=number]': {\r\n                          '-moz-appearance': 'textfield',\r\n                        },\r\n                      }}\r\n                    />\r\n                  )}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <strong>{item.totalMD.toFixed(1)}</strong>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <strong>{item.totalMM.toFixed(2)}</strong>\r\n                </TableCell>\r\n                {!readOnly && (\r\n                  <TableCell align=\"center\">\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      color=\"error\" \r\n                      onClick={() => handleDeleteRow(item.id)}\r\n                      disabled={tableItems.length <= 1}\r\n                    >\r\n                      <DeleteIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                )}\r\n              </TableRow>\r\n            ))}\r\n            \r\n            {/* Totals row */}\r\n            <TableRow sx={{ backgroundColor: 'action.hover' }}>\r\n              <TableCell sx={{ position: 'sticky', left: 0, backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\r\n              <TableCell sx={{ position: 'sticky', left: '50px', backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\r\n              <TableCell sx={{ position: 'sticky', left: '200px', backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\r\n              <TableCell sx={{ position: 'sticky', left: '400px', backgroundColor: '#f5f5f5', zIndex: 1 }}></TableCell>\r\n              <TableCell sx={{ position: 'sticky', left: '650px', backgroundColor: '#f5f5f5', zIndex: 1 }} align=\"right\">\r\n                <strong>Tổng</strong>\r\n              </TableCell>\r\n              <TableCell align=\"right\"><strong>{totalFE.toFixed(1)}</strong></TableCell>\r\n              <TableCell align=\"right\"><strong>{totalBE.toFixed(1)}</strong></TableCell>\r\n              <TableCell align=\"right\"><strong>{totalQC.toFixed(1)}</strong></TableCell>\r\n              <TableCell align=\"right\"><strong>{totalPM.toFixed(1)}</strong></TableCell>\r\n              <TableCell align=\"right\"><strong>{totalMD.toFixed(1)}</strong></TableCell>\r\n              <TableCell align=\"right\"><strong>{totalMM.toFixed(2)}</strong></TableCell>\r\n              {!readOnly && <TableCell />}\r\n            </TableRow>\r\n          </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n      \r\n      <Box sx={{ mt: 2, display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\r\n        <Typography variant=\"body2\">\r\n          <strong>Tổng MD:</strong> {totalMD.toFixed(1)}\r\n        </Typography>\r\n        <Typography variant=\"body2\">\r\n          <strong>Tổng MM:</strong> {totalMM.toFixed(2)}\r\n        </Typography>\r\n        <Typography variant=\"body2\">\r\n          <strong>Tổng tiền:</strong> {new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(totalMD * 500000)}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EstimationTable;\r\n","import React from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Typography,\r\n  Paper,\r\n  Grid,\r\n  Chip,\r\n  Divider,\r\n} from '@mui/material';\r\nimport {\r\n  PictureAsPdf as PdfIcon,\r\n  Email as EmailIcon,\r\n  Edit as EditIcon,\r\n} from '@mui/icons-material';\r\nimport { QuotationDetailProps, QuotationStatus } from '../../types';\r\nimport EstimationTable from '../EstimationTable';\r\n\r\nconst QuotationDetail: React.FC<QuotationDetailProps> = ({\r\n  open,\r\n  onClose,\r\n  quotation,\r\n}) => {\r\n  if (!quotation) return null;\r\n\r\n  const getStatusChip = (status: QuotationStatus) => {\r\n    const statusMap: Record<QuotationStatus, { label: string; color: 'default' | 'info' | 'success' | 'error' }> = {\r\n      draft: { label: 'Draft', color: 'default' },\r\n      sent: { label: 'Đã gửi', color: 'info' },\r\n      approved: { label: 'Đã duyệt', color: 'success' },\r\n      rejected: { label: 'Từ chối', color: 'error' },\r\n    };\r\n\r\n    const statusInfo = statusMap[status];\r\n    return (\r\n      <Chip \r\n        label={statusInfo.label} \r\n        color={statusInfo.color}\r\n        size=\"small\"\r\n      />\r\n    );\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"lg\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Typography variant=\"h6\">Chi tiết báo giá</Typography>\r\n          {getStatusChip(quotation.status)}\r\n        </Box>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <Paper variant=\"outlined\" sx={{ p: 3, mb: 3 }}>\r\n          <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main' }}>\r\n            Thông tin cơ bản\r\n          </Typography>\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 3 }}>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Tên báo giá</Typography>\r\n              <Typography variant=\"body1\" sx={{ fontWeight: 'medium' }}>{quotation.name}</Typography>\r\n            </Box>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Khách hàng</Typography>\r\n              <Typography variant=\"body1\">{quotation.customer}</Typography>\r\n            </Box>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Deal</Typography>\r\n              <Typography variant=\"body1\">{quotation.dealName}</Typography>\r\n            </Box>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Requirement</Typography>\r\n              <Typography variant=\"body1\">{quotation.requirementName}</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 3, mt: 3 }}>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Ngày tạo</Typography>\r\n              <Typography variant=\"body1\">{quotation.createdDate}</Typography>\r\n            </Box>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Tổng Effort</Typography>\r\n              <Typography variant=\"body1\">{quotation.totalEffort} MD</Typography>\r\n            </Box>\r\n            <Box sx={{ minWidth: '200px', flex: 1 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Tổng tiền</Typography>\r\n              <Typography variant=\"body1\" sx={{ fontWeight: 'bold', color: 'primary.main' }}>\r\n                {formatCurrency(quotation.totalAmount)}\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n\r\n        {quotation.note && (\r\n          <Paper variant=\"outlined\" sx={{ p: 3, mb: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main' }}>\r\n              Ghi chú\r\n            </Typography>\r\n            <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n              {quotation.note}\r\n            </Typography>\r\n          </Paper>\r\n        )}\r\n\r\n        <Divider sx={{ my: 3 }} />\r\n\r\n        <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main', mb: 2 }}>\r\n          Chi tiết ước tính\r\n        </Typography>\r\n        {quotation.items && quotation.items.length > 0 ? (\r\n          <EstimationTable \r\n            items={quotation.items} \r\n            onItemsChange={() => {}} \r\n            readOnly={true} \r\n          />\r\n        ) : (\r\n          <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n            <Typography variant=\"body1\" color=\"text.secondary\">\r\n              Chưa có dữ liệu ước tính.\r\n            </Typography>\r\n          </Paper>\r\n        )}\r\n\r\n        {quotation.executiveSummary && (\r\n          <>\r\n            <Divider sx={{ my: 3 }} />\r\n            <Paper variant=\"outlined\" sx={{ p: 3, mb: 3 }}>\r\n              <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: 'primary.main' }}>\r\n                Tóm tắt điều hành\r\n              </Typography>\r\n              <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n                {quotation.executiveSummary}\r\n              </Typography>\r\n            </Paper>\r\n          </>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions sx={{ p: 2 }}>\r\n        <Button onClick={onClose}>Đóng</Button>\r\n        <Button \r\n          startIcon={<EditIcon />} \r\n          variant=\"outlined\"\r\n          onClick={() => console.log('Edit quotation')}\r\n        >\r\n          Chỉnh sửa\r\n        </Button>\r\n        <Button \r\n          startIcon={<PdfIcon />} \r\n          variant=\"outlined\" \r\n          color=\"secondary\"\r\n          onClick={() => console.log('Download PDF')}\r\n        >\r\n          Tải PDF\r\n        </Button>\r\n        <Button \r\n          startIcon={<EmailIcon />} \r\n          variant=\"contained\" \r\n          color=\"primary\"\r\n          onClick={() => console.log('Send email')}\r\n        >\r\n          Gửi Email\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuotationDetail;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { PdfPageEditor } from '../../../../components/PdfPageEditor';\r\nimport { \r\n  Button, \r\n  Dialog, \r\n  DialogActions, \r\n  DialogContent, \r\n  DialogTitle, \r\n  Typography,\r\n  Box \r\n} from '@mui/material';\r\nimport { Save as SaveIcon } from '@mui/icons-material';\r\nimport { QuotationPreviewProps } from '../../types';\r\n\r\nconst QuotationPreview: React.FC<QuotationPreviewProps> = ({\r\n  open,\r\n  onClose,\r\n  quotation,\r\n  onSaveDraft,\r\n  onExportPdf,\r\n}) => {\r\n  const [pages, setPages] = useState<string[]>(['']);\r\n\r\n  useEffect(() => {\r\n    if (quotation) {\r\n      const customPages = (quotation as any).pages;\r\n      if (customPages && Array.isArray(customPages) && customPages.length > 0) {\r\n        setPages(customPages);\r\n      } else {\r\n        setPages([\r\n          `\r\n          <div style=\"padding: 20mm;\">\r\n            <h1 style=\"text-align: center; margin-bottom: 30px;\">BÁO GIÁ DỊCH VỤ</h1>\r\n            <div style=\"display: flex; justify-content: space-between; margin-bottom: 20px;\">\r\n              <div>\r\n                <p><strong>Khách hàng:</strong> ${quotation.customer || 'Quý khách hàng'}</p>\r\n                <p><strong>Dự án:</strong> ${quotation.name || 'Dự án phần mềm'}</p>\r\n              </div>\r\n              <div style=\"text-align: right;\">\r\n                <p><strong>Mã báo giá:</strong> ${quotation.id || 'N/A'}</p>\r\n                <p><strong>Ngày tạo:</strong> ${new Date(quotation.createdDate || new Date()).toLocaleDateString('vi-VN')}</p>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Quotation items table -->\r\n            <div style=\"margin: 20px 0;\">\r\n              <h3>CHI TIẾT DỊCH VỤ</h3>\r\n              <table style=\"width: 100%; border-collapse: collapse; margin: 15px 0;\">\r\n                <thead>\r\n                  <tr style=\"background-color: #f5f5f5;\">\r\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">STT</th>\r\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Mô tả công việc</th>\r\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">Số ngày công</th>\r\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">Đơn giá (VND)</th>\r\n                    <th style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">Thành tiền (VND)</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  ${(quotation.items || []).map((item, index) => {\r\n                    const qcEffort = (item as any).qcEffort || 0;\r\n                    const rate = (item as any).rate || 0;\r\n                    const total = qcEffort * rate;\r\n                    \r\n                    return `\r\n                      <tr>\r\n                        <td style=\"border: 1px solid #ddd; padding: 8px;\">${index + 1}</td>\r\n                        <td style=\"border: 1px solid #ddd; padding: 8px;\">${item.description || ''}</td>\r\n                        <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${qcEffort}</td>\r\n                        <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${rate.toLocaleString('vi-VN')}</td>\r\n                        <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${total.toLocaleString('vi-VN')}</td>\r\n                      </tr>\r\n                    `;\r\n                  }).join('')}\r\n                  <tr>\r\n                    <td colspan=\"4\" style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\"><strong>Tổng cộng:</strong></td>\r\n                    <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right; font-weight: bold;\">\r\n                      ${(quotation.items || []).reduce((sum, item) => {\r\n                        const qcEffort = (item as any).qcEffort || 0;\r\n                        const rate = (item as any).rate || 0;\r\n                        return sum + (qcEffort * rate);\r\n                      }, 0).toLocaleString('vi-VN')} VND\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n            <div style=\"margin-top: 30px;\">\r\n              <div style=\"margin-bottom: 20px;\">\r\n                <h3>ĐIỀU KHOẢN THANH TOÁN</h3>\r\n                <div>${(quotation as any).paymentTerms || 'Thanh toán 100% khi ký hợp đồng.'}</div>\r\n              </div>\r\n              <div style=\"margin-top: 60px; display: flex; justify-content: space-between;\">\r\n                <div style=\"text-align: center; width: 50%;\">\r\n                  <p><strong>ĐẠI DIỆN BÊN BÁN</strong></p>\r\n                  <p style=\"font-style: italic; margin-top: 50px;\">(Ký, ghi rõ họ tên)</p>\r\n                </div>\r\n                <div style=\"text-align: center; width: 50%;\">\r\n                  <p><strong>ĐẠI DIỆN BÊN MUA</strong></p>\r\n                  <p style=\"font-style: italic; margin-top: 50px;\">(Ký, ghi rõ họ tên)</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          `\r\n        ]);\r\n      }\r\n    }\r\n  }, [quotation]);\r\n\r\n  const handleSave = (updatedPages: string[]) => {\r\n    setPages(updatedPages);\r\n  };\r\n\r\n  const handleSaveDraft = () => {\r\n    if (onSaveDraft && quotation) {\r\n      // Create an updated quotation with the pages\r\n      const updatedQuotation = {\r\n        ...quotation,\r\n        // Add pages to the quotation data\r\n        ...(pages.length > 0 && { pages })\r\n      };\r\n      onSaveDraft(updatedQuotation);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"xl\"\r\n      fullWidth\r\n      sx={{ '& .MuiDialog-paper': { maxWidth: '95%', height: '95vh' } }}\r\n    >\r\n      <DialogTitle>\r\n        <Typography variant=\"h6\">Xem trước và chỉnh sửa báo giá</Typography>\r\n      </DialogTitle>\r\n      <DialogContent sx={{ p: 0, display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n        {quotation ? (\r\n          <PdfPageEditor \r\n            initialContent={pages}\r\n            onSave={handleSave}\r\n            onExportPdf={() => onExportPdf && onExportPdf(quotation)}\r\n          />\r\n        ) : (\r\n          <Box sx={{ p: 3, textAlign: 'center' }}>\r\n            <Typography>Đang tải dữ liệu báo giá...</Typography>\r\n          </Box>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} color=\"inherit\">\r\n          Đóng\r\n        </Button>\r\n        <Button \r\n          onClick={handleSaveDraft} \r\n          variant=\"contained\" \r\n          color=\"primary\"\r\n          startIcon={<SaveIcon />}\r\n          disabled={!quotation}\r\n        >\r\n          Lưu nháp\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuotationPreview;\r\n","import React from 'react';\r\nimport {\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  TablePagination,\r\n  Paper,\r\n  IconButton,\r\n  Chip,\r\n} from '@mui/material';\r\nimport {\r\n  Visibility as ViewIcon,\r\n  Email as EmailIcon,\r\n  PictureAsPdf as PdfIcon,\r\n} from '@mui/icons-material';\r\nimport { QuotationListProps, Quotation, QuotationStatus } from '../../types';\r\n\r\nconst QuotationList: React.FC<QuotationListProps> = ({\r\n  quotations,\r\n  page,\r\n  rowsPerPage,\r\n  totalCount,\r\n  onPageChange,\r\n  onRowsPerPageChange,\r\n  onViewDetail,\r\n  onDownloadPdf,\r\n  onSendEmail,\r\n}) => {\r\n  // Helper functions\r\n  const getStatusChip = (status: QuotationStatus) => {\r\n    const statusMap: Record<QuotationStatus, { label: string; color: 'default' | 'info' | 'success' | 'error' }> = {\r\n      draft: { label: 'Draft', color: 'default' },\r\n      sent: { label: 'Đã gửi', color: 'info' },\r\n      approved: { label: 'Đã duyệt', color: 'success' },\r\n      rejected: { label: 'Từ chối', color: 'error' },\r\n    };\r\n\r\n    const statusInfo = statusMap[status];\r\n    return (\r\n      <Chip \r\n        label={statusInfo.label} \r\n        color={statusInfo.color}\r\n        size=\"small\"\r\n      />\r\n    );\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Tên báo giá</TableCell>\r\n              <TableCell>Khách hàng</TableCell>\r\n              <TableCell>Deal</TableCell>\r\n              <TableCell>Trạng thái</TableCell>\r\n              <TableCell>Ngày tạo</TableCell>\r\n              <TableCell align=\"right\">Tổng Effort (MD)</TableCell>\r\n              <TableCell align=\"right\">Tổng tiền</TableCell>\r\n              <TableCell align=\"center\">Hành động</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {quotations.map((quotation: Quotation) => (\r\n              <TableRow key={quotation.id}>\r\n                <TableCell>{quotation.name}</TableCell>\r\n                <TableCell>{quotation.customer}</TableCell>\r\n                <TableCell>{quotation.dealName}</TableCell>\r\n                <TableCell>{getStatusChip(quotation.status)}</TableCell>\r\n                <TableCell>{quotation.createdDate}</TableCell>\r\n                <TableCell align=\"right\">{quotation.totalEffort}</TableCell>\r\n                <TableCell align=\"right\">{formatCurrency(quotation.totalAmount)}</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <IconButton \r\n                    size=\"small\" \r\n                    color=\"primary\" \r\n                    onClick={() => onViewDetail(quotation.id)}\r\n                    title=\"Xem chi tiết\"\r\n                  >\r\n                    <ViewIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                  <IconButton \r\n                    size=\"small\" \r\n                    color=\"secondary\" \r\n                    onClick={() => onDownloadPdf(quotation.id)}\r\n                    title=\"Tải PDF\"\r\n                  >\r\n                    <PdfIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                  <IconButton \r\n                    size=\"small\" \r\n                    color=\"info\" \r\n                    onClick={() => onSendEmail(quotation.id)}\r\n                    title=\"Gửi Email\"\r\n                  >\r\n                    <EmailIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n            {quotations.length === 0 && (\r\n              <TableRow>\r\n                <TableCell colSpan={8} align=\"center\">\r\n                  Không có báo giá nào\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={totalCount}\r\n          page={page}\r\n          onPageChange={(_, newPage) => onPageChange(_, newPage)}\r\n          rowsPerPage={rowsPerPage}\r\n          onRowsPerPageChange={(e: React.ChangeEvent<HTMLInputElement>) => onRowsPerPageChange(e)}\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          labelRowsPerPage=\"Số hàng mỗi trang:\"\r\n        />\r\n      </TableContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default QuotationList;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  IconButton,\r\n} from '@mui/material';\r\nimport { Close as CloseIcon, Visibility as PreviewIcon, Send as SendIcon } from '@mui/icons-material';\r\n\r\ninterface EmailQuotationDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSend: (emailData: {\r\n    to: string;\r\n    cc: string;\r\n    subject: string;\r\n    content: string;\r\n  }) => void;\r\n  customerName: string;\r\n  serviceName: string;\r\n  responsiblePerson: string;\r\n  pdfFileName: string;\r\n}\r\n\r\nconst EmailQuotationDialog: React.FC<EmailQuotationDialogProps> = ({\r\n  open,\r\n  onClose,\r\n  onSend,\r\n  customerName,\r\n  serviceName,\r\n  responsiblePerson,\r\n  pdfFileName,\r\n}) => {\r\n  const [emailData, setEmailData] = useState({\r\n    to: '',\r\n    cc: '',\r\n    subject: `Báo giá dịch vụ ${serviceName}`,\r\n    content: `Kính gửi Anh/Chị ${customerName || 'Quý khách'},\r\n\r\nInnotech Vietnam xin gửi Anh/Chị báo giá cho dịch vụ ${serviceName || 'dịch vụ'} như đính kèm.\r\n\r\nNếu cần thêm thông tin, xin vui lòng liên hệ chúng tôi.\r\n\r\nTrân trọng,  \r\n${responsiblePerson || 'Đội ngũ Innotech Vietnam'}`,\r\n  });\r\n\r\n  const handleChange = (field: string) => (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    setEmailData(prev => ({\r\n      ...prev,\r\n      [field]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSend = () => {\r\n    onSend(emailData);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\r\n      <DialogTitle>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography variant=\"h6\">Gửi báo giá cho khách hàng</Typography>\r\n          <IconButton onClick={onClose} size=\"small\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Box>\r\n      </DialogTitle>\r\n      <DialogContent dividers>\r\n        <Box mb={3}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Đến (Email)\"\r\n            value={emailData.to}\r\n            onChange={handleChange('to')}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n          />\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"CC (Tùy chọn)\"\r\n            value={emailData.cc}\r\n            onChange={handleChange('cc')}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n          />\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"Tiêu đề\"\r\n            value={emailData.subject}\r\n            onChange={handleChange('subject')}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n          />\r\n          \r\n          <Box mt={2} mb={2} display=\"flex\" alignItems=\"center\">\r\n            <Typography variant=\"body1\" sx={{ mr: 2 }}>\r\n              File đính kèm: {pdfFileName}\r\n            </Typography>\r\n            <IconButton size=\"small\" onClick={() => window.open(`/preview/${pdfFileName}`, '_blank')}>\r\n              <PreviewIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"Nội dung email\"\r\n            value={emailData.content}\r\n            onChange={handleChange('content')}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            multiline\r\n            rows={8}\r\n          />\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions sx={{ p: 2 }}>\r\n        <Button onClick={onClose}>Hủy</Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          startIcon={<SendIcon />}\r\n          onClick={handleSend}\r\n          disabled={!emailData.to}\r\n        >\r\n          Gửi email\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EmailQuotationDialog;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Visibility as VisibilityIcon,\r\n  Delete as DeleteIcon,\r\n  FileDownload as FileDownloadIcon,\r\n} from '@mui/icons-material';\r\nimport { QuoteTemplate } from '../../types/quoteTemplate';\r\n\r\ninterface QuotationTemplatesProps {\r\n  templates: QuoteTemplate[];\r\n  loading: boolean;\r\n  onUploadClick: () => void;\r\n  onViewTemplate?: (templateId: string) => void;\r\n  onDeleteTemplate?: (templateId: string) => void;\r\n  onDownloadTemplate?: (templateId: string) => void;\r\n}\r\n\r\nconst QuotationTemplates: React.FC<QuotationTemplatesProps> = ({\r\n  templates,\r\n  loading,\r\n  onUploadClick,\r\n  onViewTemplate,\r\n  onDeleteTemplate,\r\n  onDownloadTemplate,\r\n}) => {\r\n  return (\r\n    <Paper sx={{ p: 3 }}>\r\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n        <Typography variant=\"h6\">Mẫu báo giá</Typography>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          startIcon={<AddIcon />}\r\n          onClick={onUploadClick}\r\n        >\r\n          Tải lên mẫu báo giá\r\n        </Button>\r\n      </Box>\r\n\r\n      <TableContainer>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Tên mẫu</TableCell>\r\n              <TableCell>Mô tả</TableCell>\r\n              <TableCell>Loại</TableCell>\r\n              <TableCell>Trạng thái</TableCell>\r\n              <TableCell>Ngày tạo</TableCell>\r\n              <TableCell>Người tạo</TableCell>\r\n              <TableCell>Số trường</TableCell>\r\n              <TableCell align=\"center\">Thao tác</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {loading ? (\r\n              <TableRow>\r\n                <TableCell colSpan={8} align=\"center\">\r\n                  Đang tải...\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : templates.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={8} align=\"center\">\r\n                  Chưa có mẫu báo giá nào. Hãy tải lên mẫu báo giá đầu tiên của bạn!\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              templates.map((template) => (\r\n                <TableRow key={template.id}>\r\n                  <TableCell>{template.name}</TableCell>\r\n                  <TableCell>{template.description || '-'}</TableCell>\r\n                  <TableCell>\r\n                    {template.type === 'customer' ? 'Khách hàng' : 'Nội bộ'}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Chip\r\n                      label={template.status === 'active' ? 'Đang sử dụng' : 'Không sử dụng'}\r\n                      color={template.status === 'active' ? 'success' : 'default'}\r\n                      size=\"small\"\r\n                    />\r\n                    {template.isDefault && (\r\n                      <Chip\r\n                        label=\"Mặc định\"\r\n                        color=\"primary\"\r\n                        size=\"small\"\r\n                        sx={{ ml: 1 }}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {new Date(template.createdAt).toLocaleDateString('vi-VN')}\r\n                  </TableCell>\r\n                  <TableCell>{template.createdBy}</TableCell>\r\n                  <TableCell>{template.placeholderCount}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <Box>\r\n                      {onViewTemplate && (\r\n                        <Tooltip title=\"Xem chi tiết\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            onClick={() => onViewTemplate(template.id)}\r\n                          >\r\n                            <VisibilityIcon fontSize=\"small\" />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      )}\r\n                      {onDownloadTemplate && (\r\n                        <Tooltip title=\"Tải xuống\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            onClick={() => onDownloadTemplate(template.id)}\r\n                          >\r\n                            <FileDownloadIcon fontSize=\"small\" />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      )}\r\n                      {onDeleteTemplate && (\r\n                        <Tooltip title=\"Xóa\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            color=\"error\"\r\n                            onClick={() => onDeleteTemplate(template.id)}\r\n                          >\r\n                            <DeleteIcon fontSize=\"small\" />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      )}\r\n                    </Box>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default QuotationTemplates;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Typography,\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n} from '@mui/material';\r\nimport { Close as CloseIcon, CloudUpload as UploadIcon, Delete as DeleteIcon } from '@mui/icons-material';\r\nimport { UploadQuoteTemplateFormValues, ExtractedField } from '../../types/quoteTemplate';\r\n\r\ninterface UploadQuoteTemplateProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (values: UploadQuoteTemplateFormValues) => Promise<void>;\r\n}\r\n\r\nconst UploadQuoteTemplate: React.FC<UploadQuoteTemplateProps> = ({\r\n  open,\r\n  onClose,\r\n  onSubmit,\r\n}) => {\r\n  const [values, setValues] = useState<UploadQuoteTemplateFormValues>({\r\n    name: '',\r\n    description: '',\r\n    type: 'customer',\r\n    file: null,\r\n    extractedFields: [],\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [analyzing, setAnalyzing] = useState(false);\r\n  const [extractedFields, setExtractedFields] = useState<ExtractedField[]>([]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement> | { target: { name?: string; value: unknown } }) => {\r\n    const { name, value } = e.target;\r\n    if (name) {\r\n      setValues((prev) => ({ ...prev, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0] || null;\r\n    \r\n    if (file) {\r\n      // Kiểm tra định dạng file\r\n      if (!file.name.endsWith('.docx') && !file.name.endsWith('.doc') && !file.name.endsWith('.pdf')) {\r\n        alert('Chỉ chấp nhận file .doc, .docx hoặc .pdf');\r\n        return;\r\n      }\r\n      \r\n      // Kiểm tra kích thước file (tối đa 5MB)\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('Kích thước file không được vượt quá 5MB');\r\n        return;\r\n      }\r\n      \r\n      setValues((prev) => ({ ...prev, file }));\r\n      setAnalyzing(true);\r\n      \r\n      // Giả lập phân tích AI\r\n      setTimeout(() => {\r\n        // Mock dữ liệu được phân tích từ file\r\n        const mockExtractedFields: ExtractedField[] = [\r\n          {\r\n            originalText: 'CÔNG TY TNHH GIẤY CAO PHÁT',\r\n            placeholder: 'TEN_CONG_TY_A',\r\n            type: 'text',\r\n            description: 'Tên công ty bên A',\r\n            required: true,\r\n            example: 'Công ty TNHH ABC'\r\n          },\r\n          {\r\n            originalText: 'Số 352, Khu Phố Mỹ Hiệp, Phường Thái Hoà, Thành phố Tân Uyên, Tỉnh Bình Dương',\r\n            placeholder: 'DIA_CHI_A',\r\n            type: 'text',\r\n            description: 'Địa chỉ bên A',\r\n            required: true,\r\n            example: 'Số 123, Đường ABC, Quận 1, TP.HCM'\r\n          },\r\n          {\r\n            originalText: '0274 3775 179',\r\n            placeholder: 'DIEN_THOAI_A',\r\n            type: 'phone',\r\n            description: 'Số điện thoại bên A',\r\n            required: true,\r\n            example: '0901234567'\r\n          },\r\n          {\r\n            originalText: '3701711279',\r\n            placeholder: 'MA_SO_THUE_A',\r\n            type: 'taxcode',\r\n            description: 'Mã số thuế bên A',\r\n            required: true,\r\n            example: '0123456789'\r\n          },\r\n          {\r\n            originalText: 'LÊ THỊ KIM CHI',\r\n            placeholder: 'NGUOI_DAI_DIEN_A',\r\n            type: 'text',\r\n            description: 'Người đại diện bên A',\r\n            required: true,\r\n            example: 'Nguyễn Văn A'\r\n          },\r\n          {\r\n            originalText: 'Giám đốc',\r\n            placeholder: 'CHUC_VU_A',\r\n            type: 'text',\r\n            description: 'Chức vụ người đại diện bên A',\r\n            required: true,\r\n            example: 'Giám đốc'\r\n          },\r\n          {\r\n            originalText: '10.000.000 VNĐ',\r\n            placeholder: 'GIA_TRI_HOP_DONG',\r\n            type: 'number',\r\n            description: 'Giá trị hợp đồng',\r\n            required: true,\r\n            example: '50.000.000 VNĐ'\r\n          },\r\n          {\r\n            originalText: '01/08/2025',\r\n            placeholder: 'NGAY_BAT_DAU',\r\n            type: 'date',\r\n            description: 'Ngày bắt đầu hợp đồng',\r\n            required: true,\r\n            example: '01/01/2025'\r\n          }\r\n        ];\r\n        \r\n        setExtractedFields(mockExtractedFields);\r\n        setValues(prev => ({ ...prev, extractedFields: mockExtractedFields }));\r\n        setAnalyzing(false);\r\n      }, 2000);\r\n    }\r\n  };\r\n  \r\n  const handleUpdatePlaceholder = (index: number, field: keyof ExtractedField, value: string) => {\r\n    const updatedFields = [...extractedFields];\r\n    updatedFields[index] = { ...updatedFields[index], [field]: value };\r\n    setExtractedFields(updatedFields);\r\n    setValues(prev => ({ ...prev, extractedFields: updatedFields }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!values.name.trim()) {\r\n      alert('Vui lòng nhập tên mẫu báo giá');\r\n      return;\r\n    }\r\n    \r\n    if (!values.file) {\r\n      alert('Vui lòng chọn file mẫu báo giá');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      await onSubmit(values);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error submitting template:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setValues({\r\n      name: '',\r\n      description: '',\r\n      type: 'customer',\r\n      file: null,\r\n      extractedFields: [],\r\n    });\r\n    setExtractedFields([]);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" fullWidth>\r\n      <DialogTitle>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography variant=\"h6\">Tải lên mẫu báo giá</Typography>\r\n          <IconButton onClick={handleClose} size=\"small\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Box>\r\n      </DialogTitle>\r\n      <form onSubmit={handleSubmit}>\r\n        <DialogContent dividers>\r\n          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: '1fr 2fr' }, gap: 3 }}>\r\n            <Box>\r\n              <TextField\r\n                label=\"Tên mẫu báo giá\"\r\n                name=\"name\"\r\n                value={values.name}\r\n                onChange={handleChange}\r\n                fullWidth\r\n                margin=\"normal\"\r\n                required\r\n                disabled={loading}\r\n              />\r\n              \r\n              <TextField\r\n                label=\"Mô tả\"\r\n                name=\"description\"\r\n                value={values.description}\r\n                onChange={handleChange}\r\n                fullWidth\r\n                multiline\r\n                rows={3}\r\n                margin=\"normal\"\r\n                disabled={loading}\r\n              />\r\n              \r\n              <FormControl fullWidth margin=\"normal\">\r\n                <InputLabel>Loại mẫu</InputLabel>\r\n                <Select\r\n                  label=\"Loại mẫu\"\r\n                  name=\"type\"\r\n                  value={values.type}\r\n                  onChange={handleChange}\r\n                  disabled={loading}\r\n                >\r\n                  <MenuItem value=\"customer\">Cho khách hàng</MenuItem>\r\n                  <MenuItem value=\"internal\">Nội bộ</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n              \r\n              <Box mt={2} mb={2}>\r\n                <input\r\n                  accept=\".docx,.doc,.pdf\"\r\n                  style={{ display: 'none' }}\r\n                  id=\"template-upload\"\r\n                  type=\"file\"\r\n                  onChange={handleFileChange}\r\n                  disabled={loading || analyzing}\r\n                />\r\n                <label htmlFor=\"template-upload\">\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    component=\"span\"\r\n                    startIcon={<UploadIcon />}\r\n                    disabled={loading || analyzing}\r\n                  >\r\n                    Chọn file mẫu (.docx, .doc, .pdf)\r\n                  </Button>\r\n                </label>\r\n                {values.file && (\r\n                  <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                    Đã chọn: {values.file.name}\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n            </Box>\r\n            \r\n            <Box>\r\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\r\n                <Typography variant=\"subtitle1\" gutterBottom>\r\n                  Các trường được phân tích từ mẫu báo giá:\r\n                </Typography>\r\n                \r\n                {analyzing ? (\r\n                  <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" py={4}>\r\n                    <CircularProgress size={40} />\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 2 }}>\r\n                      Đang phân tích nội dung mẫu báo giá...\r\n                    </Typography>\r\n                  </Box>\r\n                ) : extractedFields.length > 0 ? (\r\n                  <TableContainer component={Paper} variant=\"outlined\">\r\n                    <Table size=\"small\">\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>Trường gốc trong file</TableCell>\r\n                          <TableCell>Placeholder gợi ý</TableCell>\r\n                          <TableCell>Kiểu dữ liệu</TableCell>\r\n                          <TableCell>Mô tả</TableCell>\r\n                          <TableCell align=\"center\">Thao tác</TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {extractedFields.map((field, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{field.originalText}</TableCell>\r\n                            <TableCell>\r\n                              <TextField\r\n                                size=\"small\"\r\n                                value={field.placeholder}\r\n                                onChange={(e) => handleUpdatePlaceholder(index, 'placeholder', e.target.value)}\r\n                                fullWidth\r\n                                disabled={loading}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <FormControl fullWidth size=\"small\">\r\n                                <Select\r\n                                  value={field.type}\r\n                                  onChange={(e) => handleUpdatePlaceholder(index, 'type', e.target.value)}\r\n                                  disabled={loading}\r\n                                >\r\n                                  <MenuItem value=\"text\">Văn bản</MenuItem>\r\n                                  <MenuItem value=\"number\">Số</MenuItem>\r\n                                  <MenuItem value=\"date\">Ngày tháng</MenuItem>\r\n                                  <MenuItem value=\"phone\">Điện thoại</MenuItem>\r\n                                  <MenuItem value=\"email\">Email</MenuItem>\r\n                                  <MenuItem value=\"taxcode\">Mã số thuế</MenuItem>\r\n                                </Select>\r\n                              </FormControl>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <TextField\r\n                                size=\"small\"\r\n                                value={field.description || ''}\r\n                                onChange={(e) => handleUpdatePlaceholder(index, 'description', e.target.value)}\r\n                                fullWidth\r\n                                disabled={loading}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell align=\"center\">\r\n                              <IconButton size=\"small\" color=\"error\" onClick={() => {\r\n                                const updatedFields = [...extractedFields];\r\n                                updatedFields.splice(index, 1);\r\n                                setExtractedFields(updatedFields);\r\n                                setValues(prev => ({ ...prev, extractedFields: updatedFields }));\r\n                              }} disabled={loading}>\r\n                                <DeleteIcon fontSize=\"small\" />\r\n                              </IconButton>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </TableContainer>\r\n                ) : values.file ? (\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    Không tìm thấy trường nào có thể trích xuất từ file. Vui lòng kiểm tra lại nội dung file.\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    Vui lòng tải lên file mẫu báo giá để AI phân tích và đề xuất các trường dữ liệu.\r\n                  </Typography>\r\n                )}\r\n                \r\n                <Box mt={3}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom>\r\n                    Hướng dẫn sử dụng:\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    - AI sẽ tự động phân tích nội dung mẫu báo giá và đề xuất các trường cần điền\r\n                    <br />\r\n                    - Bạn có thể chỉnh sửa tên placeholder và mô tả cho phù hợp\r\n                    <br />\r\n                    - Khi tạo báo giá, hệ thống sẽ tự động điền các thông tin vào các vị trí tương ứng\r\n                  </Typography>\r\n                </Box>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        \r\n        <DialogActions sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\r\n          <Button onClick={handleClose} disabled={loading}>\r\n            Hủy\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={loading || analyzing || extractedFields.length === 0}\r\n            startIcon={loading ? <CircularProgress size={20} /> : null}\r\n          >\r\n            {loading ? 'Đang tải lên...' : 'Lưu mẫu báo giá'}\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default UploadQuoteTemplate;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Paper,\r\n  Typography,\r\n  TextField,\r\n  Stack,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Autocomplete,\r\n  SelectChangeEvent,\r\n  Tabs,\r\n  Tab,\r\n} from '@mui/material';\r\nimport {\r\n  Search as SearchIcon,\r\n  Add as AddIcon,\r\n  FileDownload as ExportIcon,\r\n} from '@mui/icons-material';\r\n\r\n// Types\r\nimport { Quotation, QuotationStatus } from './types';\r\nimport { QuoteTemplate, QuoteTemplateTab } from './types/quoteTemplate';\r\n\r\n// Components\r\nimport QuotationForm from './components/QuotationForm';\r\nimport QuotationDetail from './components/QuotationDetail';\r\nimport QuotationPreview from './components/QuotationPreview';\r\nimport QuotationList from './components/QuotationList';\r\nimport EmailQuotationDialog from './components/EmailQuotationDialog';\r\nimport QuotationTemplates from './components/QuotationTemplates';\r\nimport UploadQuoteTemplate from './components/UploadQuoteTemplate';\r\nimport { UploadQuoteTemplateFormValues } from './types/quoteTemplate';\r\n\r\n// Fake data\r\nconst fakeCustomers = ['Công ty A', 'Công ty B', 'Công ty C', 'Công ty D'];\r\nconst fakeDeals = [\r\n  { id: 1, name: 'Deal A1', customer: 'Công ty A' },\r\n  { id: 2, name: 'Deal A2', customer: 'Công ty A' },\r\n  { id: 3, name: 'Deal B1', customer: 'Công ty B' },\r\n  { id: 4, name: 'Deal C1', customer: 'Công ty C' },\r\n];\r\n\r\nconst fakeRequirements = [\r\n  { \r\n    id: 1, \r\n    name: 'Yêu cầu A1.1', \r\n    dealId: 1, \r\n    description: 'Xây dựng website bán hàng cho Công ty A',\r\n    features: [\r\n      { \r\n        feature: 'Trang chủ', \r\n        detail: 'Thiết kế trang chủ hiện đại', \r\n        description: 'Trang chủ với slider banner, danh mục sản phẩm nổi bật, sản phẩm mới', \r\n        notes: 'Tích hợp animation cho banner'\r\n      },\r\n      { \r\n        feature: 'Trang sản phẩm', \r\n        detail: 'Danh sách sản phẩm có bộ lọc', \r\n        description: 'Hiển thị sản phẩm dạng lưới, có bộ lọc theo danh mục, giá, thương hiệu', \r\n        notes: 'Có chức năng so sánh sản phẩm'\r\n      },\r\n      { \r\n        feature: 'Giỏ hàng', \r\n        detail: 'Chức năng giỏ hàng đầy đủ', \r\n        description: 'Thêm, sửa, xóa sản phẩm trong giỏ hàng, tính tổng tiền', \r\n        notes: 'Lưu giỏ hàng vào localStorage'\r\n      },\r\n      { \r\n        feature: 'Thanh toán', \r\n        detail: 'Quy trình thanh toán', \r\n        description: 'Form nhập thông tin giao hàng, chọn phương thức thanh toán', \r\n        notes: 'Tích hợp thanh toán qua VNPay'\r\n      }\r\n    ] \r\n  },\r\n  { \r\n    id: 2, \r\n    name: 'Yêu cầu A1.2', \r\n    dealId: 1, \r\n    description: 'Xây dựng hệ thống quản lý kho cho Công ty A',\r\n    features: [\r\n      { \r\n        feature: 'Quản lý sản phẩm', \r\n        detail: 'CRUD sản phẩm', \r\n        description: 'Thêm, sửa, xóa, xem chi tiết sản phẩm trong kho', \r\n        notes: 'Hỗ trợ import/export Excel'\r\n      },\r\n      { \r\n        feature: 'Quản lý nhập kho', \r\n        detail: 'Quy trình nhập kho', \r\n        description: 'Tạo phiếu nhập kho, xác nhận nhập kho, cập nhật số lượng tồn', \r\n        notes: 'Tích hợp với mã vạch'\r\n      },\r\n      { \r\n        feature: 'Quản lý xuất kho', \r\n        detail: 'Quy trình xuất kho', \r\n        description: 'Tạo phiếu xuất kho, xác nhận xuất kho, cập nhật số lượng tồn', \r\n        notes: 'Tự động xuất kho khi có đơn hàng'\r\n      },\r\n      { \r\n        feature: 'Báo cáo thống kê', \r\n        detail: 'Báo cáo tồn kho, nhập xuất', \r\n        description: 'Báo cáo tồn kho theo thời gian, báo cáo nhập xuất theo sản phẩm', \r\n        notes: 'Xuất báo cáo dạng PDF, Excel'\r\n      }\r\n    ] \r\n  },\r\n  { \r\n    id: 3, \r\n    name: 'Yêu cầu A2.1', \r\n    dealId: 2, \r\n    description: 'Xây dựng app mobile cho Công ty A',\r\n    features: [\r\n      { \r\n        feature: 'Đăng nhập/Đăng ký', \r\n        detail: 'Hệ thống xác thực', \r\n        description: 'Đăng nhập bằng email/password, đăng ký tài khoản mới, quên mật khẩu', \r\n        notes: 'Hỗ trợ đăng nhập bằng Google, Facebook'\r\n      },\r\n      { \r\n        feature: 'Trang cá nhân', \r\n        detail: 'Thông tin người dùng', \r\n        description: 'Xem, cập nhật thông tin cá nhân, đổi mật khẩu', \r\n        notes: 'Upload avatar'\r\n      },\r\n      { \r\n        feature: 'Thông báo', \r\n        detail: 'Hệ thống thông báo', \r\n        description: 'Nhận thông báo realtime, xem lịch sử thông báo', \r\n        notes: 'Sử dụng Firebase Cloud Messaging'\r\n      }\r\n    ] \r\n  },\r\n  { \r\n    id: 4, \r\n    name: 'Yêu cầu B1.1', \r\n    dealId: 3, \r\n    description: 'Xây dựng hệ thống Quản lý Kho cho Công ty B',\r\n    features: [\r\n      { \r\n        feature: 'Quản lý Kho', \r\n        detail: 'Nhập kho', \r\n        description: 'Cho phép người dùng nhập hàng mới vào kho', \r\n        notes: 'Từ AI (mẫu)'\r\n      },\r\n      { \r\n        feature: 'Quản lý Kho', \r\n        detail: 'Xuất kho', \r\n        description: 'Ghi nhận xuất kho khi giao hàng hoặc bán', \r\n        notes: 'Từ AI (mẫu)'\r\n      },\r\n      { \r\n        feature: 'Giám sát Kho', \r\n        detail: 'Cảnh báo tồn kho thấp', \r\n        description: 'Thông báo khi số lượng hàng tồn dưới mức tối thiểu', \r\n        notes: 'Từ AI (mẫu)'\r\n      }\r\n    ] \r\n  },\r\n];\r\n\r\nconst generateFakeQuotations = (count: number): Quotation[] => {\r\n  return Array.from({ length: count }, (_, i) => ({\r\n    id: i + 1,\r\n    name: `Báo giá ${i + 1} - ${['Website bán hàng', 'Hệ thống kho', 'App di động', 'Phần mềm kế toán'][i % 4]}`,\r\n    customer: fakeCustomers[Math.floor(Math.random() * fakeCustomers.length)],\r\n    dealId: i % 4 + 1,\r\n    dealName: fakeDeals[i % 4].name,\r\n    requirementId: i % 4 + 1,\r\n    requirementName: fakeRequirements[i % 4].name,\r\n    status: ['draft', 'sent', 'approved', 'rejected'][Math.floor(Math.random() * 4)] as QuotationStatus,\r\n    createdDate: new Date(Date.now() - Math.floor(Math.random() * 90) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n    note: '',\r\n    items: [],\r\n    totalEffort: Math.floor(Math.random() * 100) + 20,\r\n    totalAmount: (Math.floor(Math.random() * 100) + 20) * 500000,\r\n  }));\r\n};\r\n\r\nconst statusOptions = [\r\n  { value: 'draft', label: 'Draft', color: 'default' },\r\n  { value: 'sent', label: 'Đã gửi', color: 'info' },\r\n  { value: 'approved', label: 'Đã duyệt', color: 'success' },\r\n  { value: 'rejected', label: 'Từ chối', color: 'error' },\r\n];\r\n\r\nconst QuotationManagement = () => {\r\n  // Tab state\r\n  const [currentTab, setCurrentTab] = useState<QuoteTemplateTab>('quotes');\r\n  \r\n  // State\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [customerFilter, setCustomerFilter] = useState<string | null>(null);\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Template states\r\n  const [templates, setTemplates] = useState<QuoteTemplate[]>([]);\r\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\r\n  const [selectedTemplate, setSelectedTemplate] = useState<QuoteTemplate | null>(null);\r\n  \r\n  // Quotations state\r\n  const [quotations, setQuotations] = useState<Quotation[]>(generateFakeQuotations(25));\r\n  \r\n  // Create dialog state\r\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\r\n  \r\n  // Detail dialog state\r\n  const [detailDialogOpen, setDetailDialogOpen] = useState(false);\r\n  const [selectedQuotation, setSelectedQuotation] = useState<Quotation | null>(null);\r\n  \r\n  // Preview dialog state\r\n  const [previewDialogOpen, setPreviewDialogOpen] = useState(false);\r\n  \r\n  // Email dialog state\r\n  const [emailDialogOpen, setEmailDialogOpen] = useState(false);\r\n  const [emailQuotation, setEmailQuotation] = useState<Quotation | null>(null);\r\n  \r\n  // Load fake data on init\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    // Load quotations\r\n    setQuotations(generateFakeQuotations(25));\r\n    \r\n    // Load templates\r\n    const mockTemplates: QuoteTemplate[] = [\r\n      {\r\n        id: '1',\r\n        name: 'Mẫu báo giá dự án phần mềm',\r\n        description: 'Template báo giá dự án phần mềm tiêu chuẩn',\r\n        type: 'customer',\r\n        status: 'active',\r\n        createdAt: '2025-06-30T10:00:00Z',\r\n        updatedAt: '2025-06-30T10:00:00Z',\r\n        createdBy: 'Nguyễn Văn A',\r\n        placeholderCount: 8,\r\n        isDefault: true,\r\n        extractedFields: []\r\n      },\r\n      {\r\n        id: '2',\r\n        name: 'Mẫu báo giá dịch vụ IT',\r\n        description: 'Template báo giá dịch vụ IT outsourcing',\r\n        type: 'internal',\r\n        status: 'active',\r\n        createdAt: '2025-06-29T15:30:00Z',\r\n        updatedAt: '2025-06-29T15:30:00Z',\r\n        createdBy: 'Trần Thị B',\r\n        placeholderCount: 5,\r\n        isDefault: false,\r\n        extractedFields: []\r\n      }\r\n    ];\r\n    \r\n    setTemplates(mockTemplates);\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  // Handlers\r\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(event.target.value);\r\n    setPage(0);\r\n  };\r\n  \r\n  // Handle tab change\r\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: QuoteTemplateTab) => {\r\n    setCurrentTab(newValue);\r\n    setPage(0);\r\n  };\r\n\r\n  // Template handlers\r\n  const handleOpenUploadDialog = () => {\r\n    setUploadDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseUploadDialog = () => {\r\n    setUploadDialogOpen(false);\r\n  };\r\n  \r\n  const handleUploadTemplate = async (values: UploadQuoteTemplateFormValues): Promise<void> => {\r\n    try {\r\n      setLoading(true);\r\n      // TODO: Replace with actual API call\r\n      console.log('Uploading template:', values);\r\n      \r\n      // Simulate API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Add new template to the list\r\n      const newTemplate: QuoteTemplate = {\r\n        id: `template-${Date.now()}`,\r\n        name: values.name,\r\n        description: values.description,\r\n        type: values.type,\r\n        status: 'active',\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        createdBy: 'Người dùng hiện tại',\r\n        placeholderCount: Math.floor(Math.random() * 10) + 3, // Random number of placeholders\r\n        isDefault: false,\r\n        extractedFields: []\r\n      };\r\n      \r\n      setTemplates(prev => [newTemplate, ...prev]);\r\n      setUploadDialogOpen(false);\r\n      \r\n    } catch (error) {\r\n      console.error('Error uploading template:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleViewTemplate = (templateId: string) => {\r\n    const template = templates.find(t => t.id === templateId);\r\n    if (template) {\r\n      setSelectedTemplate(template);\r\n      // Here you would implement the template viewing functionality\r\n      console.log('Viewing template:', template);\r\n    }\r\n  };\r\n  \r\n  const handleDownloadTemplate = (templateId: string) => {\r\n    const template = templates.find(t => t.id === templateId);\r\n    if (template) {\r\n      // Here you would implement the template download functionality\r\n      console.log('Downloading template:', template);\r\n    }\r\n  };\r\n  \r\n  const handleDeleteTemplate = (templateId: string) => {\r\n    // Here you would implement the template deletion functionality\r\n    setTemplates(prev => prev.filter(t => t.id !== templateId));\r\n    console.log('Deleted template with ID:', templateId);\r\n  };\r\n  \r\n  const handleCustomerFilterChange = (_: any, newValue: string | null) => {\r\n    setCustomerFilter(newValue);\r\n    setPage(0);\r\n  };\r\n\r\n  const handleStatusFilterChange = (event: SelectChangeEvent<string>) => {\r\n    setStatusFilter(event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const handlePageChange = (_: unknown, newPage: number) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleRowsPerPageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleViewQuotationDetail = (id: number) => {\r\n    const quotation = quotations.find(q => q.id === id);\r\n    if (quotation) {\r\n      setSelectedQuotation(quotation);\r\n      setDetailDialogOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleDownloadPdf = (id: number) => {\r\n    const quotation = quotations.find(q => q.id === id);\r\n    if (quotation) {\r\n      setSelectedQuotation(quotation);\r\n      setPreviewDialogOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleSendEmail = (id: number) => {\r\n    const quotation = quotations.find(q => q.id === id);\r\n    if (quotation) {\r\n      setEmailQuotation(quotation);\r\n      setEmailDialogOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleEmailSend = (emailData: {\r\n    to: string;\r\n    cc: string;\r\n    subject: string;\r\n    content: string;\r\n  }) => {\r\n    // In a real app, this would call an API to send the email\r\n    console.log('Sending email:', emailData);\r\n    \r\n    // Update quotation status to 'sent' if it was 'draft'\r\n    if (emailQuotation?.status === 'draft') {\r\n      const updatedQuotations = quotations.map(q => \r\n        q.id === emailQuotation.id \r\n          ? { ...q, status: 'sent' as const } \r\n          : q\r\n      );\r\n      setQuotations(updatedQuotations);\r\n    }\r\n    \r\n    // Show success message\r\n    alert('Email đã được gửi thành công!');\r\n    setEmailDialogOpen(false);\r\n  };\r\n\r\n  const handleCreateQuotation = () => {\r\n    setCreateDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseCreateDialog = () => {\r\n    setCreateDialogOpen(false);\r\n  };\r\n\r\n  const handleSaveQuotation = (quotation: Quotation) => {\r\n    const newQuotation = {\r\n      ...quotation,\r\n      id: Math.max(...quotations.map(q => q.id), 0) + 1,\r\n    };\r\n    \r\n    setQuotations([newQuotation, ...quotations]);\r\n    setCreateDialogOpen(false);\r\n  };\r\n\r\n  // Filter quotations\r\n  const filteredQuotations = quotations.filter(q => {\r\n    const matchesSearch = q.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n                          q.customer.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesCustomer = !customerFilter || q.customer === customerFilter;\r\n    const matchesStatus = statusFilter === 'all' || q.status === statusFilter;\r\n    return matchesSearch && matchesCustomer && matchesStatus;\r\n  });\r\n\r\n  const paginatedQuotations = filteredQuotations.slice(\r\n    page * rowsPerPage,\r\n    page * rowsPerPage + rowsPerPage\r\n  );\r\n\r\n  // Các hàm tiện ích đã được chuyển vào component QuotationList\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      {emailQuotation && (\r\n        <EmailQuotationDialog\r\n          open={emailDialogOpen}\r\n          onClose={() => setEmailDialogOpen(false)}\r\n          onSend={handleEmailSend}\r\n          customerName={emailQuotation.customer}\r\n          serviceName={emailQuotation.name}\r\n          responsiblePerson=\"Người phụ trách\"\r\n          pdfFileName={`BaoGia_${emailQuotation.id}.pdf`}\r\n        />\r\n      )}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3, flexWrap: 'wrap', gap: 2 }}>\r\n        <Typography variant=\"h4\" component=\"h1\">\r\n          Quản lý báo giá/ước tính\r\n        </Typography>\r\n        {currentTab === 'quotes' && (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleCreateQuotation}\r\n          >\r\n            Tạo báo giá mới\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      \r\n      {/* Tabs */}\r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 3 }}>\r\n        <Tabs \r\n          value={currentTab} \r\n          onChange={handleTabChange}\r\n          aria-label=\"quotation management tabs\"\r\n        >\r\n          <Tab label=\"Mẫu báo giá\" value=\"templates\" />\r\n          <Tab label=\"Báo giá\" value=\"quotes\" />\r\n        </Tabs>\r\n      </Box>\r\n      \r\n      {currentTab === 'templates' ? (\r\n        <>\r\n          <QuotationTemplates \r\n            templates={templates}\r\n            loading={loading}\r\n            onUploadClick={handleOpenUploadDialog}\r\n            onViewTemplate={handleViewTemplate}\r\n            onDeleteTemplate={handleDeleteTemplate}\r\n            onDownloadTemplate={handleDownloadTemplate}\r\n          />\r\n          \r\n          <UploadQuoteTemplate \r\n            open={uploadDialogOpen}\r\n            onClose={handleCloseUploadDialog}\r\n            onSubmit={handleUploadTemplate}\r\n          />\r\n        </>\r\n      ) : (\r\n        <>\r\n          {/* Search and Filter */}\r\n          <Paper sx={{ p: 2, mb: 3 }}>\r\n            <Stack direction={{ xs: 'column', md: 'row' }} spacing={2} alignItems=\"center\">\r\n              <TextField\r\n                label=\"Tìm kiếm\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={searchTerm}\r\n                onChange={handleSearch}\r\n                sx={{ minWidth: 200, flex: 1 }}\r\n                InputProps={{\r\n                  startAdornment: <SearchIcon fontSize=\"small\" sx={{ mr: 1, color: 'text.secondary' }} />,\r\n                }}\r\n              />\r\n              \r\n              <Autocomplete\r\n                options={fakeCustomers}\r\n                value={customerFilter}\r\n                onChange={handleCustomerFilterChange}\r\n                renderInput={(params) => <TextField {...params} label=\"Khách hàng\" size=\"small\" />}\r\n                sx={{ minWidth: 200 }}\r\n              />\r\n              \r\n              <FormControl size=\"small\" sx={{ minWidth: 150 }}>\r\n                <InputLabel id=\"status-filter-label\">Trạng thái</InputLabel>\r\n                <Select\r\n                  labelId=\"status-filter-label\"\r\n                  value={statusFilter}\r\n                  label=\"Trạng thái\"\r\n                  onChange={handleStatusFilterChange}\r\n                >\r\n                  <MenuItem value=\"all\">Tất cả</MenuItem>\r\n                  {statusOptions.map(option => (\r\n                    <MenuItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n              \r\n              <Button \r\n                variant=\"outlined\" \r\n                startIcon={<ExportIcon />}\r\n                onClick={() => console.log('Export data')}\r\n              >\r\n                Xuất Excel\r\n              </Button>\r\n            </Stack>\r\n          </Paper>\r\n\r\n          {/* Quotation List */}\r\n          <QuotationList\r\n            quotations={paginatedQuotations}\r\n            onViewDetail={handleViewQuotationDetail}\r\n            onDownloadPdf={handleDownloadPdf}\r\n            onSendEmail={handleSendEmail}\r\n            page={page}\r\n            rowsPerPage={rowsPerPage}\r\n            onPageChange={handlePageChange}\r\n            onRowsPerPageChange={handleRowsPerPageChange}\r\n            totalCount={filteredQuotations.length}\r\n          />\r\n        </>\r\n      )}\r\n      \r\n      {/* Dialog tạo báo giá mới */}\r\n      <QuotationForm\r\n        open={createDialogOpen}\r\n        onClose={handleCloseCreateDialog}\r\n        onSave={handleSaveQuotation}\r\n        customers={fakeCustomers}\r\n        deals={fakeDeals}\r\n        requirements={fakeRequirements}\r\n        templates={templates}\r\n      />\r\n\r\n      {/* Dialog xem chi tiết báo giá */}\r\n      <QuotationDetail\r\n        open={detailDialogOpen}\r\n        onClose={() => setDetailDialogOpen(false)}\r\n        quotation={selectedQuotation}\r\n      />\r\n\r\n      {/* Dialog xem trước và xuất PDF */}\r\n      <QuotationPreview\r\n        open={previewDialogOpen}\r\n        onClose={() => setPreviewDialogOpen(false)}\r\n        quotation={selectedQuotation}\r\n        onSaveDraft={(quotation) => {\r\n          // Cập nhật báo giá với nội dung mới\r\n          const updatedQuotations = quotations.map(q => \r\n            q.id === quotation.id ? quotation : q\r\n          );\r\n          setQuotations(updatedQuotations);\r\n          setPreviewDialogOpen(false);\r\n          alert('Đã lưu nháp báo giá');\r\n        }}\r\n        onExportPdf={(quotation) => {\r\n          console.log('Export PDF', quotation);\r\n          alert('Đã xuất file PDF báo giá');\r\n        }}\r\n        onEdit={() => {\r\n          setPreviewDialogOpen(false);\r\n          // Mở lại form chỉnh sửa nếu cần\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default QuotationManagement;\r\n"],"names":["createSvgIcon","_jsx","d","getTableFooterUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","TableFooterRoot","styled","name","display","tablelvl2","variant","defaultComponent","React","inProps","ref","props","useDefaultProps","className","component","other","_objectWithoutProperties","ownerState","_objectSpread","classes","composeClasses","root","useUtilityClasses","Tablelvl2Context","Provider","value","children","as","clsx","role","defaultTheme","createTheme","defaultCreateStyledComponent","systemStyled","useThemePropsDefault","useThemePropsSystem","joinChildren","separator","childrenArray","toArray","filter","Boolean","reduce","output","child","index","push","length","key","concat","style","_ref","theme","styles","flexDirection","handleBreakpoints","resolveBreakpointValues","values","direction","breakpoints","propValue","spacing","transformer","createUnarySpacing","base","Object","keys","acc","breakpoint","directionValues","spacingValues","forEach","previousDirectionValue","styleFromPropValue","useFlexGap","gap","getValue","margin","row","column","deepmerge","mergeBreakpointsInOrder","Stack","options","arguments","undefined","createStyledComponent","useThemeProps","componentName","StackRoot","themeProps","extendSxProp","divider","createStack","createStyled","FIXED_COLUMNS","isFixed","isEffort","rows","effortColumns","onRowsChange","onColumnsChange","page","setPage","useState","rowsPerPage","setRowsPerPage","newColumnName","setNewColumnName","editingColumn","setEditingColumn","editColumnName","setEditColumnName","handleCellChange","rowId","field","updatedRows","map","id","startsWith","efforts","Number","fixedColumnsWithIds","col","toLowerCase","replace","order","nonDuplicateEffortColumns","effortCol","some","fixedCol","allColumns","sort","a","b","_jsxs","Box","sx","justifyContent","mb","Button","color","startIcon","AddIcon","onClick","handleAddRow","newRow","Date","now","feature","detail","description","notes","itReq","uxUi","size","mr","alignItems","TextField","placeholder","onChange","e","target","minWidth","handleAddColumn","trim","newColumn","disabled","TableContainer","Paper","maxHeight","overflow","Table","stickyHeader","TableHead","TableRow","TableCell","width","DragHandleIcon","cursor","opacity","IconButton","columnId","updatedColumns","saveColumnName","SaveIcon","fontSize","CancelIcon","Typography","ml","startEditingColumn","currentName","p","EditIcon","columnToDelete","find","_ref2","_ref3","_","restEfforts","_toPropertyKey","handleDeleteColumn","DeleteIcon","TableBody","slice","rowIndex","hover","_row$efforts2","isEffortColumn","console","log","isSubtotalColumn","type","fullWidth","inputProps","min","step","fontWeight","sum","_row$efforts3","multiline","maxRows","Tooltip","title","handleDeleteRow","TableFooter","colSpan","align","columnKey","_row$efforts","rowSum","_row$efforts4","backgroundColor","_row$efforts5","TablePagination","rowsPerPageOptions","count","onPageChange","handleChangePage","event","newPage","onRowsPerPageChange","parseInt","labelRowsPerPage","labelDisplayedRows","_ref4","from","to","DEFAULT_ROLES","rates","onRatesChange","newRole","setNewRole","customRole","setCustomRole","handleRateChange","updatedRates","rate","calculateTotalHours","hours","unit","FormControl","InputLabel","Select","label","MenuItem","roleToAdd","alert","newRate","Intl","NumberFormat","currency","format","DEFAULT_EFFORT_COLUMNS","DEFAULT_TM_RATES","mode","onModeChange","onEstimationDataChange","initialData","fixedPriceRows","setFixedPriceRows","setEffortColumns","tmRates","setTmRates","snackbar","setSnackbar","open","message","severity","useEffect","mappedRows","item","Math","random","toString","substr","note","createNewRow","handleFixedPriceDataChange","columns","handleCloseSnackbar","mt","gutterBottom","elevation","border","borderRadius","FormLabel","RadioGroup","newMode","FormControlLabel","control","Radio","Divider","my","FixedPriceTable","TimeAndMaterialTable","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","Alert","_newQuotation$totalAm","onSave","customers","deals","requirements","templates","activeStep","setActiveStep","touched","setTouched","estimationMode","setEstimationMode","newQuotation","setNewQuotation","customer","dealId","dealName","requirementId","requirementName","status","createdDate","toISOString","split","items","totalEffort","totalAmount","templateId","templateName","filteredDeals","setFilteredDeals","filteredRequirements","setFilteredRequirements","estimationItems","setEstimationItems","deal","req","selectedRequirement","features","frontendEffort","backendEffort","qcEffort","pmEffort","totalMD","totalMM","handleItemsChange","updatedItems","Dialog","maxWidth","DialogTitle","DialogContent","Stepper","pt","pb","Step","StepLabel","bgcolor","TemplateIcon","required","error","labelId","selectedTemplate","t","prev","onBlur","template","FormHelperText","flexWrap","Autocomplete","handleCustomerChange","newValue","renderInput","params","flex","getOptionLabel","option","handleDealChange","r","handleRequirementChange","EstimationStep","data","convertedItems","val","estimationConfig","textAlign","pl","toLocaleString","fontStyle","DialogActions","handleBack","prevStep","handleNext","endIcon","NextIcon","handleSave","onItemsChange","readOnly","disableFeatureFields","tableItems","setTableItems","handleValueChange","updatedItem","includes","totalFE","totalBE","totalQC","totalPM","newItem","max","overflowX","tableLayout","position","left","zIndex","arrow","placement","whiteSpace","wordBreak","toFixed","quotation","statusInfo","draft","sent","approved","rejected","Chip","getStatusChip","amount","EstimationTable","executiveSummary","_Fragment","PdfIcon","EmailIcon","onSaveDraft","onExportPdf","pages","setPages","customPages","Array","isArray","toLocaleDateString","total","join","paymentTerms","height","PdfPageEditor","initialContent","updatedPages","handleSaveDraft","updatedQuotation","quotations","totalCount","onViewDetail","onDownloadPdf","onSendEmail","ViewIcon","onSend","customerName","serviceName","responsiblePerson","pdfFileName","emailData","setEmailData","cc","subject","content","handleChange","CloseIcon","dividers","window","PreviewIcon","SendIcon","handleSend","loading","onUploadClick","onViewTemplate","onDeleteTemplate","onDownloadTemplate","isDefault","createdAt","createdBy","placeholderCount","VisibilityIcon","FileDownloadIcon","onSubmit","setValues","file","extractedFields","setLoading","analyzing","setAnalyzing","setExtractedFields","handleUpdatePlaceholder","updatedFields","handleClose","async","preventDefault","gridTemplateColumns","xs","md","accept","_e$target$files","files","endsWith","setTimeout","mockExtractedFields","originalText","example","htmlFor","UploadIcon","py","CircularProgress","splice","borderTop","borderColor","fakeCustomers","fakeDeals","fakeRequirements","generateFakeQuotations","i","floor","statusOptions","QuotationManagement","currentTab","setCurrentTab","searchTerm","setSearchTerm","customerFilter","setCustomerFilter","statusFilter","setStatusFilter","setTemplates","uploadDialogOpen","setUploadDialogOpen","setSelectedTemplate","setQuotations","createDialogOpen","setCreateDialogOpen","detailDialogOpen","setDetailDialogOpen","selectedQuotation","setSelectedQuotation","previewDialogOpen","setPreviewDialogOpen","emailDialogOpen","setEmailDialogOpen","emailQuotation","setEmailQuotation","updatedAt","filteredQuotations","q","matchesSearch","matchesCustomer","matchesStatus","paginatedQuotations","EmailQuotationDialog","updatedQuotations","handleCreateQuotation","borderBottom","Tabs","handleTabChange","_event","Tab","QuotationTemplates","handleOpenUploadDialog","UploadQuoteTemplate","handleCloseUploadDialog","Promise","resolve","newTemplate","InputProps","startAdornment","SearchIcon","handleCustomerFilterChange","ExportIcon","QuotationList","handlePageChange","QuotationForm","handleCloseCreateDialog","QuotationDetail","QuotationPreview","onEdit"],"sourceRoot":""}