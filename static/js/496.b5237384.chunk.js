"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[496],{24341:(e,l,t)=>{t.d(l,{A:()=>S});var r=t(89379),a=t(65043),n=t(60267),s=t(53969),i=t(55895),o=t(83759),d=t(29651),c=t(41859),u=t(17873),x=t(52956),h=t(24343),p=t(33699),m=t(70298),A=t(94527),j=t(95315),v=t(57401),b=t(66185),y=t(38865),g=t(24244),f=t(3555),w=t(78916),C=t(63745),k=t(70579);const S=e=>{var l,t;let{entity:S,availableFilters:z,owners:I,statuses:P,savedViews:W,currency:L="\u20ab",onQueryChange:X,onViewChange:R,sticky:O=!0}=e;const D=(0,n.A)(),[M,E]=(0,a.useState)("all"),[T,H]=(0,a.useState)({ownerIds:[],leadStatus:[]}),[B,N]=(0,a.useState)(null),[V,F]=(0,a.useState)(null),[K,Q]=(0,a.useState)({}),[_,q]=(0,a.useState)({}),U=(e,l)=>{F(l.currentTarget),N(e),Q(l=>(0,r.A)((0,r.A)({},l),{},{[e]:""}))},Y=()=>{N(null),F(null),q({})},G=e=>{const l=T.ownerIds.includes(e)?T.ownerIds.filter(l=>l!==e):[...T.ownerIds,e],t=(0,r.A)((0,r.A)({},T),{},{ownerIds:l});H(t),X(t)},J=I.filter(e=>e.name.toLowerCase().includes((K.owner||"").toLowerCase())||e.email.toLowerCase().includes((K.owner||"").toLowerCase())),Z=(()=>{const e=[];if(T.ownerIds.forEach(l=>{const t=I.find(e=>e.id===l);t&&e.push({type:"owner",value:l,label:t.name,avatar:t.avatar})}),T.leadStatus.forEach(l=>{const t=P.find(e=>e.value===l);t&&e.push({type:"status",value:l,label:t.label,color:t.color})}),z.forEach(l=>{if("date"===l.type){const t=l.fieldName||l.id,r=T[t];r&&e.push({type:t,label:"".concat(l.label,": ").concat(r.preset||"Custom range")})}}),T.amount){const{min:l,max:t}=T.amount;let r="Amount: ";l&&t?r+="".concat(l).concat(L," - ").concat(t).concat(L):l?r+="\u2265 ".concat(l).concat(L):t&&(r+="\u2264 ".concat(t).concat(L)),e.push({type:"amount",label:r})}return e})(),$=Z.length>0;return(0,k.jsxs)(s.A,{sx:{position:O?"sticky":"relative",top:O?0:"auto",zIndex:10,backgroundColor:D.palette.background.paper,borderBottom:"1px solid ".concat(D.palette.divider),py:2,px:1,mb:2},children:[(0,k.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,k.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mr:1},children:"View:"}),W.map(e=>(0,k.jsx)(o.A,{label:"".concat(e.label).concat(e.count?" (".concat(e.count,")"):""),variant:M===e.id?"filled":"outlined",color:M===e.id?"primary":"default",size:"small",onClick:()=>{return l=e.id,E(l),void R(l);var l},sx:{cursor:"pointer","&:hover":{backgroundColor:M===e.id?(0,d.X4)(D.palette.primary.main,.8):(0,d.X4)(D.palette.primary.main,.1)}}},e.id))]}),(0,k.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:$?2:0},children:[z.filter(e=>e.enabled).map(e=>{const l=e.fieldName||e.id,t="owner"===e.type&&T.ownerIds.length>0||"status"===e.type&&T.leadStatus.length>0||"date"===e.type&&T[l]||"amount"===e.type&&T.amount;return(0,k.jsx)(o.A,{icon:e.icon,label:e.label,variant:t?"filled":"outlined",color:t?"primary":"default",size:"small",onClick:l=>U(e.id,l),deleteIcon:(0,k.jsx)(f.A,{}),onDelete:l=>U(e.id,l),sx:{cursor:"pointer","& .MuiChip-deleteIcon":{fontSize:"16px",ml:.5},"&:hover":{backgroundColor:t?(0,d.X4)(D.palette.primary.main,.8):(0,d.X4)(D.palette.primary.main,.1)}}},e.id)}),$&&(0,k.jsx)(c.A,{size:"small",startIcon:(0,k.jsx)(w.A,{}),onClick:()=>{const e={ownerIds:[],leadStatus:[]};H(e),X(e)},sx:{ml:1},children:"Clear all"})]}),$&&(0,k.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,k.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mr:1},children:"Applied:"}),Z.map((e,l)=>(0,k.jsx)(o.A,(0,r.A)((0,r.A)({},e.avatar?{avatar:(0,k.jsx)(u.A,{src:e.avatar,sx:{width:20,height:20}})}:{}),{},{label:e.label,size:"small",onDelete:()=>((e,l)=>{let t=(0,r.A)({},T);"owner"===e?l&&(t.ownerIds=t.ownerIds.filter(e=>e!==l)):"status"===e?l&&(t.leadStatus=t.leadStatus.filter(e=>e!==l)):"amount"===e?delete t.amount:delete t[e],H(t),X(t)})(e.type,e.value),sx:{backgroundColor:e.color?(0,d.X4)(e.color,.1):(0,d.X4)(D.palette.primary.main,.1),color:e.color||D.palette.primary.main,border:e.color?"1px solid ".concat((0,d.X4)(e.color,.3)):"1px solid ".concat((0,d.X4)(D.palette.primary.main,.3)),"& .MuiChip-deleteIcon":{color:e.color||D.palette.primary.main,"&:hover":{color:D.palette.error.main}}}}),"".concat(e.type,"-").concat(e.value||l)))]}),(0,k.jsx)(x.Ay,{open:"owner"===B,anchorEl:V,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:350,maxHeight:400,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,k.jsxs)(s.A,{sx:{p:2},children:[(0,k.jsx)(h.A,{fullWidth:!0,size:"small",placeholder:"Search owners...",value:K.owner||"",onChange:e=>Q(l=>(0,r.A)((0,r.A)({},l),{},{owner:e.target.value})),InputProps:{startAdornment:(0,k.jsx)(p.A,{position:"start",children:(0,k.jsx)(C.A,{fontSize:"small"})})},sx:{mb:2}}),(0,k.jsxs)(s.A,{sx:{mb:2},children:[(0,k.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Quick select:"}),(0,k.jsxs)(m.A,{direction:"row",spacing:1,children:[(0,k.jsx)(o.A,{label:"Me",size:"small",variant:"outlined",onClick:()=>G("current-user"),sx:{cursor:"pointer"}}),(0,k.jsx)(o.A,{label:"Unassigned",size:"small",variant:"outlined",onClick:()=>G("unassigned"),sx:{cursor:"pointer"}})]})]}),(0,k.jsx)(A.A,{sx:{mb:1}}),(0,k.jsx)(j.A,{sx:{maxHeight:200,overflow:"auto"},children:0===J.length?(0,k.jsx)(v.Ay,{children:(0,k.jsx)(b.A,{primary:"No results found",primaryTypographyProps:{color:"text.secondary",variant:"body2"}})}):J.map(e=>(0,k.jsxs)(v.Ay,{dense:!0,sx:{cursor:"pointer",borderRadius:1},onClick:()=>G(e.id),children:[(0,k.jsx)(y.A,{checked:T.ownerIds.includes(e.id),size:"small",sx:{mr:1}}),(0,k.jsx)(g.A,{children:(0,k.jsx)(u.A,{src:e.avatar,sx:{width:32,height:32},children:e.name.charAt(0)})}),(0,k.jsx)(b.A,{primary:e.name,secondary:e.email,primaryTypographyProps:{fontWeight:"medium",fontSize:"0.875rem"},secondaryTypographyProps:{fontSize:"0.75rem"}})]},e.id))})]})}),(0,k.jsx)(x.Ay,{open:z.some(e=>"date"===e.type&&B===e.id),anchorEl:V,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:280,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,k.jsxs)(s.A,{sx:{p:2},children:[(0,k.jsx)(i.A,{variant:"subtitle2",sx:{mb:2},children:(null===(l=z.find(e=>e.id===B))||void 0===l?void 0:l.label)||"Date Filter"}),(0,k.jsx)(j.A,{children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last7days",label:"Last 7 days"},{value:"last30days",label:"Last 30 days"},{value:"thismonth",label:"This month"},{value:"lastmonth",label:"Last month"},{value:"custom",label:"Custom range"}].map(e=>(0,k.jsx)(v.Ay,{dense:!0,sx:{cursor:"pointer",borderRadius:1},onClick:()=>((e,l)=>{const t=z.find(l=>l.id===e),a=(null===t||void 0===t?void 0:t.fieldName)||e,n=(0,r.A)((0,r.A)({},T),{},{[a]:{preset:l}});H(n),X(n),Y()})(B,e.value),children:(0,k.jsx)(b.A,{primary:e.label})},e.value))})]})}),(0,k.jsx)(x.Ay,{open:z.some(e=>"status"===e.type&&B===e.id),anchorEl:V,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:300,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,k.jsxs)(s.A,{sx:{p:2},children:[(0,k.jsx)(i.A,{variant:"subtitle2",sx:{mb:2},children:(null===(t=z.find(e=>e.id===B))||void 0===t?void 0:t.label)||"Status Filter"}),(0,k.jsx)(j.A,{children:P.map(e=>(0,k.jsxs)(v.Ay,{dense:!0,sx:{cursor:"pointer",borderRadius:1},onClick:()=>(e=>{const l=T.leadStatus.includes(e)?T.leadStatus.filter(l=>l!==e):[...T.leadStatus,e],t=(0,r.A)((0,r.A)({},T),{},{leadStatus:l});H(t),X(t)})(e.value),children:[(0,k.jsx)(y.A,{checked:T.leadStatus.includes(e.value),size:"small",sx:{mr:1}}),(0,k.jsx)(o.A,{label:e.label,size:"small",sx:{backgroundColor:(0,d.X4)(e.color,.1),color:e.color,border:"1px solid ".concat((0,d.X4)(e.color,.3))}})]},e.value))})]})}),(0,k.jsx)(x.Ay,{open:"amount"===B,anchorEl:V,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:320,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,k.jsxs)(s.A,{sx:{p:2},children:[(0,k.jsx)(i.A,{variant:"subtitle2",sx:{mb:2},children:"Amount Range"}),(0,k.jsxs)(s.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,k.jsx)(h.A,{label:"Min",type:"number",size:"small",value:_.min||"",onChange:e=>q(l=>(0,r.A)((0,r.A)({},l),{},{min:e.target.value?Number(e.target.value):void 0})),InputProps:{endAdornment:(0,k.jsx)(p.A,{position:"end",children:L})}}),(0,k.jsx)(h.A,{label:"Max",type:"number",size:"small",value:_.max||"",onChange:e=>q(l=>(0,r.A)((0,r.A)({},l),{},{max:e.target.value?Number(e.target.value):void 0})),InputProps:{endAdornment:(0,k.jsx)(p.A,{position:"end",children:L})}})]}),(0,k.jsxs)(s.A,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,k.jsx)(c.A,{size:"small",onClick:Y,children:"Cancel"}),(0,k.jsx)(c.A,{size:"small",variant:"contained",onClick:()=>{const{min:e,max:l}=_;if(void 0!==e||void 0!==l){const t=(0,r.A)((0,r.A)({},T),{},{amount:{min:e,max:l,currency:L}});H(t),X(t)}Y()},disabled:!_.min&&!_.max,children:"Apply"})]})]})})]})}},95220:(e,l,t)=>{t.d(l,{A:()=>se});var r=t(65043),a=t(60267),n=t(53969),s=t(55895),i=t(26529),o=t(42579),d=t(29651),c=t(83759),u=t(17873),x=t(10256),h=t(67203),p=t(47471),m=t(24343),A=t(73849),j=t(28259),v=t(94799),b=t(87443),y=t(10756),g=t(86172),f=t(81341),w=t(34375),C=t(91449),k=t(33699),S=t(41859),z=t(38865),I=t(56465),P=t(4395),W=t(94527),L=t(52956),X=t(95315),R=t(57401),O=t(24244),D=t(66185),M=t(3353),E=t(78403),T=t(38517),H=t(81911),B=t(78776),N=t(85877),V=t(4573),F=t(23241),K=t(53974),Q=t(73069),_=t(90160),q=t(87195),U=t(70923),Y=t(63745),G=t(70579);const J=e=>{let{open:l,column:t,value:i,rowData:o,users:c=[],onSave:A,onClose:j}=e;const v=(0,a.A)(),[b,y]=(0,r.useState)(i),[g,f]=(0,r.useState)(null),[w,z]=(0,r.useState)(!1),[I,P]=(0,r.useState)("");(0,r.useEffect)(()=>{l&&(y(i),f(null),P(""))},[l,i]);const W=c.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())||e.email.toLowerCase().includes(I.toLowerCase())),L=()=>{switch(t.type){case"email":return(0,G.jsx)(V.A,{fontSize:"small"});case"phone":return(0,G.jsx)(F.A,{fontSize:"small"});case"currency":return(0,G.jsx)(K.A,{fontSize:"small"});case"date":return(0,G.jsx)(Q.A,{fontSize:"small"});case"userSelect":return(0,G.jsx)(_.A,{fontSize:"small"});case"select":return(0,G.jsx)(q.A,{fontSize:"small"});default:return(0,G.jsx)(U.A,{fontSize:"small"})}};return(0,G.jsxs)(T.A,{open:l,onClose:j,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,G.jsx)(H.A,{sx:{pb:1,pt:2},children:(0,G.jsxs)(s.A,{variant:"subtitle1",sx:{fontWeight:600},children:["Ch\u1ec9nh s\u1eeda cho ",o.name||o.id]})}),(0,G.jsxs)(B.A,{sx:{pt:3,pb:2,px:3},children:[(0,G.jsx)(n.A,{sx:{mt:1},children:(()=>{var e;switch(t.type){case"select":return(0,G.jsxs)(x.A,{fullWidth:!0,variant:"standard",children:[(0,G.jsx)(M.A,{children:t.label}),(0,G.jsx)(h.A,{value:b||"",onChange:e=>y(e.target.value),children:null===(e=t.options)||void 0===e?void 0:e.map(e=>(0,G.jsx)(p.A,{value:e.value,children:(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.color&&(0,G.jsx)(n.A,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:e.color}}),e.label]})},e.value))})]});case"userSelect":return(0,G.jsxs)(n.A,{children:[(0,G.jsx)(m.A,{fullWidth:!0,label:"T\xecm ki\u1ebfm ng\u01b0\u1eddi d\xf9ng",value:I,onChange:e=>P(e.target.value),InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:(0,G.jsx)(Y.A,{fontSize:"small"})})},sx:{mb:2}}),(0,G.jsx)(n.A,{sx:{maxHeight:200,overflow:"auto"},children:(0,G.jsxs)(X.A,{dense:!0,children:[W.map(e=>(0,G.jsx)(R.Ay,{sx:{p:0,mb:.5},children:(0,G.jsxs)(E.A,{selected:b===e.id,onClick:()=>y(e.id),sx:{borderRadius:1,"&.Mui-selected":{backgroundColor:(0,d.X4)(v.palette.primary.main,.1),"&:hover":{backgroundColor:(0,d.X4)(v.palette.primary.main,.2)}}},children:[(0,G.jsx)(O.A,{children:(0,G.jsx)(u.A,{sx:{width:32,height:32},src:e.avatar,children:e.name.charAt(0)})}),(0,G.jsx)(D.A,{primary:e.name,secondary:e.email,primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}})]})},e.id)),0===W.length&&(0,G.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{p:2,textAlign:"center"},children:"Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi d\xf9ng n\xe0o"})]})})]});case"date":return(0,G.jsx)(m.A,{fullWidth:!0,type:"date",label:t.label,value:b||"",onChange:e=>y(e.target.value),InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:L()})}});case"number":case"currency":return(0,G.jsx)(m.A,{fullWidth:!0,type:"number",label:t.label,value:b||"",onChange:e=>y(e.target.value),InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:L()}),endAdornment:"currency"===t.type?(0,G.jsx)(k.A,{position:"end",children:"\u20ab"}):void 0}});case"email":return(0,G.jsx)(m.A,{fullWidth:!0,type:"email",label:t.label,value:b||"",onChange:e=>y(e.target.value),InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:(0,G.jsx)(V.A,{fontSize:"small"})})}});case"phone":return(0,G.jsx)(m.A,{fullWidth:!0,type:"tel",label:t.label,value:b||"",onChange:e=>y(e.target.value),InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:(0,G.jsx)(F.A,{fontSize:"small"})})}});default:return(0,G.jsx)(m.A,{fullWidth:!0,label:t.label,value:b||"",onChange:e=>y(e.target.value),multiline:"text"===t.type&&"description"===t.id,rows:"description"===t.id?3:1,InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:L()})}})}})()}),g&&(0,G.jsx)(C.A,{severity:"error",sx:{mt:2},children:g}),"email"===t.type&&(0,G.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"V\xed d\u1ee5: example@company.com"}),"phone"===t.type&&(0,G.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"V\xed d\u1ee5: 0901234567 (10-11 s\u1ed1)"})]}),(0,G.jsxs)(N.A,{sx:{px:2,pb:2,pt:1},children:[(0,G.jsx)(S.A,{onClick:()=>{y(i),f(null),j()},size:"small",children:"H\u1ee7y"}),(0,G.jsx)(S.A,{onClick:async()=>{const e=(l=b,!t.required||l&&""!==l.toString().trim()?t.validate?t.validate(l):null:"".concat(t.label," l\xe0 b\u1eaft bu\u1ed9c"));var l;if(e)f(e);else{z(!0),f(null);try{await A(b)?j():f("Kh\xf4ng th\u1ec3 l\u01b0u thay \u0111\u1ed5i. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(r){f("C\xf3 l\u1ed7i x\u1ea3y ra khi l\u01b0u d\u1eef li\u1ec7u.")}finally{z(!1)}}},variant:"contained",size:"small",disabled:w,children:w?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]})};var Z=t(3665),$=t(61773),ee=t(5362),le=t(40847),te=t(50311),re=t(45606),ae=t(12043),ne=t(22632);const se=e=>{let{columns:l,data:t,loading:x=!1,error:h,searchable:M=!0,filterable:E=!0,selectable:T=!0,pagination:H=!0,rowsPerPageOptions:B=[10,20,50],defaultRowsPerPage:N=10,emptyMessage:V="Ch\u01b0a c\xf3 d\u1eef li\u1ec7u",onRowDoubleClick:F,onCellEdit:K,onRowSelect:Q,onBulkAction:_,onPreviewContact:q,users:U=[],zebra:se=!0}=e;const ie=(0,a.A)(),[oe,de]=(0,r.useState)(""),[ce,ue]=(0,r.useState)({key:"",direction:null}),[xe,he]=(0,r.useState)([]),[pe,me]=(0,r.useState)(!1),[Ae,je]=(0,r.useState)(null),[ve,be]=(0,r.useState)(null),[ye,ge]=(0,r.useState)(null),[fe,we]=(0,r.useState)(null),[Ce,ke]=(0,r.useState)(""),[Se,ze]=(0,r.useState)(1),[Ie,Pe]=(0,r.useState)(N),[We,Le]=(0,r.useState)(l.map(e=>e.id)),[Xe,Re]=(0,r.useState)({}),Oe=((0,r.useRef)(null),(0,r.useMemo)(()=>{let e=t;return oe&&(e=e.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(oe.toLowerCase())))),ce.key&&ce.direction&&(e=[...e].sort((e,l)=>{const t=e[ce.key],r=l[ce.key];return t<r?"asc"===ce.direction?-1:1:t>r?"asc"===ce.direction?1:-1:0})),e},[t,oe,ce])),De=(0,r.useMemo)(()=>{if(!H)return Oe;const e=(Se-1)*Ie;return Oe.slice(e,e+Ie)},[Oe,Se,Ie,H]),Me=Math.ceil(Oe.length/Ie),Ee=async e=>{if(!Ae||!K)return!1;try{return await K(Ae.rowId,Ae.columnId,e)}catch(h){return console.error("Save error:",h),!1}},Te=()=>{me(!1),je(null)},He=(0,r.useMemo)(()=>Ce?U.filter(e=>e.name.toLowerCase().includes(Ce.toLowerCase())||e.email.toLowerCase().includes(Ce.toLowerCase())):U,[U,Ce]),Be=(e,l)=>{switch(e){case"sort-asc":ue({key:l,direction:"asc"});break;case"sort-desc":ue({key:l,direction:"desc"});break;case"hide":Le(e=>e.filter(e=>e!==l))}be(null)},Ne=(e,l)=>{var t;const r=e[l.id],a=(null===ye||void 0===ye?void 0:ye.rowId)===e.id&&(null===ye||void 0===ye?void 0:ye.columnId)===l.id;if("name"===l.id&&q)return(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onMouseEnter:()=>ge({rowId:e.id,columnId:l.id}),onMouseLeave:()=>ge(null),children:[(0,G.jsx)(s.A,{variant:"body2",sx:{flex:1,mr:1},children:r}),a&&(0,G.jsx)(i.A,{title:"Preview Contact",children:(0,G.jsx)(o.A,{size:"small",onClick:l=>{l.stopPropagation(),q(e)},sx:{opacity:.7,"&:hover":{opacity:1,backgroundColor:(0,d.X4)(ie.palette.primary.main,.1)}},children:(0,G.jsx)(Z.A,{fontSize:"small"})})})]});switch(l.type){case"select":const e=null===(t=l.options)||void 0===t?void 0:t.find(e=>e.value===r);return e?(0,G.jsx)(c.A,{label:e.label,size:"small",sx:{backgroundColor:e.color?(0,d.X4)(e.color,.1):void 0,color:e.color,border:e.color?"1px solid ".concat((0,d.X4)(e.color,.3)):void 0}}):r;case"userSelect":const a=U.find(e=>e.id===r);return a?(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,G.jsx)(u.A,{sx:{width:24,height:24},src:a.avatar,children:a.name.charAt(0)}),(0,G.jsx)(s.A,{variant:"body2",children:a.name})]}):r;case"currency":return l.format?l.format(r):"".concat(r,"\u20ab");case"actions":return(0,G.jsxs)(n.A,{sx:{display:"flex",gap:.5},children:[(0,G.jsx)(o.A,{size:"small",children:(0,G.jsx)($.A,{fontSize:"small"})}),(0,G.jsx)(o.A,{size:"small",color:"error",children:(0,G.jsx)(ee.A,{fontSize:"small"})})]});default:return l.format?l.format(r):r}};return x?(0,G.jsxs)(n.A,{children:[(0,G.jsxs)(n.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,G.jsx)(A.A,{variant:"rectangular",width:200,height:40}),(0,G.jsx)(A.A,{variant:"rectangular",width:100,height:40}),(0,G.jsx)(A.A,{variant:"rectangular",width:100,height:40})]}),(0,G.jsx)(j.A,{component:v.A,children:(0,G.jsxs)(b.A,{children:[(0,G.jsx)(y.A,{children:(0,G.jsx)(g.A,{children:l.map(e=>(0,G.jsx)(f.A,{children:(0,G.jsx)(A.A,{variant:"text"})},e.id))})}),(0,G.jsx)(w.A,{children:Array.from({length:5}).map((e,t)=>(0,G.jsx)(g.A,{children:l.map(e=>(0,G.jsx)(f.A,{children:(0,G.jsx)(A.A,{variant:"text"})},e.id))},t))})]})})]}):(0,G.jsxs)(n.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[h&&(0,G.jsx)(C.A,{severity:"error",sx:{mb:2},children:h}),(0,G.jsxs)(n.A,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap",alignItems:"center",flexShrink:0,px:1},children:[M&&(0,G.jsx)(m.A,{placeholder:"Search...",size:"small",value:oe,onChange:e=>de(e.target.value),InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:(0,G.jsx)(Y.A,{})})},sx:{minWidth:200}}),E&&(0,G.jsx)(S.A,{variant:"outlined",startIcon:(0,G.jsx)(le.A,{}),size:"small",children:"Filters"}),(0,G.jsx)(n.A,{sx:{ml:"auto",display:"flex",alignItems:"center",gap:2,flexShrink:0},children:(0,G.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:[Oe.length," rows"]})})]}),xe.length>0&&(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,mb:2,backgroundColor:(0,d.X4)(ie.palette.primary.main,.1),borderRadius:1},children:[(0,G.jsxs)(s.A,{variant:"body2",children:[xe.length," selected"]}),(0,G.jsx)(S.A,{size:"small",onClick:()=>null===_||void 0===_?void 0:_("delete",xe),children:"Delete"}),(0,G.jsx)(S.A,{size:"small",onClick:()=>null===_||void 0===_?void 0:_("assign",xe),children:"Assign Owner"})]}),(0,G.jsx)(n.A,{sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,G.jsx)(j.A,{component:v.A,sx:{flex:1,width:"100%",overflow:"auto","&::-webkit-scrollbar":{height:"8px",width:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:(0,d.X4)(ie.palette.grey[300],.2),borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:(0,d.X4)(ie.palette.primary.main,.4),borderRadius:"4px",border:"2px solid transparent",backgroundClip:"padding-box","&:hover":{backgroundColor:(0,d.X4)(ie.palette.primary.main,.6)}},"&::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},children:(0,G.jsxs)(b.A,{stickyHeader:!0,sx:{minWidth:1650,width:"100%",tableLayout:"fixed"},children:[(0,G.jsx)(y.A,{children:(0,G.jsxs)(g.A,{children:[T&&(0,G.jsx)(f.A,{padding:"checkbox",sx:{minWidth:50},children:(0,G.jsx)(z.A,{indeterminate:xe.length>0&&xe.length<De.length,checked:De.length>0&&xe.length===De.length,onChange:()=>{const e=De.map(e=>e.id),l=xe.length===e.length?[]:e;he(l),null===Q||void 0===Q||Q(l)}})}),l.filter(e=>We.includes(e.id)).map(e=>(0,G.jsx)(f.A,{sx:{minWidth:e.width||e.minWidth||150,cursor:e.sortable?"pointer":"default",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>(e=>{const t=l.find(l=>l.id===e);null!==t&&void 0!==t&&t.sortable&&ue(l=>l.key!==e?{key:e,direction:"asc"}:"asc"===l.direction?{key:e,direction:"desc"}:"desc"===l.direction?{key:"",direction:null}:{key:e,direction:"asc"})})(e.id),children:(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,G.jsx)(s.A,{variant:"subtitle2",fontWeight:"bold",children:e.label}),e.sortable&&ce.key===e.id&&("asc"===ce.direction?(0,G.jsx)(te.A,{fontSize:"small"}):(0,G.jsx)(re.A,{fontSize:"small"})),(0,G.jsx)(o.A,{size:"small",onClick:l=>{return t=l,r=e.id,t.stopPropagation(),void be({element:t.currentTarget,columnId:r});var t,r},sx:{ml:"auto"},children:(0,G.jsx)(ae.A,{fontSize:"small"})})]})},e.id))]})}),(0,G.jsx)(w.A,{children:0===De.length?(0,G.jsx)(g.A,{children:(0,G.jsx)(f.A,{colSpan:l.length+(T?1:0),sx:{textAlign:"center",py:8},children:(0,G.jsx)(s.A,{variant:"body1",color:"text.secondary",children:V})})}):De.map((e,t)=>(0,G.jsxs)(g.A,{hover:!0,selected:xe.includes(e.id),onDoubleClick:()=>null===F||void 0===F?void 0:F(e),sx:{cursor:F?"pointer":"default",backgroundColor:se&&t%2===1?(0,d.X4)(ie.palette.primary.main,.04):"transparent"},children:[T&&(0,G.jsx)(f.A,{padding:"checkbox",sx:{minWidth:50},children:(0,G.jsx)(z.A,{checked:xe.includes(e.id),onChange:()=>(e=>{const l=xe.includes(e)?xe.filter(l=>l!==e):[...xe,e];he(l),null===Q||void 0===Q||Q(l)})(e.id)})}),l.filter(e=>We.includes(e.id)).map(l=>(0,G.jsx)(f.A,{"data-cell":"".concat(e.id,"-").concat(l.id),onClick:()=>((e,l)=>{l.editable&&"actions"!==l.type&&(je({rowId:e.id,columnId:l.id,value:e[l.id],rowData:e}),me(!0))})(e,l),sx:{minWidth:l.width||l.minWidth||150,cursor:l.editable?"pointer":"default",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":l.editable?{backgroundColor:(0,d.X4)(ie.palette.primary.main,.04)}:{}},children:Ne(e,l)},l.id))]},e.id))})]})})}),H&&Me>1&&(0,G.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:2,py:2,px:1,flexShrink:0,borderTop:"1px solid ".concat(ie.palette.divider)},children:(0,G.jsx)(I.A,{count:Me,page:Se,onChange:(e,l)=>ze(l),color:"primary",size:"medium",showFirstButton:!0,showLastButton:!0})}),(0,G.jsxs)(P.A,{anchorEl:null===ve||void 0===ve?void 0:ve.element,open:Boolean(ve),onClose:()=>be(null),children:[(0,G.jsxs)(p.A,{onClick:()=>Be("sort-asc",ve.columnId),children:[(0,G.jsx)(te.A,{fontSize:"small",sx:{mr:1}}),"Sort Ascending"]}),(0,G.jsxs)(p.A,{onClick:()=>Be("sort-desc",ve.columnId),children:[(0,G.jsx)(re.A,{fontSize:"small",sx:{mr:1}}),"Sort Descending"]}),(0,G.jsx)(W.A,{}),(0,G.jsxs)(p.A,{onClick:()=>Be("hide",ve.columnId),children:[(0,G.jsx)(ne.A,{fontSize:"small",sx:{mr:1}}),"Hide Column"]})]}),(0,G.jsx)(L.Ay,{open:Boolean(fe),anchorEl:null===fe||void 0===fe?void 0:fe.element,onClose:()=>{we(null),ke("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,G.jsxs)(n.A,{sx:{width:300,maxHeight:400},children:[(0,G.jsx)(n.A,{sx:{p:2,borderBottom:"1px solid ".concat(ie.palette.divider)},children:(0,G.jsx)(m.A,{fullWidth:!0,size:"small",placeholder:"Search users...",value:Ce,onChange:e=>ke(e.target.value),InputProps:{startAdornment:(0,G.jsx)(k.A,{position:"start",children:(0,G.jsx)(Y.A,{})})}})}),(0,G.jsx)(X.A,{sx:{maxHeight:300,overflow:"auto"},children:He.map(e=>(0,G.jsxs)(R.Ay,{component:"div",sx:{cursor:"pointer"},onClick:()=>(e=>{if(!fe||!K)return;U.find(l=>l.id===e)&&K(fe.rowId,fe.columnId,e),we(null),ke("")})(e.id),children:[(0,G.jsx)(O.A,{children:(0,G.jsx)(u.A,{src:e.avatar,sx:{width:32,height:32},children:e.name.charAt(0)})}),(0,G.jsx)(D.A,{primary:e.name,secondary:e.email,primaryTypographyProps:{fontWeight:"bold"}})]},e.id))})]})}),Ae&&(0,G.jsx)(J,{open:pe,column:l.find(e=>e.id===Ae.columnId&&"actions"!==e.type),value:Ae.value,rowData:Ae.rowData,users:U,onSave:Ee,onClose:Te})]})}}}]);
//# sourceMappingURL=496.b5237384.chunk.js.map