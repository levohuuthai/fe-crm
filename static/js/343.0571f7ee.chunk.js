"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[343],{49343:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var o=a(89379),i=a(65043),l=a(60267),n=a(40405),r=a(53969),s=a(55895),c=a(29651),d=a(95220),m=a(24341),u=a(90160),p=a(63898),b=a(82518),h=a(53974),g=a(87195),y=a(70579);const x=[{id:"1",name:"Tr\u1ea7n Th\u1ecb B",email:"tran.b@company.com",avatar:"/avatars/tran.jpg"},{id:"2",name:"Ph\u1ea1m V\u0103n C",email:"pham.c@company.com",avatar:"/avatars/pham.jpg"},{id:"3",name:"Nguy\u1ec5n Th\u1ecb D",email:"nguyen.d@company.com",avatar:"/avatars/nguyen.jpg"},{id:"4",name:"L\xea V\u0103n E",email:"le.e@company.com",avatar:"/avatars/le.jpg"},{id:"5",name:"Ho\xe0ng Th\u1ecb F",email:"hoang.f@company.com",avatar:"/avatars/hoang.jpg"}],v=[{value:"prospecting",label:"Prospecting",color:"#2196f3"},{value:"qualification",label:"Qualification",color:"#ff9800"},{value:"proposal",label:"Proposal",color:"#9c27b0"},{value:"negotiation",label:"Negotiation",color:"#f44336"},{value:"closed-won",label:"Closed Won",color:"#4caf50"},{value:"closed-lost",label:"Closed Lost",color:"#9e9e9e"}],f=[{id:"dealName",label:"T\xean Deal",type:"text",width:250,sortable:!0,editable:!0,required:!0},{id:"customer",label:"Kh\xe1ch h\xe0ng",type:"text",width:200,sortable:!0,editable:!0,required:!0},{id:"amount",label:"Gi\xe1 tr\u1ecb",type:"currency",width:150,sortable:!0,editable:!0,required:!0,format:e=>e>=1e9?"".concat((e/1e9).toFixed(1),"B\u20ab"):e>=1e6?"".concat((e/1e6).toFixed(1),"M\u20ab"):e>=1e3?"".concat((e/1e3).toFixed(1),"K\u20ab"):"".concat(e,"\u20ab")},{id:"stage",label:"Giai \u0111o\u1ea1n",type:"select",width:150,sortable:!0,editable:!0,options:v},{id:"priority",label:"\u0110\u1ed9 \u01b0u ti\xean",type:"select",width:120,sortable:!0,editable:!0,options:[{value:"low",label:"Low",color:"#9e9e9e"},{value:"medium",label:"Medium",color:"#ff9800"},{value:"high",label:"High",color:"#f44336"},{value:"urgent",label:"Urgent",color:"#e91e63"}]},{id:"owner",label:"Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch",type:"userSelect",width:180,sortable:!0,editable:!0},{id:"probability",label:"X\xe1c su\u1ea5t (%)",type:"number",width:120,sortable:!0,editable:!0,validate:e=>{const t=Number(e);return t>=0&&t<=100?null:"X\xe1c su\u1ea5t ph\u1ea3i t\u1eeb 0-100%"},format:e=>"".concat(e,"%")},{id:"expectedCloseDate",label:"Ng\xe0y d\u1ef1 ki\u1ebfn \u0111\xf3ng",type:"date",width:150,sortable:!0,editable:!0},{id:"lastActivity",label:"Ho\u1ea1t \u0111\u1ed9ng cu\u1ed1i",type:"date",width:140,sortable:!0,editable:!0},{id:"actions",label:"Thao t\xe1c",type:"actions",width:100,sortable:!1,editable:!1}],w=[{id:"1",dealName:"H\u1ec7 th\u1ed1ng CRM cho ABC Corp",customer:"ABC Corporation",amount:5e8,stage:"proposal",priority:"high",owner:"1",probability:75,expectedCloseDate:"2024-02-15",lastActivity:"2024-01-15"},{id:"2",dealName:"Ph\u1ea7n m\u1ec1m qu\u1ea3n l\xfd kho XYZ",customer:"XYZ Trading",amount:3e8,stage:"negotiation",priority:"urgent",owner:"2",probability:85,expectedCloseDate:"2024-01-30",lastActivity:"2024-01-14"},{id:"3",dealName:"Gi\u1ea3i ph\xe1p Cloud cho Tech Solutions",customer:"Tech Solutions",amount:8e8,stage:"qualification",priority:"medium",owner:"3",probability:60,expectedCloseDate:"2024-03-20",lastActivity:"2024-01-12"},{id:"4",dealName:"App mobile cho Innovation Startup",customer:"Innovation Startup",amount:25e7,stage:"prospecting",priority:"low",owner:"1",probability:30,expectedCloseDate:"2024-04-10",lastActivity:"2024-01-10"},{id:"5",dealName:"ERP System cho Big Enterprise",customer:"Big Enterprise",amount:12e8,stage:"proposal",priority:"urgent",owner:"4",probability:70,expectedCloseDate:"2024-02-28",lastActivity:"2024-01-13"},{id:"6",dealName:"POS System cho Retail Chain",customer:"Retail Chain",amount:4e8,stage:"closed-won",priority:"high",owner:"2",probability:100,expectedCloseDate:"2024-01-20",lastActivity:"2024-01-16"},{id:"7",dealName:"Fintech Solution cho Financial Services",customer:"Financial Services",amount:6e8,stage:"negotiation",priority:"high",owner:"5",probability:80,expectedCloseDate:"2024-02-05",lastActivity:"2024-01-15"},{id:"8",dealName:"Healthcare Management System",customer:"Healthcare Group",amount:35e7,stage:"qualification",priority:"medium",owner:"3",probability:50,expectedCloseDate:"2024-03-15",lastActivity:"2024-01-11"},{id:"9",dealName:"E-commerce Platform cho Online Store",customer:"Online Store Ltd",amount:18e7,stage:"closed-lost",priority:"low",owner:"1",probability:0,expectedCloseDate:"2024-01-10",lastActivity:"2024-01-08"},{id:"10",dealName:"Digital Marketing Suite",customer:"Marketing Agency",amount:22e7,stage:"prospecting",priority:"medium",owner:"4",probability:25,expectedCloseDate:"2024-04-30",lastActivity:"2024-01-09"}],A=()=>{const e=(0,l.A)(),[t,a]=(0,i.useState)(w),[A,C]=(0,i.useState)(w),[j,S]=(0,i.useState)(!1),[N,D]=(0,i.useState)([]),[k,T]=(0,i.useState)("all"),F=[{id:"owner",label:"Contact owner",type:"owner",icon:(0,y.jsx)(u.A,{fontSize:"small"}),enabled:!0,fieldName:"owner"},{id:"expectedCloseDate",label:"Ng\xe0y d\u1ef1 ki\u1ebfn \u0111\xf3ng",type:"date",icon:(0,y.jsx)(p.A,{fontSize:"small"}),enabled:!0,fieldName:"expectedCloseDate"},{id:"lastActivity",label:"Ho\u1ea1t \u0111\u1ed9ng cu\u1ed1i",type:"date",icon:(0,y.jsx)(b.A,{fontSize:"small"}),enabled:!0,fieldName:"lastActivity"},{id:"amount",label:"Amount",type:"amount",icon:(0,y.jsx)(h.A,{fontSize:"small"}),enabled:!0,fieldName:"amount"},{id:"stage",label:"Stage",type:"status",icon:(0,y.jsx)(g.A,{fontSize:"small"}),enabled:!0,fieldName:"stage"}],X=[{id:"all",label:"All",count:w.length},{id:"my",label:"My deals",count:6},{id:"unassigned",label:"Unassigned",count:2}],H=x.map(e=>({id:e.id,name:e.name,email:e.email,avatar:e.avatar})),M=v.map(e=>({value:e.value,label:e.label,color:e.color})),R=t.reduce((e,t)=>e+(t.amount||0),0),P=t.filter(e=>"closed-won"===e.stage),B=P.reduce((e,t)=>e+(t.amount||0),0),q=t.filter(e=>!["closed-won","closed-lost"].includes(e.stage)),V=e=>e>=1e9?"".concat((e/1e9).toFixed(1),"B\u20ab"):e>=1e6?"".concat((e/1e6).toFixed(1),"M\u20ab"):e>=1e3?"".concat((e/1e3).toFixed(1),"K\u20ab"):"".concat(e,"\u20ab");return(0,y.jsx)(n.A,{in:!0,timeout:800,children:(0,y.jsxs)(r.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,y.jsxs)(r.A,{sx:{mb:3,flexShrink:0,px:1},children:[(0,y.jsx)(s.A,{variant:"h4",component:"h1",sx:{fontWeight:"bold",color:"text.primary",mb:1},children:"Qu\u1ea3n l\xfd C\u01a1 h\u1ed9i"}),(0,y.jsx)(s.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Theo d\xf5i v\xe0 qu\u1ea3n l\xfd c\xe1c c\u01a1 h\u1ed9i b\xe1n h\xe0ng t\u1eeb prospecting \u0111\u1ebfn closing"}),(0,y.jsxs)(r.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:2},children:[(0,y.jsxs)(r.A,{sx:{p:2,borderRadius:2,backgroundColor:(0,c.X4)(e.palette.primary.main,.1),border:"1px solid ".concat((0,c.X4)(e.palette.primary.main,.2))},children:[(0,y.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"T\u1ed5ng gi\xe1 tr\u1ecb"}),(0,y.jsx)(s.A,{variant:"h6",fontWeight:"bold",color:"primary",children:V(R)})]}),(0,y.jsxs)(r.A,{sx:{p:2,borderRadius:2,backgroundColor:(0,c.X4)(e.palette.success.main,.1),border:"1px solid ".concat((0,c.X4)(e.palette.success.main,.2))},children:[(0,y.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"\u0110\xe3 th\u1eafng"}),(0,y.jsx)(s.A,{variant:"h6",fontWeight:"bold",color:"success.main",children:V(B)})]}),(0,y.jsxs)(r.A,{sx:{p:2,borderRadius:2,backgroundColor:(0,c.X4)(e.palette.warning.main,.1),border:"1px solid ".concat((0,c.X4)(e.palette.warning.main,.2))},children:[(0,y.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"\u0110ang ho\u1ea1t \u0111\u1ed9ng"}),(0,y.jsxs)(s.A,{variant:"h6",fontWeight:"bold",color:"warning.main",children:[q.length," deals"]})]}),(0,y.jsxs)(r.A,{sx:{p:2,borderRadius:2,backgroundColor:(0,c.X4)(e.palette.info.main,.1),border:"1px solid ".concat((0,c.X4)(e.palette.info.main,.2))},children:[(0,y.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"T\u1ef7 l\u1ec7 th\u1eafng"}),(0,y.jsxs)(s.A,{variant:"h6",fontWeight:"bold",color:"info.main",children:[t.length>0?Math.round(P.length/t.length*100):0,"%"]})]})]})]}),(0,y.jsx)(m.A,{entity:"deals",availableFilters:F,owners:H,statuses:M,savedViews:X,currency:"\u20ab",onQueryChange:e=>{var a,o;let i=[...t];if(e.ownerIds.length>0&&(i=i.filter(t=>e.ownerIds.includes(t.owner)||e.ownerIds.includes("unassigned")&&!t.owner)),e.leadStatus.length>0&&(i=i.filter(t=>e.leadStatus.includes(t.stage))),e.amount){const{min:t,max:a}=e.amount;i=i.filter(e=>{const o=e.amount||0;return t&&a?o>=t&&o<=a:t?o>=t:!a||o<=a})}null!==(a=e.expectedCloseDate)&&void 0!==a&&a.preset&&console.log("Filtering by expected close date:",e.expectedCloseDate.preset),null!==(o=e.lastActivity)&&void 0!==o&&o.preset&&console.log("Filtering by last activity:",e.lastActivity.preset),C(i)},onViewChange:e=>{T(e);let a=[...t];switch(e){case"my":a=a.filter(e=>"1"===e.owner);break;case"unassigned":a=a.filter(e=>!e.owner);break;default:a=t}C(a)},sticky:!0}),(0,y.jsx)(r.A,{sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,y.jsx)(d.A,{columns:f,data:A,loading:j,searchable:!0,filterable:!1,selectable:!0,pagination:!0,defaultRowsPerPage:25,onRowSelect:D,onCellEdit:async(e,t,i)=>(S(!0),await new Promise(e=>setTimeout(e,1e3)),a(a=>a.map(a=>a.id===e?(0,o.A)((0,o.A)({},a),{},{[t]:i}):a)),C(a=>a.map(a=>a.id===e?(0,o.A)((0,o.A)({},a),{},{[t]:i}):a)),S(!1),!0),onRowDoubleClick:e=>{console.log("Open deal detail:",e)},onBulkAction:(e,t)=>{if(console.log("Bulk action:",e,t),"delete"===e)a(e=>e.filter(e=>!t.includes(e.id))),D([])},users:x,emptyMessage:"Ch\u01b0a c\xf3 c\u01a1 h\u1ed9i n\xe0o",zebra:!0})})]})})}},63898:(e,t,a)=>{a.d(t,{A:()=>l});var o=a(14057),i=a(70579);const l=(0,o.A)((0,i.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday")}}]);
//# sourceMappingURL=343.0571f7ee.chunk.js.map