{"version":3,"file":"static/js/624.427fe891.chunk.js","mappings":"sfAeA,MAyGA,EAzGwDA,IAKjD,IALkD,QACvDC,EAAO,eACPC,EAAc,cACdC,EAAa,oBACbC,EAAsBA,IAAMC,QAAQC,IAAI,2BACzCN,EACC,MAAM,EAAEO,IAAMC,EAAAA,EAAAA,MAad,OACEC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEC,GAAI,GAAIC,SAAA,EACjBJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACTC,oBAAqB,CAAEC,GAAI,MAAOC,GAAI,eACtCC,IAAK,EACLC,WAAY,SACZP,GAAI,GACJC,SAAA,EACAO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAAAG,UACFO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACRC,WAAS,EACTC,QAAQ,WACRC,YAAajB,EAAE,0DACfkB,MAAOxB,EAAQyB,OACfC,SA3BkBC,IAC1B1B,GAAc2B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAI5B,GAAO,IAAEyB,OAAQE,EAAEE,OAAOL,UA2BtCM,WAAY,CACVC,gBAAgBZ,EAAAA,EAAAA,KAACa,EAAAA,EAAU,CAACtB,GAAI,CAAEuB,MAAO,iBAAkBC,GAAI,WAIrEf,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAAAG,UACFJ,EAAAA,EAAAA,MAACY,EAAAA,EAAS,CACRe,QAAM,EACNd,WAAS,EACTe,MAAO9B,EAAE,kDACTkB,MAAOxB,EAAQqC,KACfX,SAnCgBC,IACxB1B,GAAc2B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAI5B,GAAO,IAAEqC,KAAMV,EAAEE,OAAOL,UAmCpCF,QAAQ,WAAUV,SAAA,EAElBO,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,MAAKZ,SAAEN,EAAE,2DACzBa,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,WAAUZ,SAAEN,EAAE,6DAC9Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,WAAUZ,SAAEN,EAAE,6DAC9Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,KAAIZ,SAAC,aAGzBO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAAAG,UACFJ,EAAAA,EAAAA,MAACY,EAAAA,EAAS,CACRe,QAAM,EACNd,WAAS,EACTe,MAAO9B,EAAE,oDACTkB,MAAOxB,EAAQuC,OACfb,SA9CkBC,IAC1B1B,GAAc2B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAI5B,GAAO,IAAEuC,OAAQZ,EAAEE,OAAOL,UA8CtCF,QAAQ,WAAUV,SAAA,EAElBO,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,MAAKZ,SAAEN,EAAE,6DACzBa,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,SAAQZ,SAAEN,EAAE,6DAC5Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,WAAUZ,SAAEN,EAAE,uEAIpCE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACT2B,eAAgB,WAChBvB,IAAK,EACLwB,GAAI,CAAE1B,GAAI,EAAGC,GAAI,IACjBJ,SAAA,EACAO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNU,WAAWxB,EAAAA,EAAAA,KAACyB,EAAAA,EAAO,IACnBC,QAAS3C,EACTQ,GAAI,CACFoC,MAAO,CAAE/B,GAAI,OAAQC,GAAI,QACzB+B,SAAU,SACVnC,SAEDN,EAAE,kEAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNU,WAAWxB,EAAAA,EAAAA,KAAC6B,EAAAA,EAAY,IACxBH,QAAS1C,EACTO,GAAI,CACFoC,MAAO,CAAE/B,GAAI,OAAQC,GAAI,QACzB+B,SAAU,SACVnC,SAEDN,EAAE,sE,2DC1Eb,MA6IA,EA7IoDP,IAW7C,IAX8C,UACnDkD,EAAS,KACTC,EAAI,YACJC,EAAW,UACXC,EAAS,aACTC,EAAY,oBACZC,EAAmB,OACnBC,EAAM,OACNC,EAAM,aACNC,EAAY,SACZC,GACD3D,EACC,MAAM,EAAEO,EAAC,KAAEqD,IAASpD,EAAAA,EAAAA,MASpB,OACEC,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAAClD,GAAI,CAAEoC,MAAO,OAAQe,SAAU,UAAWjD,SAAA,EAC/CO,EAAAA,EAAAA,KAAC2C,EAAAA,EAAc,CAAAlD,UACbJ,EAAAA,EAAAA,MAACuD,EAAAA,EAAK,CAAAnD,SAAA,EACJO,EAAAA,EAAAA,KAAC6C,EAAAA,EAAS,CAAApD,UACRJ,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAArD,SAAA,EACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,sDACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,sDAC7Ba,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,wDAC7Ba,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,wDAC7Ba,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,2DAC7Ba,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,2DAC7Ba,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,8DAGjCa,EAAAA,EAAAA,KAACiD,EAAAA,EAAS,CAAAxD,SACPqC,EAAUoB,OAAS,EAClBpB,EAAUqB,IAAKC,IACb/D,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAmBO,OAAK,EAAA5D,SAAA,EAC/BO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAOK,WAAW,SAAQN,SAAA,CACpC2D,EAASE,YACRtD,EAAAA,EAAAA,KAACuD,EAAAA,EAAQ,CACPzC,MAAM,UACNvB,GAAI,CAAEiE,SAAU,OAAQzC,GAAI,MAGhCf,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAOV,SAAE2D,EAASM,aAG1C1D,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,UACvBO,EAAAA,EAAAA,KAAC2D,EAAAA,EAAI,CACH1C,MAAyB,aAAlBmC,EAASlC,KAAsB/B,EAAE,0DAA4DA,EAAE,0DACtG2B,MAAyB,aAAlBsC,EAASlC,KAAsB,UAAY,UAClD0C,KAAK,QACLzD,QAAQ,gBAGZH,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,UACvBO,EAAAA,EAAAA,KAAC2D,EAAAA,EAAI,CACH1C,MAA2B,WAApBmC,EAAShC,OAAsBjC,EAAE,0DAA4DA,EAAE,4DACtG2B,MAA2B,WAApBsC,EAAShC,OAAsB,UAAY,UAClDwC,KAAK,aAGT5D,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAE2D,EAASS,oBACpC7D,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SACtB,IAAIqE,KAAKV,EAASW,WAAWC,mBAAmBxB,EAAKyB,aAExDjE,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAE2D,EAASc,aACpClE,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,UACvBJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAO2B,eAAe,SAAQ5B,SAAA,EACzCO,EAAAA,EAAAA,KAACmE,EAAAA,EAAO,CAACC,MAAOjF,EAAE,oDAAoDM,UACpEO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAACT,KAAK,QAAQlC,QAASA,IAAMU,EAAOgB,EAASkB,IAAI7E,UAC1DO,EAAAA,EAAAA,KAACuE,EAAAA,EAAQ,CAACf,SAAS,eAGvBxD,EAAAA,EAAAA,KAACmE,EAAAA,EAAO,CAACC,MAAOjF,EAAE,oDAAoDM,UACpEO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAACT,KAAK,QAAQlC,QAASA,IAAMW,EAAOe,EAASkB,IAAI7E,UAC1DO,EAAAA,EAAAA,KAACwE,EAAAA,EAAQ,CAAChB,SAAS,eAGvBxD,EAAAA,EAAAA,KAACmE,EAAAA,EAAO,CAACC,MAAOhB,EAASE,UAAYnE,EAAE,uDAAyDA,EAAE,0DAA0DM,UAC1JO,EAAAA,EAAAA,KAAA,QAAAP,UACEO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CACTT,KAAK,QACLlC,QAASA,IAAMY,EAAac,EAASkB,IACrCG,SAAUrB,EAASE,UACnBxC,MAAOsC,EAASE,UAAY,UAAY,UAAU7D,SAEjD2D,EAASE,WACRtD,EAAAA,EAAAA,KAACuD,EAAAA,EAAQ,CAACC,SAAS,WAEnBxD,EAAAA,EAAAA,KAAC0E,EAAAA,EAAc,CAAClB,SAAS,iBAKjCxD,EAAAA,EAAAA,KAACmE,EAAAA,EAAO,CAACC,MAAOjF,EAAE,sDAAsDM,UACtEO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CACTT,KAAK,QACLlC,QAASA,IAAMa,EAASa,EAASkB,IACjCxD,MAAM,QAAOrB,UAEbO,EAAAA,EAAAA,KAAC2E,EAAAA,EAAU,CAACnB,SAAS,qBAlEhBJ,EAASkB,MA0E1BtE,EAAAA,EAAAA,KAAC8C,EAAAA,EAAQ,CAAArD,UACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAC6B,QAAS,EAAG5B,MAAM,SAASzD,GAAI,CAAEsF,GAAI,GAAIpF,UAClDO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAerB,SAC9CN,EAAE,0DAQjBa,EAAAA,EAAAA,KAAC8E,EAAAA,EAAe,CACdC,mBAAoB,CAAC,EAAG,GAAI,IAC5BC,UAAU,MACVC,MAAOhD,EACPD,YAAaA,EACbD,KAAMA,EACNG,aArHmBgD,CAACC,EAAgBC,KACxClD,EAAakD,IAqHTjD,oBAlH2BgD,IAC/BhD,EAAoBkD,SAASF,EAAMzE,OAAOL,MAAO,MAkH7CiF,iBAAkBnG,EAAE,6DACpBoG,mBAAoBC,IAAA,IAAC,KAAEC,EAAI,GAAEC,EAAE,MAAET,GAAOO,EAAA,OACtCrG,EAAE,8DAA+D,CAAEsG,OAAMC,KAAIT,iB,gDCrJvF,MAmKA,EAnKoDrG,IAI7C,IAJ8C,SACnD+G,EAAQ,QACRC,EAAO,YACPC,GACDjH,EACC,MAAM,EAAEO,IAAMC,EAAAA,EAAAA,OACP0G,EAAQC,IAAaC,EAAAA,EAAAA,UAAiB,IACvCC,EAAqB9G,EAAE,wDAAyD,CAAE+G,eAAe,IAevG,OACE7G,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACTyG,cAAe,SACfC,OAAQ,OACRC,EAAG,GACH5G,SAAA,EAEAO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CACP+G,SAAU,EACVC,UAAW,OACXF,EAAG,EACH3G,QAAS,OACTyG,cAAe,SACfrG,IAAK,GACLL,SACwB,IAAvBoG,EAAY3C,QACX7D,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACTyG,cAAe,SACfpG,WAAY,SACZsB,eAAgB,SAChB+E,OAAQ,OACRtF,MAAO,iBACP0F,UAAW,SACXH,EAAG,GACH5G,SAAA,EACAO,EAAAA,EAAAA,KAAC6B,EAAAA,EAAY,CAACtC,GAAI,CAAEiE,SAAU,GAAIhE,GAAI,EAAGiH,QAAS,OAClDzG,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,2DAELa,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQZ,GAAI,CAAEqC,SAAU,MAAO+E,GAAI,QAASlH,SAC7DN,EAAE,iEAELa,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQZ,GAAI,CAAE+B,GAAI,EAAGsF,UAAW,UAAWnH,SAC5DN,EAAE,+DAIP0G,EAAY1C,IAAI,CAAC0D,EAASC,KACxB9G,EAAAA,EAAAA,KAACyC,EAAAA,EAAK,CAEJsE,UAAW,EACXxH,GAAI,CACF8G,EAAG,EACHW,gBAAkC,cAAjBH,EAAQI,KAAuB,sBAAwB,cACxEC,aAAc,EACdtF,SAAU,MACVuF,UAA4B,cAAjBN,EAAQI,KAAuB,aAAe,YACzDxH,UAEFJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQK,WAAY,aAAcD,IAAK,GAAIL,SAAA,EAC7DO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACTK,WAAY,SACZsB,eAAgB,SAChB2F,gBAAkC,cAAjBH,EAAQI,KAAuB,eAAiB,iBACjEC,aAAc,MACdvF,MAAO,GACPyE,OAAQ,GACRtF,MAAO,SACPrB,SACkB,cAAjBoH,EAAQI,MAAuBjH,EAAAA,EAAAA,KAAC6B,EAAAA,EAAY,CAAC2B,SAAS,WAAaxD,EAAAA,EAAAA,KAACoH,EAAAA,EAAU,CAAC5D,SAAS,aAE3FxD,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAOV,SACxBoH,EAAQQ,cAxBRP,MAiCW,IAAvBjB,EAAY3C,SACX7D,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE+H,GAAI,EAAGzC,GAAI,GAAIpF,SAAA,EACxBO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,YAAYuG,cAAY,EAAAjH,SACzCN,EAAE,4DAELa,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ6H,SAAU,OAAQzH,IAAK,GAAIL,SACpDwG,EAAmB9C,IAAI,CAACqE,EAAYV,KACnC9G,EAAAA,EAAAA,KAAC2D,EAAAA,EAAI,CAEH1C,MAAOuG,EACP9F,QAASA,IAzFQ8F,KAC7B,MAAMC,EAAYtI,EAAE,0DAA2D,CAAEqI,eACjFzB,EAAU0B,IAuFiBC,CAAsBF,GACrC1G,MAAM,UACNX,QAAQ,WACRwH,WAAS,GALJb,UAYf9G,EAAAA,EAAAA,KAAC4H,EAAAA,EAAO,KAGRvI,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CACF0F,UAAU,OACVW,SAhHgBnF,IACpBA,EAAEqH,iBACE/B,EAAOgC,SAAWlC,IACpBD,EAASG,EAAOgC,QAChB/B,EAAU,MA6GRxG,GAAI,CACF8G,EAAG,EACH3G,QAAS,OACTK,WAAY,WACZD,IAAK,GACLL,SAAA,EAEFO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACR8H,WAAS,EACTC,QAAS,EACT5H,YAAajB,EAAE,kDACfkB,MAAOyF,EACPvF,SAAWC,GAAMuF,EAAUvF,EAAEE,OAAOL,OACpCH,WAAS,EACTC,QAAQ,WACRsE,SAAUmB,EACVrG,GAAI,CACF,2BAA4B,CAC1B2H,aAAc,OAIpBlH,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNmH,QAASrC,GAAU5F,EAAAA,EAAAA,KAACkI,EAAAA,EAAgB,CAACtE,KAAM,GAAI9C,MAAM,aAAed,EAAAA,EAAAA,KAACmI,EAAAA,EAAQ,IAC7E1D,UAAWqB,EAAOgC,QAAUlC,EAC5B1E,KAAK,SACL3B,GAAI,CACF6G,OAAQ,GACRc,aAAc,EACdI,GAAI,GACJ7H,SAESN,EAAVyG,EAAY,gDAAqD,wD,qCC/J5E,MAqJA,EArJwDhH,IAKjD,IALkD,QACvDyI,EAAO,SACPe,EAAQ,QACRxC,EAAO,eACPyC,GACDzJ,EACC,MAAM,EAAEO,IAAMC,EAAAA,EAAAA,MAad,OACEC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACP6G,OAAQ,OACR1G,QAAS,OACTyG,cAAe,SACfE,EAAG,GACH5G,SAAA,EAEAJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACP8G,EAAG,EACHiC,aAAc,gCACd5I,QAAS,OACT2B,eAAgB,gBAChBtB,WAAY,UACZN,SAAA,EACAO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SACrBN,EAAE,iDAGLE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQI,IAAK,GAAIL,SAAA,EACnCO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACRyD,KAAK,QACLpC,WAAWxB,EAAAA,EAAAA,KAACwE,EAAAA,EAAQ,IACpBC,UAAW4C,GAAWzB,EAAQnG,SAE7BN,EAAE,wDAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACRyD,KAAK,QACLpC,WAAWxB,EAAAA,EAAAA,KAACuI,EAAAA,EAAY,IACxB9D,UAAW4C,GAAWzB,EAAQnG,SAE7BN,EAAE,4DAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACN8C,KAAK,QACLpC,WAAWxB,EAAAA,EAAAA,KAACwI,EAAAA,EAAQ,IACpB/D,UAAW4C,GAAWzB,EACtBlE,QAhDiB+G,KACrBJ,GAAkBhB,GACpBgB,EAAehB,IA8CmB5H,SAE3BN,EAAE,wEAMTa,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CACP+G,SAAU,EACVC,UAAW,OACXF,EAAG,GACH5G,SACCmG,GAECvG,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFO,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,GAAIzE,MAAM,SAC3C3B,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,MACjCpG,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,MACjCpG,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,GAAIzE,MAAM,SAC3C3B,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEoJ,GAAI,GAAIlJ,UACjBO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAO,OAEV5H,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,GAAIzE,MAAM,SAC3C3B,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,MACjCpG,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,MACjCpG,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,GAAIzE,MAAM,SAC3C3B,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEoJ,GAAI,GAAIlJ,UACjBO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAO,OAEV5H,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,GAAIzE,MAAM,SAC3C3B,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,MACjCpG,EAAAA,EAAAA,KAAC0I,EAAAA,EAAQ,CAACvI,QAAQ,OAAOiG,OAAQ,QAEjCiB,GAEFrH,EAAAA,EAAAA,KAACyC,EAAAA,EAAK,CACJsE,UAAW,EACXxH,GAAI,CACF6G,OAAQ,OACRC,EAAG,EACHW,gBAAiB,sBACjBE,aAAc,GACdzH,UAEFO,EAAAA,EAAAA,KAAA,YACEK,MAAOgH,EACP9G,SApGiBC,IAC3B4H,EAAS5H,EAAEE,OAAOL,QAoGRuI,MAAO,CACLjH,MAAO,OACPyE,OAAQ,OACRyC,QAAS,OACTC,OAAQ,gCACR5B,aAAc,MACd6B,OAAQ,OACRC,WAAY,UACZxF,SAAU,OACVyF,WAAY,MACZjC,gBAAiB,cAMvB3H,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACTyG,cAAe,SACfpG,WAAY,SACZsB,eAAgB,SAChB+E,OAAQ,OACRtF,MAAO,iBACP0F,UAAW,SACXH,EAAG,GACH5G,SAAA,EACAO,EAAAA,EAAAA,KAACwE,EAAAA,EAAQ,CAACjF,GAAI,CAAEiE,SAAU,GAAIhE,GAAI,EAAGiH,QAAS,OAC9CzG,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,uDAELa,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAOV,SACxBN,EAAE,qECzDX+J,EAAuBpD,IAC3B,MAAMqD,EAASrD,EAAOsD,SAAS,OAAS,mCAAwB,GAGhE,IAAIC,EAAS,GACb,MAAMC,EAAexD,EAAOyD,MAAM,yEAKlC,OAJID,GAAgBA,EAAa,KAC/BD,EAAM,cAAAG,OAAcF,EAAa,GAAGxB,OAAO2B,gBAGtC,CAAEN,SAAQE,WAGbK,GAAuB5D,GACvBA,EAAO6D,cAAcP,SAAS,yCACzB,wCACEtD,EAAO6D,cAAcP,SAAS,wCAChC,uCACEtD,EAAO6D,cAAcP,SAAS,mBAChC,qCACEtD,EAAO6D,cAAcP,SAAS,6BAChC,4BACEtD,EAAO6D,cAAcP,SAAS,QAAUtD,EAAO6D,cAAcP,SAAS,qBACxE,uCAEA,oBAILQ,GAAwB9D,IAE5B,MAAM+D,EAAa/D,EAAOyD,MAAM,oDAChC,GAAIM,EAAY,CACd,MAAMxJ,EAAQyJ,WAAWD,EAAW,IAC9BE,EAAOF,EAAW,GAAGF,cAE3B,MAAa,YAATI,GAA0B,OAATA,EACb,GAANP,OAAUnJ,EAAM2J,eAAe,SAAQ,2BAAAR,OAAqBnJ,EAAK,4BAE3D,GAANmJ,OAAUnJ,EAAM2J,eAAe,SAAQ,uBAAAR,OAAiBnJ,EAAK,8BAEjE,CAEA,MAAO,uEAGH4J,GAA2BnE,IAE/B,MAAMoE,EAAgBpE,EAAOyD,MAAM,0CACnC,GAAIW,EAAe,CACjB,MAAMC,EAAW9E,SAAS6E,EAAc,IAClCH,EAAOG,EAAc,GAAGP,cAE9B,MACQ,GAANH,OAAUW,EADC,aAATJ,GAA2B,QAATA,EACF,YAEA,YAEtB,CAEA,MAAO,cAGHK,GAAsBA,CAAC/J,EAAegK,KAE1C,MAAMC,EAAejK,EAAQA,EAAMkJ,MAAM,oBAAsB,KAE/D,GAAIe,GAAgBA,EAAapH,OAAS,EAAG,CAC3C,MACMqH,GADeT,WAAWQ,EAAa,GAAGE,QAAQ,MAAO,KAChCH,EAAa,KAAKL,eAAe,SAChE,MAAM,GAANR,OAAUe,EAAM,gBAClB,CASA,MAN8C,CAC5C,GAAI,uBACJ,GAAI,uBACJ,GAAI,wBAGeF,IAAW,GAAAb,OAAOa,EAAU,8CCkCnD,GA3MkEzL,IAI3D,IAJ4D,KACjE6L,EAAI,QACJC,EAAO,eACPrC,EAAiBA,IAAMpJ,QAAQC,IAAI,mBACpCN,EACC,MAAOgH,EAAS+E,IAAc3E,EAAAA,EAAAA,WAAkB,IACzC4E,EAAiBC,IAAsB7E,EAAAA,EAAAA,UAAiB,KACxDH,EAAaiF,IAAkB9E,EAAAA,EAAAA,UAAiE,KAChG+E,EAAgBC,IAAqBhF,EAAAA,EAAAA,WAAkB,IACvDiF,EAAcC,IAAmBlF,EAAAA,EAAAA,UAAiB,KAClDmF,EAAgBC,IAAqBpF,EAAAA,EAAAA,WAAkB,IACxD,EAAE7G,IAAMC,EAAAA,EAAAA,MAqFd,OACEC,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CACLZ,KAAMA,EACNC,QAASA,EACTxK,WAAS,EACT0B,SAAS,KACT0J,WAAY,CACV/L,GAAI,CACF6G,OAAQ,OACRmF,UAAW,OACXC,EAAG,EACHtE,aAAc,IAEhBzH,SAAA,EAEFJ,EAAAA,EAAAA,MAACoM,EAAAA,EAAW,CAAClM,GAAI,CACfiM,EAAG,EACHnF,EAAG,EACH3G,QAAS,OACT2B,eAAgB,gBAChBtB,WAAY,SACZuI,aAAc,iCACd7I,SAAA,EACAO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAK6E,UAAU,MAAKvF,SACrCN,EAAE,yCAELa,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CACTqH,KAAK,MACL5K,MAAM,UACNY,QAASgJ,EACT,aAAW,QAAOjL,UAElBO,EAAAA,EAAAA,KAAC2L,EAAAA,EAAS,UAIdtM,EAAAA,EAAAA,MAACuM,EAAAA,EAAa,CAACrM,GAAI,CAAE8G,EAAG,EAAG3G,QAAS,OAAQgD,SAAU,UAAWjD,SAAA,EAC/DO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CACPoC,MAAO,MACPyE,OAAQ,OACRyF,YAAa,gCACbnM,QAAS,OACTyG,cAAe,UACf1G,UACAO,EAAAA,EAAAA,KAAC8L,EAAa,CACZnG,SAhIqBoG,UAE7BjB,EAAekB,GAAQ,IAAIA,EAAM,CAAE/E,KAAM,OAAQI,QAASvB,KAG1D6E,GAAW,GAEX,IAGEsB,WAAW,KACT,MAAMC,ED9BuBpG,KAEnC,MAAMqG,EAAejD,EAAoBpD,GACnCsG,EAAe1C,GAAoB5D,GACnCuG,EAAgBzC,GAAqB9D,GACrCwG,EAAmBrC,GAAwBnE,GAGjD,MAAM,6BAAN0D,OACS4C,EAAa3C,cAAa,iBAAAD,OAE/B+C,KAAKC,MAAsB,IAAhBD,KAAKE,UAAgB,oCAAAjD,OAIpC2C,EAAahD,QAAU,mCAAqB,4BAAAK,OAI5C2C,EAAa9C,QAAU,iBAAa,uCAAAG,QAEtB,IAAI1F,MAAO4I,UAAS,cAAAlD,QAAU,IAAI1F,MAAO6I,WAAa,EAAC,cAAAnD,QAAQ,IAAI1F,MAAO8I,cAAa,6FAAApD,OAE9F2C,EAAahD,QAAU,mCAAqB,8SAAAK,OAO5C2C,EAAa9C,QAAU,iBAAa,sXAAAG,OAOS4C,EAAY,iMAAA5C,OAInB4C,EAAY,+fAAA5C,OAM7B6C,GAAiB,sEAAuC,gOAAA7C,OAGtCY,GAAoBiC,EAAe,IAAG,qKAAA7C,OACtCY,GAAoBiC,EAAe,IAAG,8KAAA7C,OACtCY,GAAoBiC,EAAe,IAAG,6QAAA7C,OAMjD8C,GAAoB,aAAS,y2EC5BhCO,CAAqB/G,GAG/C+E,EAAmBqB,GAGnBpB,EAAekB,GAAQ,IAAIA,EAAM,CAC/B/E,KAAM,YACNI,QAASlI,EAAE,sDAIbwL,GAAW,IACV,IACL,CAAE,MAAOmC,GACP7N,QAAQ6N,MAAM,6BAA8BA,GAC5CnC,GAAW,GAGXG,EAAekB,GAAQ,IAAIA,EAAM,CAC/B/E,KAAM,YACNI,QAASlI,EAAE,iDAEf,GA+FQyG,QAASA,EACTC,YAAaA,OAIjB7F,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEoC,MAAO,MAAOyE,OAAQ,QAAS3G,UACxCO,EAAAA,EAAAA,KAAC+M,EAAe,CACd1F,QAASuD,EACTxC,SApGoB4E,IAC5BnC,EAAmBmC,IAoGXpH,QAASA,EACTyC,eAjGoBhB,IAC5B,GAAIA,EAAS,CACX2D,GAAkB,GAElB,MAAMiC,EAAY5F,EAAQ6F,MAAM,MAAM,GACtChC,EAAgB+B,GAAa9N,EAAE,+DACjC,WAiGEE,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CACLZ,KAAMM,EACNL,QAASA,IAAMM,GAAkB,GACjCpJ,SAAS,KACT1B,WAAS,EAAAT,SAAA,EAETO,EAAAA,EAAAA,KAACyL,EAAAA,EAAW,CAAAhM,SAAEN,EAAE,oDAChBa,EAAAA,EAAAA,KAAC4L,EAAAA,EAAa,CAAAnM,UACZJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE4N,GAAI,GAAI1N,SAAA,EACjBO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQuG,cAAY,EAAAjH,SACrCN,EAAE,0DAELa,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACRmN,WAAS,EACTC,OAAO,QACPpM,MAAO9B,EAAE,qDACTe,WAAS,EACTC,QAAQ,WACRE,MAAO4K,EACP1K,SAAWC,GAAM0K,EAAgB1K,EAAEE,OAAOL,OAC1Cd,GAAI,CAAEC,GAAI,EAAG8B,GAAI,MAEnBjC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,WAAYvB,IAAK,EAAGwB,GAAI,GAAI7B,SAAA,EACtEO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLG,QAASA,IAAMsJ,GAAkB,GACjCvG,SAAU0G,EAAe1L,SAExBN,EAAE,oBAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNY,QA7Ha+G,KACzB,GAAImC,GAAmBK,EAAc,CACnCG,GAAkB,GAGlB,MAAMkC,EAAmB,mBACnBC,EAAe3C,EAAgBrB,MAAM+D,IAAqB,GAG1DE,EAAoC,CACxC9J,KAAMuH,EACN/J,KAAM,KACN6C,WAAW,IAAID,MAAO2J,cACtBC,WAAW,IAAI5J,MAAO2J,cACtBvJ,UAAW/E,EAAE,uDACb0E,iBAAkB0J,EAAarK,OAC/BI,WAAW,EACXlC,OAAQ,SACRiG,QAASuD,GAIXvC,EAAemF,GAGfpC,GAAkB,GAClBJ,GAAkB,GAClBN,GACF,GAkGYjG,UAAWwG,EAAanD,QAAUqD,EAAe1L,SAE/BN,EAAjBgM,EAAmB,iDAAsD,iECvMpFwC,GAA4B,CAChC,CACErJ,GAAI,IACJZ,KAAM,+DACNxC,KAAM,WACN6C,UAAW,2BACX2J,UAAW,2BACXxJ,UAAW,yBACXL,iBAAkB,EAClBP,WAAW,EACXlC,OAAQ,UAEV,CACEkD,GAAI,IACJZ,KAAM,0CACNxC,KAAM,WACN6C,UAAW,2BACX2J,UAAW,2BACXxJ,UAAW,uBACXL,iBAAkB,EAClBP,WAAW,EACXlC,OAAQ,UAEV,CACEkD,GAAI,IACJZ,KAAM,8BACNxC,KAAM,WACN6C,UAAW,2BACX2J,UAAW,2BACXxJ,UAAW,mBACXL,iBAAkB,EAClBP,WAAW,EACXlC,OAAQ,aAyMZ,GA/LkDxC,IAI3C,IAJ4C,cACjDG,EACA+C,UAAW8L,EAAgB,GAC3BhI,QAASiI,GAAc,GACxBjP,EACC,MAAM,EAAEO,IAAMC,EAAAA,EAAAA,OACPP,EAASiP,IAAc9H,EAAAA,EAAAA,UAA+B,CAC3D1F,OAAQ,GACRY,KAAM,MACNE,OAAQ,SAEHW,EAAMgM,IAAW/H,EAAAA,EAAAA,UAAS,IAC1BhE,EAAagM,IAAkBhI,EAAAA,EAAAA,UAAS,KACxCiI,EAAaC,IAAkBlI,EAAAA,EAAAA,WAAS,IACxCmI,EAAqBC,IAA0BpI,EAAAA,EAAAA,UAAwB,MAGxElE,EAAY8L,EAAc1K,OAAS,EAAI0K,EAAgBD,GACvD/H,EAAUiI,GAGTQ,EAAmBC,IAAwBtI,EAAAA,EAAAA,UAAqB,KAChE/D,EAAWsM,IAAgBvI,EAAAA,EAAAA,UAAiB,IAGnDwI,EAAAA,EAAAA,WAAU,KAC2BzC,WACjC,IAEE,IAAI0C,EAAW,IAAI3M,GAEnB,GAAIjD,EAAQyB,OAAQ,CAClB,MAAMoO,EAAc7P,EAAQyB,OAAOqJ,cACnC8E,EAAWA,EAASE,OAAOvL,GACzBA,EAASM,KAAKiG,cAAcP,SAASsF,GAEzC,CAEqB,QAAjB7P,EAAQqC,OACVuN,EAAWA,EAASE,OAClBvL,GAAYA,EAASlC,OAASrC,EAAQqC,OAInB,QAAnBrC,EAAQuC,SACVqN,EAAWA,EAASE,OAClBvL,GAAYA,EAAShC,SAAWvC,EAAQuC,SAI5CmN,EAAaE,EAASvL,QAGtB,MAAM0L,EAAa7M,EAAOC,EACpB6M,EAAYJ,EAASK,MACzBF,EACAA,EAAa5M,GAGfsM,EAAqBO,EACvB,CAAE,MAAO/B,GACP7N,QAAQ6N,MAAM,6BAA8BA,EAC9C,GAGFiC,IACC,CAAClQ,EAASkD,EAAMC,EAAaF,IA6EhC,OACEzC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACE,GAAI,EAAEC,SAAA,EACTO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAK6E,UAAU,KAAK0B,cAAY,EAAAjH,SACjDN,EAAE,yCAELa,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAerB,SAC9CN,EAAE,+CAIPE,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAAClD,GAAI,CAAE8G,EAAG,EAAG7G,GAAI,GAAIC,SAAA,EACzBO,EAAAA,EAAAA,KAACgP,EAAe,CACdnQ,QAASA,EACTC,eAzFoBmQ,IAC1BnB,EAAWmB,GACXlB,EAAQ,IAwFFhP,cAAeA,EACfC,oBAAqBA,IAAMkP,GAAe,MAG5ClO,EAAAA,EAAAA,KAACkP,GAAoB,CACnBzE,KAAMwD,EACNvD,QAASA,IAAMwD,GAAe,GAC9B7F,eApDsB8G,IAC5B,IAGE,MAAMC,EAAK,MAAA5F,OAAS1F,KAAKuL,OACnB7B,GAAqB/M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACtB0O,GAAY,IACf7K,GAAI8K,IAeN,OAPAd,EAAqBtC,GAAQ,CAACwB,KAAgBxB,IAC9CuC,EAAavC,GAAQA,EAAO,GAC5BoC,EAAuBgB,GAGvBE,MAAMnQ,EAAE,uDAED,CACT,CAAE,MAAO2N,GAGP,OAFA7N,QAAQ6N,MAAM,4BAA6BA,GAC3CwC,MAAMnQ,EAAE,qDACD,CACT,KA4BKyG,GACC5F,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACuF,GAAI,EAAG2B,UAAU,SAAQ/G,UAC5BO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,SAAEN,EAAE,6CAGjBa,EAAAA,EAAAA,KAACuP,EAAa,CACZzN,UAAWuM,EACXtM,KAAMA,EACNC,YAAaA,EACbC,UAAWA,EACXC,aAzGgBkD,IACxB2I,EAAQ3I,IAyGAjD,oBAtGuBqN,IAC/BxB,EAAewB,GACfzB,EAAQ,IAqGA3L,OAlGkBkC,IAE1BrF,QAAQC,IAAI,iBAAkBoF,IAiGtBjC,OA9FkBiC,IAE1BrF,QAAQC,IAAI,iBAAkBoF,IA6FtBhC,aA1FgBgC,IAExBrF,QAAQC,IAAI,wBAAyBoF,IAyF7B/B,SAlFoB+B,IAExBmL,OAAOC,QAAQvQ,EAAE,iDACnBF,QAAQC,IAAI,mBAAoBoF,GAIhCiK,EAAavC,GAAQA,EAAO,c,uFCvHlC,MAsVA,GAtVsDpN,IAAkC,IAAD+Q,EAAA,IAAhC,KAAElF,EAAI,QAAEC,EAAO,SAAE/E,GAAU/G,EAChF,MAAM,EAAEO,IAAMC,EAAAA,EAAAA,OACPwG,EAAS+E,IAAc3E,EAAAA,EAAAA,WAAS,IAChC4J,EAAWC,IAAgB7J,EAAAA,EAAAA,WAAS,IACpC8J,EAAiBC,IAAsB/J,EAAAA,EAAAA,UAA2B,IAGnEgK,GAASC,EAAAA,EAAAA,SAAQ,IACrBC,GAAAA,GAAW,CACTxM,KAAMwM,GAAAA,KAAaC,SAAShR,EAAE,2DAC9BiR,YAAaF,GAAAA,KAAaG,WAC1BnP,KAAMgP,GAAAA,KAEHI,MAAM,CAAC,WAAY,aACnBH,SAAShR,EAAE,2DACdoR,KAAML,GAAAA,KAEHC,SAAShR,EAAE,2DACXqR,KAAK,WAAYrR,EAAE,sDAAwDkB,IAC1E,IAAKA,EAAO,OAAO,EAEnB,MAAqB,4EADRA,EACDa,OAEhB4O,gBAAiBI,GAAAA,KAEdO,GACCP,GAAAA,GAAW,CACTQ,aAAcR,GAAAA,KAAaC,WAC3B/P,YAAa8P,GAAAA,KAAaC,WAC1BjP,KAAMgP,GAAAA,KAAaC,WACnBC,YAAaF,GAAAA,KAAaG,cAG7BM,QAAQ,MAEb,CAACxR,KAIG,SACJyR,EAAQ,aACRC,EAAY,MACZC,EAAK,SACLC,EAAQ,MACRC,EACAC,WAAW,OAAEC,KACXC,EAAAA,GAAAA,IAAkB,CACpBC,UAAUC,EAAAA,GAAAA,GAAYrB,GACtBsB,cAAe,CACb5N,KAAM,GACN0M,YAAa,GACblP,KAAM,WACNqP,UAAMgB,EACNzB,gBAAiB,MAIf0B,EAAeR,EAAM,QAyDrBS,EAA0BA,CAAC3K,EAAe4K,EAA6BrR,KAC3E,MAAMsR,EAAgB,IAAI7B,GAC1B6B,EAAc7K,IAAMrG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQkR,EAAc7K,IAAM,IAAE,CAAC4K,GAAQrR,IAC3D0P,EAAmB4B,GACnBZ,EAAS,kBAAmBY,IAexBC,EAAcA,KAClBd,IACAf,EAAmB,IACnBrF,KAGF,OACErL,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CAACZ,KAAMA,EAAMC,QAASkH,EAAahQ,SAAS,KAAK1B,WAAS,EAAAT,SAAA,EAC/DO,EAAAA,EAAAA,KAACyL,EAAAA,EAAW,CAAAhM,UACVJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAO2B,eAAe,gBAAgBtB,WAAW,SAAQN,SAAA,EACpEO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SAAEN,EAAE,2CAC5Ba,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAASkQ,EAAahO,KAAK,QAAOnE,UAC5CO,EAAAA,EAAAA,KAAC2L,EAAAA,EAAS,YAIhBtM,EAAAA,EAAAA,MAAA,QAAMsG,SAAUkL,EA5B8B9E,UAChD,IACEpB,GAAW,SACLhF,EAASkM,GACfD,GACF,CAAE,MAAO9E,GACP7N,QAAQ6N,MAAM,4BAA6BA,EAC7C,CAAC,QACCnC,GAAW,EACb,IAmBwDlL,SAAA,EACpDO,EAAAA,EAAAA,KAAC4L,EAAAA,EAAa,CAACkG,UAAQ,EAAArS,UACrBJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQC,oBAAqB,CAAEC,GAAI,MAAOC,GAAI,WAAaC,IAAK,GAAIL,SAAA,EACtFJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFO,EAAAA,EAAAA,KAACC,EAAAA,GAASQ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACJmQ,EAAS,SAAO,IACpB3P,MAAO9B,EAAE,8CACTe,WAAS,EACTmN,OAAO,SACPP,QAASoE,EAAOxN,KAChBqO,WAAuB,QAAbpC,EAAEuB,EAAOxN,YAAI,IAAAiM,OAAA,EAAXA,EAAa9I,QACzBpC,SAAUmB,MAGZ5F,EAAAA,EAAAA,KAACC,EAAAA,GAASQ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACJmQ,EAAS,gBAAc,IAC3B3P,MAAO9B,EAAE,qDACTe,WAAS,EACT6H,WAAS,EACTiK,KAAM,EACN3E,OAAO,SACP5I,SAAUmB,MAGZvG,EAAAA,EAAAA,MAAC4S,GAAAA,EAAW,CAAC/R,WAAS,EAACmN,OAAO,SAASP,QAASoE,EAAOhQ,KAAKzB,SAAA,EAC1DO,EAAAA,EAAAA,KAACkS,GAAAA,EAAU,CAAAzS,SAAEN,EAAE,iDACfE,EAAAA,EAAAA,MAAC8S,GAAAA,GAAM1R,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACLQ,MAAO9B,EAAE,8CACTiT,aAAa,WACb3N,SAAUmB,GACNgL,EAAS,SAAO,IAAAnR,SAAA,EAEpBO,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,WAAUZ,SAAEN,EAAE,iEAC9Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,WAAUZ,SAAEN,EAAE,wEAIlCE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACgC,GAAI,EAAG9B,GAAI,EAAEC,SAAA,EAChBO,EAAAA,EAAAA,KAAA,SACEqS,OAAO,gFACPzJ,MAAO,CAAElJ,QAAS,QAClB4E,GAAG,kBACHpD,KAAK,OACLX,SArIU4E,IAAgD,IAADmN,EACvE,MAAM/B,EAAyB,QAArB+B,EAAGnN,EAAMzE,OAAO6R,aAAK,IAAAD,OAAA,EAAlBA,EAAqB,GAC9B/B,IACFQ,EAAS,OAAQR,GACjBV,GAAa,GAGb5D,WAAW,KAET,MAAMuG,EAAwC,CAC5C,CACE9B,aAAc,wCACdtQ,YAAa,gBACbc,KAAM,OACNkP,YAAajR,EAAE,kEAEjB,CACEuR,aAAc,sNACdtQ,YAAa,YACbc,KAAM,OACNkP,YAAajR,EAAE,qEAEjB,CACEuR,aAAc,gBACdtQ,YAAa,eACbc,KAAM,QACNkP,YAAajR,EAAE,mEAEjB,CACEuR,aAAc,aACdtQ,YAAa,eACbc,KAAM,UACNkP,YAAajR,EAAE,iEAEjB,CACEuR,aAAc,yBACdtQ,YAAa,mBACbc,KAAM,OACNkP,YAAajR,EAAE,4EAEjB,CACEuR,aAAc,wBACdtQ,YAAa,YACbc,KAAM,OACNkP,YAAajR,EAAE,oEAInB4Q,EAAmByC,GACnBzB,EAAS,kBAAmByB,GAC5B3C,GAAa,IACZ,OAmFSpL,SAAUmB,GAAWgK,KAEvB5P,EAAAA,EAAAA,KAAA,SAAOyS,QAAQ,kBAAiBhT,UAC9BO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACR6E,UAAU,OACVxD,WAAWxB,EAAAA,EAAAA,KAAC0S,GAAAA,EAAU,IACtBjO,SAAUmB,GAAWgK,EAAUnQ,SAE9BN,EAAE,wDAGNqS,IACCnS,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACtD,QAAQ,QAAQZ,GAAI,CAAE+B,GAAI,GAAI7B,SAAA,CACvCN,EAAE,4DAA4D,IAAEqS,EAAa9N,QAGjFwN,EAAOX,OACNvQ,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAC3C,MAAM,QAAQX,QAAQ,UAAUT,QAAQ,QAAOD,SACxDyR,EAAOX,KAAK1J,iBAMrB7G,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAAAG,UACFJ,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAACtC,QAAQ,WAAWZ,GAAI,CAAE8G,EAAG,EAAGD,OAAQ,QAAS3G,SAAA,EACrDO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,YAAYuG,cAAY,EAAAjH,SACzCN,EAAE,mDAGJyQ,GACCvQ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAOyG,cAAc,SAASpG,WAAW,SAASsB,eAAe,SAASwD,GAAI,EAAEpF,SAAA,EAC3FO,EAAAA,EAAAA,KAACkI,EAAAA,EAAgB,CAACtE,KAAM,MACxB5D,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAgBvB,GAAI,CAAE+B,GAAI,GAAI7B,SAC7DN,EAAE,8DAGL2Q,EAAgB5M,OAAS,GAC3BlD,EAAAA,EAAAA,KAAC2C,EAAAA,EAAc,CAACqC,UAAWvC,EAAAA,EAAOtC,QAAQ,WAAUV,UAClDJ,EAAAA,EAAAA,MAACuD,EAAAA,EAAK,CAACgB,KAAK,QAAOnE,SAAA,EACjBO,EAAAA,EAAAA,KAAC6C,EAAAA,EAAS,CAAApD,UACRJ,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAArD,SAAA,EACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,mEACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,kEACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,2DACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,kEACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,SAAEN,EAAE,mEAGjCa,EAAAA,EAAAA,KAACiD,EAAAA,EAAS,CAAAxD,SACPqQ,EAAgB3M,IAAI,CAACuO,EAAO5K,KAC3BzH,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAArD,SAAA,EACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEiS,EAAMhB,gBAClB1Q,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACR2D,KAAK,QACLvD,MAAOqR,EAAMtR,YACbG,SAAWC,GAAMiR,EAAwB3K,EAAO,cAAetG,EAAEE,OAAOL,OACxEH,WAAS,EACTuE,SAAUmB,OAGd5F,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACiS,GAAAA,EAAW,CAAC/R,WAAS,EAAC0D,KAAK,QAAOnE,UACjCJ,EAAAA,EAAAA,MAAC8S,GAAAA,EAAM,CACL9R,MAAOqR,EAAMxQ,KACbX,SAAWC,GAAMiR,EAAwB3K,EAAO,OAAQtG,EAAEE,OAAOL,OACjEoE,SAAUmB,EAAQnG,SAAA,EAElBO,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,OAAMZ,SAAEN,EAAE,+DAC1Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,SAAQZ,SAAEN,EAAE,iEAC5Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,OAAMZ,SAAEN,EAAE,+DAC1Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,QAAOZ,SAAEN,EAAE,gEAC3Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,QAAOZ,SAAEN,EAAE,gEAC3Ba,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAACd,MAAM,UAASZ,SAAEN,EAAE,yEAInCa,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACR2D,KAAK,QACLvD,MAAOqR,EAAMtB,aAAe,GAC5B7P,SAAWC,GAAMiR,EAAwB3K,EAAO,cAAetG,EAAEE,OAAOL,OACxEH,WAAS,EACTuE,SAAUmB,OAGd5F,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAACC,MAAM,SAAQvD,UACvBO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAACT,KAAK,QAAQ9C,MAAM,QAAQY,QAASA,KAC9C,MAAMiQ,EAAgB,IAAI7B,GAC1B6B,EAAcgB,OAAO7L,EAAO,GAC5BiJ,EAAmB4B,GACnBZ,EAAS,kBAAmBY,IAC3BlN,SAAUmB,EAAQnG,UACnBO,EAAAA,EAAAA,KAAC2E,EAAAA,EAAU,CAACnB,SAAS,gBA3CZsD,WAmDrB0K,GACFxR,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAerB,SAC9CN,EAAE,4DAGLa,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAerB,SAC9CN,EAAE,2DAIPE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACgC,GAAI,EAAE7B,SAAA,EACTO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,YAAYuG,cAAY,EAAAjH,SACzCN,EAAE,oDAELE,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAerB,SAAA,CAAC,KAC7CN,EAAE,oDACLa,EAAAA,EAAAA,KAAA,SAAM,KACHb,EAAE,oDACLa,EAAAA,EAAAA,KAAA,SAAM,KACHb,EAAE,oEAQjBE,EAAAA,EAAAA,MAACuT,EAAAA,EAAa,CAACrT,GAAI,CAAE8G,EAAG,EAAGwM,UAAW,EAAGC,YAAa,WAAYrT,SAAA,EAChEO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACG,QAASkQ,EAAanN,SAAUmB,EAAQnG,SAC7CN,EAAE,oDAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLL,KAAK,SACLf,QAAQ,YACRW,MAAM,UACN2D,SAAUmB,GAAWgK,GAAwC,IAA3BE,EAAgB5M,OAClD1B,UAAWoE,GAAU5F,EAAAA,EAAAA,KAACkI,EAAAA,EAAgB,CAACtE,KAAM,KAAS,KAAKnE,SAEhDN,EAAVyG,EAAY,gDAAqD,2D,gKC3U9E,MA6MA,GA7MgEhH,IAKzD,IAL0D,SAC/DmU,EAAQ,iBACRC,EAAgB,OAChBC,EAAM,OACNC,GACDtU,EACC,MAAM,EAAEO,EAAC,KAAEqD,IAASpD,EAAAA,EAAAA,MAGd+T,EAAkB,CACtB,CAAE9S,MAAO,UAAWY,MAAO9B,EAAE,gEAAiE,oBAC9F,CAAEkB,MAAO,UAAWY,MAAO9B,EAAE,gEAAiE,qBAC9F,CAAEkB,MAAO,OAAQY,MAAO9B,EAAE,6DAA8D,UAsBpFiU,EAAsBA,CAAC9O,EAAYoN,EAA0BrR,KACjE2S,EACED,EAAS5P,IAAIkQ,GACXA,EAAQ/O,KAAOA,GAAE7D,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ4S,GAAO,IAAE,CAAC3B,GAAQrR,IAAUgT,KAerDC,EAAmBA,KACvB,MAAMC,EAAO/Q,EAAKyB,UAAY,KAC9B,OAAIsP,EAAKC,WAAW,MAAcC,GAAAA,GAC9BF,EAAKC,WAAW,MAAcE,GAAAA,GAC3BC,GAAAA,GAGHC,EAAiBA,KACrB,MAAML,EAAO/Q,EAAKyB,UAAY,KAC9B,OAAIsP,EAAKC,WAAW,MAAc,MAC9BD,EAAKC,WAAW,MAAc,WAC3B,OAGT,OACEnU,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQK,WAAY,SAAUP,GAAI,GAAIC,SAAA,EACxDO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAASuR,EAAQ1T,GAAI,CAAEwB,GAAI,GAAItB,UACzCO,EAAAA,EAAAA,KAAC6T,EAAAA,EAAa,OAEhB7T,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SACrBN,EAAE,uDAAwD,uBAI/DE,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAACtC,QAAQ,WAAWZ,GAAI,CAAE8G,EAAG,EAAG7G,GAAI,GAAIC,SAAA,EAC5CO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,iBAAiBgT,WAAS,EAAArU,SACzDN,EAAE,6DAA8D,iHAGnEa,EAAAA,EAAAA,KAAC2C,EAAAA,EAAc,CAAAlD,UACbJ,EAAAA,EAAAA,MAACuD,EAAAA,EAAK,CAACgB,KAAK,QAAOnE,SAAA,EACjBO,EAAAA,EAAAA,KAAC6C,EAAAA,EAAS,CAAApD,UACRJ,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAArD,SAAA,EACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,mEAAoE,gBAClFa,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,gEAAiE,aAC/Ea,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,qEAAsE,mBACpFa,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,gEAAiE,aAC/Ea,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,8DAA+D,WAC7Ea,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,gEAAiE,kBAGnFa,EAAAA,EAAAA,KAACiD,EAAAA,EAAS,CAAAxD,SACa,IAApBsT,EAAS7P,QACRlD,EAAAA,EAAAA,KAAC8C,EAAAA,EAAQ,CAAArD,UACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAC6B,QAAS,EAAG5B,MAAM,SAAQvD,UACnCO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,iBAAgBrB,SAC/CN,EAAE,uDAAwD,6DAKjE4T,EAAS5P,IAAKkQ,IACZhU,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAArD,SAAA,EACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACRC,WAAS,EACT0D,KAAK,QACLvD,MAAOgT,EAAQU,UACfxT,SAAWC,GAAM4S,EAAoBC,EAAQ/O,GAAI,YAAa9D,EAAEE,OAAOL,OACvED,YAAajB,EAAE,wEAAyE,yCAG5Fa,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACRC,WAAS,EACT0D,KAAK,QACLvD,MAA0B,IAAnBgT,EAAQW,OAAe,GAAKX,EAAQW,OAAOC,WAClD1T,SAAWC,GA3EN0T,EAAC5P,EAAYjE,KAEtC,MAAM8T,EAAe9T,EAAMmK,QAAQ,UAAW,IACxCwJ,EAASG,EAAe9O,SAAS8O,EAAc,IAAM,EAC3Df,EAAoB9O,EAAI,SAAU0P,IAuEGE,CAAmBb,EAAQ/O,GAAI9D,EAAEE,OAAOL,OACzDD,YAAY,IACZO,WAAY,CACVyT,cAAcpU,EAAAA,EAAAA,KAACqU,GAAAA,EAAc,CAACC,SAAS,MAAK7U,SAAEmU,YAIpD5T,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACuU,GAAAA,GAAoB,CAACC,YAAaC,GAAAA,EAAgBC,cAAepB,IAAmB7T,UACnFO,EAAAA,EAAAA,KAAC2U,GAAAA,EAAU,CACTtU,MAAOgT,EAAQuB,YACfrU,SAAWsU,GAASzB,EAAoBC,EAAQ/O,GAAI,cAAeuQ,GACnEC,UAAW,CAAEC,UAAW,CAAEnR,KAAM,QAAS1D,WAAW,WAI1DF,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACiS,GAAAA,EAAW,CAAC/R,WAAS,EAAC0D,KAAK,QAAOnE,UACjCO,EAAAA,EAAAA,KAACmS,GAAAA,EAAM,CACL9R,MAAOgT,EAAQjS,OACfb,SAAWC,GAAM4S,EAAoBC,EAAQ/O,GAAI,SAAU9D,EAAEE,OAAOL,OAAOZ,SAE1E0T,EAAgBhQ,IAAK/B,IACpBpB,EAAAA,EAAAA,KAACmB,EAAAA,EAAQ,CAAoBd,MAAOe,EAAOf,MAAMZ,SAC9C2B,EAAOH,OADKG,EAAOf,eAO9BL,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACRC,WAAS,EACT0D,KAAK,QACLvD,MAAOgT,EAAQ2B,KACfzU,SAAWC,GAAM4S,EAAoBC,EAAQ/O,GAAI,OAAQ9D,EAAEE,OAAOL,OAClED,YAAajB,EAAE,mEAAoE,cAGvFa,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CACTvD,MAAM,QACNY,QAASA,KAAMuT,OArIR3Q,EAqI4B+O,EAAQ/O,QApI/D0O,EAAiBD,EAASpE,OAAO0E,GAAWA,EAAQ/O,KAAOA,IADhCA,OAsIPV,KAAK,QAAOnE,UAEZO,EAAAA,EAAAA,KAAC2E,EAAAA,EAAU,UA5DF0O,EAAQ/O,aAsEjCtE,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAE+B,GAAI,GAAI7B,UACjBO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLC,WAAWxB,EAAAA,EAAAA,KAACyB,EAAAA,EAAO,IACnBtB,QAAQ,WACRuB,QAnKewT,KACvB,MAAMC,EAA0B,CAC9B7Q,GAAG,WAADkF,OAAa1F,KAAKuL,OACpB0E,UAAW,GACXC,OAAQ,EACRY,YAAa,IAAI9Q,KACjB1C,OAAQ,UACR4T,KAAM,IAERhC,EAAiB,IAAID,EAAUoC,KA0JG1V,SAEzBN,EAAE,6DAA8D,uBAKvEE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,iBAAkB5B,SAAA,EAC5DO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACRuB,QAASuR,EAAOxT,SAEfN,EAAE,cAAe,WAEpBa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNY,QAASwR,EAAOzT,SAEfN,EAAE,cAAe,iBCiL5B,GA/XsDP,IAI/C,IAJgD,UACrDkD,EAAS,OACTmR,EAAM,SACNmC,GACDxW,EACC,MAAM,EAAEO,IAAMC,EAAAA,EAAAA,OACPiW,EAAYC,IAAiBtP,EAAAA,EAAAA,UAAS,IACtCuP,EAAkBC,IAAuBxP,EAAAA,EAAAA,UAAkC,OAE3EyP,EAAUC,IAAe1P,EAAAA,EAAAA,UAAiC,CAAC,IAE3D4E,EAAiBC,IAAsB7E,EAAAA,EAAAA,UAAmB,CAAC,MAE3D+M,EAAU4C,IAAe3P,EAAAA,EAAAA,UAAwB,IAGlD4P,EAAuBC,EAAAA,YAAkB,KAE7C,MAAMC,EAAc,KAAAtM,QAAQ,IAAI1F,MAAO8I,eAAapD,SAAI,IAAI1F,MAAO6I,WAAa,GAAGsH,WAAW8B,SAAS,EAAG,MAAIvM,QAAG,IAAI1F,MAAO4I,UAAUuH,WAAW8B,SAAS,EAAG,KAAI,OAG3JC,EAAkBhC,GACf,IAAIiC,KAAKC,aAAa,SAASC,OAAOnC,GAIzCoC,EAAsBrD,EAAS7P,OAAS,EAAC,q1BAAAsG,OAavCuJ,EAAS5P,IAAI,CAACkQ,EAASvM,IAAK,uFAAA0C,OAE0B1C,EAAQ,EAAC,2EAAA0C,OACT6J,EAAQU,UAAS,8FAAAvK,OACEwM,EAAe3C,EAAQW,QAAO,oFAAAxK,OACjD6J,EAAQuB,YAAc,IAAI9Q,KAAKuP,EAAQuB,aAAa5Q,mBAAmB,SAAW,GAAE,2EAAAwF,OACpF6J,EAAQ2B,KAAI,yCAEjEqB,KAAK,IAAG,iQAAA7M,OAG8DwM,EAAejD,EAASuD,OAAO,CAACC,EAAKlD,IAAYkD,EAAMlD,EAAQW,OAAQ,IAAG,4JAKrJ,GAGJ,MAAM,onBAANxK,OAM8DsM,EAAc,2VAAAtM,OAOxEgN,OAAOC,QAAQhB,GAAUtS,IAAIqC,IAAA,IAAEkM,EAAOrR,GAAMmF,EAAA,oCAAAgE,OAAsBkI,EAAK,cAAAlI,OAAanJ,EAAK,mBAAiBgW,KAAK,MAAK,s0BAAA7M,OAapH4M,EAAmB,WAEtB,CAACX,EAAU1C,KAGdvE,EAAAA,EAAAA,WAAU,KAEW,IAAf6G,GAAoBmB,OAAOE,KAAKjB,GAAUvS,OAAS,GAAKsT,OAAOG,OAAOlB,GAAUmB,KAAKvW,GAASA,IAChGwK,EAAmB,CAAC+K,OAErB,CAACH,EAAUJ,EAAYO,IAG1B,MAiLMiB,EAAuBA,KAC3B,IAAKtB,EAAkB,OAEvB,MAAMuB,EAAc,CAClBxS,GAAG,IAADkF,OAAM+C,KAAKC,MAAM,IAAuB,IAAhBD,KAAKE,WAC/B/I,KAAK,GAAD8F,OAAKrK,EAAE,sDAAqD,KAAAqK,OAAoB,OAAhB+L,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkB7R,KAAI,OAAA8F,QAAM,IAAI1F,MAAOE,sBAC3G+S,YAA4B,OAAhBxB,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBjR,KAAM,GACpC2G,cAA8B,OAAhBsK,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkB7R,OAAQ,GACxCtC,OAAQ,QACR4V,OAAQ7X,EAAE,gDACV8X,OAAQ9X,EAAE,gDACV4E,WAAW,IAAID,MAAO2J,cACtBC,WAAW,IAAI5J,MAAO2J,cACtBvJ,UAAW/E,EAAE,qDAEb+X,aAAczB,EACd1C,SAAUA,GAIZqC,EAAS0B,GACTK,GAAAA,GAAMC,QAAQjY,EAAE,yDA2DZkY,EAAQ,CACZ,CAAEpW,MAAO9B,EAAE,uDAAwD6F,UAlQrCsS,KAC9BjY,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,6DAELa,EAAAA,EAAAA,KAAA,OAAK4I,MAAO,CAAElJ,QAAS,OAAQC,oBAAqB,wCAAyCG,IAAK,IAAKL,SACpGqC,EAAUqB,IAAKC,IACdpD,EAAAA,EAAAA,KAAA,OAEE4I,MAAO,CACL2O,aAAc,QACd9X,UAEFJ,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CACJsE,WAA2B,OAAhBwO,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBjR,MAAOlB,EAASkB,GAAK,EAAI,EACtD/E,GAAI,CACF8G,EAAG,EACHmR,OAAQ,UACR1O,QAAwB,OAAhByM,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBjR,MAAOlB,EAASkB,GAAK,oBAAsB,oBACrE8B,OAAQ,OACR1G,QAAS,OACTyG,cAAe,UAEjBzE,QAASA,IAAM8T,EAAoBpS,GAAU3D,SAAA,EAE7CJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAOK,WAAW,SAASP,GAAI,EAAEC,SAAA,EAC5CO,EAAAA,EAAAA,KAACyX,GAAAA,EAAY,CAAC3W,MAAM,UAAUvB,GAAI,CAAEwB,GAAI,MACxCf,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,YAAYuX,WAAW,OAAMjY,SAC9C2D,EAASM,WAGdrE,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,gBAAgBvB,GAAI,CAAE+G,SAAU,GAAI7G,SAAA,CACnE2D,EAASM,KAAK,MAAIN,EAASlC,SAE9BlB,EAAAA,EAAAA,KAAC2D,EAAAA,EAAI,CACH1C,MAAO9B,EAAE,6DAA8D,CAAE8F,MAAO7B,EAASS,mBACzFD,KAAK,QACLrE,GAAI,CAAE+B,GAAI,EAAG6F,UAAW,oBA7BvB/D,EAASkB,QAmCpBtE,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,WAAYC,GAAI,GAAI7B,UAC9DO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRsE,UAAW8Q,EACX7T,QAASA,KAEP,MAAMiW,EAAqC,CAAC,EAGxB,OAAhBpC,QAAgB,IAAhBA,GAAAA,EAAkBzF,iBAAmByF,EAAiBzF,gBAAgB5M,OAAS,GACjFqS,EAAiBzF,gBAAgB8H,QAASlG,IACxCiG,EAAWjG,EAAMtR,aAAe,KAWpCsV,EAAYiC,GAEZrC,EAAc,IATZ6B,GAAAA,GAAMrK,MAAM3N,EAAE,yDAUhBM,SAEDN,EAAE,2DA6LT,CAAE8B,MAAO9B,EAAE,iDAAkD6F,UAtLpC6S,KAEzB,MAAMC,EAAsBA,IAGM,IAFbtB,OAAOE,KAAKjB,GACE9G,OAAO+C,IAAU+D,EAAS/D,IACtCxO,OAqBvB,OACE7D,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQyG,cAAe,SAAUC,OAAQ,QAAS3G,SAAA,EACpEJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQK,WAAY,SAAUP,GAAI,GAAIC,SAAA,EACxDO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAASA,IAAM4T,EAAc,GAAI/V,GAAI,CAAEwB,GAAI,GAAItB,UACzDO,EAAAA,EAAAA,KAAC6T,EAAAA,EAAa,OAEhBxU,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SAAA,CACrBN,EAAE,6CAA6C,KAAmB,OAAhBoW,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkB7R,YAIzErE,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CACJtC,QAAQ,WACRZ,GAAI,CACF8G,EAAG,EACHC,SAAU,EACV9G,GAAI,EACJ+G,UAAW,OACXgF,UAAW,SACX9L,SAAA,EAEFO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,uDAGLa,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,QAAQW,MAAM,iBAAiBgT,WAAS,EAAArU,SACzDN,EAAE,sDAGLa,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CACPG,QAAS,OACTC,oBAAqB,CAAEC,GAAI,MAAOC,GAAI,WACtCC,IAAK,EACLwB,GAAI,GACJ7B,SACC+W,OAAOE,KAAKjB,GAAUtS,IAAK4U,IAC1B/X,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CAERgB,MAAO8W,EACP5X,QAAQ,WACRD,WAAS,EACTG,MAAOoV,EAASsC,GAChBxX,SAAWC,GA3DGwX,EAACD,EAAmB1X,KAC5CqV,EAAY1J,IAAIvL,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACXuL,GAAI,IACP,CAAC+L,GAAY1X,MAwDY2X,CAAkBD,EAAWvX,EAAEE,OAAOL,OACvD8P,UAAQ,EACRrD,OAAQ2I,EAASsC,GACjBhG,WAAa0D,EAASsC,GAAuE,GAA1D5Y,EAAE,sDACrCI,GAAI,CAAEC,GAAI,IATLuY,UAeb1Y,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,iBAAkB5B,SAAA,EAC5DO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACRuB,QAASA,IAAM4T,EAAc,GAC7B9T,WAAWxB,EAAAA,EAAAA,KAAC6T,EAAAA,EAAa,IAAIpU,SAE5BN,EAAE,kDAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNY,QAxEeuW,KACjBH,IACFxC,EAAc,GAGd6B,GAAAA,GAAMrK,MAAM3N,EAAE,wDAoEVsF,UAAWqT,IAAsBrY,SAEhCN,EAAE,6DA2FX,CAAE8B,MAAO9B,EAAE,qDAAsD6F,UAdrCkT,KAE1BlY,EAAAA,EAAAA,KAACmY,GAAmB,CAClBpF,SAAUA,EACVC,iBAAkB2C,EAClB1C,OAAQA,IAAMqC,EAAc,GAC5BpC,OAAQA,IAAMoC,EAAc,MAShC,CAAErU,MAAO9B,EAAE,uDAAwD6F,UA3D/CoT,IACf7C,GAGHlW,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQK,WAAY,SAAUP,GAAI,GAAIC,SAAA,EACxDO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAASA,IAAM4T,EAAc,GAAI/V,GAAI,CAAEwB,GAAI,GAAItB,UACzDO,EAAAA,EAAAA,KAAC6T,EAAAA,EAAa,OAEhB7T,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SACrBN,EAAE,sDAIPa,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEuJ,OAAQ,oBAAqB5B,aAAc,EAAG2B,QAAS,EAAGnG,SAAU,SAAUlD,GAAI,GAAIC,UAC/FO,EAAAA,EAAAA,KAACqY,GAAAA,EAAa,CACZC,eAAgB1N,EAChB2N,OAAQ1N,EACR2N,YAAaA,KACXrB,GAAAA,GAAMC,QAAQjY,EAAE,wEAKtBE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,iBAAkB5B,SAAA,EAC5DO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACRuB,QAASA,IAAM4T,EAAc,GAC7B9T,WAAWxB,EAAAA,EAAAA,KAAC6T,EAAAA,EAAa,IAAIpU,SAE5BN,EAAE,kDAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNY,QAASmV,EAAqBpX,SAE7BN,EAAE,yDApCmB,OA6DhC,OACEE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEoC,MAAO,QAASlC,SAAA,EACzBO,EAAAA,EAAAA,KAACyY,GAAAA,EAAO,CAACpD,WAAYA,EAAY9V,GAAI,CAAEC,GAAI,GAAIC,SAC5C4X,EAAMlU,IAAI,CAACuV,EAAM5R,KAChB9G,EAAAA,EAAAA,KAAC2Y,GAAAA,EAAI,CAAkBC,UAAWvD,EAAavO,EAAMrH,UACnDO,EAAAA,EAAAA,KAAC6Y,GAAAA,EAAS,CAAApZ,SAAEiZ,EAAKzX,SADRyX,EAAKzX,WAMpBjB,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAE+B,GAAI,GAAI7B,SAChB4X,EAAMhC,GAAYrQ,kB,4BCxW3B,MA0OA,GA1OsDpG,IAK/C,IAADka,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IALiD,SACrDC,EAAQ,QACR1O,EAAO,SACPnI,EAAQ,OACRF,GACDzD,EACC,MAAM,EAAEO,EAAC,KAAEqD,IAASpD,EAAAA,EAAAA,OACbia,EAAmBC,GAAwBzD,EAAAA,UAAe,GAa3D0D,EAAcC,IAClB,IAAKA,EAAY,OAAOra,EAAE,kBAC1B,MAAMoU,EAAO/Q,EAAKyB,UAAY,KACxBwV,EAASlG,EAAKC,WAAW,MAAQ,QAAUD,EAAKC,WAAW,MAAQ,QAAU,QACnF,OAAO,IAAI1P,KAAK0V,GAAYxV,mBAAmByV,IAGjD,OACEpa,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQK,WAAY,SAAUP,GAAI,EAAGM,IAAK,GAAIL,SAAA,EAChEO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAASgJ,EAAQjL,UAC3BO,EAAAA,EAAAA,KAAC0Z,EAAAA,EAAS,OAEZra,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SAAA,CACrBN,EAAE,+BAAgC,oBAAoB,KAAGia,EAAS1V,SAErE1D,EAAAA,EAAAA,KAAC2D,EAAAA,EAAI,CACH1C,MAAOmY,EAAShY,OAAOqI,cACvB3I,MA7BgBM,KACtB,OAAQA,GACN,IAAK,SAAU,MAAO,UACtB,IAAK,UAAW,MAAO,UACvB,IAAK,QAGL,QAAS,MAAO,UAFhB,IAAK,UACL,IAAK,YAAa,MAAO,UAuBduY,CAAeP,EAAShY,QAC/BwC,KAAK,QACLrE,GAAI,CAAEqa,GAAI,SAIdva,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAAClD,GAAI,CAAE8G,EAAG,EAAG7G,GAAI,GAAIC,SAAA,EACzBJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,gBAAiB7B,GAAI,EAAG+H,SAAU,OAAQzH,IAAK,GAAIL,SAAA,EAC7FJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,qCAAsC,0BAE3CE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ6H,SAAU,OAAQzH,IAAK,GAAIL,SAAA,EACrDJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEsa,KAAM,aAAcpa,SAAA,EAC7BJ,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,2CAA4C,eAAe,OAAU,IAAEia,EAAS9U,OACvGjF,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,6CAA8C,iBAAiB,OAAU,IAAEia,EAASnO,iBAC3G5L,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,0CAA2C,cAAc,OAAU,IAAEoa,EAAWH,EAASrV,kBAElH1E,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEsa,KAAM,aAAcpa,SAAA,EAC7BJ,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,0CAA2C,cAAc,OAAU,IAAEia,EAASlV,cACrG7E,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,0CAA2C,cAAc,OAAU,IAAEoa,EAAWH,EAAS1L,cAC/G0L,EAASU,WACRza,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,yCAA0C,aAAa,OAAU,IAAEoa,EAAWH,EAASU,aAE/GV,EAASW,YACR1a,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,0CAA2C,cAAc,OAAU,IAAEoa,EAAWH,EAASW,wBAMxH1a,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQI,IAAK,EAAGyH,SAAU,QAAS9H,SAAA,EACrDO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACpB,QAAQ,WAAWqB,WAAWxB,EAAAA,EAAAA,KAACga,EAAAA,EAAQ,IAAKpW,KAAK,QAAOnE,SAC7DN,EAAE,kBAAmB,eAExBa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACpB,QAAQ,WAAWqB,WAAWxB,EAAAA,EAAAA,KAACia,GAAAA,EAAK,IAAKrW,KAAK,QAAOnE,SAC1DN,EAAE,uCAAwC,YAE7Ca,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACpB,QAAQ,WAAWqB,WAAWxB,EAAAA,EAAAA,KAACka,GAAAA,EAAK,IAAKtW,KAAK,QAAOnE,SAC1DN,EAAE,uCAAwC,YAE7Ca,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNU,WAAWxB,EAAAA,EAAAA,KAACma,EAAAA,EAAI,IAChBzY,QAASA,IAAMW,EAAO+W,EAAS9U,IAC/BV,KAAK,QAAOnE,SAEXN,EAAE,cAAe,WAEpBa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,WACRW,MAAM,QACNU,WAAWxB,EAAAA,EAAAA,KAACoa,EAAAA,EAAM,IAClB1Y,QAASA,IAAM4X,GAAqB,GACpC1V,KAAK,QAAOnE,SAEXN,EAAE,gBAAiB,mBAK1Ba,EAAAA,EAAAA,KAAC4H,EAAAA,EAAO,CAACrI,GAAI,CAAEoJ,GAAI,MAEnBtJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEC,GAAI,GAAIC,SAAA,EACjBO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,qCAAsC,0BAE3CE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ6H,SAAU,OAAQzH,IAAK,GAAIL,SAAA,EACrDO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEsa,KAAM,aAAcpa,UAC7BJ,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAACtC,QAAQ,WAAWZ,GAAI,CAAE8G,EAAG,EAAGD,OAAQ,QAAS3G,SAAA,EACrDO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,YAAYuX,WAAW,OAAOhR,cAAY,EAAAjH,SAC3DN,EAAE,sCAAuC,iCAE3Cia,EAASlC,cACR7X,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQyG,cAAe,SAAUrG,IAAK,GAAIL,SAAA,EAC5DJ,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,2CAA4C,gBAAgB,OAAU,IAAEia,EAASlC,aAAamD,YACrHhb,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,uCAAwC,WAAW,OAAU,IAAEia,EAASlC,aAAaoD,YAC5Gjb,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,qCAAsC,SAAS,OAAU,IAAEia,EAASlC,aAAaqD,eACxGlb,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,qCAAsC,UAAU,OAAU,IAAEia,EAASlC,aAAasD,cACzGnb,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,8CAA+C,kBAAkB,OAAU,IAAEia,EAASlC,aAAauD,kBAC1Hpb,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,wCAAyC,YAAY,OAAU,IAAEia,EAASlC,aAAawD,eAGhH1a,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,SAAEN,EAAE,gBAAiB,mBAItCa,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEsa,KAAM,aAAcpa,UAC7BJ,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAACtC,QAAQ,WAAWZ,GAAI,CAAE8G,EAAG,EAAGD,OAAQ,QAAS3G,SAAA,EACrDO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,YAAYuX,WAAW,OAAOhR,cAAY,EAAAjH,SAC3DN,EAAE,sCAAuC,uBAE3Cia,EAASlC,cACR7X,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAAAhE,SAAA,EAACJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,2CAA4C,gBAAgB,OAAU,IAAEia,EAASlC,aAAayD,YAErH3a,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,SAAEN,EAAE,gBAAiB,yBAO1CE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAG,SAAA,EACFO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,yCAA0C,uBAE/CE,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAACtC,QAAQ,WAAWZ,GAAI,CAAE8G,EAAG,GAAI5G,SAAA,EACrCO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAK6C,MAAM,SAAS0D,cAAY,EAAAjH,SACjDN,EAAE,wCAAyC,uBAE9CE,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACqQ,WAAS,EAAC9Q,MAAM,SAAQvD,SAAA,CACjCN,EAAE,qCAAsC,OAAO,KAAGia,EAAS9U,OAG9DjF,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACqQ,WAAS,EAAC9Q,MAAM,SAAQvD,SAAA,EAClCO,EAAAA,EAAAA,KAAA,MAAAP,SAAI,6IAAiFO,EAAAA,EAAAA,KAAA,UACrFA,EAAAA,EAAAA,KAAA,MAAAP,SAAI,kJAGNO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACqQ,WAAS,EAAC9Q,MAAM,SAAQvD,UAClCJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAAQ,wBAAoC,QAArBqZ,EAAAM,EAASlC,oBAAY,IAAA4B,OAAA,EAArBA,EAAuB8B,SAAUrB,EAAWH,EAASrV,iBAG9E1E,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACqQ,WAAS,EAAArU,SAAA,EACnBJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,uCAAwC,WAAW,OAAU,KAAuB,QAArB4Z,EAAAK,EAASlC,oBAAY,IAAA6B,OAAA,EAArBA,EAAuBsB,UAAWjB,EAASpC,WAGvH3X,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACqQ,WAAS,EAAArU,SAAA,EACnBJ,EAAAA,EAAAA,MAAA,UAAAI,SAAA,CAASN,EAAE,uCAAwC,WAAW,OAAU,KAAuB,QAArB6Z,EAAAI,EAASlC,oBAAY,IAAA8B,OAAA,EAArBA,EAAuB2B,UAAWvB,EAASnC,WAGvHjX,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACqQ,WAAS,EAAArU,SAAC,yLAItBO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAAC,uDACtCO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACqQ,WAAS,EAAArU,SAAC,oMAItBO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAAC,kEACtCJ,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACqQ,WAAS,EAAArU,SAAA,CAAC,gGACsB2Z,EAASW,UAAYR,EAAWH,EAASW,WAAa,kEAAmC,QAGrI/Z,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAAC,+DACtCJ,EAAAA,EAAAA,MAACoE,EAAAA,EAAU,CAACqQ,WAAS,EAAArU,SAAA,CAAC,uDACyB,QAArBwZ,EAAAG,EAASlC,oBAAY,IAAA+B,OAAA,EAArBA,EAAuB4B,gBAAiB,qDAGlExb,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE+B,GAAI,EAAG5B,QAAS,OAAQ2B,eAAgB,gBAAiBkG,SAAU,OAAQzH,IAAK,GAAIL,SAAA,EAC7FJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEiH,UAAW,SAAUsU,SAAU,IAAKjB,KAAM,GAAIpa,SAAA,EACvDO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACiU,WAAW,OAAMjY,SAAC,sCAC9BO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACmD,UAAU,SAAQnH,SAAC,uCAC/BO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAE6G,OAAQ,GAAI9E,GAAI,MAC3BtB,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACiU,WAAW,OAAMjY,UAAuB,QAArByZ,EAAAE,EAASlC,oBAAY,IAAAgC,OAAA,EAArBA,EAAuBuB,gBAAiB,6CACvEza,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,UAAuB,QAArB0Z,EAAAC,EAASlC,oBAAY,IAAAiC,OAAA,EAArBA,EAAuBuB,UAAW,0BAGjDrb,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEiH,UAAW,SAAUsU,SAAU,IAAKjB,KAAM,GAAIpa,SAAA,EACvDO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACiU,WAAW,OAAMjY,SAAC,sCAC9BO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACmD,UAAU,SAAQnH,SAAC,uCAC/BO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAE6G,OAAQ,GAAI9E,GAAI,MAC3BtB,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACiU,WAAW,OAAMjY,SAAC,6CAC9BO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,SAAC,sCAQtBJ,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CAACZ,KAAM4O,EAAmB3O,QAASA,IAAM4O,GAAqB,GAAO7Z,SAAA,EAC1EO,EAAAA,EAAAA,KAACyL,EAAAA,EAAW,CAAAhM,SAAEN,EAAE,4CAA6C,gCAC7Da,EAAAA,EAAAA,KAAC4L,EAAAA,EAAa,CAAAnM,UACZO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,SAAEN,EAAE,2CAA4C,qFAE7DE,EAAAA,EAAAA,MAACuT,EAAAA,EAAa,CAAAnT,SAAA,EACZO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACG,QAASA,IAAM4X,GAAqB,GAAO7Z,SAAEN,EAAE,gBAAiB,aACxEa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLG,QAASA,KACPa,EAAS6W,EAAS9U,IAClBgV,GAAqB,IAEvBxY,MAAM,QACNX,QAAQ,YAAWV,SAElBN,EAAE,8CAA+C,sBCyO9D,GApdqC4b,KACnC,MAAM,EAAE5b,EAAC,KAAEqD,IAASpD,EAAAA,EAAAA,OACb4b,EAAYC,IAAiBjV,EAAAA,EAAAA,UAAsB,cACnDkV,EAAkBC,IAAuBnV,EAAAA,EAAAA,WAAS,IAClDoV,EAAoBC,IAAyBrV,EAAAA,EAAAA,WAAS,IACtDlE,EAAWwZ,IAAgBtV,EAAAA,EAAAA,UAAqB,KAChDuV,EAAWC,IAAgBxV,EAAAA,EAAAA,UAAqB,KAChDJ,EAAS+E,IAAc3E,EAAAA,EAAAA,WAAS,IAChCyV,EAAkBC,IAAuB1V,EAAAA,EAAAA,UAA0B,OACnEqT,EAAmBC,IAAwBtT,EAAAA,EAAAA,WAAS,IACpD2V,EAAkBC,IAAuB5V,EAAAA,EAAAA,UAAwB,OACjE6V,EAAUC,IAAe9V,EAAAA,EAAAA,UAI7B,CAAEyE,MAAM,EAAO5D,QAAS,GAAIkV,SAAU,aAWzCvN,EAAAA,EAAAA,WAAU,KACUzC,WAChBpB,GAAW,GACX,UAGQ,IAAIqR,QAAQC,GAAWhQ,WAAWgQ,EAAS,MAgCjDX,EA7BkC,CAChC,CACEhX,GAAI,IACJZ,KAAM,qCACN0M,YAAa,6DACblP,KAAM,WACNE,OAAQ,SACR2C,UAAW,uBACX2J,UAAW,uBACXxJ,UAAW,yBACXL,iBAAkB,EAClBP,WAAW,EACXwM,gBAAiB,IAEnB,CACExL,GAAI,IACJZ,KAAM,4CACN0M,YAAa,mEACblP,KAAM,WACNE,OAAQ,SACR2C,UAAW,uBACX2J,UAAW,uBACXxJ,UAAW,uBACXL,iBAAkB,EAClBP,WAAW,EACXwM,gBAAiB,KAKvB,CAAE,MAAOhD,GACP7N,QAAQ6N,MAAM,4BAA6BA,GAC3CgP,EAAY,CACVrR,MAAM,EACN5D,QAAS1H,EAAE,2CACX4c,SAAU,SAEd,CAGA,IA2CEP,EA1CkC,CAChC,CACElX,GAAI,OACJZ,KAAM,sDACNqT,WAAY,IACZ9L,aAAc,qCACd7J,OAAQ,SACR4V,OAAQ,sBACRC,OAAQ,gCACRlT,UAAW,uBACX2J,UAAW,uBACXxJ,UAAW,yBACX4V,SAAU,uBACVC,UAAW,wBAEb,CACEzV,GAAI,OACJZ,KAAM,6DACNqT,WAAY,IACZ9L,aAAc,4CACd7J,OAAQ,UACR4V,OAAQ,sBACRC,OAAQ,sBACRlT,UAAW,uBACX2J,UAAW,uBACXxJ,UAAW,wBAEb,CACEI,GAAI,OACJZ,KAAM,0DACNqT,WAAY,IACZ9L,aAAc,yCACd7J,OAAQ,QACR4V,OAAQ,sBACRC,OAAQ,yBACRlT,UAAW,uBACX2J,UAAW,uBACXxJ,UAAW,yBACX6V,UAAW,yBAKjB,CAAE,MAAOjN,GACP7N,QAAQ6N,MAAM,2BAA4BA,EAC5C,CAAC,QACCnC,GAAW,EACb,GAGFuR,IACC,IAEH,MA6CMC,EAAsBA,KAC1BL,EAAY9P,IAAIvL,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUuL,GAAI,IAAEvB,MAAM,MAkBlC2R,EAAsBhD,IAC1BsC,EAAoBtC,IAGhBiD,GAAoBA,KACxBX,EAAoB,OAGhBY,GAAqBC,IACzBX,EAAoBW,GACpBjD,GAAqB,IAyBvB,OACEja,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE8G,EAAG,GAAI5G,SAAA,EAChBO,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAEG,QAAS,OAAQ2B,eAAgB,gBAAiBtB,WAAY,SAAUP,GAAI,GAAIC,UACzFO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,8BAIPa,EAAAA,EAAAA,KAACV,EAAAA,EAAG,CAACC,GAAI,CAAE+I,aAAc,EAAGwK,YAAa,UAAWtT,GAAI,GAAIC,UAC1DJ,EAAAA,EAAAA,MAACmd,EAAAA,EAAI,CACHnc,MAAO2a,EACPza,SA7DgBkc,CAACtX,EAA6BuX,KACpDzB,EAAcyB,IA6DR,aAAW,2BAA0Bjd,SAAA,EAErCO,EAAAA,EAAAA,KAAC2c,EAAAA,EAAG,CAAC1b,MAAO9B,EAAE,kCAAmCkB,MAAM,eACvDL,EAAAA,EAAAA,KAAC2c,EAAAA,EAAG,CAAC1b,MAAO9B,EAAE,kCAAmCkB,MAAM,mBAI3C,cAAf2a,GACC3b,EAAAA,EAAAA,MAAAud,EAAAA,SAAA,CAAAnd,SAAA,EACEO,EAAAA,EAAAA,KAAC6c,GAAY,CACX/a,UAAWA,EACX8D,QAASA,EACT7G,cA3OqB+d,KAC7B3B,GAAoB,OA6Odnb,EAAAA,EAAAA,KAAC+c,GAAc,CACbtS,KAAMyQ,EACNxQ,QA5OsBsS,KAC9B7B,GAAoB,IA4OZxV,SAjImBoG,UAC3B,IACEpB,GAAW,GAEX1L,QAAQC,IAAI,sBAAuByX,SAG7B,IAAIqF,QAAQC,GAAWhQ,WAAWgQ,EAAS,OAGjD,MAAMzO,EAAwB,CAC5BlJ,GAAIiI,KAAKE,SAASwH,SAAS,IAAIgJ,UAAU,EAAG,GAC5CvZ,KAAMiT,EAAOjT,KACb0M,YAAauG,EAAOvG,aAAe,GACnClP,KAAMyV,EAAOzV,KACbE,OAAQ,SACR2C,WAAW,IAAID,MAAO2J,cACtBC,WAAW,IAAI5J,MAAO2J,cACtBvJ,UAAW,6CACXL,iBAAkB8S,EAAO7G,gBAAgB5M,OACzCI,WAAW,EACXwM,gBAAiB6G,EAAO7G,iBAI1BwL,EAAa4B,GAAiB,CAAC1P,KAAgB0P,IAE/CpB,EAAY,CACVrR,MAAM,EACN5D,QAAS1H,EAAE,uDACX4c,SAAU,WAEd,CAAE,MAAOjP,GAOP,MANA7N,QAAQ6N,MAAM,4BAA6BA,GAC3CgP,EAAY,CACVrR,MAAM,EACN5D,QAAS1H,EAAE,qDACX4c,SAAU,UAENjP,CACR,CAAC,QACCnC,GAAW,EACb,SA2FItL,EAAAA,EAAAA,MAACoD,EAAAA,EAAK,CAAClD,GAAI,CAAE8G,EAAG,GAAI5G,SAAA,EAClBJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAO2B,eAAe,gBAAgBtB,WAAW,SAASP,GAAI,EAAEC,SAAA,EAC3EO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAKuG,cAAY,EAAAjH,SAClCN,EAAE,iCAELa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLpB,QAAQ,YACRW,MAAM,UACNU,WAAWxB,EAAAA,EAAAA,KAACmd,EAAAA,EAAG,IACfzb,QAASA,IAAM2Z,GAAsB,GAAM5b,SAE1CN,EAAE,0CAINyG,GACC5F,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAC3C,MAAM,gBAAgBgT,WAAS,EAAArU,SACxCN,EAAE,wCAGLa,EAAAA,EAAAA,KAAC2C,EAAAA,EAAc,CAAAlD,UACbJ,EAAAA,EAAAA,MAACuD,EAAAA,EAAK,CAAAnD,SAAA,EACJO,EAAAA,EAAAA,KAAC6C,EAAAA,EAAS,CAAApD,UACRJ,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAAArD,SAAA,EACPO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,mCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,mCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,mCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,qCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,qCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,wCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,qCACda,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAEN,EAAE,2CAGlBa,EAAAA,EAAAA,KAACiD,EAAAA,EAAS,CAAAxD,SACP8b,EAAUpY,IAAKiW,IACd/Z,EAAAA,EAAAA,MAACyD,EAAAA,EAAQ,CAEPO,OAAK,EACL3B,QAASA,IAAM0a,EAAmBhD,GAClC7Z,GAAI,CAAEiY,OAAQ,WAAY/X,SAAA,EAE1BO,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAE2Z,EAAS9U,MACrBtE,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAE2Z,EAAS1V,QACrB1D,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAE2Z,EAASnO,gBACrBjL,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAE2Z,EAASpC,UACrBhX,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAE2Z,EAASnC,UACrBjX,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,SAAE,IAAIqE,KAAKsV,EAASrV,WAAWC,mBAAmBxB,EAAKyB,aACjEjE,EAAAA,EAAAA,KAAC+C,EAAAA,EAAS,CAAAtD,UACRO,EAAAA,EAAAA,KAAC2D,EAAAA,EAAI,CACH1C,MACsB,WAApBmY,EAAShY,OAAsBjC,EAAE,iCACb,YAApBia,EAAShY,OAAuBjC,EAAE,kCACd,UAApBia,EAAShY,OAAqBjC,EAAE,gCACZ,YAApBia,EAAShY,OAAuBjC,EAAE,kCAAoCA,EAAE,oCAE1E2B,MACsB,WAApBsY,EAAShY,OAAsB,UACX,YAApBgY,EAAShY,OAAuB,UACZ,UAApBgY,EAAShY,OAAqB,UAAY,QAE5CwC,KAAK,aAGTvE,EAAAA,EAAAA,MAAC0D,EAAAA,EAAS,CAAAtD,SAAA,EACRO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CACTT,KAAK,QACLQ,MAAOjF,EAAE,iCACTuC,QAASA,IAAM0a,EAAmBhD,GAAU3Z,UAE5CO,EAAAA,EAAAA,KAACod,EAAAA,EAAU,CAAC5Z,SAAS,aAEvBxD,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAACT,KAAK,QAAQQ,MAAOjF,EAAE,qCAAqCM,UACrEO,EAAAA,EAAAA,KAACqd,EAAAA,EAAY,CAAC7Z,SAAS,aAEzBxD,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CACTT,KAAK,QACLQ,MAAOjF,EAAE,mCACTuC,QAAUlB,IACRA,EAAE8c,kBACFhB,GAAkBlD,EAAS9U,KAC3B7E,UAEFO,EAAAA,EAAAA,KAACoa,EAAAA,EAAM,CAAC5W,SAAS,QAAQ1C,MAAM,iBA9C9BsY,EAAS9U,gBA0D9BtE,EAAAA,EAAAA,KAACud,EAAAA,EAAQ,CACP9S,KAAMoR,EAASpR,KACf+S,iBAAkB,IAClB9S,QAASyR,EACTsB,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAAUle,UAEvDO,EAAAA,EAAAA,KAAC4d,EAAAA,EAAK,CACJlT,QAASyR,EACTJ,SAAUF,EAASE,SACnBxc,GAAI,CAAEoC,MAAO,QAASlC,SAErBoc,EAAShV,aAKdxH,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CACLZ,OAAQgR,EACR/Q,QAAS2R,GACTnc,WAAS,EACT0B,SAAS,KAAInC,SAAA,EAEbO,EAAAA,EAAAA,KAACyL,EAAAA,EAAW,CAAAhM,UACVJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAOK,WAAW,SAAQN,SAAA,EACrCO,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAAS2a,GAAmB9c,GAAI,CAAEwB,GAAI,GAAItB,UACpDO,EAAAA,EAAAA,KAAC0Z,EAAAA,EAAS,OAEZ1Z,EAAAA,EAAAA,KAAA,QAAAP,SAAON,EAAE,+CAGba,EAAAA,EAAAA,KAAC4L,EAAAA,EAAa,CAACkG,UAAQ,EAAArS,SACpBgc,IACCzb,EAAAA,EAAAA,KAAC6d,GAAc,CACbzE,UAAQ3Y,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACHgb,GAAgB,IACnBvE,aAAc,CACZmD,QAASoB,EAAiBzE,OAC1B2D,QAASc,EAAiBxE,OAC1B2D,OAAQ,IAAI9W,KAAK2X,EAAiB1X,WAAWC,mBAAmBxB,EAAKyB,UACrEqW,QAAS,kCACTC,WAAY,aACZC,UAAW,aACXC,cAAe,yBACfC,QAAS,wBACTG,cAAe,yBAGnBnQ,QAAS2R,GACT9Z,SAAU+Z,GACVja,OA3LgBka,IAE1BT,EAAY,CACVrR,MAAM,EACN5D,QAAS1H,EAAE,0CACX4c,SAAU,kBA6LV1c,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CACLZ,KAAM4O,EACN3O,QAASA,IAAM4O,GAAqB,GAAO7Z,SAAA,EAE3CO,EAAAA,EAAAA,KAACyL,EAAAA,EAAW,CAAAhM,SAAEN,EAAE,iDAChBa,EAAAA,EAAAA,KAAC4L,EAAAA,EAAa,CAAAnM,UACZO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAAAhE,SAAEN,EAAE,kDAEjBE,EAAAA,EAAAA,MAACuT,EAAAA,EAAa,CAAAnT,SAAA,EACZO,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACG,QAASA,IAAM4X,GAAqB,GAAO7Z,SAAEN,EAAE,oBACvDa,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CACLG,QA1NkBoc,KACtBnC,IACFH,EAAaxP,GAAQA,EAAK2C,OAAOoP,GAAKA,EAAEzZ,KAAOqX,IAC/CrC,GAAqB,GACrBsC,EAAoB,MACpBE,EAAY,CACVrR,MAAM,EACN5D,QAAS1H,EAAE,uDACX4c,SAAU,cAmNNjb,MAAM,QACNX,QAAQ,YAAWV,SAElBN,EAAE,0BAMTE,EAAAA,EAAAA,MAACgM,EAAAA,EAAM,CACLZ,KAAM2Q,EACN1Q,QAASA,IAAM2Q,GAAsB,GACrCzZ,SAAS,KACT1B,WAAS,EACToL,WAAY,CACV/L,GAAI,CACF6G,OAAQ,OACRmF,UAAW,OACX5J,MAAO,MACPC,SAAU,WAEZnC,SAAA,EAEFO,EAAAA,EAAAA,KAACyL,EAAAA,EAAW,CAAAhM,UACVJ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACI,QAAQ,OAAO2B,eAAe,gBAAgBtB,WAAW,SAAQN,SAAA,EACpEO,EAAAA,EAAAA,KAACyD,EAAAA,EAAU,CAACtD,QAAQ,KAAIV,SAAEN,EAAE,0CAC5Ba,EAAAA,EAAAA,KAACqE,EAAAA,EAAU,CAAC3C,QAASA,IAAM2Z,GAAsB,GAAO5b,UACtDO,EAAAA,EAAAA,KAACge,EAAAA,EAAK,YAIZhe,EAAAA,EAAAA,KAAC4L,EAAAA,EAAa,CAAAnM,UACZO,EAAAA,EAAAA,KAACie,GAAc,CACbnc,UAAWA,EACXmR,OAAQA,IAAMoI,GAAsB,GACpCjG,SAtRoB0B,IAC5B0E,EAAaxP,GAAQ,CAAC8K,KAAgB9K,IACtCqP,GAAsB,GACtBK,EAAoB5E,GACpBgF,EAAY,CACVrR,MAAM,EACN5D,QAAS1H,EAAE,uDACX4c,SAAU,uB","sources":["pages/ContractManagement/components/TemplateList/TemplateFilters.tsx","pages/ContractManagement/components/TemplateList/TemplateTable.tsx","pages/ContractManagement/components/AIContractGeneration/AIPromptInput.tsx","pages/ContractManagement/components/AIContractGeneration/ContractPreview.tsx","pages/ContractManagement/components/AIContractGeneration/mockData.ts","pages/ContractManagement/components/AIContractGeneration/index.tsx","pages/ContractManagement/components/TemplateList/index.tsx","pages/ContractManagement/components/UploadTemplate/index.tsx","pages/ContractManagement/components/PaymentScheduleStep/index.tsx","pages/ContractManagement/components/CreateContract/index.tsx","pages/ContractManagement/components/ContractDetail/index.tsx","pages/ContractManagement/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Box, TextField, MenuItem, Button } from '@mui/material';\r\nimport { TemplateFilterValues } from './types';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface TemplateFiltersProps {\r\n  filters: TemplateFilterValues;\r\n  onFilterChange: (filters: TemplateFilterValues) => void;\r\n  onUploadClick: () => void;\r\n  onCreateWithAIClick?: () => void;\r\n}\r\n\r\nconst TemplateFilters: React.FC<TemplateFiltersProps> = ({\r\n  filters,\r\n  onFilterChange,\r\n  onUploadClick,\r\n  onCreateWithAIClick = () => console.log('Create with AI clicked'),\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onFilterChange({ ...filters, search: e.target.value });\r\n  };\r\n\r\n  const handleTypeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onFilterChange({ ...filters, type: e.target.value as any });\r\n  };\r\n\r\n  const handleStatusChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onFilterChange({ ...filters, status: e.target.value as any });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ mb: 3 }}>\r\n      <Box sx={{ \r\n        display: 'grid',\r\n        gridTemplateColumns: { xs: '1fr', md: '1fr 1fr 1fr' },\r\n        gap: 2,\r\n        alignItems: 'center',\r\n        mb: 2\r\n      }}>\r\n        <Box>\r\n          <TextField\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            placeholder={t('pages.contracts.templateList.filters.searchPlaceholder')}\r\n            value={filters.search}\r\n            onChange={handleSearchChange}\r\n            InputProps={{\r\n              startAdornment: <SearchIcon sx={{ color: 'text.secondary', mr: 1 }} />,\r\n            }}\r\n          />\r\n        </Box>\r\n        <Box>\r\n          <TextField\r\n            select\r\n            fullWidth\r\n            label={t('pages.contracts.templateList.filters.typeLabel')}\r\n            value={filters.type}\r\n            onChange={handleTypeChange}\r\n            variant=\"outlined\"\r\n          >\r\n            <MenuItem value=\"all\">{t('pages.contracts.templateList.filters.typeOptions.all')}</MenuItem>\r\n            <MenuItem value=\"internal\">{t('pages.contracts.templateList.table.chips.type.internal')}</MenuItem>\r\n            <MenuItem value=\"customer\">{t('pages.contracts.templateList.table.chips.type.customer')}</MenuItem>\r\n            <MenuItem value=\"AI\">AI</MenuItem>\r\n          </TextField>\r\n        </Box>\r\n        <Box>\r\n          <TextField\r\n            select\r\n            fullWidth\r\n            label={t('pages.contracts.templateList.filters.statusLabel')}\r\n            value={filters.status}\r\n            onChange={handleStatusChange}\r\n            variant=\"outlined\"\r\n          >\r\n            <MenuItem value=\"all\">{t('pages.contracts.templateList.filters.statusOptions.all')}</MenuItem>\r\n            <MenuItem value=\"active\">{t('pages.contracts.templateList.table.chips.status.active')}</MenuItem>\r\n            <MenuItem value=\"inactive\">{t('pages.contracts.templateList.table.chips.status.inactive')}</MenuItem>\r\n          </TextField>\r\n        </Box>\r\n      </Box>\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        justifyContent: 'flex-end',\r\n        gap: 2,\r\n        mt: { xs: 2, md: 0 }\r\n      }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          startIcon={<AddIcon />}\r\n          onClick={onUploadClick}\r\n          sx={{\r\n            width: { xs: '100%', md: 'auto' },\r\n            maxWidth: '250px'\r\n          }}\r\n        >\r\n          {t('pages.contracts.templateList.filters.buttons.uploadTemplate')}\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          startIcon={<SmartToyIcon />}\r\n          onClick={onCreateWithAIClick}\r\n          sx={{\r\n            width: { xs: '100%', md: 'auto' },\r\n            maxWidth: '250px'\r\n          }}\r\n        >\r\n          {t('pages.contracts.templateList.filters.buttons.createWithAI')}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TemplateFilters;\r\n","import React from 'react';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  IconButton,\r\n  Tooltip,\r\n  Chip,\r\n  Box,\r\n  Typography,\r\n  TablePagination,\r\n} from '@mui/material';\r\nimport {\r\n  Visibility as ViewIcon,\r\n  Edit as EditIcon,\r\n  Star as StarIcon,\r\n  StarBorder as StarBorderIcon,\r\n  Delete as DeleteIcon,\r\n} from '@mui/icons-material';\r\nimport { Template } from './types';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface TemplateTableProps {\r\n  templates: Template[];\r\n  page: number;\r\n  rowsPerPage: number;\r\n  totalRows: number;\r\n  onPageChange: (page: number) => void;\r\n  onRowsPerPageChange: (rowsPerPage: number) => void;\r\n  onView: (id: string) => void;\r\n  onEdit: (id: string) => void;\r\n  onSetDefault: (id: string) => void;\r\n  onDelete: (id: string) => void;\r\n}\r\n\r\nconst TemplateTable: React.FC<TemplateTableProps> = ({\r\n  templates,\r\n  page,\r\n  rowsPerPage,\r\n  totalRows,\r\n  onPageChange,\r\n  onRowsPerPageChange,\r\n  onView,\r\n  onEdit,\r\n  onSetDefault,\r\n  onDelete,\r\n}) => {\r\n  const { t, i18n } = useTranslation();\r\n  const handleChangePage = (event: unknown, newPage: number) => {\r\n    onPageChange(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    onRowsPerPageChange(parseInt(event.target.value, 10));\r\n  };\r\n\r\n  return (\r\n    <Paper sx={{ width: '100%', overflow: 'hidden' }}>\r\n      <TableContainer>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t('pages.contracts.templateList.table.columns.name')}</TableCell>\r\n              <TableCell align=\"center\">{t('pages.contracts.templateList.table.columns.type')}</TableCell>\r\n              <TableCell align=\"center\">{t('pages.contracts.templateList.table.columns.status')}</TableCell>\r\n              <TableCell align=\"center\">{t('pages.contracts.templateList.table.columns.fields')}</TableCell>\r\n              <TableCell align=\"center\">{t('pages.contracts.templateList.table.columns.createdAt')}</TableCell>\r\n              <TableCell align=\"center\">{t('pages.contracts.templateList.table.columns.createdBy')}</TableCell>\r\n              <TableCell align=\"center\">{t('pages.contracts.templateList.table.columns.actions')}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {templates.length > 0 ? (\r\n              templates.map((template) => (\r\n                <TableRow key={template.id} hover>\r\n                  <TableCell>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      {template.isDefault && (\r\n                        <StarIcon\r\n                          color=\"primary\"\r\n                          sx={{ fontSize: '1rem', mr: 1 }}\r\n                        />\r\n                      )}\r\n                      <Typography variant=\"body2\">{template.name}</Typography>\r\n                    </Box>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <Chip\r\n                      label={template.type === 'internal' ? t('pages.contracts.templateList.table.chips.type.internal') : t('pages.contracts.templateList.table.chips.type.customer')}\r\n                      color={template.type === 'internal' ? 'primary' : 'default'}\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <Chip\r\n                      label={template.status === 'active' ? t('pages.contracts.templateList.table.chips.status.active') : t('pages.contracts.templateList.table.chips.status.inactive')}\r\n                      color={template.status === 'active' ? 'success' : 'default'}\r\n                      size=\"small\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">{template.placeholderCount}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {new Date(template.createdAt).toLocaleDateString(i18n.language)}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">{template.createdBy}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <Box display=\"flex\" justifyContent=\"center\">\r\n                      <Tooltip title={t('pages.contracts.templateList.table.tooltips.view')}>\r\n                        <IconButton size=\"small\" onClick={() => onView(template.id)}>\r\n                          <ViewIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                      <Tooltip title={t('pages.contracts.templateList.table.tooltips.edit')}>\r\n                        <IconButton size=\"small\" onClick={() => onEdit(template.id)}>\r\n                          <EditIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                      <Tooltip title={template.isDefault ? t('pages.contracts.templateList.table.tooltips.default') : t('pages.contracts.templateList.table.tooltips.setDefault')}>\r\n                        <span>\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            onClick={() => onSetDefault(template.id)}\r\n                            disabled={template.isDefault}\r\n                            color={template.isDefault ? 'primary' : 'default'}\r\n                          >\r\n                            {template.isDefault ? (\r\n                              <StarIcon fontSize=\"small\" />\r\n                            ) : (\r\n                              <StarBorderIcon fontSize=\"small\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </span>\r\n                      </Tooltip>\r\n                      <Tooltip title={t('pages.contracts.templateList.table.tooltips.delete')}>\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => onDelete(template.id)}\r\n                          color=\"error\"\r\n                        >\r\n                          <DeleteIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                    </Box>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n            ) : (\r\n              <TableRow>\r\n                <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    {t('pages.contracts.templateList.table.empty')}\r\n                  </Typography>\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[5, 10, 25]}\r\n        component=\"div\"\r\n        count={totalRows}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n        onRowsPerPageChange={handleChangeRowsPerPage}\r\n        labelRowsPerPage={t('pages.contracts.templateList.table.pagination.rowsPerPage')}\r\n        labelDisplayedRows={({ from, to, count }) =>\r\n          t('pages.contracts.templateList.table.pagination.displayedRows', { from, to, count })\r\n        }\r\n      />\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TemplateTable;\r\n","import React, { useState } from 'react';\r\nimport { \r\n  Box, \r\n  TextField, \r\n  Button, \r\n  CircularProgress, \r\n  Typography, \r\n  Paper,\r\n  Chip,\r\n  Divider\r\n} from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface AIPromptInputProps {\r\n  onSubmit: (prompt: string) => void;\r\n  loading: boolean;\r\n  chatHistory: Array<{ role: 'user' | 'assistant', content: string }>;\r\n}\r\n\r\n// Prompt suggestions will be loaded from i18n\r\n\r\nconst AIPromptInput: React.FC<AIPromptInputProps> = ({ \r\n  onSubmit, \r\n  loading, \r\n  chatHistory \r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [prompt, setPrompt] = useState<string>('');\r\n  const PROMPT_SUGGESTIONS = t('pages.contracts.aiGeneration.prompt.suggestions.items', { returnObjects: true }) as string[];\r\n  \r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (prompt.trim() && !loading) {\r\n      onSubmit(prompt.trim());\r\n      setPrompt('');\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion: string) => {\r\n    const newPrompt = t('pages.contracts.aiGeneration.prompt.suggestions.compose', { suggestion });\r\n    setPrompt(newPrompt);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ \r\n      display: 'flex', \r\n      flexDirection: 'column', \r\n      height: '100%',\r\n      p: 0\r\n    }}>\r\n      {/* Chat History */}\r\n      <Box sx={{ \r\n        flexGrow: 1, \r\n        overflowY: 'auto',\r\n        p: 2,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: 2\r\n      }}>\r\n        {chatHistory.length === 0 ? (\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            height: '100%',\r\n            color: 'text.secondary',\r\n            textAlign: 'center',\r\n            p: 3\r\n          }}>\r\n            <SmartToyIcon sx={{ fontSize: 60, mb: 2, opacity: 0.7 }} />\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              {t('pages.contracts.aiGeneration.prompt.emptyState.title')}\r\n            </Typography>\r\n            <Typography variant=\"body1\" sx={{ maxWidth: '80%', mx: 'auto' }}>\r\n              {t('pages.contracts.aiGeneration.prompt.emptyState.description')}\r\n            </Typography>\r\n            <Typography variant=\"body2\" sx={{ mt: 2, fontStyle: 'italic' }}>\r\n              {t('pages.contracts.aiGeneration.prompt.emptyState.example')}\r\n            </Typography>\r\n          </Box>\r\n        ) : (\r\n          chatHistory.map((message, index) => (\r\n            <Paper\r\n              key={index}\r\n              elevation={0}\r\n              sx={{\r\n                p: 2,\r\n                backgroundColor: message.role === 'assistant' ? 'rgba(0, 0, 0, 0.04)' : 'transparent',\r\n                borderRadius: 2,\r\n                maxWidth: '90%',\r\n                alignSelf: message.role === 'assistant' ? 'flex-start' : 'flex-end',\r\n              }}\r\n            >\r\n              <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 1 }}>\r\n                <Box sx={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center', \r\n                  justifyContent: 'center',\r\n                  backgroundColor: message.role === 'assistant' ? 'primary.main' : 'secondary.main',\r\n                  borderRadius: '50%',\r\n                  width: 32,\r\n                  height: 32,\r\n                  color: 'white'\r\n                }}>\r\n                  {message.role === 'assistant' ? <SmartToyIcon fontSize=\"small\" /> : <PersonIcon fontSize=\"small\" />}\r\n                </Box>\r\n                <Typography variant=\"body1\">\r\n                  {message.content}\r\n                </Typography>\r\n              </Box>\r\n            </Paper>\r\n          ))\r\n        )}\r\n      </Box>\r\n\r\n      {/* Prompt Suggestions */}\r\n      {chatHistory.length === 0 && (\r\n        <Box sx={{ px: 2, py: 1 }}>\r\n          <Typography variant=\"subtitle2\" gutterBottom>\r\n            {t('pages.contracts.aiGeneration.prompt.suggestions.title')}\r\n          </Typography>\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n            {PROMPT_SUGGESTIONS.map((suggestion, index) => (\r\n              <Chip\r\n                key={index}\r\n                label={suggestion}\r\n                onClick={() => handleSuggestionClick(suggestion)}\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                clickable\r\n              />\r\n            ))}\r\n          </Box>\r\n        </Box>\r\n      )}\r\n\r\n      <Divider />\r\n\r\n      {/* Input Area */}\r\n      <Box \r\n        component=\"form\" \r\n        onSubmit={handleSubmit}\r\n        sx={{ \r\n          p: 2, \r\n          display: 'flex',\r\n          alignItems: 'flex-end',\r\n          gap: 1\r\n        }}\r\n      >\r\n        <TextField\r\n          multiline\r\n          maxRows={4}\r\n          placeholder={t('pages.contracts.aiGeneration.input.placeholder')}\r\n          value={prompt}\r\n          onChange={(e) => setPrompt(e.target.value)}\r\n          fullWidth\r\n          variant=\"outlined\"\r\n          disabled={loading}\r\n          sx={{ \r\n            '& .MuiOutlinedInput-root': {\r\n              borderRadius: 2\r\n            }\r\n          }}\r\n        />\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          endIcon={loading ? <CircularProgress size={20} color=\"inherit\" /> : <SendIcon />}\r\n          disabled={!prompt.trim() || loading}\r\n          type=\"submit\"\r\n          sx={{ \r\n            height: 56,\r\n            borderRadius: 2,\r\n            px: 3\r\n          }}\r\n        >\r\n          {loading ? t('pages.contracts.aiGeneration.input.generating') : t('pages.contracts.aiGeneration.input.generate')}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AIPromptInput;\r\n","import React from 'react';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Paper, \r\n  Skeleton, \r\n  Button,\r\n  Divider\r\n} from '@mui/material';\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface ContractPreviewProps {\r\n  content: string;\r\n  onUpdate: (newContent: string) => void;\r\n  loading: boolean;\r\n  onSaveTemplate?: (content: string) => void;\r\n}\r\n\r\nconst ContractPreview: React.FC<ContractPreviewProps> = ({ \r\n  content, \r\n  onUpdate,\r\n  loading,\r\n  onSaveTemplate\r\n}) => {\r\n  const { t } = useTranslation();\r\n  // Function to handle content changes\r\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    onUpdate(e.target.value);\r\n  };\r\n\r\n  // Function to handle save template\r\n  const handleSaveTemplate = () => {\r\n    if (onSaveTemplate && content) {\r\n      onSaveTemplate(content);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ \r\n      height: '100%', \r\n      display: 'flex', \r\n      flexDirection: 'column',\r\n      p: 0\r\n    }}>\r\n      {/* Header */}\r\n      <Box sx={{ \r\n        p: 2, \r\n        borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Typography variant=\"h6\">\r\n          {t('pages.contracts.aiGeneration.preview.title')}\r\n        </Typography>\r\n        \r\n        <Box sx={{ display: 'flex', gap: 1 }}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            startIcon={<EditIcon />}\r\n            disabled={!content || loading}\r\n          >\r\n            {t('pages.contracts.aiGeneration.preview.buttons.edit')}\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            startIcon={<DownloadIcon />}\r\n            disabled={!content || loading}\r\n          >\r\n            {t('pages.contracts.aiGeneration.preview.buttons.download')}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            startIcon={<SaveIcon />}\r\n            disabled={!content || loading}\r\n            onClick={handleSaveTemplate}\r\n          >\r\n            {t('pages.contracts.aiGeneration.preview.buttons.saveAsTemplate')}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      \r\n      {/* Content Area */}\r\n      <Box sx={{ \r\n        flexGrow: 1, \r\n        overflowY: 'auto',\r\n        p: 2\r\n      }}>\r\n        {loading ? (\r\n          // Loading skeleton\r\n          <Box>\r\n            <Skeleton variant=\"text\" height={40} width=\"60%\" />\r\n            <Skeleton variant=\"text\" height={20} />\r\n            <Skeleton variant=\"text\" height={20} />\r\n            <Skeleton variant=\"text\" height={20} width=\"80%\" />\r\n            <Box sx={{ my: 2 }}>\r\n              <Divider />\r\n            </Box>\r\n            <Skeleton variant=\"text\" height={30} width=\"40%\" />\r\n            <Skeleton variant=\"text\" height={20} />\r\n            <Skeleton variant=\"text\" height={20} />\r\n            <Skeleton variant=\"text\" height={20} width=\"90%\" />\r\n            <Box sx={{ my: 2 }}>\r\n              <Divider />\r\n            </Box>\r\n            <Skeleton variant=\"text\" height={30} width=\"40%\" />\r\n            <Skeleton variant=\"text\" height={20} />\r\n            <Skeleton variant=\"text\" height={20} />\r\n          </Box>\r\n        ) : content ? (\r\n          // Contract content editor\r\n          <Paper \r\n            elevation={0} \r\n            sx={{ \r\n              height: '100%', \r\n              p: 2,\r\n              backgroundColor: 'rgba(0, 0, 0, 0.02)',\r\n              borderRadius: 2\r\n            }}\r\n          >\r\n            <textarea\r\n              value={content}\r\n              onChange={handleContentChange}\r\n              style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                padding: '16px',\r\n                border: '1px solid rgba(0, 0, 0, 0.12)',\r\n                borderRadius: '8px',\r\n                resize: 'none',\r\n                fontFamily: 'inherit',\r\n                fontSize: '14px',\r\n                lineHeight: '1.5',\r\n                backgroundColor: 'white'\r\n              }}\r\n            />\r\n          </Paper>\r\n        ) : (\r\n          // Empty state\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            height: '100%',\r\n            color: 'text.secondary',\r\n            textAlign: 'center',\r\n            p: 3\r\n          }}>\r\n            <EditIcon sx={{ fontSize: 60, mb: 2, opacity: 0.7 }} />\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              {t('pages.contracts.aiGeneration.preview.empty.title')}\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n              {t('pages.contracts.aiGeneration.preview.empty.description')}\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ContractPreview;\r\n","/**\r\n * Mock data and functions to simulate AI contract generation\r\n */\r\n\r\n/**\r\n * Generate a mock contract based on the provided prompt\r\n * @param prompt User's input prompt\r\n * @returns Generated contract content\r\n */\r\nexport const mockGenerateContract = (prompt: string): string => {\r\n  // Extract key information from prompt (in a real implementation, this would be done by AI)\r\n  const companyNames = extractCompanyNames(prompt);\r\n  const contractType = extractContractType(prompt);\r\n  const contractValue = extractContractValue(prompt);\r\n  const contractDuration = extractContractDuration(prompt);\r\n  \r\n  // Generate contract based on extracted information\r\n  return `\r\nHỢP ĐỒNG ${contractType.toUpperCase()}\r\n\r\nSố: ${Math.floor(Math.random() * 1000)}/2025/HĐDV\r\n\r\nGIỮA\r\n\r\n${companyNames.party1 || 'CÔNG TY CỔ PHẦN ITV'} (Bên A)\r\n\r\nVÀ\r\n\r\n${companyNames.party2 || 'CÔNG TY ABC'} (Bên B)\r\n\r\nHôm nay, ngày ${new Date().getDate()} tháng ${new Date().getMonth() + 1} năm ${new Date().getFullYear()}, tại Thành phố Hồ Chí Minh, chúng tôi gồm:\r\n\r\nBÊN A: ${companyNames.party1 || 'CÔNG TY CỔ PHẦN ITV'}\r\n- Địa chỉ: 123 Đường Nguyễn Văn Linh, Quận 7, TP.HCM\r\n- Điện thoại: 028.1234.5678\r\n- Mã số thuế: 0123456789\r\n- Đại diện: Ông Nguyễn Văn A\r\n- Chức vụ: Giám đốc\r\n\r\nBÊN B: ${companyNames.party2 || 'CÔNG TY ABC'}\r\n- Địa chỉ: 456 Đường Lê Lợi, Quận 1, TP.HCM\r\n- Điện thoại: 028.8765.4321\r\n- Mã số thuế: 9876543210\r\n- Đại diện: Bà Trần Thị B\r\n- Chức vụ: Giám đốc\r\n\r\nSau khi bàn bạc, hai bên thống nhất ký kết Hợp đồng ${contractType} với các điều khoản sau:\r\n\r\nĐIỀU 1: NỘI DUNG HỢP ĐỒNG\r\n\r\n1.1. Bên A đồng ý cung cấp cho Bên B dịch vụ ${contractType} theo các yêu cầu và tiêu chuẩn được quy định trong Phụ lục đính kèm Hợp đồng này.\r\n\r\n1.2. Bên B đồng ý sử dụng dịch vụ và thanh toán cho Bên A theo quy định tại Hợp đồng này.\r\n\r\nĐIỀU 2: GIÁ TRỊ HỢP ĐỒNG VÀ PHƯƠNG THỨC THANH TOÁN\r\n\r\n2.1. Tổng giá trị hợp đồng: ${contractValue || '500.000.000 VNĐ (Năm trăm triệu đồng)'}.\r\n\r\n2.2. Phương thức thanh toán: Thanh toán theo từng giai đoạn như sau:\r\n   - Đợt 1: 30% giá trị hợp đồng, tương đương ${calculatePercentage(contractValue, 30)} - Thanh toán sau khi ký hợp đồng.\r\n   - Đợt 2: 40% giá trị hợp đồng, tương đương ${calculatePercentage(contractValue, 40)} - Thanh toán sau khi hoàn thành giai đoạn 1.\r\n   - Đợt 3: 30% giá trị hợp đồng, tương đương ${calculatePercentage(contractValue, 30)} - Thanh toán sau khi nghiệm thu và bàn giao.\r\n\r\n2.3. Hình thức thanh toán: Chuyển khoản ngân hàng.\r\n\r\nĐIỀU 3: THỜI GIAN THỰC HIỆN\r\n\r\n3.1. Thời gian thực hiện hợp đồng: ${contractDuration || '6 tháng'} kể từ ngày ký.\r\n\r\n3.2. Lịch trình thực hiện chi tiết được quy định trong Phụ lục đính kèm.\r\n\r\nĐIỀU 4: QUYỀN VÀ NGHĨA VỤ CỦA BÊN A\r\n\r\n4.1. Quyền của Bên A:\r\n   - Yêu cầu Bên B thanh toán đúng hạn theo quy định tại Hợp đồng.\r\n   - Yêu cầu Bên B cung cấp thông tin, tài liệu cần thiết để thực hiện Hợp đồng.\r\n\r\n4.2. Nghĩa vụ của Bên A:\r\n   - Cung cấp dịch vụ đúng tiến độ và chất lượng theo thỏa thuận.\r\n   - Bảo mật thông tin của Bên B trong quá trình thực hiện Hợp đồng.\r\n\r\nĐIỀU 5: QUYỀN VÀ NGHĨA VỤ CỦA BÊN B\r\n\r\n5.1. Quyền của Bên B:\r\n   - Yêu cầu Bên A cung cấp dịch vụ đúng tiến độ và chất lượng.\r\n   - Được cung cấp thông tin về tiến độ thực hiện dự án.\r\n\r\n5.2. Nghĩa vụ của Bên B:\r\n   - Thanh toán đầy đủ và đúng hạn cho Bên A.\r\n   - Cung cấp thông tin, tài liệu cần thiết cho Bên A để thực hiện Hợp đồng.\r\n\r\nĐIỀU 6: ĐIỀU KHOẢN CHUNG\r\n\r\n6.1. Hợp đồng này có hiệu lực kể từ ngày ký và sẽ chấm dứt sau khi hai bên hoàn thành nghĩa vụ.\r\n\r\n6.2. Mọi tranh chấp phát sinh sẽ được giải quyết thông qua thương lượng. Trường hợp không thể thương lượng được, tranh chấp sẽ được đưa ra Tòa án có thẩm quyền để giải quyết.\r\n\r\n6.3. Hợp đồng này được lập thành 04 bản, mỗi bên giữ 02 bản có giá trị pháp lý như nhau.\r\n\r\nĐẠI DIỆN BÊN A                                  ĐẠI DIỆN BÊN B\r\n`;\r\n};\r\n\r\n// Helper functions to extract information from the prompt\r\nconst extractCompanyNames = (prompt: string): { party1: string; party2: string } => {\r\n  const party1 = prompt.includes('ITV') ? 'CÔNG TY CỔ PHẦN ITV' : '';\r\n  \r\n  // Try to extract company name after \"và Công ty\" or \"và\"\r\n  let party2 = '';\r\n  const companyMatch = prompt.match(/(?:và|giữa)(?:\\s+Công\\s+ty)?\\s+([A-Za-z0-9\\s]+)(?:,|\\.|$)/i);\r\n  if (companyMatch && companyMatch[1]) {\r\n    party2 = `CÔNG TY ${companyMatch[1].trim().toUpperCase()}`;\r\n  }\r\n  \r\n  return { party1, party2 };\r\n};\r\n\r\nconst extractContractType = (prompt: string): string => {\r\n  if (prompt.toLowerCase().includes('phát triển phần mềm')) {\r\n    return 'phát triển phần mềm';\r\n  } else if (prompt.toLowerCase().includes('dịch vụ phần mềm')) {\r\n    return 'dịch vụ phần mềm';\r\n  } else if (prompt.toLowerCase().includes('bảo trì')) {\r\n    return 'bảo trì phần mềm';\r\n  } else if (prompt.toLowerCase().includes('thương mại')) {\r\n    return 'thương mại';\r\n  } else if (prompt.toLowerCase().includes('nda') || prompt.toLowerCase().includes('bảo mật')) {\r\n    return 'bảo mật thông tin (NDA)';\r\n  } else {\r\n    return 'dịch vụ';\r\n  }\r\n};\r\n\r\nconst extractContractValue = (prompt: string): string => {\r\n  // Try to extract monetary values (e.g., 500 triệu, 1 tỷ)\r\n  const valueMatch = prompt.match(/(\\d+(?:\\.\\d+)?)\\s*(triệu|tỷ|trieu|ty)/i);\r\n  if (valueMatch) {\r\n    const value = parseFloat(valueMatch[1]);\r\n    const unit = valueMatch[2].toLowerCase();\r\n    \r\n    if (unit === 'tỷ' || unit === 'ty') {\r\n      return `${value.toLocaleString('vi-VN')}.000.000.000 VNĐ (${value} tỷ đồng)`;\r\n    } else {\r\n      return `${value.toLocaleString('vi-VN')}.000.000 VNĐ (${value} triệu đồng)`;\r\n    }\r\n  }\r\n  \r\n  return '500.000.000 VNĐ (Năm trăm triệu đồng)';\r\n};\r\n\r\nconst extractContractDuration = (prompt: string): string => {\r\n  // Try to extract time duration (e.g., 6 tháng, 1 năm)\r\n  const durationMatch = prompt.match(/(\\d+)\\s*(tháng|năm|thang|nam)/i);\r\n  if (durationMatch) {\r\n    const duration = parseInt(durationMatch[1]);\r\n    const unit = durationMatch[2].toLowerCase();\r\n    \r\n    if (unit === 'năm' || unit === 'nam') {\r\n      return `${duration} năm`;\r\n    } else {\r\n      return `${duration} tháng`;\r\n    }\r\n  }\r\n  \r\n  return '6 tháng';\r\n};\r\n\r\nconst calculatePercentage = (value: string, percentage: number): string => {\r\n  // Extract numeric value from contract value string\r\n  const numericMatch = value ? value.match(/(\\d+(?:\\.\\d+)?)/g) : null;\r\n  \r\n  if (numericMatch && numericMatch.length > 0) {\r\n    const numericValue = parseFloat(numericMatch[0].replace(/\\./g, ''));\r\n    const result = (numericValue * percentage / 100).toLocaleString('vi-VN');\r\n    return `${result}.000 VNĐ`;\r\n  }\r\n  \r\n  // Default values if extraction fails\r\n  const defaultValues: Record<number, string> = {\r\n    30: '150.000.000 VNĐ',\r\n    40: '200.000.000 VNĐ',\r\n    50: '250.000.000 VNĐ'\r\n  };\r\n  \r\n  return defaultValues[percentage] || `${percentage}% giá trị hợp đồng`;\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogTitle, IconButton, Box, Typography, TextField, Button } from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport AIPromptInput from './AIPromptInput';\r\nimport ContractPreview from './ContractPreview';\r\nimport { mockGenerateContract } from './mockData';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Template } from '../TemplateList/types';\r\n\r\ninterface AIContractGenerationProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSaveTemplate?: (template: Omit<Template, 'id'>) => void;\r\n}\r\n\r\nconst AIContractGeneration: React.FC<AIContractGenerationProps> = ({ \r\n  open, \r\n  onClose,\r\n  onSaveTemplate = () => console.log('Template saved') \r\n}) => {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [contractContent, setContractContent] = useState<string>('');\r\n  const [chatHistory, setChatHistory] = useState<Array<{ role: 'user' | 'assistant', content: string }>>([]);\r\n  const [saveDialogOpen, setSaveDialogOpen] = useState<boolean>(false);\r\n  const [templateName, setTemplateName] = useState<string>('');\r\n  const [savingTemplate, setSavingTemplate] = useState<boolean>(false);\r\n  const { t } = useTranslation();\r\n\r\n  const handleGenerateContract = async (prompt: string) => {\r\n    // Add user message to chat history\r\n    setChatHistory(prev => [...prev, { role: 'user', content: prompt }]);\r\n    \r\n    // Set loading state\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // In a real implementation, this would call an API\r\n      // For now, we'll use a mock function with a delay to simulate API call\r\n      setTimeout(() => {\r\n        const generatedContract = mockGenerateContract(prompt);\r\n        \r\n        // Update contract content\r\n        setContractContent(generatedContract);\r\n        \r\n        // Add assistant response to chat history\r\n        setChatHistory(prev => [...prev, { \r\n          role: 'assistant', \r\n          content: t('pages.contracts.aiGeneration.messages.generated') \r\n        }]);\r\n        \r\n        // End loading state\r\n        setLoading(false);\r\n      }, 2000);\r\n    } catch (error) {\r\n      console.error('Error generating contract:', error);\r\n      setLoading(false);\r\n      \r\n      // Add error message to chat history\r\n      setChatHistory(prev => [...prev, { \r\n        role: 'assistant', \r\n        content: t('pages.contracts.aiGeneration.messages.error') \r\n      }]);\r\n    }\r\n  };\r\n\r\n  const handleUpdateContract = (newContent: string) => {\r\n    setContractContent(newContent);\r\n  };\r\n\r\n  // Handle opening the save template dialog\r\n  const handleOpenSaveDialog = (content: string) => {\r\n    if (content) {\r\n      setSaveDialogOpen(true);\r\n      // Extract a default name from the first line of the contract\r\n      const firstLine = content.split('\\n')[0];\r\n      setTemplateName(firstLine || t('pages.contracts.aiGeneration.saveDialog.defaultTemplateName'));\r\n    }\r\n  };\r\n\r\n  // Handle saving the template\r\n  const handleSaveTemplate = () => {\r\n    if (contractContent && templateName) {\r\n      setSavingTemplate(true);\r\n      \r\n      // Count placeholders in the content\r\n      const placeholderRegex = /\\{\\{([^}]+)\\}\\}/g;\r\n      const placeholders = contractContent.match(placeholderRegex) || [];\r\n      \r\n      // Create new template object\r\n      const newTemplate: Omit<Template, 'id'> = {\r\n        name: templateName,\r\n        type: 'AI',\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        createdBy: t('pages.contracts.aiGeneration.saveDialog.currentUser'),\r\n        placeholderCount: placeholders.length,\r\n        isDefault: false,\r\n        status: 'active',\r\n        content: contractContent // Note: This field might need to be added to the Template interface\r\n      };\r\n      \r\n      // Call the onSaveTemplate callback\r\n      onSaveTemplate(newTemplate);\r\n      \r\n      // Close dialogs and reset state\r\n      setSavingTemplate(false);\r\n      setSaveDialogOpen(false);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      fullWidth\r\n      maxWidth=\"xl\"\r\n      PaperProps={{\r\n        sx: {\r\n          height: '90vh',\r\n          maxHeight: '90vh',\r\n          m: 2,\r\n          borderRadius: 2\r\n        }\r\n      }}\r\n    >\r\n      <DialogTitle sx={{ \r\n        m: 0, \r\n        p: 2, \r\n        display: 'flex', \r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        borderBottom: '1px solid rgba(0, 0, 0, 0.12)'\r\n      }}>\r\n        <Typography variant=\"h6\" component=\"div\">\r\n          {t('pages.contracts.aiGeneration.title')}\r\n        </Typography>\r\n        <IconButton\r\n          edge=\"end\"\r\n          color=\"inherit\"\r\n          onClick={onClose}\r\n          aria-label=\"close\"\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      \r\n      <DialogContent sx={{ p: 0, display: 'flex', overflow: 'hidden' }}>\r\n        <Box sx={{ \r\n          width: '50%', \r\n          height: '100%',\r\n          borderRight: '1px solid rgba(0, 0, 0, 0.12)',\r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }}>\r\n          <AIPromptInput \r\n            onSubmit={handleGenerateContract} \r\n            loading={loading}\r\n            chatHistory={chatHistory}\r\n          />\r\n        </Box>\r\n        \r\n        <Box sx={{ width: '50%', height: '100%' }}>\r\n          <ContractPreview \r\n            content={contractContent} \r\n            onUpdate={handleUpdateContract}\r\n            loading={loading}\r\n            onSaveTemplate={handleOpenSaveDialog}\r\n          />\r\n        </Box>\r\n      </DialogContent>\r\n\r\n      {/* Save Template Dialog */}\r\n      <Dialog \r\n        open={saveDialogOpen} \r\n        onClose={() => setSaveDialogOpen(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>{t('pages.contracts.aiGeneration.saveDialog.title')}</DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ pt: 1 }}>\r\n            <Typography variant=\"body2\" gutterBottom>\r\n              {t('pages.contracts.aiGeneration.saveDialog.description')}\r\n            </Typography>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              label={t('pages.contracts.aiGeneration.saveDialog.nameLabel')}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              value={templateName}\r\n              onChange={(e) => setTemplateName(e.target.value)}\r\n              sx={{ mb: 3, mt: 2 }}\r\n            />\r\n            <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2, mt: 2 }}>\r\n              <Button \r\n                onClick={() => setSaveDialogOpen(false)}\r\n                disabled={savingTemplate}\r\n              >\r\n                {t('common.cancel')}\r\n              </Button>\r\n              <Button \r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleSaveTemplate}\r\n                disabled={!templateName.trim() || savingTemplate}\r\n              >\r\n                {savingTemplate ? t('pages.contracts.aiGeneration.saveDialog.saving') : t('pages.contracts.aiGeneration.saveDialog.save')}\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default AIContractGeneration;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Box, Typography, Paper } from '@mui/material';\r\nimport TemplateFilters from './TemplateFilters';\r\nimport TemplateTable from './TemplateTable';\r\nimport AIContractGeneration from '../AIContractGeneration';\r\nimport { Template, TemplateFilterValues } from './types';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n// Mock data for demonstration\r\nconst mockTemplates: Template[] = [\r\n  {\r\n    id: '1',\r\n    name: 'Hợp đồng dịch vụ phần mềm',\r\n    type: 'internal',\r\n    createdAt: '2025-01-15T00:00:00.000Z',\r\n    updatedAt: '2025-01-15T00:00:00.000Z',\r\n    createdBy: 'Nguyễn Văn A',\r\n    placeholderCount: 8,\r\n    isDefault: true,\r\n    status: 'active',\r\n  },\r\n  {\r\n    id: '2',\r\n    name: 'Hợp đồng bảo trì',\r\n    type: 'customer',\r\n    createdAt: '2025-02-20T00:00:00.000Z',\r\n    updatedAt: '2025-02-20T00:00:00.000Z',\r\n    createdBy: 'Trần Thị B',\r\n    placeholderCount: 5,\r\n    isDefault: false,\r\n    status: 'active',\r\n  },\r\n  {\r\n    id: '3',\r\n    name: 'Hợp đồng NDA',\r\n    type: 'internal',\r\n    createdAt: '2025-03-10T00:00:00.000Z',\r\n    updatedAt: '2025-03-10T00:00:00.000Z',\r\n    createdBy: 'Lê Văn C',\r\n    placeholderCount: 6,\r\n    isDefault: false,\r\n    status: 'inactive',\r\n  },\r\n];\r\n\r\ninterface TemplateListProps {\r\n  onUploadClick: () => void;\r\n  templates?: Template[];\r\n  loading?: boolean;\r\n}\r\n\r\nconst TemplateList: React.FC<TemplateListProps> = ({ \r\n  onUploadClick, \r\n  templates: propTemplates = [], \r\n  loading: propLoading = false \r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [filters, setFilters] = useState<TemplateFilterValues>({\r\n    search: '',\r\n    type: 'all',\r\n    status: 'all',\r\n  });\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [aiModalOpen, setAIModalOpen] = useState(false);\r\n  const [lastAddedTemplateId, setLastAddedTemplateId] = useState<string | null>(null);\r\n  \r\n  // Sử dụng templates và loading từ props nếu được cung cấp, ngược lại sử dụng mockTemplates\r\n  const templates = propTemplates.length > 0 ? propTemplates : mockTemplates;\r\n  const loading = propLoading;\r\n\r\n  // Lọc và phân trang templates\r\n  const [filteredTemplates, setFilteredTemplates] = useState<Template[]>([]);\r\n  const [totalRows, setTotalRows] = useState<number>(0);\r\n  \r\n  // Xử lý lọc và phân trang templates\r\n  useEffect(() => {\r\n    const filterAndPaginateTemplates = async () => {\r\n      try {\r\n        // Lọc templates dựa trên filters\r\n        let filtered = [...templates];\r\n        \r\n        if (filters.search) {\r\n          const searchLower = filters.search.toLowerCase();\r\n          filtered = filtered.filter(template => \r\n            template.name.toLowerCase().includes(searchLower)\r\n          );\r\n        }\r\n        \r\n        if (filters.type !== 'all') {\r\n          filtered = filtered.filter(\r\n            template => template.type === filters.type\r\n          );\r\n        }\r\n        \r\n        if (filters.status !== 'all') {\r\n          filtered = filtered.filter(\r\n            template => template.status === filters.status\r\n          );\r\n        }\r\n        \r\n        setTotalRows(filtered.length);\r\n        \r\n        // Áp dụng phân trang\r\n        const startIndex = page * rowsPerPage;\r\n        const paginated = filtered.slice(\r\n          startIndex,\r\n          startIndex + rowsPerPage\r\n        );\r\n        \r\n        setFilteredTemplates(paginated);\r\n      } catch (error) {\r\n        console.error('Error filtering templates:', error);\r\n      }\r\n    };\r\n\r\n    filterAndPaginateTemplates();\r\n  }, [filters, page, rowsPerPage, templates]);\r\n\r\n  const handleFilterChange = (newFilters: TemplateFilterValues) => {\r\n    setFilters(newFilters);\r\n    setPage(0); // Reset to first page when filters change\r\n  };\r\n\r\n  const handlePageChange = (newPage: number) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleRowsPerPageChange = (newRowsPerPage: number) => {\r\n    setRowsPerPage(newRowsPerPage);\r\n    setPage(0); // Reset to first page when rows per page changes\r\n  };\r\n\r\n  const handleViewTemplate = (id: string) => {\r\n    // TODO: Implement view template\r\n    console.log('View template:', id);\r\n  };\r\n\r\n  const handleEditTemplate = (id: string) => {\r\n    // TODO: Implement edit template\r\n    console.log('Edit template:', id);\r\n  };\r\n\r\n  const handleSetDefault = (id: string) => {\r\n    // TODO: Implement set default template\r\n    console.log('Set default template:', id);\r\n    \r\n    // Trong trường hợp thực tế, đây sẽ là API call\r\n    // Vì chúng ta đang sử dụng props templates, nên không thể cập nhật trực tiếp\r\n    // Các thay đổi sẽ được xử lý ở component cha\r\n  };\r\n\r\n  const handleDeleteTemplate = (id: string) => {\r\n    // TODO: Implement delete template\r\n    if (window.confirm(t('pages.contracts.templateList.confirmDelete'))) {\r\n      console.log('Delete template:', id);\r\n      \r\n      // Trong trường hợp thực tế, đây sẽ là API call\r\n      // Vì chúng ta đang sử dụng props templates, nên không thể cập nhật trực tiếp\r\n      setTotalRows(prev => prev - 1);\r\n    }\r\n  };\r\n\r\n  // Handle saving AI-generated template\r\n  const handleSaveAITemplate = (templateData: Omit<Template, 'id'>) => {\r\n    try {\r\n      // In a real implementation, this would be an API call\r\n      // For now, we'll simulate adding to the templates array\r\n      const newId = `ai-${Date.now()}`;\r\n      const newTemplate: Template = {\r\n        ...templateData,\r\n        id: newId\r\n      };\r\n\r\n      // Add to templates array\r\n      const updatedTemplates = [newTemplate, ...templates];\r\n      \r\n      // Update the templates state (in a real app, this would be handled by the parent component)\r\n      // For our mock implementation, we'll update the local state\r\n      setFilteredTemplates(prev => [newTemplate, ...prev]);\r\n      setTotalRows(prev => prev + 1);\r\n      setLastAddedTemplateId(newId);\r\n      \r\n      // Show success message\r\n      alert(t('pages.contracts.templateList.alerts.saveAiSuccess'));\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error saving AI template:', error);\r\n      alert(t('pages.contracts.templateList.alerts.saveAiError'));\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box mb={3}>\r\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n          {t('pages.contracts.templateList.title')}\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"textSecondary\">\r\n          {t('pages.contracts.templateList.subtitle')}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Paper sx={{ p: 3, mb: 3 }}>\r\n        <TemplateFilters \r\n          filters={filters} \r\n          onFilterChange={handleFilterChange}\r\n          onUploadClick={onUploadClick}\r\n          onCreateWithAIClick={() => setAIModalOpen(true)}\r\n        />\r\n        \r\n        <AIContractGeneration\r\n          open={aiModalOpen}\r\n          onClose={() => setAIModalOpen(false)}\r\n          onSaveTemplate={handleSaveAITemplate}\r\n        />\r\n        \r\n        {loading ? (\r\n          <Box py={4} textAlign=\"center\">\r\n            <Typography>{t('pages.contracts.templateList.loading')}</Typography>\r\n          </Box>\r\n        ) : (\r\n          <TemplateTable\r\n            templates={filteredTemplates}\r\n            page={page}\r\n            rowsPerPage={rowsPerPage}\r\n            totalRows={totalRows}\r\n            onPageChange={handlePageChange}\r\n            onRowsPerPageChange={handleRowsPerPageChange}\r\n            onView={handleViewTemplate}\r\n            onEdit={handleEditTemplate}\r\n            onSetDefault={handleSetDefault}\r\n            onDelete={handleDeleteTemplate}\r\n          />\r\n        )}\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TemplateList;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { useForm, SubmitHandler } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Box,\r\n  Typography,\r\n  CircularProgress,\r\n  Paper,\r\n  IconButton,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n} from '@mui/material';\r\nimport { Close as CloseIcon, CloudUpload as UploadIcon, Delete as DeleteIcon } from '@mui/icons-material';\r\nimport { UploadTemplateFormValues, UploadTemplateProps } from './types';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n// Validation schema will be created inside the component to access translations\r\n\r\ninterface ExtractedField {\r\n  originalText: string;\r\n  placeholder: string;\r\n  type: string;\r\n  description?: string;\r\n}\r\n\r\nconst UploadTemplate: React.FC<UploadTemplateProps> = ({ open, onClose, onSubmit }) => {\r\n  const { t } = useTranslation();\r\n  const [loading, setLoading] = useState(false);\r\n  const [analyzing, setAnalyzing] = useState(false);\r\n  const [extractedFields, setExtractedFields] = useState<ExtractedField[]>([]);\r\n\r\n  // Localized validation schema\r\n  const schema = useMemo(() =>\r\n    yup.object({\r\n      name: yup.string().required(t('pages.contracts.uploadTemplate.validation.nameRequired')),\r\n      description: yup.string().optional(),\r\n      type: yup\r\n        .string()\r\n        .oneOf(['internal', 'customer'])\r\n        .required(t('pages.contracts.uploadTemplate.validation.typeRequired')),\r\n      file: yup\r\n        .mixed<File>()\r\n        .required(t('pages.contracts.uploadTemplate.validation.fileRequired'))\r\n        .test('fileType', t('pages.contracts.uploadTemplate.validation.fileType'), (value) => {\r\n          if (!value) return false;\r\n          const file = value as File;\r\n          return file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\r\n        }),\r\n      extractedFields: yup\r\n        .array()\r\n        .of(\r\n          yup.object({\r\n            originalText: yup.string().required(),\r\n            placeholder: yup.string().required(),\r\n            type: yup.string().required(),\r\n            description: yup.string().optional(),\r\n          })\r\n        )\r\n        .default([]),\r\n    })\r\n  , [t]);\r\n\r\n  type FormData = yup.InferType<typeof schema>;\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue,\r\n    watch,\r\n    formState: { errors },\r\n  } = useForm<FormData>({\r\n    resolver: yupResolver(schema) as any,\r\n    defaultValues: {\r\n      name: '',\r\n      description: '',\r\n      type: 'customer' as const,\r\n      file: undefined,\r\n      extractedFields: [],\r\n    },\r\n  });\r\n\r\n  const selectedFile = watch('file');\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setValue('file', file);\r\n      setAnalyzing(true);\r\n      \r\n      // Simulate AI analysis\r\n      setTimeout(() => {\r\n        // Mock extracted data from file\r\n        const mockExtractedFields: ExtractedField[] = [\r\n          {\r\n            originalText: 'CÔNG TY TNHH GIẤY CAO PHÁT',\r\n            placeholder: 'TEN_CONG_TY_A',\r\n            type: 'text',\r\n            description: t('pages.contracts.uploadTemplate.sample.descriptions.partyAName')\r\n          },\r\n          {\r\n            originalText: 'Thửa đất số 352, Tờ bản đồ số 14, Khu Phố Mỹ Hiệp, Phường Thái Hoà, Thành phố Tân Uyên, Tỉnh Bình Dương',\r\n            placeholder: 'DIA_CHI_A',\r\n            type: 'text',\r\n            description: t('pages.contracts.uploadTemplate.sample.descriptions.partyAAddress')\r\n          },\r\n          {\r\n            originalText: '0274 3775 179',\r\n            placeholder: 'DIEN_THOAI_A',\r\n            type: 'phone',\r\n            description: t('pages.contracts.uploadTemplate.sample.descriptions.partyAPhone')\r\n          },\r\n          {\r\n            originalText: '3701711279',\r\n            placeholder: 'MA_SO_THUE_A',\r\n            type: 'taxcode',\r\n            description: t('pages.contracts.uploadTemplate.sample.descriptions.partyATax')\r\n          },\r\n          {\r\n            originalText: 'LÊ THỊ KIM CHI',\r\n            placeholder: 'NGUOI_DAI_DIEN_A',\r\n            type: 'text',\r\n            description: t('pages.contracts.uploadTemplate.sample.descriptions.partyARepresentative')\r\n          },\r\n          {\r\n            originalText: 'Giám đốc',\r\n            placeholder: 'CHUC_VU_A',\r\n            type: 'text',\r\n            description: t('pages.contracts.uploadTemplate.sample.descriptions.partyATitle')\r\n          }\r\n        ];\r\n        \r\n        setExtractedFields(mockExtractedFields);\r\n        setValue('extractedFields', mockExtractedFields);\r\n        setAnalyzing(false);\r\n      }, 2000);\r\n    }\r\n  };\r\n  \r\n  const handleUpdatePlaceholder = (index: number, field: keyof ExtractedField, value: string) => {\r\n    const updatedFields = [...extractedFields];\r\n    updatedFields[index] = { ...updatedFields[index], [field]: value };\r\n    setExtractedFields(updatedFields);\r\n    setValue('extractedFields', updatedFields);\r\n  };\r\n\r\n  const handleFormSubmit: SubmitHandler<FormData> = async (data) => {\r\n    try {\r\n      setLoading(true);\r\n      await onSubmit(data as UploadTemplateFormValues);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error uploading template:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    reset();\r\n    setExtractedFields([]);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" fullWidth>\r\n      <DialogTitle>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography variant=\"h6\">{t('pages.contracts.uploadTemplate.title')}</Typography>\r\n          <IconButton onClick={handleClose} size=\"small\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Box>\r\n      </DialogTitle>\r\n      <form onSubmit={handleSubmit(handleFormSubmit as any)}>\r\n        <DialogContent dividers>\r\n          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: '1fr 2fr' }, gap: 3 }}>\r\n            <Box>\r\n              <TextField\r\n                {...register('name')}\r\n                label={t('pages.contracts.uploadTemplate.fields.name')}\r\n                fullWidth\r\n                margin=\"normal\"\r\n                error={!!errors.name}\r\n                helperText={errors.name?.message}\r\n                disabled={loading}\r\n              />\r\n              \r\n              <TextField\r\n                {...register('description')}\r\n                label={t('pages.contracts.uploadTemplate.fields.description')}\r\n                fullWidth\r\n                multiline\r\n                rows={3}\r\n                margin=\"normal\"\r\n                disabled={loading}\r\n              />\r\n              \r\n              <FormControl fullWidth margin=\"normal\" error={!!errors.type}>\r\n                <InputLabel>{t('pages.contracts.uploadTemplate.fields.type')}</InputLabel>\r\n                <Select\r\n                  label={t('pages.contracts.uploadTemplate.fields.type')}\r\n                  defaultValue=\"customer\"\r\n                  disabled={loading}\r\n                  {...register('type')}\r\n                >\r\n                  <MenuItem value=\"customer\">{t('pages.contracts.uploadTemplate.fields.typeOptions.customer')}</MenuItem>\r\n                  <MenuItem value=\"internal\">{t('pages.contracts.uploadTemplate.fields.typeOptions.internal')}</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n              \r\n              <Box mt={2} mb={2}>\r\n                <input\r\n                  accept=\".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n                  style={{ display: 'none' }}\r\n                  id=\"template-upload\"\r\n                  type=\"file\"\r\n                  onChange={handleFileChange}\r\n                  disabled={loading || analyzing}\r\n                />\r\n                <label htmlFor=\"template-upload\">\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    component=\"span\"\r\n                    startIcon={<UploadIcon />}\r\n                    disabled={loading || analyzing}\r\n                  >\r\n                    {t('pages.contracts.uploadTemplate.fields.fileButton')}\r\n                  </Button>\r\n                </label>\r\n                {selectedFile && (\r\n                  <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                    {t('pages.contracts.uploadTemplate.fields.selectedFilePrefix')} {selectedFile.name}\r\n                  </Typography>\r\n                )}\r\n                {errors.file && (\r\n                  <Typography color=\"error\" variant=\"caption\" display=\"block\">\r\n                    {errors.file.message as React.ReactNode}\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n            </Box>\r\n            \r\n            <Box>\r\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\r\n                <Typography variant=\"subtitle1\" gutterBottom>\r\n                  {t('pages.contracts.uploadTemplate.analysis.title')}\r\n                </Typography>\r\n                \r\n                {analyzing ? (\r\n                  <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" py={4}>\r\n                    <CircularProgress size={40} />\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 2 }}>\r\n                      {t('pages.contracts.uploadTemplate.analysis.analyzingText')}\r\n                    </Typography>\r\n                  </Box>\r\n                ) : extractedFields.length > 0 ? (\r\n                  <TableContainer component={Paper} variant=\"outlined\">\r\n                    <Table size=\"small\">\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>{t('pages.contracts.uploadTemplate.analysis.headers.originalText')}</TableCell>\r\n                          <TableCell>{t('pages.contracts.uploadTemplate.analysis.headers.placeholder')}</TableCell>\r\n                          <TableCell>{t('pages.contracts.uploadTemplate.analysis.headers.type')}</TableCell>\r\n                          <TableCell>{t('pages.contracts.uploadTemplate.analysis.headers.description')}</TableCell>\r\n                          <TableCell align=\"center\">{t('pages.contracts.uploadTemplate.analysis.headers.actions')}</TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {extractedFields.map((field, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{field.originalText}</TableCell>\r\n                            <TableCell>\r\n                              <TextField\r\n                                size=\"small\"\r\n                                value={field.placeholder}\r\n                                onChange={(e) => handleUpdatePlaceholder(index, 'placeholder', e.target.value)}\r\n                                fullWidth\r\n                                disabled={loading}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <FormControl fullWidth size=\"small\">\r\n                                <Select\r\n                                  value={field.type}\r\n                                  onChange={(e) => handleUpdatePlaceholder(index, 'type', e.target.value)}\r\n                                  disabled={loading}\r\n                                >\r\n                                  <MenuItem value=\"text\">{t('pages.contracts.uploadTemplate.analysis.typeOptions.text')}</MenuItem>\r\n                                  <MenuItem value=\"number\">{t('pages.contracts.uploadTemplate.analysis.typeOptions.number')}</MenuItem>\r\n                                  <MenuItem value=\"date\">{t('pages.contracts.uploadTemplate.analysis.typeOptions.date')}</MenuItem>\r\n                                  <MenuItem value=\"phone\">{t('pages.contracts.uploadTemplate.analysis.typeOptions.phone')}</MenuItem>\r\n                                  <MenuItem value=\"email\">{t('pages.contracts.uploadTemplate.analysis.typeOptions.email')}</MenuItem>\r\n                                  <MenuItem value=\"taxcode\">{t('pages.contracts.uploadTemplate.analysis.typeOptions.taxcode')}</MenuItem>\r\n                                </Select>\r\n                              </FormControl>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <TextField\r\n                                size=\"small\"\r\n                                value={field.description || ''}\r\n                                onChange={(e) => handleUpdatePlaceholder(index, 'description', e.target.value)}\r\n                                fullWidth\r\n                                disabled={loading}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell align=\"center\">\r\n                              <IconButton size=\"small\" color=\"error\" onClick={() => {\r\n                                const updatedFields = [...extractedFields];\r\n                                updatedFields.splice(index, 1);\r\n                                setExtractedFields(updatedFields);\r\n                                setValue('extractedFields', updatedFields);\r\n                              }} disabled={loading}>\r\n                                <DeleteIcon fontSize=\"small\" />\r\n                              </IconButton>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </TableContainer>\r\n                ) : selectedFile ? (\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    {t('pages.contracts.uploadTemplate.analysis.noFieldsFound')}\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    {t('pages.contracts.uploadTemplate.analysis.uploadPrompt')}\r\n                  </Typography>\r\n                )}\r\n                \r\n                <Box mt={3}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom>\r\n                    {t('pages.contracts.uploadTemplate.guidance.title')}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    - {t('pages.contracts.uploadTemplate.guidance.items.0')}\r\n                    <br />\r\n                    - {t('pages.contracts.uploadTemplate.guidance.items.1')}\r\n                    <br />\r\n                    - {t('pages.contracts.uploadTemplate.guidance.items.2')}\r\n                  </Typography>\r\n                </Box>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        \r\n        <DialogActions sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\r\n          <Button onClick={handleClose} disabled={loading}>\r\n            {t('pages.contracts.uploadTemplate.buttons.cancel')}\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={loading || analyzing || extractedFields.length === 0}\r\n            startIcon={loading ? <CircularProgress size={20} /> : null}\r\n          >\r\n            {loading ? t('pages.contracts.uploadTemplate.buttons.saving') : t('pages.contracts.uploadTemplate.buttons.save')}\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default UploadTemplate;\r\n","import React from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  IconButton,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputAdornment\r\n} from '@mui/material';\r\nimport { Add as AddIcon, Delete as DeleteIcon, ArrowBack as ArrowBackIcon } from '@mui/icons-material';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { enUS, ja, vi } from 'date-fns/locale';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n// Định nghĩa kiểu dữ liệu cho đợt thanh toán\r\nexport interface PaymentItem {\r\n  id: string;\r\n  condition: string;\r\n  amount: number;\r\n  paymentDate: Date | null;\r\n  status: 'pending' | 'waiting' | 'paid';\r\n  note: string;\r\n}\r\n\r\ninterface PaymentScheduleStepProps {\r\n  payments: PaymentItem[];\r\n  onPaymentsChange: (payments: PaymentItem[]) => void;\r\n  onBack: () => void;\r\n  onNext: () => void;\r\n}\r\n\r\nconst PaymentScheduleStep: React.FC<PaymentScheduleStepProps> = ({\r\n  payments,\r\n  onPaymentsChange,\r\n  onBack,\r\n  onNext\r\n}) => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  // Payment statuses (localized)\r\n  const paymentStatuses = [\r\n    { value: 'pending', label: t('pages.contracts.createContract.paymentSchedule.status.pending', 'Pending payment') },\r\n    { value: 'waiting', label: t('pages.contracts.createContract.paymentSchedule.status.waiting', 'Awaiting payment') },\r\n    { value: 'paid', label: t('pages.contracts.createContract.paymentSchedule.status.paid', 'Paid') }\r\n  ];\r\n\r\n  // Hàm thêm đợt thanh toán mới\r\n  const handleAddPayment = () => {\r\n    const newPayment: PaymentItem = {\r\n      id: `payment-${Date.now()}`,\r\n      condition: '',\r\n      amount: 0,\r\n      paymentDate: new Date(),\r\n      status: 'pending',\r\n      note: ''\r\n    };\r\n    onPaymentsChange([...payments, newPayment]);\r\n  };\r\n\r\n  // Hàm xóa đợt thanh toán\r\n  const handleDeletePayment = (id: string) => {\r\n    onPaymentsChange(payments.filter(payment => payment.id !== id));\r\n  };\r\n\r\n  // Hàm cập nhật thông tin đợt thanh toán\r\n  const handlePaymentChange = (id: string, field: keyof PaymentItem, value: any) => {\r\n    onPaymentsChange(\r\n      payments.map(payment => \r\n        payment.id === id ? { ...payment, [field]: value } : payment\r\n      )\r\n    );\r\n  };\r\n\r\n  // Không cần hàm formatCurrency vì đã xử lý trực tiếp trong TextField\r\n\r\n  // Hàm xử lý khi người dùng nhập số tiền\r\n  const handleAmountChange = (id: string, value: string) => {\r\n    // Loại bỏ tất cả các ký tự không phải số\r\n    const numericValue = value.replace(/[^0-9]/g, '');\r\n    const amount = numericValue ? parseInt(numericValue, 10) : 0;\r\n    handlePaymentChange(id, 'amount', amount);\r\n  };\r\n\r\n  const getDateFnsLocale = () => {\r\n    const lang = i18n.language || 'en';\r\n    if (lang.startsWith('ja')) return ja;\r\n    if (lang.startsWith('vi')) return vi;\r\n    return enUS;\r\n  };\r\n\r\n  const currencySuffix = () => {\r\n    const lang = i18n.language || 'en';\r\n    if (lang.startsWith('ja')) return 'JPY';\r\n    if (lang.startsWith('vi')) return 'VNĐ';\r\n    return 'USD';\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\r\n        <IconButton onClick={onBack} sx={{ mr: 1 }}>\r\n          <ArrowBackIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h6\">\r\n          {t('pages.contracts.createContract.paymentSchedule.title', 'Payment items')}\r\n        </Typography>\r\n      </Box>\r\n      \r\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\r\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n          {t('pages.contracts.createContract.paymentSchedule.description', 'Add payment milestones for the contract. Each includes condition, amount, payment date, status, and notes.')}\r\n        </Typography>\r\n        \r\n        <TableContainer>\r\n          <Table size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>{t('pages.contracts.createContract.paymentSchedule.columns.condition', 'Condition')}</TableCell>\r\n                <TableCell>{t('pages.contracts.createContract.paymentSchedule.columns.amount', 'Amount')}</TableCell>\r\n                <TableCell>{t('pages.contracts.createContract.paymentSchedule.columns.paymentDate', 'Payment date')}</TableCell>\r\n                <TableCell>{t('pages.contracts.createContract.paymentSchedule.columns.status', 'Status')}</TableCell>\r\n                <TableCell>{t('pages.contracts.createContract.paymentSchedule.columns.note', 'Note')}</TableCell>\r\n                <TableCell>{t('pages.contracts.createContract.paymentSchedule.columns.delete', 'Delete')}</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {payments.length === 0 ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={6} align=\"center\">\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      {t('pages.contracts.createContract.paymentSchedule.empty', 'No payment items yet. Click \"Add payment\" to start.')}\r\n                    </Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : (\r\n                payments.map((payment) => (\r\n                  <TableRow key={payment.id}>\r\n                    <TableCell>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        value={payment.condition}\r\n                        onChange={(e) => handlePaymentChange(payment.id, 'condition', e.target.value)}\r\n                        placeholder={t('pages.contracts.createContract.paymentSchedule.placeholders.condition', 'e.g., After signing the contract')}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        value={payment.amount === 0 ? '' : payment.amount.toString()}\r\n                        onChange={(e) => handleAmountChange(payment.id, e.target.value)}\r\n                        placeholder=\"0\"\r\n                        InputProps={{\r\n                          endAdornment: <InputAdornment position=\"end\">{currencySuffix()}</InputAdornment>,\r\n                        }}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={getDateFnsLocale()}>\r\n                        <DatePicker\r\n                          value={payment.paymentDate}\r\n                          onChange={(date) => handlePaymentChange(payment.id, 'paymentDate', date)}\r\n                          slotProps={{ textField: { size: 'small', fullWidth: true } }}\r\n                        />\r\n                      </LocalizationProvider>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <FormControl fullWidth size=\"small\">\r\n                        <Select\r\n                          value={payment.status}\r\n                          onChange={(e) => handlePaymentChange(payment.id, 'status', e.target.value)}\r\n                        >\r\n                          {paymentStatuses.map((status) => (\r\n                            <MenuItem key={status.value} value={status.value}>\r\n                              {status.label}\r\n                            </MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        value={payment.note}\r\n                        onChange={(e) => handlePaymentChange(payment.id, 'note', e.target.value)}\r\n                        placeholder={t('pages.contracts.createContract.paymentSchedule.placeholders.note', 'Notes')}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <IconButton \r\n                        color=\"error\" \r\n                        onClick={() => handleDeletePayment(payment.id)}\r\n                        size=\"small\"\r\n                      >\r\n                        <DeleteIcon />\r\n                      </IconButton>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        \r\n        <Box sx={{ mt: 2 }}>\r\n          <Button\r\n            startIcon={<AddIcon />}\r\n            variant=\"outlined\"\r\n            onClick={handleAddPayment}\r\n          >\r\n            {t('pages.contracts.createContract.paymentSchedule.actions.add', 'Add payment')}\r\n          </Button>\r\n        </Box>\r\n      </Paper>\r\n      \r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n        <Button \r\n          variant=\"outlined\" \r\n          onClick={onBack}\r\n        >\r\n          {t('common.back', 'Back')}\r\n        </Button>\r\n        <Button \r\n          variant=\"contained\" \r\n          color=\"primary\"\r\n          onClick={onNext}\r\n        >\r\n          {t('common.next', 'Next')}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PaymentScheduleStep;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Button, \r\n  Stepper, \r\n  Step, \r\n  StepLabel,\r\n  Paper,\r\n  TextField,\r\n  IconButton,\r\n  Chip\r\n} from '@mui/material';\r\nimport { \r\n  Description as TemplateIcon,\r\n  ArrowBack as ArrowBackIcon\r\n} from '@mui/icons-material';\r\nimport PdfPageEditor from '../../../../components/PdfPageEditor';\r\nimport { Template } from '../TemplateList/types';\r\nimport { ExtractedField } from '../UploadTemplate/types';\r\nimport { toast } from 'react-toastify';\r\nimport PaymentScheduleStep, { PaymentItem } from '../PaymentScheduleStep';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n// Mở rộng interface Template để thêm trường extractedFields\r\ninterface ExtendedTemplate extends Template {\r\n  extractedFields?: ExtractedField[];\r\n}\r\n\r\ninterface CreateContractProps {\r\n  templates: ExtendedTemplate[];\r\n  onBack: () => void;\r\n  onCreate: (contract: any) => void;\r\n}\r\n\r\nconst CreateContract: React.FC<CreateContractProps> = ({ \r\n  templates, \r\n  onBack,\r\n  onCreate \r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [selectedTemplate, setSelectedTemplate] = useState<ExtendedTemplate | null>(null);\r\n  // Sử dụng formData để lưu các giá trị nhập vào form\r\n  const [formData, setFormData] = useState<Record<string, string>>({});\r\n  // Lưu nội dung hợp đồng để hiển thị trong PdfPageEditor\r\n  const [contractContent, setContractContent] = useState<string[]>(['']);\r\n  // Lưu các đợt thanh toán\r\n  const [payments, setPayments] = useState<PaymentItem[]>([]);\r\n  \r\n  // Hàm tạo nội dung HTML cho hợp đồng từ formData\r\n  const generateContractHTML = React.useCallback(() => {\r\n    // Tạo số hợp đồng\r\n    const contractNumber = `HD${new Date().getFullYear()}${(new Date().getMonth() + 1).toString().padStart(2, '0')}${new Date().getDate().toString().padStart(2, '0')}001`;\r\n    \r\n    // Định dạng số tiền\r\n    const formatCurrency = (amount: number) => {\r\n      return new Intl.NumberFormat('vi-VN').format(amount);\r\n    };\r\n    \r\n    // Tạo HTML cho bảng thanh toán\r\n    const paymentScheduleHTML = payments.length > 0 ? `\r\n      <h3 style=\"font-weight: bold; margin-top: 30px; margin-bottom: 20px;\">ĐIỀU 2: LỊCH THANH TOÁN</h3>\r\n      <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\r\n        <thead>\r\n          <tr style=\"background-color: #f2f2f2;\">\r\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">STT</th>\r\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Điều kiện</th>\r\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Số tiền</th>\r\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Ngày thanh toán</th>\r\n            <th style=\"border: 1px solid #ddd; padding: 8px; text-align: left;\">Ghi chú</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          ${payments.map((payment, index) => `\r\n            <tr>\r\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${index + 1}</td>\r\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${payment.condition}</td>\r\n              <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${formatCurrency(payment.amount)} VNĐ</td>\r\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${payment.paymentDate ? new Date(payment.paymentDate).toLocaleDateString('vi-VN') : ''}</td>\r\n              <td style=\"border: 1px solid #ddd; padding: 8px;\">${payment.note}</td>\r\n            </tr>\r\n          `).join('')}\r\n          <tr style=\"font-weight: bold; background-color: #f9f9f9;\">\r\n            <td style=\"border: 1px solid #ddd; padding: 8px;\" colspan=\"2\">Tổng cộng</td>\r\n            <td style=\"border: 1px solid #ddd; padding: 8px; text-align: right;\">${formatCurrency(payments.reduce((sum, payment) => sum + payment.amount, 0))} VNĐ</td>\r\n            <td style=\"border: 1px solid #ddd; padding: 8px;\" colspan=\"2\"></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    ` : '';\r\n    \r\n    // Tạo HTML cho hợp đồng\r\n    return `\r\n      <div style=\"text-align: center; margin-bottom: 20px;\">\r\n        <h2 style=\"font-weight: bold; text-transform: uppercase;\">Cộng Hòa Xã Hội Chủ Nghĩa Việt Nam</h2>\r\n        <h3 style=\"font-weight: bold;\">Độc Lập – Tự Do – Hạnh Phúc</h3>\r\n        <p style=\"margin-bottom: 20px;\">__________</p>\r\n        <h1 style=\"font-weight: bold; text-transform: uppercase; margin-bottom: 20px;\">HỢP ĐỒNG NGUYÊN TẮC CUNG CẤP DỊCH VỤ PHẦN MỀM</h1>\r\n        <h2 style=\"font-weight: bold; margin-bottom: 30px;\">Số: ${contractNumber}</h2>\r\n      </div>\r\n\r\n      <p>\r\n        Căn cứ vào Luật Thương Mại của Quốc hội nước Cộng Hòa Xã Hội Chủ Nghĩa Việt Nam được ban hành ngày 14/06/2005, có hiệu lực từ ngày 01/01/2006.\r\n      </p>\r\n      \r\n      ${Object.entries(formData).map(([field, value]) => `<p>Căn cứ vào ${field}: <strong>${value}</strong></p>`).join('\\n')}\r\n\r\n      <h3 style=\"font-weight: bold; margin-top: 30px; margin-bottom: 20px;\">ĐIỀU 1: NỘI DUNG HỢP ĐỒNG</h3>\r\n      <p>\r\n        Bên A ủy thác cho bên B công việc xây dựng và phát triển phần mềm và cung cấp các dịch vụ liên quan đến phần mềm của bên A.\r\n      </p>\r\n      <p>\r\n        Bên B sẽ chịu trách nhiệm xây dựng phần mềm đúng như thỏa thuận của cả Bên A và Bên B.\r\n      </p>\r\n      <p>\r\n        Về chi tiết nội dung công việc và chi phí thực hiện sẽ được trình bày trong từng Phụ lục cụ thể.\r\n      </p>\r\n      \r\n      ${paymentScheduleHTML}\r\n    `;\r\n  }, [formData, payments]);\r\n  \r\n  // Cập nhật nội dung hợp đồng khi formData thay đổi\r\n  useEffect(() => {\r\n    // Chỉ cập nhật khi đã điền ít nhất một trường và đã đến bước xem trước\r\n    if (activeStep === 3 && Object.keys(formData).length > 0 && Object.values(formData).some(value => value)) {\r\n      setContractContent([generateContractHTML()]);\r\n    }\r\n  }, [formData, activeStep, generateContractHTML]);\r\n  \r\n  // Bước 1: Chọn template\r\n  const renderTemplateSelection = () => (\r\n    <Box>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        {t('pages.contracts.createContract.templateSelection.title')}\r\n      </Typography>\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: 16 }}>\r\n        {templates.map((template) => (\r\n          <div \r\n            key={template.id} \r\n            style={{ \r\n              marginBottom: '16px'\r\n            }}>\r\n          \r\n            <Paper \r\n              elevation={selectedTemplate?.id === template.id ? 4 : 1}\r\n              sx={{ \r\n                p: 2, \r\n                cursor: 'pointer',\r\n                border: selectedTemplate?.id === template.id ? '2px solid #1976d2' : '1px solid #e0e0e0',\r\n                height: '100%',\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n              }}\r\n              onClick={() => setSelectedTemplate(template)}\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\" mb={1}>\r\n                <TemplateIcon color=\"primary\" sx={{ mr: 1 }} />\r\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\">\r\n                  {template.name}\r\n                </Typography>\r\n              </Box>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ flexGrow: 1 }}>\r\n                {template.name} - {template.type}\r\n              </Typography>\r\n              <Chip \r\n                label={t('pages.contracts.createContract.templateSelection.chipLabel', { count: template.placeholderCount })}\r\n                size=\"small\" \r\n                sx={{ mt: 1, alignSelf: 'flex-start' }} \r\n              />\r\n            </Paper>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 3 }}>\r\n        <Button \r\n          variant=\"contained\" \r\n          disabled={!selectedTemplate}\r\n          onClick={() => {\r\n            // Khởi tạo formData chỉ với các trường được trích xuất từ template\r\n            const formFields: Record<string, string> = {};\r\n            \r\n            // Thêm các trường từ template nếu có\r\n            if (selectedTemplate?.extractedFields && selectedTemplate.extractedFields.length > 0) {\r\n              selectedTemplate.extractedFields.forEach((field: ExtractedField) => {\r\n                formFields[field.placeholder] = '';\r\n              });\r\n            } else {\r\n              // Nếu không có trường nào được trích xuất, hiển thị thông báo\r\n              toast.error(t('pages.contracts.createContract.alerts.noFieldsFound'));\r\n              return;\r\n            }\r\n            \r\n            // Khởi tạo formData với các trường cần điền từ template\r\n            \r\n            // Khởi tạo formData với các trường cần điền\r\n            setFormData(formFields);\r\n            // Chuyển sang bước điền thông tin\r\n            setActiveStep(1);\r\n          }}\r\n        >\r\n          {t('pages.contracts.createContract.buttons.continue')}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n\r\n  // Bước 2: Điền thông tin qua form trực tiếp\r\n  const renderContractForm = () => {\r\n    // Kiểm tra xem đã điền đủ thông tin chưa\r\n    const checkFormCompletion = () => {\r\n      const fieldNames = Object.keys(formData);\r\n      const missingFields = fieldNames.filter(field => !formData[field]);\r\n      return missingFields.length === 0;\r\n    };\r\n\r\n    // Xử lý khi người dùng thay đổi giá trị của một trường\r\n    const handleFieldChange = (fieldName: string, value: string) => {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [fieldName]: value\r\n      }));\r\n    };\r\n\r\n    // Xử lý khi người dùng nhấn nút Tiếp tục\r\n    const handleContinue = () => {\r\n      if (checkFormCompletion()) {\r\n        setActiveStep(2); // Chuyển sang bước hạng mục thanh toán\r\n      } else {\r\n        // Show localized toast if required fields are missing\r\n        toast.error(t('pages.contracts.createContract.form.requiredHelper'));\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Box sx={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\r\n          <IconButton onClick={() => setActiveStep(0)} sx={{ mr: 1 }}>\r\n            <ArrowBackIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\">\r\n            {t('pages.contracts.createContract.form.title')}: {selectedTemplate?.name}\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Paper \r\n          variant=\"outlined\" \r\n          sx={{ \r\n            p: 3, \r\n            flexGrow: 1, \r\n            mb: 2, \r\n            overflowY: 'auto',\r\n            maxHeight: '600px'\r\n          }}\r\n        >\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            {t('pages.contracts.createContract.form.sectionTitle')}\r\n          </Typography>\r\n          \r\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n            {t('pages.contracts.createContract.form.description')}\r\n          </Typography>\r\n          \r\n          <Box sx={{ \r\n            display: 'grid', \r\n            gridTemplateColumns: { xs: '1fr', md: '1fr 1fr' },\r\n            gap: 3,\r\n            mt: 2\r\n          }}>\r\n            {Object.keys(formData).map((fieldName) => (\r\n              <TextField\r\n                key={fieldName}\r\n                label={fieldName}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={formData[fieldName]}\r\n                onChange={(e) => handleFieldChange(fieldName, e.target.value)}\r\n                required\r\n                error={!formData[fieldName]}\r\n                helperText={!formData[fieldName] ? t('pages.contracts.createContract.form.requiredHelper') : ''}\r\n                sx={{ mb: 2 }}\r\n              />\r\n            ))}\r\n          </Box>\r\n        </Paper>\r\n        \r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Button \r\n            variant=\"outlined\" \r\n            onClick={() => setActiveStep(0)}\r\n            startIcon={<ArrowBackIcon />}\r\n          >\r\n            {t('pages.contracts.createContract.buttons.back')}\r\n          </Button>\r\n          <Button \r\n            variant=\"contained\" \r\n            color=\"primary\"\r\n            onClick={handleContinue}\r\n            disabled={!checkFormCompletion()}\r\n          >\r\n            {t('pages.contracts.createContract.buttons.continue')}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  // Xử lý tạo hợp đồng\r\n  const handleCreateContract = () => {\r\n    if (!selectedTemplate) return;\r\n    \r\n    const newContract = {\r\n      id: `C${Math.floor(1000 + Math.random() * 9000)}`,\r\n      name: `${t('pages.contracts.createContract.generatedNamePrefix')} ${selectedTemplate?.name} - ${new Date().toLocaleDateString()}`,\r\n      templateId: selectedTemplate?.id || '',\r\n      templateName: selectedTemplate?.name || '',\r\n      status: 'draft',\r\n      partyA: t('pages.contracts.createContract.sample.partyA'),\r\n      partyB: t('pages.contracts.createContract.sample.partyB'),\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      createdBy: t('pages.contracts.createContract.sample.currentUser'),\r\n      // Lưu formData và payments vào contract\r\n      contractData: formData,\r\n      payments: payments\r\n    };\r\n    \r\n    // Gọi hàm tạo hợp đồng\r\n    onCreate(newContract);\r\n    toast.success(t('pages.contracts.notifications.createContractSuccess'));\r\n  };\r\n\r\n  // Bước 3: Xem trước và xác nhận\r\n  const renderPreview = () => {\r\n    if (!selectedTemplate) return null;\r\n\r\n    return (\r\n      <Box>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\r\n          <IconButton onClick={() => setActiveStep(2)} sx={{ mr: 1 }}>\r\n            <ArrowBackIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\">\r\n            {t('pages.contracts.createContract.preview.title')}\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Box sx={{ border: '1px solid #e0e0e0', borderRadius: 1, padding: 0, overflow: 'hidden', mb: 3 }}>\r\n          <PdfPageEditor \r\n            initialContent={contractContent}\r\n            onSave={setContractContent}\r\n            onExportPdf={() => {\r\n              toast.success(t('pages.contracts.createContract.notifications.exportPdfSuccess'));\r\n            }}\r\n          />\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Button \r\n            variant=\"outlined\" \r\n            onClick={() => setActiveStep(1)}\r\n            startIcon={<ArrowBackIcon />}\r\n          >\r\n            {t('pages.contracts.createContract.buttons.back')}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleCreateContract}\r\n          >\r\n            {t('pages.contracts.createContract.buttons.create')}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n    );\r\n  };\r\n  // Bước 3: Thêm hạng mục thanh toán\r\n  const renderPaymentSchedule = () => {\r\n    return (\r\n      <PaymentScheduleStep\r\n        payments={payments}\r\n        onPaymentsChange={setPayments}\r\n        onBack={() => setActiveStep(1)}\r\n        onNext={() => setActiveStep(3)}\r\n      />\r\n    );\r\n  };\r\n\r\n  const steps = [\r\n    { label: t('pages.contracts.createContract.steps.selectTemplate'), component: renderTemplateSelection },\r\n    { label: t('pages.contracts.createContract.steps.fillInfo'), component: renderContractForm },\r\n    { label: t('pages.contracts.createContract.steps.paymentItems'), component: renderPaymentSchedule },\r\n    { label: t('pages.contracts.createContract.steps.previewConfirm'), component: renderPreview },\r\n  ];\r\n\r\n  return (\r\n    <Box sx={{ width: '100%' }}>\r\n      <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\r\n        {steps.map((step, index) => (\r\n          <Step key={step.label} completed={activeStep > index}>\r\n            <StepLabel>{step.label}</StepLabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n      \r\n      <Box sx={{ mt: 2 }}>\r\n        {steps[activeStep].component()}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\n// Component này đã được thay thế bằng PdfPageEditor trong bước xem trước\r\n// const ContractPreview: React.FC = () => {\r\n//   return null;\r\n// };\r\n\r\nexport default CreateContract;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Paper, \r\n  Button, \r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Divider,\r\n  Chip\r\n} from '@mui/material';\r\nimport { ArrowBack, Download, Print, Share, Delete, Edit } from '@mui/icons-material';\r\n\r\ninterface ContractDetailProps {\r\n  contract: {\r\n    id: string;\r\n    name: string;\r\n    templateName: string;\r\n    status: 'draft' | 'pending' | 'signed' | 'expired' | 'cancelled';\r\n    partyA: string;\r\n    partyB: string;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n    createdBy: string;\r\n    signedAt?: string;\r\n    expiresAt?: string;\r\n    contractData?: {\r\n      tenBenA: string;\r\n      tenBenB: string;\r\n      ngayKy: string;\r\n      diaChiA: string;\r\n      dienThoaiA: string;\r\n      maSoThueA: string;\r\n      nguoiDaiDienA: string;\r\n      chucVuA: string;\r\n      giaTriHopDong: string;\r\n    };\r\n  };\r\n  onClose: () => void;\r\n  onDelete: (id: string) => void;\r\n  onEdit: (id: string) => void;\r\n}\r\n\r\nconst ContractDetail: React.FC<ContractDetailProps> = ({ \r\n  contract, \r\n  onClose, \r\n  onDelete,\r\n  onEdit\r\n}) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = React.useState(false);\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'signed': return 'success';\r\n      case 'pending': return 'warning';\r\n      case 'draft': return 'default';\r\n      case 'expired': return 'error';\r\n      case 'cancelled': return 'error';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    if (!dateString) return t('common.unknown');\r\n    const lang = i18n.language || 'en';\r\n    const locale = lang.startsWith('ja') ? 'ja-JP' : lang.startsWith('vi') ? 'vi-VN' : 'en-US';\r\n    return new Date(dateString).toLocaleDateString(locale);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 3, gap: 2 }}>\r\n        <IconButton onClick={onClose}>\r\n          <ArrowBack />\r\n        </IconButton>\r\n        <Typography variant=\"h5\">\r\n          {t('pages.contracts.detail.title', 'Contract details')}: {contract.name}\r\n        </Typography>\r\n        <Chip \r\n          label={contract.status.toUpperCase()} \r\n          color={getStatusColor(contract.status) as any}\r\n          size=\"small\"\r\n          sx={{ ml: 2 }}\r\n        />\r\n      </Box>\r\n\r\n      <Paper sx={{ p: 3, mb: 3 }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 3, flexWrap: 'wrap', gap: 2 }}>\r\n          <Box>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              {t('pages.contracts.detail.generalInfo', 'General information')}\r\n            </Typography>\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2 }}>\r\n              <Box sx={{ flex: '1 1 300px' }}>\r\n                <Typography><strong>{t('pages.contracts.detail.fields.contractId', 'Contract ID')}:</strong> {contract.id}</Typography>\r\n                <Typography><strong>{t('pages.contracts.detail.fields.templateName', 'Template name')}:</strong> {contract.templateName}</Typography>\r\n                <Typography><strong>{t('pages.contracts.detail.fields.createdAt', 'Created at')}:</strong> {formatDate(contract.createdAt)}</Typography>\r\n              </Box>\r\n              <Box sx={{ flex: '1 1 300px' }}>\r\n                <Typography><strong>{t('pages.contracts.detail.fields.createdBy', 'Created by')}:</strong> {contract.createdBy}</Typography>\r\n                <Typography><strong>{t('pages.contracts.detail.fields.updatedAt', 'Updated at')}:</strong> {formatDate(contract.updatedAt)}</Typography>\r\n                {contract.signedAt && (\r\n                  <Typography><strong>{t('pages.contracts.detail.fields.signedAt', 'Signed at')}:</strong> {formatDate(contract.signedAt)}</Typography>\r\n                )}\r\n                {contract.expiresAt && (\r\n                  <Typography><strong>{t('pages.contracts.detail.fields.expiresAt', 'Expires at')}:</strong> {formatDate(contract.expiresAt)}</Typography>\r\n                )}\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n          \r\n          <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\r\n            <Button variant=\"outlined\" startIcon={<Download />} size=\"small\">\r\n              {t('common.download', 'Download')}\r\n            </Button>\r\n            <Button variant=\"outlined\" startIcon={<Print />} size=\"small\">\r\n              {t('pages.contracts.detail.actions.print', 'Print')}\r\n            </Button>\r\n            <Button variant=\"outlined\" startIcon={<Share />} size=\"small\">\r\n              {t('pages.contracts.detail.actions.share', 'Share')}\r\n            </Button>\r\n            <Button \r\n              variant=\"contained\" \r\n              color=\"primary\" \r\n              startIcon={<Edit />}\r\n              onClick={() => onEdit(contract.id)}\r\n              size=\"small\"\r\n            >\r\n              {t('common.edit', 'Edit')}\r\n            </Button>\r\n            <Button \r\n              variant=\"outlined\" \r\n              color=\"error\" \r\n              startIcon={<Delete />}\r\n              onClick={() => setDeleteConfirmOpen(true)}\r\n              size=\"small\"\r\n            >\r\n              {t('common.delete', 'Delete')}\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n\r\n        <Divider sx={{ my: 3 }} />\r\n\r\n        <Box sx={{ mb: 4 }}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            {t('pages.contracts.detail.partiesInfo', 'Parties information')}\r\n          </Typography>\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 4 }}>\r\n            <Box sx={{ flex: '1 1 300px' }}>\r\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\r\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\" gutterBottom>\r\n                  {t('pages.contracts.detail.partyA.title', 'Party A (Contracting party)')}\r\n                </Typography>\r\n                {contract.contractData ? (\r\n                  <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                    <Typography><strong>{t('pages.contracts.detail.party.companyName', 'Company name')}:</strong> {contract.contractData.tenBenA}</Typography>\r\n                    <Typography><strong>{t('pages.contracts.detail.party.address', 'Address')}:</strong> {contract.contractData.diaChiA}</Typography>\r\n                    <Typography><strong>{t('pages.contracts.detail.party.phone', 'Phone')}:</strong> {contract.contractData.dienThoaiA}</Typography>\r\n                    <Typography><strong>{t('pages.contracts.detail.party.taxId', 'Tax ID')}:</strong> {contract.contractData.maSoThueA}</Typography>\r\n                    <Typography><strong>{t('pages.contracts.detail.party.representative', 'Representative')}:</strong> {contract.contractData.nguoiDaiDienA}</Typography>\r\n                    <Typography><strong>{t('pages.contracts.detail.party.position', 'Position')}:</strong> {contract.contractData.chucVuA}</Typography>\r\n                  </Box>\r\n                ) : (\r\n                  <Typography>{t('common.noData', 'No data')}</Typography>\r\n                )}\r\n              </Paper>\r\n            </Box>\r\n            <Box sx={{ flex: '1 1 300px' }}>\r\n              <Paper variant=\"outlined\" sx={{ p: 2, height: '100%' }}>\r\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\" gutterBottom>\r\n                  {t('pages.contracts.detail.partyB.title', 'Party B (Partner)')}\r\n                </Typography>\r\n                {contract.contractData ? (\r\n                  <Typography><strong>{t('pages.contracts.detail.party.companyName', 'Company name')}:</strong> {contract.contractData.tenBenB}</Typography>\r\n                ) : (\r\n                  <Typography>{t('common.noData', 'No data')}</Typography>\r\n                )}\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n\r\n        <Box>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            {t('pages.contracts.detail.contractContent', 'Contract content')}\r\n          </Typography>\r\n          <Paper variant=\"outlined\" sx={{ p: 3 }}>\r\n            <Typography variant=\"h5\" align=\"center\" gutterBottom>\r\n              {t('pages.contracts.detail.sample.heading', 'SERVICE CONTRACT')}\r\n            </Typography>\r\n            <Typography paragraph align=\"center\">\r\n              {t('pages.contracts.detail.sample.code', 'No.')}: {contract.id}\r\n            </Typography>\r\n            \r\n            <Typography paragraph align=\"center\">\r\n              <em>Căn cứ Bộ luật Dân sự số 91/2015/QH13 ngày 24 tháng 11 năm 2015 của Quốc hội</em><br />\r\n              <em>Căn cứ Luật Thương mại số 36/2005/QH11 ngày 14 tháng 6 năm 2005 của Quốc hội</em>\r\n            </Typography>\r\n            \r\n            <Typography paragraph align=\"center\">\r\n              <strong>Hôm nay, ngày {contract.contractData?.ngayKy || formatDate(contract.createdAt)}</strong>\r\n            </Typography>\r\n            \r\n            <Typography paragraph>\r\n              <strong>{t('pages.contracts.detail.sample.partyA', 'PARTY A')}:</strong> {contract.contractData?.tenBenA || contract.partyA}\r\n            </Typography>\r\n            \r\n            <Typography paragraph>\r\n              <strong>{t('pages.contracts.detail.sample.partyB', 'PARTY B')}:</strong> {contract.contractData?.tenBenB || contract.partyB}\r\n            </Typography>\r\n            \r\n            <Typography paragraph>\r\n              Hai bên cùng thỏa thuận ký kết Hợp đồng dịch vụ với những nội dung và điều khoản sau đây:\r\n            </Typography>\r\n            \r\n            <Typography variant=\"h6\" gutterBottom>ĐIỀU 1: NỘI DUNG CÔNG VIỆC</Typography>\r\n            <Typography paragraph>\r\n              Bên B đồng ý cung cấp dịch vụ theo yêu cầu của Bên A với nội dung chi tiết như trong Phụ lục đính kèm.\r\n            </Typography>\r\n            \r\n            <Typography variant=\"h6\" gutterBottom>ĐIỀU 2: THỜI HẠN HỢP ĐỒNG</Typography>\r\n            <Typography paragraph>\r\n              Hợp đồng có hiệu lực từ ngày ký đến ngày {contract.expiresAt ? formatDate(contract.expiresAt) : 'khi hoàn thành nghĩa vụ hợp đồng'}.\r\n            </Typography>\r\n            \r\n            <Typography variant=\"h6\" gutterBottom>ĐIỀU 3: GIÁ TRỊ HỢP ĐỒNG</Typography>\r\n            <Typography paragraph>\r\n              Tổng giá trị hợp đồng: {contract.contractData?.giaTriHopDong || 'Theo thỏa thuận giữa hai bên'}\r\n            </Typography>\r\n            \r\n            <Box sx={{ mt: 6, display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap', gap: 2 }}>\r\n              <Box sx={{ textAlign: 'center', minWidth: 200, flex: 1 }}>\r\n                <Typography fontWeight=\"bold\">ĐẠI DIỆN BÊN A</Typography>\r\n                <Typography fontStyle=\"italic\">(Ký, ghi rõ họ tên)</Typography>\r\n                <Box sx={{ height: 80, mt: 2 }}></Box>\r\n                <Typography fontWeight=\"bold\">{contract.contractData?.nguoiDaiDienA || 'Người đại diện'}</Typography>\r\n                <Typography>{contract.contractData?.chucVuA || 'Chức vụ'}</Typography>\r\n              </Box>\r\n              \r\n              <Box sx={{ textAlign: 'center', minWidth: 200, flex: 1 }}>\r\n                <Typography fontWeight=\"bold\">ĐẠI DIỆN BÊN B</Typography>\r\n                <Typography fontStyle=\"italic\">(Ký, ghi rõ họ tên)</Typography>\r\n                <Box sx={{ height: 80, mt: 2 }}></Box>\r\n                <Typography fontWeight=\"bold\">Người đại diện</Typography>\r\n                <Typography>Chức vụ</Typography>\r\n              </Box>\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Paper>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <Dialog open={deleteConfirmOpen} onClose={() => setDeleteConfirmOpen(false)}>\r\n        <DialogTitle>{t('pages.contracts.detail.deleteDialog.title', 'Confirm contract deletion')}</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>{t('pages.contracts.detail.deleteDialog.text', 'Are you sure you want to delete this contract? This action cannot be undone.')}</Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDeleteConfirmOpen(false)}>{t('common.cancel', 'Cancel')}</Button>\r\n          <Button \r\n            onClick={() => {\r\n              onDelete(contract.id);\r\n              setDeleteConfirmOpen(false);\r\n            }} \r\n            color=\"error\"\r\n            variant=\"contained\"\r\n          >\r\n            {t('pages.contracts.detail.deleteDialog.confirm', 'Delete')}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ContractDetail;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Box, Typography, Snackbar, Alert, Tabs, Tab, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip, Button, IconButton, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\r\nimport { Visibility, Delete, FileDownload, Add, Close, ArrowBack } from '@mui/icons-material';\r\nimport TemplateList from './components/TemplateList';\r\nimport UploadTemplate from './components/UploadTemplate';\r\nimport CreateContract from './components/CreateContract';\r\nimport ContractDetail from './components/ContractDetail';\r\nimport { UploadTemplateFormValues } from './components/UploadTemplate/types';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n// Import interface Template từ TemplateList/types.ts\r\nimport { Template as TemplateType } from './components/TemplateList/types';\r\n\r\n// Mở rộng interface Template để phù hợp với TemplateList/types.ts\r\ninterface Template extends TemplateType {\r\n  description?: string;\r\n  extractedFields?: any[];\r\n}\r\n\r\n// Interface cho hợp đồng\r\ninterface Contract {\r\n  id: string;\r\n  name: string;\r\n  templateId: string;\r\n  templateName: string;\r\n  status: 'draft' | 'pending' | 'signed' | 'expired' | 'cancelled';\r\n  partyA: string;\r\n  partyB: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  createdBy: string;\r\n  signedAt?: string;\r\n  expiresAt?: string;\r\n}\r\n\r\n// Tab value\r\ntype ContractTab = 'templates' | 'contracts';\r\n\r\nconst ContractManagement: React.FC = () => {\r\n  const { t, i18n } = useTranslation();\r\n  const [currentTab, setCurrentTab] = useState<ContractTab>('templates');\r\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\r\n  const [createContractOpen, setCreateContractOpen] = useState(false);\r\n  const [templates, setTemplates] = useState<Template[]>([]);\r\n  const [contracts, setContracts] = useState<Contract[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedContract, setSelectedContract] = useState<Contract | null>(null);\r\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n  const [contractToDelete, setContractToDelete] = useState<string | null>(null);\r\n  const [snackbar, setSnackbar] = useState<{\r\n    open: boolean;\r\n    message: string;\r\n    severity: 'success' | 'error' | 'info' | 'warning';\r\n  }>({ open: false, message: '', severity: 'success' });\r\n\r\n  const handleOpenUploadDialog = () => {\r\n    setUploadDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseUploadDialog = () => {\r\n    setUploadDialogOpen(false);\r\n  };\r\n\r\n  // Tải dữ liệu khi component được mount\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // TODO: Replace with actual API call\r\n        // Simulate API call\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        // Mock data\r\n        const mockTemplates: Template[] = [\r\n          {\r\n            id: '1',\r\n            name: 'Hợp đồng mua bán',\r\n            description: 'Template hợp đồng mua bán hàng hóa',\r\n            type: 'customer',\r\n            status: 'active',\r\n            createdAt: '2025-06-30T10:00:00Z',\r\n            updatedAt: '2025-06-30T10:00:00Z',\r\n            createdBy: 'Nguyễn Văn A',\r\n            placeholderCount: 8,\r\n            isDefault: true,\r\n            extractedFields: []\r\n          },\r\n          {\r\n            id: '2',\r\n            name: 'Hợp đồng dịch vụ',\r\n            description: 'Template hợp đồng cung cấp dịch vụ',\r\n            type: 'internal',\r\n            status: 'active',\r\n            createdAt: '2025-06-29T15:30:00Z',\r\n            updatedAt: '2025-06-29T15:30:00Z',\r\n            createdBy: 'Trần Thị B',\r\n            placeholderCount: 5,\r\n            isDefault: false,\r\n            extractedFields: []\r\n          }\r\n        ];\r\n        \r\n        setTemplates(mockTemplates);\r\n      } catch (error) {\r\n        console.error('Error fetching templates:', error);\r\n        setSnackbar({\r\n          open: true,\r\n          message: t('pages.contracts.notifications.loadError'),\r\n          severity: 'error',\r\n        });\r\n      }\r\n      \r\n      // Tải dữ liệu hợp đồng mẫu\r\n      try {\r\n        const mockContracts: Contract[] = [\r\n          {\r\n            id: 'C001',\r\n            name: 'Hợp đồng mua bán số 2025/001',\r\n            templateId: '1',\r\n            templateName: 'Hợp đồng mua bán',\r\n            status: 'signed',\r\n            partyA: 'Công ty TNHH ABC',\r\n            partyB: 'Ông Nguyễn Văn A',\r\n            createdAt: '2025-07-01T09:00:00Z',\r\n            updatedAt: '2025-07-01T09:30:00Z',\r\n            createdBy: 'Nguyễn Văn B',\r\n            signedAt: '2025-07-01T10:00:00Z',\r\n            expiresAt: '2025-12-31T23:59:59Z'\r\n          },\r\n          {\r\n            id: 'C002',\r\n            name: 'Hợp đồng dịch vụ số 2025/002',\r\n            templateId: '2',\r\n            templateName: 'Hợp đồng dịch vụ',\r\n            status: 'pending',\r\n            partyA: 'Công ty TNHH ABC',\r\n            partyB: 'Công ty TNHH XYZ',\r\n            createdAt: '2025-07-02T14:00:00Z',\r\n            updatedAt: '2025-07-02T14:30:00Z',\r\n            createdBy: 'Trần Thị C'\r\n          },\r\n          {\r\n            id: 'C003',\r\n            name: 'Hợp đồng thuê nhà số 2025/003',\r\n            templateId: '3',\r\n            templateName: 'Hợp đồng thuê nhà',\r\n            status: 'draft',\r\n            partyA: 'Công ty TNHH ABC',\r\n            partyB: 'Bà Lê Thị D',\r\n            createdAt: '2025-07-03T10:00:00Z',\r\n            updatedAt: '2025-07-03T10:15:00Z',\r\n            createdBy: 'Nguyễn Văn B',\r\n            expiresAt: '2026-07-02T23:59:59Z'\r\n          }\r\n        ];\r\n        \r\n        setContracts(mockContracts);\r\n      } catch (error) {\r\n        console.error('Error loading contracts:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleUploadTemplate = async (values: UploadTemplateFormValues): Promise<void> => {\r\n    try {\r\n      setLoading(true);\r\n      // TODO: Replace with actual API call\r\n      console.log('Uploading template:', values);\r\n      \r\n      // Simulate API call\r\n      await new Promise(resolve => setTimeout(resolve, 1500));\r\n      \r\n      // Tạo template mới với ID ngẫu nhiên\r\n      const newTemplate: Template = {\r\n        id: Math.random().toString(36).substring(2, 9),\r\n        name: values.name,\r\n        description: values.description || '',\r\n        type: values.type,\r\n        status: 'active',\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        createdBy: 'Người dùng hiện tại', // Trong thực tế sẽ lấy từ thông tin đăng nhập\r\n        placeholderCount: values.extractedFields.length,\r\n        isDefault: false,\r\n        extractedFields: values.extractedFields\r\n      };\r\n      \r\n      // Thêm template mới vào danh sách\r\n      setTemplates(prevTemplates => [newTemplate, ...prevTemplates]);\r\n      \r\n      setSnackbar({\r\n        open: true,\r\n        message: t('pages.contracts.notifications.uploadTemplateSuccess'),\r\n        severity: 'success',\r\n      });\r\n    } catch (error) {\r\n      console.error('Error uploading template:', error);\r\n      setSnackbar({\r\n        open: true,\r\n        message: t('pages.contracts.notifications.uploadTemplateError'),\r\n        severity: 'error',\r\n      });\r\n      throw error; // Ném lỗi để component UploadTemplate xử lý\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseSnackbar = () => {\r\n    setSnackbar(prev => ({ ...prev, open: false }));\r\n  };\r\n\r\n  const handleTabChange = (event: React.SyntheticEvent, newValue: ContractTab) => {\r\n    setCurrentTab(newValue);\r\n  };\r\n  \r\n  const handleCreateContract = (newContract: any) => {\r\n    setContracts(prev => [newContract, ...prev]);\r\n    setCreateContractOpen(false);\r\n    setSelectedContract(newContract);\r\n    setSnackbar({\r\n      open: true,\r\n      message: t('pages.contracts.notifications.createContractSuccess'),\r\n      severity: 'success',\r\n    });\r\n  };\r\n\r\n  const handleViewContract = (contract: Contract) => {\r\n    setSelectedContract(contract);\r\n  };\r\n\r\n  const handleCloseDetail = () => {\r\n    setSelectedContract(null);\r\n  };\r\n\r\n  const handleDeleteClick = (contractId: string) => {\r\n    setContractToDelete(contractId);\r\n    setDeleteConfirmOpen(true);\r\n  };\r\n\r\n  const handleConfirmDelete = () => {\r\n    if (contractToDelete) {\r\n      setContracts(prev => prev.filter(c => c.id !== contractToDelete));\r\n      setDeleteConfirmOpen(false);\r\n      setContractToDelete(null);\r\n      setSnackbar({\r\n        open: true,\r\n        message: t('pages.contracts.notifications.deleteContractSuccess'),\r\n        severity: 'success',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleEditContract = (contractId: string) => {\r\n    // In a real app, this would navigate to an edit page or open an edit dialog\r\n    setSnackbar({\r\n      open: true,\r\n      message: t('pages.contracts.notifications.editInfo'),\r\n      severity: 'info' as const,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          {t('pages.contracts.title')}\r\n        </Typography>\r\n      </Box>\r\n      \r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 3 }}>\r\n        <Tabs \r\n          value={currentTab} \r\n          onChange={handleTabChange}\r\n          aria-label=\"contract management tabs\"\r\n        >\r\n          <Tab label={t('pages.contracts.tabs.templates')} value=\"templates\" />\r\n          <Tab label={t('pages.contracts.tabs.contracts')} value=\"contracts\" />\r\n        </Tabs>\r\n      </Box>\r\n      \r\n      {currentTab === 'templates' ? (\r\n        <>\r\n          <TemplateList \r\n            templates={templates}\r\n            loading={loading}\r\n            onUploadClick={handleOpenUploadDialog} \r\n          />\r\n          \r\n          <UploadTemplate \r\n            open={uploadDialogOpen}\r\n            onClose={handleCloseUploadDialog}\r\n            onSubmit={handleUploadTemplate}\r\n          />\r\n        </>\r\n      ) : (\r\n        <Paper sx={{ p: 3 }}>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              {t('pages.contracts.list.title')}\r\n            </Typography>\r\n            <Button \r\n              variant=\"contained\" \r\n              color=\"primary\"\r\n              startIcon={<Add />}\r\n              onClick={() => setCreateContractOpen(true)}\r\n            >\r\n              {t('pages.contracts.list.buttonCreate')}\r\n            </Button>\r\n          </Box>\r\n          \r\n          {loading ? (\r\n            <Typography color=\"textSecondary\" paragraph>\r\n              {t('pages.contracts.loading.contracts')}\r\n            </Typography>\r\n          ) : (\r\n            <TableContainer>\r\n              <Table>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>{t('pages.contracts.columns.code')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.name')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.type')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.partyA')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.partyB')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.createdAt')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.status')}</TableCell>\r\n                    <TableCell>{t('pages.contracts.columns.actions')}</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {contracts.map((contract) => (\r\n                    <TableRow \r\n                      key={contract.id} \r\n                      hover \r\n                      onClick={() => handleViewContract(contract)}\r\n                      sx={{ cursor: 'pointer' }}\r\n                    >\r\n                      <TableCell>{contract.id}</TableCell>\r\n                      <TableCell>{contract.name}</TableCell>\r\n                      <TableCell>{contract.templateName}</TableCell>\r\n                      <TableCell>{contract.partyA}</TableCell>\r\n                      <TableCell>{contract.partyB}</TableCell>\r\n                      <TableCell>{new Date(contract.createdAt).toLocaleDateString(i18n.language)}</TableCell>\r\n                      <TableCell>\r\n                        <Chip \r\n                          label={\r\n                            contract.status === 'signed' ? t('pages.contracts.status.signed') :\r\n                            contract.status === 'pending' ? t('pages.contracts.status.pending') :\r\n                            contract.status === 'draft' ? t('pages.contracts.status.draft') :\r\n                            contract.status === 'expired' ? t('pages.contracts.status.expired') : t('pages.contracts.status.cancelled')\r\n                          }\r\n                          color={\r\n                            contract.status === 'signed' ? 'success' :\r\n                            contract.status === 'pending' ? 'warning' :\r\n                            contract.status === 'draft' ? 'default' : 'error'\r\n                          }\r\n                          size=\"small\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <IconButton \r\n                          size=\"small\" \r\n                          title={t('pages.contracts.tooltips.view')}\r\n                          onClick={() => handleViewContract(contract)}\r\n                        >\r\n                          <Visibility fontSize=\"small\" />\r\n                        </IconButton>\r\n                        <IconButton size=\"small\" title={t('pages.contracts.tooltips.download')}>\r\n                          <FileDownload fontSize=\"small\" />\r\n                        </IconButton>\r\n                        <IconButton \r\n                          size=\"small\" \r\n                          title={t('pages.contracts.tooltips.delete')}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            handleDeleteClick(contract.id);\r\n                          }}\r\n                        >\r\n                          <Delete fontSize=\"small\" color=\"error\" />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          )}\r\n        </Paper>\r\n      )}\r\n      \r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={handleCloseSnackbar}\r\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      >\r\n        <Alert \r\n          onClose={handleCloseSnackbar} \r\n          severity={snackbar.severity}\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n\r\n      {/* Contract Detail Dialog */}\r\n      <Dialog \r\n        open={!!selectedContract} \r\n        onClose={handleCloseDetail}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <IconButton onClick={handleCloseDetail} sx={{ mr: 1 }}>\r\n              <ArrowBack />\r\n            </IconButton>\r\n            <span>{t('pages.contracts.dialogs.detailTitle')}</span>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          {selectedContract && (\r\n            <ContractDetail\r\n              contract={{\r\n                ...selectedContract,\r\n                contractData: {\r\n                  tenBenA: selectedContract.partyA,\r\n                  tenBenB: selectedContract.partyB,\r\n                  ngayKy: new Date(selectedContract.createdAt).toLocaleDateString(i18n.language),\r\n                  diaChiA: '123 Lê Lợi, Q.1, TP.HCM',\r\n                  dienThoaiA: '0901234567',\r\n                  maSoThueA: '0123456789',\r\n                  nguoiDaiDienA: 'Nguyễn Văn A',\r\n                  chucVuA: 'Giám đốc',\r\n                  giaTriHopDong: '50,000,000 VNĐ'\r\n                }\r\n              }}\r\n              onClose={handleCloseDetail}\r\n              onDelete={handleDeleteClick}\r\n              onEdit={handleEditContract}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <Dialog\r\n        open={deleteConfirmOpen}\r\n        onClose={() => setDeleteConfirmOpen(false)}\r\n      >\r\n        <DialogTitle>{t('pages.contracts.dialogs.deleteConfirmTitle')}</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>{t('pages.contracts.dialogs.deleteConfirmText')}</Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDeleteConfirmOpen(false)}>{t('common.cancel')}</Button>\r\n          <Button \r\n            onClick={handleConfirmDelete} \r\n            color=\"error\"\r\n            variant=\"contained\"\r\n          >\r\n            {t('common.delete')}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog tạo hợp đồng mới */}\r\n      <Dialog \r\n        open={createContractOpen} \r\n        onClose={() => setCreateContractOpen(false)}\r\n        maxWidth=\"lg\"\r\n        fullWidth\r\n        PaperProps={{\r\n          sx: { \r\n            height: '90vh',\r\n            maxHeight: '90vh',\r\n            width: '95%',\r\n            maxWidth: '1400px'\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Typography variant=\"h6\">{t('pages.contracts.dialogs.createTitle')}</Typography>\r\n            <IconButton onClick={() => setCreateContractOpen(false)}>\r\n              <Close />\r\n            </IconButton>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <CreateContract \r\n            templates={templates} \r\n            onBack={() => setCreateContractOpen(false)}\r\n            onCreate={handleCreateContract}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ContractManagement;\r\n"],"names":["_ref","filters","onFilterChange","onUploadClick","onCreateWithAIClick","console","log","t","useTranslation","_jsxs","Box","sx","mb","children","display","gridTemplateColumns","xs","md","gap","alignItems","_jsx","TextField","fullWidth","variant","placeholder","value","search","onChange","e","_objectSpread","target","InputProps","startAdornment","SearchIcon","color","mr","select","label","type","MenuItem","status","justifyContent","mt","Button","startIcon","AddIcon","onClick","width","maxWidth","SmartToyIcon","templates","page","rowsPerPage","totalRows","onPageChange","onRowsPerPageChange","onView","onEdit","onSetDefault","onDelete","i18n","Paper","overflow","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","length","map","template","hover","isDefault","StarIcon","fontSize","Typography","name","Chip","size","placeholderCount","Date","createdAt","toLocaleDateString","language","createdBy","Tooltip","title","IconButton","id","ViewIcon","EditIcon","disabled","StarBorderIcon","DeleteIcon","colSpan","py","TablePagination","rowsPerPageOptions","component","count","handleChangePage","event","newPage","parseInt","labelRowsPerPage","labelDisplayedRows","_ref2","from","to","onSubmit","loading","chatHistory","prompt","setPrompt","useState","PROMPT_SUGGESTIONS","returnObjects","flexDirection","height","p","flexGrow","overflowY","textAlign","opacity","gutterBottom","mx","fontStyle","message","index","elevation","backgroundColor","role","borderRadius","alignSelf","PersonIcon","content","px","flexWrap","suggestion","newPrompt","handleSuggestionClick","clickable","Divider","preventDefault","trim","multiline","maxRows","endIcon","CircularProgress","SendIcon","onUpdate","onSaveTemplate","borderBottom","DownloadIcon","SaveIcon","handleSaveTemplate","Skeleton","my","style","padding","border","resize","fontFamily","lineHeight","extractCompanyNames","party1","includes","party2","companyMatch","match","concat","toUpperCase","extractContractType","toLowerCase","extractContractValue","valueMatch","parseFloat","unit","toLocaleString","extractContractDuration","durationMatch","duration","calculatePercentage","percentage","numericMatch","result","replace","open","onClose","setLoading","contractContent","setContractContent","setChatHistory","saveDialogOpen","setSaveDialogOpen","templateName","setTemplateName","savingTemplate","setSavingTemplate","Dialog","PaperProps","maxHeight","m","DialogTitle","edge","CloseIcon","DialogContent","borderRight","AIPromptInput","async","prev","setTimeout","generatedContract","companyNames","contractType","contractValue","contractDuration","Math","floor","random","getDate","getMonth","getFullYear","mockGenerateContract","error","ContractPreview","newContent","firstLine","split","pt","autoFocus","margin","placeholderRegex","placeholders","newTemplate","toISOString","updatedAt","mockTemplates","propTemplates","propLoading","setFilters","setPage","setRowsPerPage","aiModalOpen","setAIModalOpen","lastAddedTemplateId","setLastAddedTemplateId","filteredTemplates","setFilteredTemplates","setTotalRows","useEffect","filtered","searchLower","filter","startIndex","paginated","slice","filterAndPaginateTemplates","TemplateFilters","newFilters","AIContractGeneration","templateData","newId","now","alert","TemplateTable","newRowsPerPage","window","confirm","_errors$name","analyzing","setAnalyzing","extractedFields","setExtractedFields","schema","useMemo","yup","required","description","optional","oneOf","file","test","of","originalText","default","register","handleSubmit","reset","setValue","watch","formState","errors","useForm","resolver","yupResolver","defaultValues","undefined","selectedFile","handleUpdatePlaceholder","field","updatedFields","handleClose","data","dividers","helperText","rows","FormControl","InputLabel","Select","defaultValue","accept","_event$target$files","files","mockExtractedFields","htmlFor","UploadIcon","splice","DialogActions","borderTop","borderColor","payments","onPaymentsChange","onBack","onNext","paymentStatuses","handlePaymentChange","payment","getDateFnsLocale","lang","startsWith","ja","vi","enUS","currencySuffix","ArrowBackIcon","paragraph","condition","amount","toString","handleAmountChange","numericValue","endAdornment","InputAdornment","position","LocalizationProvider","dateAdapter","AdapterDateFns","adapterLocale","DatePicker","paymentDate","date","slotProps","textField","note","handleDeletePayment","handleAddPayment","newPayment","onCreate","activeStep","setActiveStep","selectedTemplate","setSelectedTemplate","formData","setFormData","setPayments","generateContractHTML","React","contractNumber","padStart","formatCurrency","Intl","NumberFormat","format","paymentScheduleHTML","join","reduce","sum","Object","entries","keys","values","some","handleCreateContract","newContract","templateId","partyA","partyB","contractData","toast","success","steps","renderTemplateSelection","marginBottom","cursor","TemplateIcon","fontWeight","formFields","forEach","renderContractForm","checkFormCompletion","fieldName","handleFieldChange","handleContinue","renderPaymentSchedule","PaymentScheduleStep","renderPreview","PdfPageEditor","initialContent","onSave","onExportPdf","Stepper","step","Step","completed","StepLabel","_contract$contractDat","_contract$contractDat2","_contract$contractDat3","_contract$contractDat4","_contract$contractDat5","_contract$contractDat6","contract","deleteConfirmOpen","setDeleteConfirmOpen","formatDate","dateString","locale","ArrowBack","getStatusColor","ml","flex","signedAt","expiresAt","Download","Print","Share","Edit","Delete","tenBenA","diaChiA","dienThoaiA","maSoThueA","nguoiDaiDienA","chucVuA","tenBenB","ngayKy","giaTriHopDong","minWidth","ContractManagement","currentTab","setCurrentTab","uploadDialogOpen","setUploadDialogOpen","createContractOpen","setCreateContractOpen","setTemplates","contracts","setContracts","selectedContract","setSelectedContract","contractToDelete","setContractToDelete","snackbar","setSnackbar","severity","Promise","resolve","fetchData","handleCloseSnackbar","handleViewContract","handleCloseDetail","handleDeleteClick","contractId","Tabs","handleTabChange","newValue","Tab","_Fragment","TemplateList","handleOpenUploadDialog","UploadTemplate","handleCloseUploadDialog","substring","prevTemplates","Add","Visibility","FileDownload","stopPropagation","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","Alert","ContractDetail","handleConfirmDelete","c","Close","CreateContract"],"sourceRoot":""}