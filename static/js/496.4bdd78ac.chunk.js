"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[496],{24341:(e,t,l)=>{l.d(t,{A:()=>z});var a=l(89379),r=l(65043),n=l(60267),s=l(53969),o=l(55895),i=l(83759),d=l(29651),c=l(41859),u=l(17873),p=l(52956),m=l(24343),x=l(33699),h=l(70298),A=l(94527),b=l(95315),j=l(57401),f=l(66185),v=l(38865),y=l(24244),g=l(3555),w=l(78916),C=l(63745),k=l(74117),S=l(70579);const z=e=>{var t,l;let{entity:z,availableFilters:I,owners:P,statuses:B,savedViews:W,currency:T="\u20ab",onQueryChange:X,onViewChange:M,sticky:R=!0}=e;const L=(0,n.A)(),{t:E}=(0,k.Bd)(),[O,V]=(0,r.useState)("all"),[D,F]=(0,r.useState)({ownerIds:[],leadStatus:[]}),[H,N]=(0,r.useState)(null),[q,U]=(0,r.useState)(null),[_,Q]=(0,r.useState)({}),[G,J]=(0,r.useState)({}),K=[{value:"today",label:E("components.filterBar.datePresets.today")},{value:"yesterday",label:E("components.filterBar.datePresets.yesterday")},{value:"last7days",label:E("components.filterBar.datePresets.last7days")},{value:"last30days",label:E("components.filterBar.datePresets.last30days")},{value:"thismonth",label:E("components.filterBar.datePresets.thismonth")},{value:"lastmonth",label:E("components.filterBar.datePresets.lastmonth")},{value:"custom",label:E("components.filterBar.datePresets.custom")}],Y=(e,t)=>{U(t.currentTarget),N(e),Q(t=>(0,a.A)((0,a.A)({},t),{},{[e]:""}))},Z=()=>{N(null),U(null),J({})},$=e=>{const t=D.ownerIds.includes(e)?D.ownerIds.filter(t=>t!==e):[...D.ownerIds,e],l=(0,a.A)((0,a.A)({},D),{},{ownerIds:t});F(l),X(l)},ee=P.filter(e=>e.name.toLowerCase().includes((_.owner||"").toLowerCase())||e.email.toLowerCase().includes((_.owner||"").toLowerCase())),te=(()=>{const e=[];if(D.ownerIds.forEach(t=>{const l=P.find(e=>e.id===t);l&&e.push({type:"owner",value:t,label:l.name,avatar:l.avatar})}),D.leadStatus.forEach(t=>{const l=B.find(e=>e.value===t);l&&e.push({type:"status",value:t,label:l.label,color:l.color})}),I.forEach(t=>{if("date"===t.type){const l=t.fieldName||t.id,a=D[l];a&&e.push({type:l,label:"".concat(t.label,": ").concat(a.preset||"Custom range")})}}),D.amount){const{min:t,max:l}=D.amount;let a="Amount: ";t&&l?a+="".concat(t).concat(T," - ").concat(l).concat(T):t?a+="\u2265 ".concat(t).concat(T):l&&(a+="\u2264 ".concat(l).concat(T)),e.push({type:"amount",label:a})}return e})(),le=te.length>0;return(0,S.jsxs)(s.A,{sx:{position:R?"sticky":"relative",top:R?0:"auto",zIndex:10,backgroundColor:L.palette.background.paper,borderBottom:"1px solid ".concat(L.palette.divider),py:2,px:1,mb:2},children:[(0,S.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,S.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mr:1},children:E("components.filterBar.labels.view")}),W.map(e=>(0,S.jsx)(i.A,{label:"".concat(e.label).concat(e.count?" (".concat(e.count,")"):""),variant:O===e.id?"filled":"outlined",color:O===e.id?"primary":"default",size:"small",onClick:()=>{return t=e.id,V(t),void M(t);var t},sx:{cursor:"pointer","&:hover":{backgroundColor:O===e.id?(0,d.X4)(L.palette.primary.main,.8):(0,d.X4)(L.palette.primary.main,.1)}}},e.id))]}),(0,S.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:le?2:0},children:[I.filter(e=>e.enabled).map(e=>{const t=e.fieldName||e.id,l="owner"===e.type&&D.ownerIds.length>0||"status"===e.type&&D.leadStatus.length>0||"date"===e.type&&D[t]||"amount"===e.type&&D.amount;return(0,S.jsx)(i.A,{icon:e.icon,label:e.label,variant:l?"filled":"outlined",color:l?"primary":"default",size:"small",onClick:t=>Y(e.id,t),deleteIcon:(0,S.jsx)(g.A,{}),onDelete:t=>Y(e.id,t),sx:{cursor:"pointer","& .MuiChip-deleteIcon":{fontSize:"16px",ml:.5},"&:hover":{backgroundColor:l?(0,d.X4)(L.palette.primary.main,.8):(0,d.X4)(L.palette.primary.main,.1)}}},e.id)}),le&&(0,S.jsx)(c.A,{size:"small",startIcon:(0,S.jsx)(w.A,{}),onClick:()=>{const e={ownerIds:[],leadStatus:[]};F(e),X(e)},sx:{ml:1},children:E("components.filterBar.buttons.clearAll")})]}),le&&(0,S.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,S.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mr:1},children:E("components.filterBar.labels.applied")}),te.map((e,t)=>(0,S.jsx)(i.A,(0,a.A)((0,a.A)({},e.avatar?{avatar:(0,S.jsx)(u.A,{src:e.avatar,sx:{width:20,height:20}})}:{}),{},{label:e.label,size:"small",onDelete:()=>((e,t)=>{let l=(0,a.A)({},D);"owner"===e?t&&(l.ownerIds=l.ownerIds.filter(e=>e!==t)):"status"===e?t&&(l.leadStatus=l.leadStatus.filter(e=>e!==t)):"amount"===e?delete l.amount:delete l[e],F(l),X(l)})(e.type,e.value),sx:{backgroundColor:e.color?(0,d.X4)(e.color,.1):(0,d.X4)(L.palette.primary.main,.1),color:e.color||L.palette.primary.main,border:e.color?"1px solid ".concat((0,d.X4)(e.color,.3)):"1px solid ".concat((0,d.X4)(L.palette.primary.main,.3)),"& .MuiChip-deleteIcon":{color:e.color||L.palette.primary.main,"&:hover":{color:L.palette.error.main}}}}),"".concat(e.type,"-").concat(e.value||t)))]}),(0,S.jsx)(p.Ay,{open:"owner"===H,anchorEl:q,onClose:Z,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:350,maxHeight:400,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,S.jsxs)(s.A,{sx:{p:2},children:[(0,S.jsx)(m.A,{fullWidth:!0,size:"small",placeholder:E("components.filterBar.placeholders.searchOwners"),value:_.owner||"",onChange:e=>Q(t=>(0,a.A)((0,a.A)({},t),{},{owner:e.target.value})),InputProps:{startAdornment:(0,S.jsx)(x.A,{position:"start",children:(0,S.jsx)(C.A,{fontSize:"small"})})},sx:{mb:2}}),(0,S.jsxs)(s.A,{sx:{mb:2},children:[(0,S.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:E("components.filterBar.labels.quickSelect")}),(0,S.jsxs)(h.A,{direction:"row",spacing:1,children:[(0,S.jsx)(i.A,{label:E("components.filterBar.chips.me"),size:"small",variant:"outlined",onClick:()=>$("current-user"),sx:{cursor:"pointer"}}),(0,S.jsx)(i.A,{label:E("components.filterBar.chips.unassigned"),size:"small",variant:"outlined",onClick:()=>$("unassigned"),sx:{cursor:"pointer"}})]})]}),(0,S.jsx)(A.A,{sx:{mb:1}}),(0,S.jsx)(b.A,{sx:{maxHeight:200,overflow:"auto"},children:0===ee.length?(0,S.jsx)(j.Ay,{children:(0,S.jsx)(f.A,{primary:E("components.filterBar.messages.noResults"),primaryTypographyProps:{color:"text.secondary",variant:"body2"}})}):ee.map(e=>(0,S.jsxs)(j.Ay,{dense:!0,sx:{cursor:"pointer",borderRadius:1},onClick:()=>$(e.id),children:[(0,S.jsx)(v.A,{checked:D.ownerIds.includes(e.id),size:"small",sx:{mr:1}}),(0,S.jsx)(y.A,{children:(0,S.jsx)(u.A,{src:e.avatar,sx:{width:32,height:32},children:e.name.charAt(0)})}),(0,S.jsx)(f.A,{primary:e.name,secondary:e.email,primaryTypographyProps:{fontWeight:"medium",fontSize:"0.875rem"},secondaryTypographyProps:{fontSize:"0.75rem"}})]},e.id))})]})}),(0,S.jsx)(p.Ay,{open:I.some(e=>"date"===e.type&&H===e.id),anchorEl:q,onClose:Z,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:280,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,S.jsxs)(s.A,{sx:{p:2},children:[(0,S.jsx)(o.A,{variant:"subtitle2",sx:{mb:2},children:(null===(t=I.find(e=>e.id===H))||void 0===t?void 0:t.label)||E("components.filterBar.labels.dateFilter")}),(0,S.jsx)(b.A,{children:K.map(e=>(0,S.jsx)(j.Ay,{dense:!0,sx:{cursor:"pointer",borderRadius:1},onClick:()=>((e,t)=>{const l=I.find(t=>t.id===e),r=(null===l||void 0===l?void 0:l.fieldName)||e,n=(0,a.A)((0,a.A)({},D),{},{[r]:{preset:t}});F(n),X(n),Z()})(H,e.value),children:(0,S.jsx)(f.A,{primary:e.label})},e.value))})]})}),(0,S.jsx)(p.Ay,{open:I.some(e=>"status"===e.type&&H===e.id),anchorEl:q,onClose:Z,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:300,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,S.jsxs)(s.A,{sx:{p:2},children:[(0,S.jsx)(o.A,{variant:"subtitle2",sx:{mb:2},children:(null===(l=I.find(e=>e.id===H))||void 0===l?void 0:l.label)||E("components.filterBar.labels.statusFilter")}),(0,S.jsx)(b.A,{children:B.map(e=>(0,S.jsxs)(j.Ay,{dense:!0,sx:{cursor:"pointer",borderRadius:1},onClick:()=>(e=>{const t=D.leadStatus.includes(e)?D.leadStatus.filter(t=>t!==e):[...D.leadStatus,e],l=(0,a.A)((0,a.A)({},D),{},{leadStatus:t});F(l),X(l)})(e.value),children:[(0,S.jsx)(v.A,{checked:D.leadStatus.includes(e.value),size:"small",sx:{mr:1}}),(0,S.jsx)(i.A,{label:e.label,size:"small",sx:{backgroundColor:(0,d.X4)(e.color,.1),color:e.color,border:"1px solid ".concat((0,d.X4)(e.color,.3))}})]},e.value))})]})}),(0,S.jsx)(p.Ay,{open:"amount"===H,anchorEl:q,onClose:Z,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:320,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:(0,S.jsxs)(s.A,{sx:{p:2},children:[(0,S.jsx)(o.A,{variant:"subtitle2",sx:{mb:2},children:E("components.filterBar.labels.amountRange")}),(0,S.jsxs)(s.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,S.jsx)(m.A,{label:E("components.filterBar.range.min"),type:"number",size:"small",value:G.min||"",onChange:e=>J(t=>(0,a.A)((0,a.A)({},t),{},{min:e.target.value?Number(e.target.value):void 0})),InputProps:{endAdornment:(0,S.jsx)(x.A,{position:"end",children:T})}}),(0,S.jsx)(m.A,{label:E("components.filterBar.range.max"),type:"number",size:"small",value:G.max||"",onChange:e=>J(t=>(0,a.A)((0,a.A)({},t),{},{max:e.target.value?Number(e.target.value):void 0})),InputProps:{endAdornment:(0,S.jsx)(x.A,{position:"end",children:T})}})]}),(0,S.jsxs)(s.A,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[(0,S.jsx)(c.A,{size:"small",onClick:Z,children:E("components.filterBar.buttons.cancel")}),(0,S.jsx)(c.A,{size:"small",variant:"contained",onClick:()=>{const{min:e,max:t}=G;if(void 0!==e||void 0!==t){const l=(0,a.A)((0,a.A)({},D),{},{amount:{min:e,max:t,currency:T}});F(l),X(l)}Z()},disabled:!G.min&&!G.max,children:E("components.filterBar.buttons.apply")})]})]})})]})}},95220:(e,t,l)=>{l.d(t,{A:()=>oe});var a=l(65043),r=l(60267),n=l(53969),s=l(55895),o=l(26529),i=l(42579),d=l(29651),c=l(83759),u=l(17873),p=l(10256),m=l(67203),x=l(47471),h=l(24343),A=l(73849),b=l(28259),j=l(94799),f=l(87443),v=l(10756),y=l(86172),g=l(81341),w=l(34375),C=l(91449),k=l(33699),S=l(41859),z=l(38865),I=l(56465),P=l(4395),B=l(94527),W=l(52956),T=l(95315),X=l(57401),M=l(24244),R=l(66185),L=l(3353),E=l(78403),O=l(38517),V=l(81911),D=l(78776),F=l(85877),H=l(4573),N=l(23241),q=l(53974),U=l(73069),_=l(90160),Q=l(87195),G=l(70923),J=l(63745),K=l(74117),Y=l(70579);const Z=e=>{let{open:t,column:l,value:o,rowData:i,users:c=[],onSave:A,onClose:b}=e;const j=(0,r.A)(),{t:f}=(0,K.Bd)(),[v,y]=(0,a.useState)(o),[g,w]=(0,a.useState)(null),[z,I]=(0,a.useState)(!1),[P,B]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&(y(o),w(null),B(""))},[t,o]);const W=c.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())||e.email.toLowerCase().includes(P.toLowerCase())),Z=()=>{switch(l.type){case"email":return(0,Y.jsx)(H.A,{fontSize:"small"});case"phone":return(0,Y.jsx)(N.A,{fontSize:"small"});case"currency":return(0,Y.jsx)(q.A,{fontSize:"small"});case"date":return(0,Y.jsx)(U.A,{fontSize:"small"});case"userSelect":return(0,Y.jsx)(_.A,{fontSize:"small"});case"select":return(0,Y.jsx)(Q.A,{fontSize:"small"});default:return(0,Y.jsx)(G.A,{fontSize:"small"})}};return(0,Y.jsxs)(O.A,{open:t,onClose:b,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,Y.jsx)(V.A,{sx:{pb:1,pt:2},children:(0,Y.jsx)(s.A,{variant:"subtitle1",sx:{fontWeight:600},children:f("components.editCellModal.title",{name:i.name||i.id,defaultValue:"Edit for ".concat(i.name||i.id)})})}),(0,Y.jsxs)(D.A,{sx:{pt:3,pb:2,px:3},children:[(0,Y.jsx)(n.A,{sx:{mt:1},children:(()=>{var e;switch(l.type){case"select":return(0,Y.jsxs)(p.A,{fullWidth:!0,variant:"standard",children:[(0,Y.jsx)(L.A,{children:l.label}),(0,Y.jsx)(m.A,{value:v||"",onChange:e=>y(e.target.value),children:null===(e=l.options)||void 0===e?void 0:e.map(e=>(0,Y.jsx)(x.A,{value:e.value,children:(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.color&&(0,Y.jsx)(n.A,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:e.color}}),e.label]})},e.value))})]});case"userSelect":return(0,Y.jsxs)(n.A,{children:[(0,Y.jsx)(h.A,{fullWidth:!0,label:f("components.editCellModal.searchUser",{defaultValue:"Search user"}),value:P,onChange:e=>B(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:(0,Y.jsx)(J.A,{fontSize:"small"})})},sx:{mb:2}}),(0,Y.jsx)(n.A,{sx:{maxHeight:200,overflow:"auto"},children:(0,Y.jsxs)(T.A,{dense:!0,children:[W.map(e=>(0,Y.jsx)(X.Ay,{sx:{p:0,mb:.5},children:(0,Y.jsxs)(E.A,{selected:v===e.id,onClick:()=>y(e.id),sx:{borderRadius:1,"&.Mui-selected":{backgroundColor:(0,d.X4)(j.palette.primary.main,.1),"&:hover":{backgroundColor:(0,d.X4)(j.palette.primary.main,.2)}}},children:[(0,Y.jsx)(M.A,{children:(0,Y.jsx)(u.A,{sx:{width:32,height:32},src:e.avatar,children:e.name.charAt(0)})}),(0,Y.jsx)(R.A,{primary:e.name,secondary:e.email,primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}})]})},e.id)),0===W.length&&(0,Y.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{p:2,textAlign:"center"},children:f("components.editCellModal.noUsersFound",{defaultValue:"No users found"})})]})})]});case"date":return(0,Y.jsx)(h.A,{fullWidth:!0,type:"date",label:l.label,value:v||"",onChange:e=>y(e.target.value),InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:Z()})}});case"number":case"currency":return(0,Y.jsx)(h.A,{fullWidth:!0,type:"number",label:l.label,value:v||"",onChange:e=>y(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:Z()}),endAdornment:"currency"===l.type?(0,Y.jsx)(k.A,{position:"end",children:"\u20ab"}):void 0}});case"email":return(0,Y.jsx)(h.A,{fullWidth:!0,type:"email",label:l.label,value:v||"",onChange:e=>y(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:(0,Y.jsx)(H.A,{fontSize:"small"})})}});case"phone":return(0,Y.jsx)(h.A,{fullWidth:!0,type:"tel",label:l.label,value:v||"",onChange:e=>y(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:(0,Y.jsx)(N.A,{fontSize:"small"})})}});default:return(0,Y.jsx)(h.A,{fullWidth:!0,label:l.label,value:v||"",onChange:e=>y(e.target.value),multiline:"text"===l.type&&"description"===l.id,rows:"description"===l.id?3:1,InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:Z()})}})}})()}),g&&(0,Y.jsx)(C.A,{severity:"error",sx:{mt:2},children:g}),"email"===l.type&&(0,Y.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:f("components.editCellModal.examples.email",{defaultValue:"Example: example@company.com"})}),"phone"===l.type&&(0,Y.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:f("components.editCellModal.examples.phone",{defaultValue:"Example: 0901234567 (10-11 digits)"})})]}),(0,Y.jsxs)(F.A,{sx:{px:2,pb:2,pt:1},children:[(0,Y.jsx)(S.A,{onClick:()=>{y(o),w(null),b()},size:"small",children:f("common.cancel",{defaultValue:"Cancel"})}),(0,Y.jsx)(S.A,{onClick:async()=>{const e=(t=v,!l.required||t&&""!==t.toString().trim()?l.validate?l.validate(t):null:f("common.validation.requiredField",{field:l.label,defaultValue:"".concat(l.label," is required")}));var t;if(e)w(e);else{I(!0),w(null);try{await A(v)?b():w(f("components.editCellModal.errors.saveFailed",{defaultValue:"Could not save changes. Please try again."}))}catch(a){w(f("components.editCellModal.errors.saveError",{defaultValue:"An error occurred while saving."}))}finally{I(!1)}}},variant:"contained",size:"small",disabled:z,children:z?f("common.saving",{defaultValue:"Saving..."}):f("common.save",{defaultValue:"Save"})})]})]})};var $=l(3665),ee=l(61773),te=l(5362),le=l(40847),ae=l(50311),re=l(45606),ne=l(12043),se=l(22632);const oe=e=>{let{columns:t,data:l,loading:p=!1,error:m,searchable:L=!0,filterable:E=!0,selectable:O=!0,pagination:V=!0,rowsPerPageOptions:D=[10,20,50],defaultRowsPerPage:F=10,emptyMessage:H,onRowDoubleClick:N,onCellEdit:q,onRowSelect:U,onBulkAction:_,onPreviewContact:Q,users:G=[],zebra:oe=!0}=e;const ie=(0,r.A)(),{t:de}=(0,K.Bd)(),[ce,ue]=(0,a.useState)(""),[pe,me]=(0,a.useState)({key:"",direction:null}),[xe,he]=(0,a.useState)([]),[Ae,be]=(0,a.useState)(!1),[je,fe]=(0,a.useState)(null),[ve,ye]=(0,a.useState)(null),[ge,we]=(0,a.useState)(null),[Ce,ke]=(0,a.useState)(null),[Se,ze]=(0,a.useState)(""),[Ie,Pe]=(0,a.useState)(1),[Be,We]=(0,a.useState)(F),[Te,Xe]=(0,a.useState)(t.map(e=>e.id)),[Me,Re]=(0,a.useState)({}),Le=((0,a.useRef)(null),(0,a.useMemo)(()=>{let e=l;return ce&&(e=e.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(ce.toLowerCase())))),pe.key&&pe.direction&&(e=[...e].sort((e,t)=>{const l=e[pe.key],a=t[pe.key];return l<a?"asc"===pe.direction?-1:1:l>a?"asc"===pe.direction?1:-1:0})),e},[l,ce,pe])),Ee=(0,a.useMemo)(()=>{if(!V)return Le;const e=(Ie-1)*Be;return Le.slice(e,e+Be)},[Le,Ie,Be,V]),Oe=Math.ceil(Le.length/Be),Ve=async e=>{if(!je||!q)return!1;try{return await q(je.rowId,je.columnId,e)}catch(m){return console.error("Save error:",m),!1}},De=()=>{be(!1),fe(null)},Fe=(0,a.useMemo)(()=>Se?G.filter(e=>e.name.toLowerCase().includes(Se.toLowerCase())||e.email.toLowerCase().includes(Se.toLowerCase())):G,[G,Se]),He=(e,t)=>{switch(e){case"sort-asc":me({key:t,direction:"asc"});break;case"sort-desc":me({key:t,direction:"desc"});break;case"hide":Xe(e=>e.filter(e=>e!==t))}ye(null)},Ne=(e,t)=>{var l;const a=e[t.id],r=(null===ge||void 0===ge?void 0:ge.rowId)===e.id&&(null===ge||void 0===ge?void 0:ge.columnId)===t.id;if("name"===t.id&&Q)return(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onMouseEnter:()=>we({rowId:e.id,columnId:t.id}),onMouseLeave:()=>we(null),children:[(0,Y.jsx)(s.A,{variant:"body2",sx:{flex:1,mr:1},children:a}),r&&(0,Y.jsx)(o.A,{title:de("components.smartTable.tooltips.previewContact"),children:(0,Y.jsx)(i.A,{size:"small",onClick:t=>{t.stopPropagation(),Q(e)},sx:{opacity:.7,"&:hover":{opacity:1,backgroundColor:(0,d.X4)(ie.palette.primary.main,.1)}},children:(0,Y.jsx)($.A,{fontSize:"small"})})})]});switch(t.type){case"select":const e=null===(l=t.options)||void 0===l?void 0:l.find(e=>e.value===a);return e?(0,Y.jsx)(c.A,{label:e.label,size:"small",sx:{backgroundColor:e.color?(0,d.X4)(e.color,.1):void 0,color:e.color,border:e.color?"1px solid ".concat((0,d.X4)(e.color,.3)):void 0}}):a;case"userSelect":const r=G.find(e=>e.id===a);return r?(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(u.A,{sx:{width:24,height:24},src:r.avatar,children:r.name.charAt(0)}),(0,Y.jsx)(s.A,{variant:"body2",children:r.name})]}):a;case"currency":return t.format?t.format(a):"".concat(a,"\u20ab");case"actions":return(0,Y.jsxs)(n.A,{sx:{display:"flex",gap:.5},children:[(0,Y.jsx)(i.A,{size:"small",children:(0,Y.jsx)(ee.A,{fontSize:"small"})}),(0,Y.jsx)(i.A,{size:"small",color:"error",children:(0,Y.jsx)(te.A,{fontSize:"small"})})]});default:return t.format?t.format(a):a}};return p?(0,Y.jsxs)(n.A,{children:[(0,Y.jsxs)(n.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,Y.jsx)(A.A,{variant:"rectangular",width:200,height:40}),(0,Y.jsx)(A.A,{variant:"rectangular",width:100,height:40}),(0,Y.jsx)(A.A,{variant:"rectangular",width:100,height:40})]}),(0,Y.jsx)(b.A,{component:j.A,children:(0,Y.jsxs)(f.A,{children:[(0,Y.jsx)(v.A,{children:(0,Y.jsx)(y.A,{children:t.map(e=>(0,Y.jsx)(g.A,{children:(0,Y.jsx)(A.A,{variant:"text"})},e.id))})}),(0,Y.jsx)(w.A,{children:Array.from({length:5}).map((e,l)=>(0,Y.jsx)(y.A,{children:t.map(e=>(0,Y.jsx)(g.A,{children:(0,Y.jsx)(A.A,{variant:"text"})},e.id))},l))})]})})]}):(0,Y.jsxs)(n.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[m&&(0,Y.jsx)(C.A,{severity:"error",sx:{mb:2},children:m}),(0,Y.jsxs)(n.A,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap",alignItems:"center",flexShrink:0,px:1},children:[L&&(0,Y.jsx)(h.A,{placeholder:de("components.smartTable.placeholders.search"),size:"small",value:ce,onChange:e=>ue(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:(0,Y.jsx)(J.A,{})})},sx:{minWidth:200}}),E&&(0,Y.jsx)(S.A,{variant:"outlined",startIcon:(0,Y.jsx)(le.A,{}),size:"small",children:de("components.smartTable.buttons.filters")}),(0,Y.jsx)(n.A,{sx:{ml:"auto",display:"flex",alignItems:"center",gap:2,flexShrink:0},children:(0,Y.jsx)(s.A,{variant:"body2",color:"text.secondary",children:de("components.smartTable.labels.rows",{count:Le.length})})})]}),xe.length>0&&(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,mb:2,backgroundColor:(0,d.X4)(ie.palette.primary.main,.1),borderRadius:1},children:[(0,Y.jsx)(s.A,{variant:"body2",children:de("components.smartTable.labels.selected",{count:xe.length})}),(0,Y.jsx)(S.A,{size:"small",onClick:()=>null===_||void 0===_?void 0:_("delete",xe),children:de("components.smartTable.actions.delete")}),(0,Y.jsx)(S.A,{size:"small",onClick:()=>null===_||void 0===_?void 0:_("assign",xe),children:de("components.smartTable.actions.assignOwner")})]}),(0,Y.jsx)(n.A,{sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,Y.jsx)(b.A,{component:j.A,sx:{flex:1,width:"100%",overflow:"auto","&::-webkit-scrollbar":{height:"8px",width:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:(0,d.X4)(ie.palette.grey[300],.2),borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:(0,d.X4)(ie.palette.primary.main,.4),borderRadius:"4px",border:"2px solid transparent",backgroundClip:"padding-box","&:hover":{backgroundColor:(0,d.X4)(ie.palette.primary.main,.6)}},"&::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},children:(0,Y.jsxs)(f.A,{stickyHeader:!0,sx:{minWidth:1650,width:"100%",tableLayout:"fixed"},children:[(0,Y.jsx)(v.A,{children:(0,Y.jsxs)(y.A,{children:[O&&(0,Y.jsx)(g.A,{padding:"checkbox",sx:{minWidth:50},children:(0,Y.jsx)(z.A,{indeterminate:xe.length>0&&xe.length<Ee.length,checked:Ee.length>0&&xe.length===Ee.length,onChange:()=>{const e=Ee.map(e=>e.id),t=xe.length===e.length?[]:e;he(t),null===U||void 0===U||U(t)}})}),t.filter(e=>Te.includes(e.id)).map(e=>(0,Y.jsx)(g.A,{sx:{minWidth:e.width||e.minWidth||150,cursor:e.sortable?"pointer":"default",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:()=>(e=>{const l=t.find(t=>t.id===e);null!==l&&void 0!==l&&l.sortable&&me(t=>t.key!==e?{key:e,direction:"asc"}:"asc"===t.direction?{key:e,direction:"desc"}:"desc"===t.direction?{key:"",direction:null}:{key:e,direction:"asc"})})(e.id),children:(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(s.A,{variant:"subtitle2",fontWeight:"bold",children:e.label}),e.sortable&&pe.key===e.id&&("asc"===pe.direction?(0,Y.jsx)(ae.A,{fontSize:"small"}):(0,Y.jsx)(re.A,{fontSize:"small"})),(0,Y.jsx)(i.A,{size:"small",onClick:t=>{return l=t,a=e.id,l.stopPropagation(),void ye({element:l.currentTarget,columnId:a});var l,a},sx:{ml:"auto"},children:(0,Y.jsx)(ne.A,{fontSize:"small"})})]})},e.id))]})}),(0,Y.jsx)(w.A,{children:0===Ee.length?(0,Y.jsx)(y.A,{children:(0,Y.jsx)(g.A,{colSpan:t.length+(O?1:0),sx:{textAlign:"center",py:8},children:(0,Y.jsx)(s.A,{variant:"body1",color:"text.secondary",children:H||de("components.smartTable.empty")})})}):Ee.map((e,l)=>(0,Y.jsxs)(y.A,{hover:!0,selected:xe.includes(e.id),onDoubleClick:()=>null===N||void 0===N?void 0:N(e),sx:{cursor:N?"pointer":"default",backgroundColor:oe&&l%2===1?(0,d.X4)(ie.palette.primary.main,.04):"transparent"},children:[O&&(0,Y.jsx)(g.A,{padding:"checkbox",sx:{minWidth:50},children:(0,Y.jsx)(z.A,{checked:xe.includes(e.id),onChange:()=>(e=>{const t=xe.includes(e)?xe.filter(t=>t!==e):[...xe,e];he(t),null===U||void 0===U||U(t)})(e.id)})}),t.filter(e=>Te.includes(e.id)).map(t=>(0,Y.jsx)(g.A,{"data-cell":"".concat(e.id,"-").concat(t.id),onClick:()=>((e,t)=>{t.editable&&"actions"!==t.type&&(fe({rowId:e.id,columnId:t.id,value:e[t.id],rowData:e}),be(!0))})(e,t),sx:{minWidth:t.width||t.minWidth||150,cursor:t.editable?"pointer":"default",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":t.editable?{backgroundColor:(0,d.X4)(ie.palette.primary.main,.04)}:{}},children:Ne(e,t)},t.id))]},e.id))})]})})}),V&&Oe>1&&(0,Y.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:2,py:2,px:1,flexShrink:0,borderTop:"1px solid ".concat(ie.palette.divider)},children:(0,Y.jsx)(I.A,{count:Oe,page:Ie,onChange:(e,t)=>Pe(t),color:"primary",size:"medium",showFirstButton:!0,showLastButton:!0})}),(0,Y.jsxs)(P.A,{anchorEl:null===ve||void 0===ve?void 0:ve.element,open:Boolean(ve),onClose:()=>ye(null),children:[(0,Y.jsxs)(x.A,{onClick:()=>He("sort-asc",ve.columnId),children:[(0,Y.jsx)(ae.A,{fontSize:"small",sx:{mr:1}}),de("components.smartTable.columnMenu.sortAsc")]}),(0,Y.jsxs)(x.A,{onClick:()=>He("sort-desc",ve.columnId),children:[(0,Y.jsx)(re.A,{fontSize:"small",sx:{mr:1}}),de("components.smartTable.columnMenu.sortDesc")]}),(0,Y.jsx)(B.A,{}),(0,Y.jsxs)(x.A,{onClick:()=>He("hide",ve.columnId),children:[(0,Y.jsx)(se.A,{fontSize:"small",sx:{mr:1}}),de("components.smartTable.columnMenu.hideColumn")]})]}),(0,Y.jsx)(W.Ay,{open:Boolean(Ce),anchorEl:null===Ce||void 0===Ce?void 0:Ce.element,onClose:()=>{ke(null),ze("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,Y.jsxs)(n.A,{sx:{width:300,maxHeight:400},children:[(0,Y.jsx)(n.A,{sx:{p:2,borderBottom:"1px solid ".concat(ie.palette.divider)},children:(0,Y.jsx)(h.A,{fullWidth:!0,size:"small",placeholder:de("components.smartTable.placeholders.searchUsers"),value:Se,onChange:e=>ze(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(k.A,{position:"start",children:(0,Y.jsx)(J.A,{})})}})}),(0,Y.jsx)(T.A,{sx:{maxHeight:300,overflow:"auto"},children:Fe.map(e=>(0,Y.jsxs)(X.Ay,{component:"div",sx:{cursor:"pointer"},onClick:()=>(e=>{if(!Ce||!q)return;G.find(t=>t.id===e)&&q(Ce.rowId,Ce.columnId,e),ke(null),ze("")})(e.id),children:[(0,Y.jsx)(M.A,{children:(0,Y.jsx)(u.A,{src:e.avatar,sx:{width:32,height:32},children:e.name.charAt(0)})}),(0,Y.jsx)(R.A,{primary:e.name,secondary:e.email,primaryTypographyProps:{fontWeight:"bold"}})]},e.id))})]})}),je&&(0,Y.jsx)(Z,{open:Ae,column:t.find(e=>e.id===je.columnId&&"actions"!==e.type),value:je.value,rowData:je.rowData,users:G,onSave:Ve,onClose:De})]})}}}]);
//# sourceMappingURL=496.4bdd78ac.chunk.js.map