"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[624],{63624:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ve});var a=n(89379),s=n(65043),i=n(53969),l=n(55895),r=n(14333),c=n(12843),o=n(94799),d=n(41859),p=n(28259),h=n(87443),g=n(10756),x=n(86172),u=n(81341),m=n(34375),A=n(83759),j=n(42579),y=n(32911),f=n(91449),v=n(38517),b=n(81911),C=n(78776),T=n(85877),S=n(22950),B=n(3665),w=n(50103),D=n(5362),N=n(58315),I=n(27421),k=n(24343),H=n(47471),V=n(63745),P=n(1422),L=n(74117),G=n(70579);const W=e=>{let{filters:t,onFilterChange:n,onUploadClick:s,onCreateWithAIClick:l=()=>console.log("Create with AI clicked")}=e;const{t:r}=(0,L.Bd)();return(0,G.jsxs)(i.A,{sx:{mb:3},children:[(0,G.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr 1fr"},gap:2,alignItems:"center",mb:2},children:[(0,G.jsx)(i.A,{children:(0,G.jsx)(k.A,{fullWidth:!0,variant:"outlined",placeholder:r("pages.contracts.templateList.filters.searchPlaceholder"),value:t.search,onChange:e=>{n((0,a.A)((0,a.A)({},t),{},{search:e.target.value}))},InputProps:{startAdornment:(0,G.jsx)(V.A,{sx:{color:"text.secondary",mr:1}})}})}),(0,G.jsx)(i.A,{children:(0,G.jsxs)(k.A,{select:!0,fullWidth:!0,label:r("pages.contracts.templateList.filters.typeLabel"),value:t.type,onChange:e=>{n((0,a.A)((0,a.A)({},t),{},{type:e.target.value}))},variant:"outlined",children:[(0,G.jsx)(H.A,{value:"all",children:r("pages.contracts.templateList.filters.typeOptions.all")}),(0,G.jsx)(H.A,{value:"internal",children:r("pages.contracts.templateList.table.chips.type.internal")}),(0,G.jsx)(H.A,{value:"customer",children:r("pages.contracts.templateList.table.chips.type.customer")}),(0,G.jsx)(H.A,{value:"AI",children:"AI"})]})}),(0,G.jsx)(i.A,{children:(0,G.jsxs)(k.A,{select:!0,fullWidth:!0,label:r("pages.contracts.templateList.filters.statusLabel"),value:t.status,onChange:e=>{n((0,a.A)((0,a.A)({},t),{},{status:e.target.value}))},variant:"outlined",children:[(0,G.jsx)(H.A,{value:"all",children:r("pages.contracts.templateList.filters.statusOptions.all")}),(0,G.jsx)(H.A,{value:"active",children:r("pages.contracts.templateList.table.chips.status.active")}),(0,G.jsx)(H.A,{value:"inactive",children:r("pages.contracts.templateList.table.chips.status.inactive")})]})})]}),(0,G.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:{xs:2,md:0}},children:[(0,G.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,G.jsx)(S.A,{}),onClick:s,sx:{width:{xs:"100%",md:"auto"},maxWidth:"250px"},children:r("pages.contracts.templateList.filters.buttons.uploadTemplate")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,G.jsx)(P.A,{}),onClick:l,sx:{width:{xs:"100%",md:"auto"},maxWidth:"250px"},children:r("pages.contracts.templateList.filters.buttons.createWithAI")})]})]})};var z=n(26529),U=n(89174),O=n(27601),R=n(61773),Y=n(96659);const F=e=>{let{templates:t,page:n,rowsPerPage:a,totalRows:s,onPageChange:r,onRowsPerPageChange:c,onView:d,onEdit:y,onSetDefault:f,onDelete:v}=e;const{t:b,i18n:C}=(0,L.Bd)();return(0,G.jsxs)(o.A,{sx:{width:"100%",overflow:"hidden"},children:[(0,G.jsx)(p.A,{children:(0,G.jsxs)(h.A,{children:[(0,G.jsx)(g.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(u.A,{children:b("pages.contracts.templateList.table.columns.name")}),(0,G.jsx)(u.A,{align:"center",children:b("pages.contracts.templateList.table.columns.type")}),(0,G.jsx)(u.A,{align:"center",children:b("pages.contracts.templateList.table.columns.status")}),(0,G.jsx)(u.A,{align:"center",children:b("pages.contracts.templateList.table.columns.fields")}),(0,G.jsx)(u.A,{align:"center",children:b("pages.contracts.templateList.table.columns.createdAt")}),(0,G.jsx)(u.A,{align:"center",children:b("pages.contracts.templateList.table.columns.createdBy")}),(0,G.jsx)(u.A,{align:"center",children:b("pages.contracts.templateList.table.columns.actions")})]})}),(0,G.jsx)(m.A,{children:t.length>0?t.map(e=>(0,G.jsxs)(x.A,{hover:!0,children:[(0,G.jsx)(u.A,{children:(0,G.jsxs)(i.A,{display:"flex",alignItems:"center",children:[e.isDefault&&(0,G.jsx)(O.A,{color:"primary",sx:{fontSize:"1rem",mr:1}}),(0,G.jsx)(l.A,{variant:"body2",children:e.name})]})}),(0,G.jsx)(u.A,{align:"center",children:(0,G.jsx)(A.A,{label:"internal"===e.type?b("pages.contracts.templateList.table.chips.type.internal"):b("pages.contracts.templateList.table.chips.type.customer"),color:"internal"===e.type?"primary":"default",size:"small",variant:"outlined"})}),(0,G.jsx)(u.A,{align:"center",children:(0,G.jsx)(A.A,{label:"active"===e.status?b("pages.contracts.templateList.table.chips.status.active"):b("pages.contracts.templateList.table.chips.status.inactive"),color:"active"===e.status?"success":"default",size:"small"})}),(0,G.jsx)(u.A,{align:"center",children:e.placeholderCount}),(0,G.jsx)(u.A,{align:"center",children:new Date(e.createdAt).toLocaleDateString(C.language)}),(0,G.jsx)(u.A,{align:"center",children:e.createdBy}),(0,G.jsx)(u.A,{align:"center",children:(0,G.jsxs)(i.A,{display:"flex",justifyContent:"center",children:[(0,G.jsx)(z.A,{title:b("pages.contracts.templateList.table.tooltips.view"),children:(0,G.jsx)(j.A,{size:"small",onClick:()=>d(e.id),children:(0,G.jsx)(B.A,{fontSize:"small"})})}),(0,G.jsx)(z.A,{title:b("pages.contracts.templateList.table.tooltips.edit"),children:(0,G.jsx)(j.A,{size:"small",onClick:()=>y(e.id),children:(0,G.jsx)(R.A,{fontSize:"small"})})}),(0,G.jsx)(z.A,{title:e.isDefault?b("pages.contracts.templateList.table.tooltips.default"):b("pages.contracts.templateList.table.tooltips.setDefault"),children:(0,G.jsx)("span",{children:(0,G.jsx)(j.A,{size:"small",onClick:()=>f(e.id),disabled:e.isDefault,color:e.isDefault?"primary":"default",children:e.isDefault?(0,G.jsx)(O.A,{fontSize:"small"}):(0,G.jsx)(Y.A,{fontSize:"small"})})})}),(0,G.jsx)(z.A,{title:b("pages.contracts.templateList.table.tooltips.delete"),children:(0,G.jsx)(j.A,{size:"small",onClick:()=>v(e.id),color:"error",children:(0,G.jsx)(D.A,{fontSize:"small"})})})]})})]},e.id)):(0,G.jsx)(x.A,{children:(0,G.jsx)(u.A,{colSpan:7,align:"center",sx:{py:4},children:(0,G.jsx)(l.A,{variant:"body2",color:"textSecondary",children:b("pages.contracts.templateList.table.empty")})})})})]})}),(0,G.jsx)(U.A,{rowsPerPageOptions:[5,10,25],component:"div",count:s,rowsPerPage:a,page:n,onPageChange:(e,t)=>{r(t)},onRowsPerPageChange:e=>{c(parseInt(e.target.value,10))},labelRowsPerPage:b("pages.contracts.templateList.table.pagination.rowsPerPage"),labelDisplayedRows:e=>{let{from:t,to:n,count:a}=e;return b("pages.contracts.templateList.table.pagination.displayedRows",{from:t,to:n,count:a})}})]})};var E=n(94527),_=n(80172),q=n(17171),M=n(90160);const Z=e=>{let{onSubmit:t,loading:n,chatHistory:a}=e;const{t:r}=(0,L.Bd)(),[c,p]=(0,s.useState)(""),h=r("pages.contracts.aiGeneration.prompt.suggestions.items",{returnObjects:!0});return(0,G.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:"100%",p:0},children:[(0,G.jsx)(i.A,{sx:{flexGrow:1,overflowY:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:0===a.length?(0,G.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",textAlign:"center",p:3},children:[(0,G.jsx)(P.A,{sx:{fontSize:60,mb:2,opacity:.7}}),(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:r("pages.contracts.aiGeneration.prompt.emptyState.title")}),(0,G.jsx)(l.A,{variant:"body1",sx:{maxWidth:"80%",mx:"auto"},children:r("pages.contracts.aiGeneration.prompt.emptyState.description")}),(0,G.jsx)(l.A,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:r("pages.contracts.aiGeneration.prompt.emptyState.example")})]}):a.map((e,t)=>(0,G.jsx)(o.A,{elevation:0,sx:{p:2,backgroundColor:"assistant"===e.role?"rgba(0, 0, 0, 0.04)":"transparent",borderRadius:2,maxWidth:"90%",alignSelf:"assistant"===e.role?"flex-start":"flex-end"},children:(0,G.jsxs)(i.A,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,G.jsx)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"assistant"===e.role?"primary.main":"secondary.main",borderRadius:"50%",width:32,height:32,color:"white"},children:"assistant"===e.role?(0,G.jsx)(P.A,{fontSize:"small"}):(0,G.jsx)(M.A,{fontSize:"small"})}),(0,G.jsx)(l.A,{variant:"body1",children:e.content})]})},t))}),0===a.length&&(0,G.jsxs)(i.A,{sx:{px:2,py:1},children:[(0,G.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:r("pages.contracts.aiGeneration.prompt.suggestions.title")}),(0,G.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:h.map((e,t)=>(0,G.jsx)(A.A,{label:e,onClick:()=>(e=>{const t=r("pages.contracts.aiGeneration.prompt.suggestions.compose",{suggestion:e});p(t)})(e),color:"primary",variant:"outlined",clickable:!0},t))})]}),(0,G.jsx)(E.A,{}),(0,G.jsxs)(i.A,{component:"form",onSubmit:e=>{e.preventDefault(),c.trim()&&!n&&(t(c.trim()),p(""))},sx:{p:2,display:"flex",alignItems:"flex-end",gap:1},children:[(0,G.jsx)(k.A,{multiline:!0,maxRows:4,placeholder:r("pages.contracts.aiGeneration.input.placeholder"),value:c,onChange:e=>p(e.target.value),fullWidth:!0,variant:"outlined",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",endIcon:n?(0,G.jsx)(_.A,{size:20,color:"inherit"}):(0,G.jsx)(q.A,{}),disabled:!c.trim()||n,type:"submit",sx:{height:56,borderRadius:2,px:3},children:r(n?"pages.contracts.aiGeneration.input.generating":"pages.contracts.aiGeneration.input.generate")})]})]})};var Q=n(73849),K=n(22672),J=n(37305);const X=e=>{let{content:t,onUpdate:n,loading:a,onSaveTemplate:s}=e;const{t:r}=(0,L.Bd)();return(0,G.jsxs)(i.A,{sx:{height:"100%",display:"flex",flexDirection:"column",p:0},children:[(0,G.jsxs)(i.A,{sx:{p:2,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsx)(l.A,{variant:"h6",children:r("pages.contracts.aiGeneration.preview.title")}),(0,G.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,G.jsx)(d.A,{variant:"outlined",size:"small",startIcon:(0,G.jsx)(R.A,{}),disabled:!t||a,children:r("pages.contracts.aiGeneration.preview.buttons.edit")}),(0,G.jsx)(d.A,{variant:"outlined",size:"small",startIcon:(0,G.jsx)(J.A,{}),disabled:!t||a,children:r("pages.contracts.aiGeneration.preview.buttons.download")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",size:"small",startIcon:(0,G.jsx)(K.A,{}),disabled:!t||a,onClick:()=>{s&&t&&s(t)},children:r("pages.contracts.aiGeneration.preview.buttons.saveAsTemplate")})]})]}),(0,G.jsx)(i.A,{sx:{flexGrow:1,overflowY:"auto",p:2},children:a?(0,G.jsxs)(i.A,{children:[(0,G.jsx)(Q.A,{variant:"text",height:40,width:"60%"}),(0,G.jsx)(Q.A,{variant:"text",height:20}),(0,G.jsx)(Q.A,{variant:"text",height:20}),(0,G.jsx)(Q.A,{variant:"text",height:20,width:"80%"}),(0,G.jsx)(i.A,{sx:{my:2},children:(0,G.jsx)(E.A,{})}),(0,G.jsx)(Q.A,{variant:"text",height:30,width:"40%"}),(0,G.jsx)(Q.A,{variant:"text",height:20}),(0,G.jsx)(Q.A,{variant:"text",height:20}),(0,G.jsx)(Q.A,{variant:"text",height:20,width:"90%"}),(0,G.jsx)(i.A,{sx:{my:2},children:(0,G.jsx)(E.A,{})}),(0,G.jsx)(Q.A,{variant:"text",height:30,width:"40%"}),(0,G.jsx)(Q.A,{variant:"text",height:20}),(0,G.jsx)(Q.A,{variant:"text",height:20})]}):t?(0,G.jsx)(o.A,{elevation:0,sx:{height:"100%",p:2,backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:(0,G.jsx)("textarea",{value:t,onChange:e=>{n(e.target.value)},style:{width:"100%",height:"100%",padding:"16px",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"8px",resize:"none",fontFamily:"inherit",fontSize:"14px",lineHeight:"1.5",backgroundColor:"white"}})}):(0,G.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",textAlign:"center",p:3},children:[(0,G.jsx)(R.A,{sx:{fontSize:60,mb:2,opacity:.7}}),(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:r("pages.contracts.aiGeneration.preview.empty.title")}),(0,G.jsx)(l.A,{variant:"body1",children:r("pages.contracts.aiGeneration.preview.empty.description")})]})})]})},$=e=>{const t=e.includes("ITV")?"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV":"";let n="";const a=e.match(/(?:v\xe0|gi\u1eefa)(?:\s+C\xf4ng\s+ty)?\s+([A-Za-z0-9\s]+)(?:,|\.|$)/i);return a&&a[1]&&(n="C\xd4NG TY ".concat(a[1].trim().toUpperCase())),{party1:t,party2:n}},ee=e=>e.toLowerCase().includes("ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m")?"ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m":e.toLowerCase().includes("d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m")?"d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m":e.toLowerCase().includes("b\u1ea3o tr\xec")?"b\u1ea3o tr\xec ph\u1ea7n m\u1ec1m":e.toLowerCase().includes("th\u01b0\u01a1ng m\u1ea1i")?"th\u01b0\u01a1ng m\u1ea1i":e.toLowerCase().includes("nda")||e.toLowerCase().includes("b\u1ea3o m\u1eadt")?"b\u1ea3o m\u1eadt th\xf4ng tin (NDA)":"d\u1ecbch v\u1ee5",te=e=>{const t=e.match(/(\d+(?:\.\d+)?)\s*(tri\u1ec7u|t\u1ef7|trieu|ty)/i);if(t){const e=parseFloat(t[1]),n=t[2].toLowerCase();return"t\u1ef7"===n||"ty"===n?"".concat(e.toLocaleString("vi-VN"),".000.000.000 VN\u0110 (").concat(e," t\u1ef7 \u0111\u1ed3ng)"):"".concat(e.toLocaleString("vi-VN"),".000.000 VN\u0110 (").concat(e," tri\u1ec7u \u0111\u1ed3ng)")}return"500.000.000 VN\u0110 (N\u0103m tr\u0103m tri\u1ec7u \u0111\u1ed3ng)"},ne=e=>{const t=e.match(/(\d+)\s*(th\xe1ng|n\u0103m|thang|nam)/i);if(t){const e=parseInt(t[1]),n=t[2].toLowerCase();return"".concat(e,"n\u0103m"===n||"nam"===n?" n\u0103m":" th\xe1ng")}return"6 th\xe1ng"},ae=(e,t)=>{const n=e?e.match(/(\d+(?:\.\d+)?)/g):null;if(n&&n.length>0){const e=(parseFloat(n[0].replace(/\./g,""))*t/100).toLocaleString("vi-VN");return"".concat(e,".000 VN\u0110")}return{30:"150.000.000 VN\u0110",40:"200.000.000 VN\u0110",50:"250.000.000 VN\u0110"}[t]||"".concat(t,"% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng")},se=e=>{let{open:t,onClose:n,onSaveTemplate:a=()=>console.log("Template saved")}=e;const[r,c]=(0,s.useState)(!1),[o,p]=(0,s.useState)(""),[h,g]=(0,s.useState)([]),[x,u]=(0,s.useState)(!1),[m,A]=(0,s.useState)(""),[y,f]=(0,s.useState)(!1),{t:T}=(0,L.Bd)();return(0,G.jsxs)(v.A,{open:t,onClose:n,fullWidth:!0,maxWidth:"xl",PaperProps:{sx:{height:"90vh",maxHeight:"90vh",m:2,borderRadius:2}},children:[(0,G.jsxs)(b.A,{sx:{m:0,p:2,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[(0,G.jsx)(l.A,{variant:"h6",component:"div",children:T("pages.contracts.aiGeneration.title")}),(0,G.jsx)(j.A,{edge:"end",color:"inherit",onClick:n,"aria-label":"close",children:(0,G.jsx)(I.A,{})})]}),(0,G.jsxs)(C.A,{sx:{p:0,display:"flex",overflow:"hidden"},children:[(0,G.jsx)(i.A,{sx:{width:"50%",height:"100%",borderRight:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column"},children:(0,G.jsx)(Z,{onSubmit:async e=>{g(t=>[...t,{role:"user",content:e}]),c(!0);try{setTimeout(()=>{const t=(e=>{const t=$(e),n=ee(e),a=te(e),s=ne(e);return"\nH\u1ee2P \u0110\u1ed2NG ".concat(n.toUpperCase(),"\n\nS\u1ed1: ").concat(Math.floor(1e3*Math.random()),"/2025/H\u0110DV\n\nGI\u1eeeA\n\n").concat(t.party1||"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV"," (B\xean A)\n\nV\xc0\n\n").concat(t.party2||"C\xd4NG TY ABC"," (B\xean B)\n\nH\xf4m nay, ng\xe0y ").concat((new Date).getDate()," th\xe1ng ").concat((new Date).getMonth()+1," n\u0103m ").concat((new Date).getFullYear(),", t\u1ea1i Th\xe0nh ph\u1ed1 H\u1ed3 Ch\xed Minh, ch\xfang t\xf4i g\u1ed3m:\n\nB\xcaN A: ").concat(t.party1||"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV","\n- \u0110\u1ecba ch\u1ec9: 123 \u0110\u01b0\u1eddng Nguy\u1ec5n V\u0103n Linh, Qu\u1eadn 7, TP.HCM\n- \u0110i\u1ec7n tho\u1ea1i: 028.1234.5678\n- M\xe3 s\u1ed1 thu\u1ebf: 0123456789\n- \u0110\u1ea1i di\u1ec7n: \xd4ng Nguy\u1ec5n V\u0103n A\n- Ch\u1ee9c v\u1ee5: Gi\xe1m \u0111\u1ed1c\n\nB\xcaN B: ").concat(t.party2||"C\xd4NG TY ABC","\n- \u0110\u1ecba ch\u1ec9: 456 \u0110\u01b0\u1eddng L\xea L\u1ee3i, Qu\u1eadn 1, TP.HCM\n- \u0110i\u1ec7n tho\u1ea1i: 028.8765.4321\n- M\xe3 s\u1ed1 thu\u1ebf: 9876543210\n- \u0110\u1ea1i di\u1ec7n: B\xe0 Tr\u1ea7n Th\u1ecb B\n- Ch\u1ee9c v\u1ee5: Gi\xe1m \u0111\u1ed1c\n\nSau khi b\xe0n b\u1ea1c, hai b\xean th\u1ed1ng nh\u1ea5t k\xfd k\u1ebft H\u1ee3p \u0111\u1ed3ng ").concat(n," v\u1edbi c\xe1c \u0111i\u1ec1u kho\u1ea3n sau:\n\n\u0110I\u1ec0U 1: N\u1ed8I DUNG H\u1ee2P \u0110\u1ed2NG\n\n1.1. B\xean A \u0111\u1ed3ng \xfd cung c\u1ea5p cho B\xean B d\u1ecbch v\u1ee5 ").concat(n," theo c\xe1c y\xeau c\u1ea7u v\xe0 ti\xeau chu\u1ea9n \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m H\u1ee3p \u0111\u1ed3ng n\xe0y.\n\n1.2. B\xean B \u0111\u1ed3ng \xfd s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 v\xe0 thanh to\xe1n cho B\xean A theo quy \u0111\u1ecbnh t\u1ea1i H\u1ee3p \u0111\u1ed3ng n\xe0y.\n\n\u0110I\u1ec0U 2: GI\xc1 TR\u1eca H\u1ee2P \u0110\u1ed2NG V\xc0 PH\u01af\u01a0NG TH\u1ee8C THANH TO\xc1N\n\n2.1. T\u1ed5ng gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng: ").concat(a||"500.000.000 VN\u0110 (N\u0103m tr\u0103m tri\u1ec7u \u0111\u1ed3ng)",".\n\n2.2. Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: Thanh to\xe1n theo t\u1eebng giai \u0111o\u1ea1n nh\u01b0 sau:\n   - \u0110\u1ee3t 1: 30% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(ae(a,30)," - Thanh to\xe1n sau khi k\xfd h\u1ee3p \u0111\u1ed3ng.\n   - \u0110\u1ee3t 2: 40% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(ae(a,40)," - Thanh to\xe1n sau khi ho\xe0n th\xe0nh giai \u0111o\u1ea1n 1.\n   - \u0110\u1ee3t 3: 30% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(ae(a,30)," - Thanh to\xe1n sau khi nghi\u1ec7m thu v\xe0 b\xe0n giao.\n\n2.3. H\xecnh th\u1ee9c thanh to\xe1n: Chuy\u1ec3n kho\u1ea3n ng\xe2n h\xe0ng.\n\n\u0110I\u1ec0U 3: TH\u1edcI GIAN TH\u1ef0C HI\u1ec6N\n\n3.1. Th\u1eddi gian th\u1ef1c hi\u1ec7n h\u1ee3p \u0111\u1ed3ng: ").concat(s||"6 th\xe1ng"," k\u1ec3 t\u1eeb ng\xe0y k\xfd.\n\n3.2. L\u1ecbch tr\xecnh th\u1ef1c hi\u1ec7n chi ti\u1ebft \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m.\n\n\u0110I\u1ec0U 4: QUY\u1ec0N V\xc0 NGH\u0128A V\u1ee4 C\u1ee6A B\xcaN A\n\n4.1. Quy\u1ec1n c\u1ee7a B\xean A:\n   - Y\xeau c\u1ea7u B\xean B thanh to\xe1n \u0111\xfang h\u1ea1n theo quy \u0111\u1ecbnh t\u1ea1i H\u1ee3p \u0111\u1ed3ng.\n   - Y\xeau c\u1ea7u B\xean B cung c\u1ea5p th\xf4ng tin, t\xe0i li\u1ec7u c\u1ea7n thi\u1ebft \u0111\u1ec3 th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n4.2. Ngh\u0129a v\u1ee5 c\u1ee7a B\xean A:\n   - Cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xfang ti\u1ebfn \u0111\u1ed9 v\xe0 ch\u1ea5t l\u01b0\u1ee3ng theo th\u1ecfa thu\u1eadn.\n   - B\u1ea3o m\u1eadt th\xf4ng tin c\u1ee7a B\xean B trong qu\xe1 tr\xecnh th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n\u0110I\u1ec0U 5: QUY\u1ec0N V\xc0 NGH\u0128A V\u1ee4 C\u1ee6A B\xcaN B\n\n5.1. Quy\u1ec1n c\u1ee7a B\xean B:\n   - Y\xeau c\u1ea7u B\xean A cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xfang ti\u1ebfn \u0111\u1ed9 v\xe0 ch\u1ea5t l\u01b0\u1ee3ng.\n   - \u0110\u01b0\u1ee3c cung c\u1ea5p th\xf4ng tin v\u1ec1 ti\u1ebfn \u0111\u1ed9 th\u1ef1c hi\u1ec7n d\u1ef1 \xe1n.\n\n5.2. Ngh\u0129a v\u1ee5 c\u1ee7a B\xean B:\n   - Thanh to\xe1n \u0111\u1ea7y \u0111\u1ee7 v\xe0 \u0111\xfang h\u1ea1n cho B\xean A.\n   - Cung c\u1ea5p th\xf4ng tin, t\xe0i li\u1ec7u c\u1ea7n thi\u1ebft cho B\xean A \u0111\u1ec3 th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n\u0110I\u1ec0U 6: \u0110I\u1ec0U KHO\u1ea2N CHUNG\n\n6.1. H\u1ee3p \u0111\u1ed3ng n\xe0y c\xf3 hi\u1ec7u l\u1ef1c k\u1ec3 t\u1eeb ng\xe0y k\xfd v\xe0 s\u1ebd ch\u1ea5m d\u1ee9t sau khi hai b\xean ho\xe0n th\xe0nh ngh\u0129a v\u1ee5.\n\n6.2. M\u1ecdi tranh ch\u1ea5p ph\xe1t sinh s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft th\xf4ng qua th\u01b0\u01a1ng l\u01b0\u1ee3ng. Tr\u01b0\u1eddng h\u1ee3p kh\xf4ng th\u1ec3 th\u01b0\u01a1ng l\u01b0\u1ee3ng \u0111\u01b0\u1ee3c, tranh ch\u1ea5p s\u1ebd \u0111\u01b0\u1ee3c \u0111\u01b0a ra T\xf2a \xe1n c\xf3 th\u1ea9m quy\u1ec1n \u0111\u1ec3 gi\u1ea3i quy\u1ebft.\n\n6.3. H\u1ee3p \u0111\u1ed3ng n\xe0y \u0111\u01b0\u1ee3c l\u1eadp th\xe0nh 04 b\u1ea3n, m\u1ed7i b\xean gi\u1eef 02 b\u1ea3n c\xf3 gi\xe1 tr\u1ecb ph\xe1p l\xfd nh\u01b0 nhau.\n\n\u0110\u1ea0I DI\u1ec6N B\xcaN A                                  \u0110\u1ea0I DI\u1ec6N B\xcaN B\n")})(e);p(t),g(e=>[...e,{role:"assistant",content:T("pages.contracts.aiGeneration.messages.generated")}]),c(!1)},2e3)}catch(t){console.error("Error generating contract:",t),c(!1),g(e=>[...e,{role:"assistant",content:T("pages.contracts.aiGeneration.messages.error")}])}},loading:r,chatHistory:h})}),(0,G.jsx)(i.A,{sx:{width:"50%",height:"100%"},children:(0,G.jsx)(X,{content:o,onUpdate:e=>{p(e)},loading:r,onSaveTemplate:e=>{if(e){u(!0);const t=e.split("\n")[0];A(t||T("pages.contracts.aiGeneration.saveDialog.defaultTemplateName"))}}})})]}),(0,G.jsxs)(v.A,{open:x,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(b.A,{children:T("pages.contracts.aiGeneration.saveDialog.title")}),(0,G.jsx)(C.A,{children:(0,G.jsxs)(i.A,{sx:{pt:1},children:[(0,G.jsx)(l.A,{variant:"body2",gutterBottom:!0,children:T("pages.contracts.aiGeneration.saveDialog.description")}),(0,G.jsx)(k.A,{autoFocus:!0,margin:"dense",label:T("pages.contracts.aiGeneration.saveDialog.nameLabel"),fullWidth:!0,variant:"outlined",value:m,onChange:e=>A(e.target.value),sx:{mb:3,mt:2}}),(0,G.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[(0,G.jsx)(d.A,{onClick:()=>u(!1),disabled:y,children:T("common.cancel")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>{if(o&&m){f(!0);const e=/\{\{([^}]+)\}\}/g,t=o.match(e)||[],s={name:m,type:"AI",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:T("pages.contracts.aiGeneration.saveDialog.currentUser"),placeholderCount:t.length,isDefault:!1,status:"active",content:o};a(s),f(!1),u(!1),n()}},disabled:!m.trim()||y,children:T(y?"pages.contracts.aiGeneration.saveDialog.saving":"pages.contracts.aiGeneration.saveDialog.save")})]})]})})]})]})},ie=[{id:"1",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m",type:"internal",createdAt:"2025-01-15T00:00:00.000Z",updatedAt:"2025-01-15T00:00:00.000Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,status:"active"},{id:"2",name:"H\u1ee3p \u0111\u1ed3ng b\u1ea3o tr\xec",type:"customer",createdAt:"2025-02-20T00:00:00.000Z",updatedAt:"2025-02-20T00:00:00.000Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,status:"active"},{id:"3",name:"H\u1ee3p \u0111\u1ed3ng NDA",type:"internal",createdAt:"2025-03-10T00:00:00.000Z",updatedAt:"2025-03-10T00:00:00.000Z",createdBy:"L\xea V\u0103n C",placeholderCount:6,isDefault:!1,status:"inactive"}],le=e=>{let{onUploadClick:t,templates:n=[],loading:r=!1}=e;const{t:c}=(0,L.Bd)(),[d,p]=(0,s.useState)({search:"",type:"all",status:"all"}),[h,g]=(0,s.useState)(0),[x,u]=(0,s.useState)(10),[m,A]=(0,s.useState)(!1),[j,y]=(0,s.useState)(null),f=n.length>0?n:ie,v=r,[b,C]=(0,s.useState)([]),[T,S]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{try{let e=[...f];if(d.search){const t=d.search.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}"all"!==d.type&&(e=e.filter(e=>e.type===d.type)),"all"!==d.status&&(e=e.filter(e=>e.status===d.status)),S(e.length);const t=h*x,n=e.slice(t,t+x);C(n)}catch(e){console.error("Error filtering templates:",e)}})()},[d,h,x,f]);return(0,G.jsxs)(i.A,{children:[(0,G.jsxs)(i.A,{mb:3,children:[(0,G.jsx)(l.A,{variant:"h5",component:"h2",gutterBottom:!0,children:c("pages.contracts.templateList.title")}),(0,G.jsx)(l.A,{variant:"body2",color:"textSecondary",children:c("pages.contracts.templateList.subtitle")})]}),(0,G.jsxs)(o.A,{sx:{p:3,mb:3},children:[(0,G.jsx)(W,{filters:d,onFilterChange:e=>{p(e),g(0)},onUploadClick:t,onCreateWithAIClick:()=>A(!0)}),(0,G.jsx)(se,{open:m,onClose:()=>A(!1),onSaveTemplate:e=>{try{const t="ai-".concat(Date.now()),n=(0,a.A)((0,a.A)({},e),{},{id:t});return C(e=>[n,...e]),S(e=>e+1),y(t),alert(c("pages.contracts.templateList.alerts.saveAiSuccess")),!0}catch(t){return console.error("Error saving AI template:",t),alert(c("pages.contracts.templateList.alerts.saveAiError")),!1}}}),v?(0,G.jsx)(i.A,{py:4,textAlign:"center",children:(0,G.jsx)(l.A,{children:c("pages.contracts.templateList.loading")})}):(0,G.jsx)(F,{templates:b,page:h,rowsPerPage:x,totalRows:T,onPageChange:e=>{g(e)},onRowsPerPageChange:e=>{u(e),g(0)},onView:e=>{console.log("View template:",e)},onEdit:e=>{console.log("Edit template:",e)},onSetDefault:e=>{console.log("Set default template:",e)},onDelete:e=>{window.confirm(c("pages.contracts.templateList.confirmDelete"))&&(console.log("Delete template:",e),S(e=>e-1))}})]})]})};var re=n(24858),ce=n(18403),oe=n(80899),de=n(10256),pe=n(3353),he=n(67203),ge=n(51697);const xe=e=>{var t;let{open:n,onClose:r,onSubmit:c}=e;const{t:A}=(0,L.Bd)(),[y,f]=(0,s.useState)(!1),[S,B]=(0,s.useState)(!1),[w,N]=(0,s.useState)([]),V=(0,s.useMemo)(()=>oe.Ik({name:oe.Yj().required(A("pages.contracts.uploadTemplate.validation.nameRequired")),description:oe.Yj().optional(),type:oe.Yj().oneOf(["internal","customer"]).required(A("pages.contracts.uploadTemplate.validation.typeRequired")),file:oe.gl().required(A("pages.contracts.uploadTemplate.validation.fileRequired")).test("fileType",A("pages.contracts.uploadTemplate.validation.fileType"),e=>{if(!e)return!1;return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type}),extractedFields:oe.YO().of(oe.Ik({originalText:oe.Yj().required(),placeholder:oe.Yj().required(),type:oe.Yj().required(),description:oe.Yj().optional()})).default([])}),[A]),{register:P,handleSubmit:W,reset:z,setValue:U,watch:O,formState:{errors:R}}=(0,re.mN)({resolver:(0,ce.t)(V),defaultValues:{name:"",description:"",type:"customer",file:void 0,extractedFields:[]}}),Y=O("file"),F=(e,t,n)=>{const s=[...w];s[e]=(0,a.A)((0,a.A)({},s[e]),{},{[t]:n}),N(s),U("extractedFields",s)},E=()=>{z(),N([]),r()};return(0,G.jsxs)(v.A,{open:n,onClose:E,maxWidth:"lg",fullWidth:!0,children:[(0,G.jsx)(b.A,{children:(0,G.jsxs)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,G.jsx)(l.A,{variant:"h6",children:A("pages.contracts.uploadTemplate.title")}),(0,G.jsx)(j.A,{onClick:E,size:"small",children:(0,G.jsx)(I.A,{})})]})}),(0,G.jsxs)("form",{onSubmit:W(async e=>{try{f(!0),await c(e),E()}catch(t){console.error("Error uploading template:",t)}finally{f(!1)}}),children:[(0,G.jsx)(C.A,{dividers:!0,children:(0,G.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 2fr"},gap:3},children:[(0,G.jsxs)(i.A,{children:[(0,G.jsx)(k.A,(0,a.A)((0,a.A)({},P("name")),{},{label:A("pages.contracts.uploadTemplate.fields.name"),fullWidth:!0,margin:"normal",error:!!R.name,helperText:null===(t=R.name)||void 0===t?void 0:t.message,disabled:y})),(0,G.jsx)(k.A,(0,a.A)((0,a.A)({},P("description")),{},{label:A("pages.contracts.uploadTemplate.fields.description"),fullWidth:!0,multiline:!0,rows:3,margin:"normal",disabled:y})),(0,G.jsxs)(de.A,{fullWidth:!0,margin:"normal",error:!!R.type,children:[(0,G.jsx)(pe.A,{children:A("pages.contracts.uploadTemplate.fields.type")}),(0,G.jsxs)(he.A,(0,a.A)((0,a.A)({label:A("pages.contracts.uploadTemplate.fields.type"),defaultValue:"customer",disabled:y},P("type")),{},{children:[(0,G.jsx)(H.A,{value:"customer",children:A("pages.contracts.uploadTemplate.fields.typeOptions.customer")}),(0,G.jsx)(H.A,{value:"internal",children:A("pages.contracts.uploadTemplate.fields.typeOptions.internal")})]}))]}),(0,G.jsxs)(i.A,{mt:2,mb:2,children:[(0,G.jsx)("input",{accept:".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document",style:{display:"none"},id:"template-upload",type:"file",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(U("file",n),B(!0),setTimeout(()=>{const e=[{originalText:"C\xd4NG TY TNHH GI\u1ea4Y CAO PH\xc1T",placeholder:"TEN_CONG_TY_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyAName")},{originalText:"Th\u1eeda \u0111\u1ea5t s\u1ed1 352, T\u1edd b\u1ea3n \u0111\u1ed3 s\u1ed1 14, Khu Ph\u1ed1 M\u1ef9 Hi\u1ec7p, Ph\u01b0\u1eddng Th\xe1i Ho\xe0, Th\xe0nh ph\u1ed1 T\xe2n Uy\xean, T\u1ec9nh B\xecnh D\u01b0\u01a1ng",placeholder:"DIA_CHI_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyAAddress")},{originalText:"0274 3775 179",placeholder:"DIEN_THOAI_A",type:"phone",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyAPhone")},{originalText:"3701711279",placeholder:"MA_SO_THUE_A",type:"taxcode",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyATax")},{originalText:"L\xca TH\u1eca KIM CHI",placeholder:"NGUOI_DAI_DIEN_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyARepresentative")},{originalText:"Gi\xe1m \u0111\u1ed1c",placeholder:"CHUC_VU_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyATitle")}];N(e),U("extractedFields",e),B(!1)},2e3))},disabled:y||S}),(0,G.jsx)("label",{htmlFor:"template-upload",children:(0,G.jsx)(d.A,{variant:"outlined",component:"span",startIcon:(0,G.jsx)(ge.A,{}),disabled:y||S,children:A("pages.contracts.uploadTemplate.fields.fileButton")})}),Y&&(0,G.jsxs)(l.A,{variant:"body2",sx:{mt:1},children:[A("pages.contracts.uploadTemplate.fields.selectedFilePrefix")," ",Y.name]}),R.file&&(0,G.jsx)(l.A,{color:"error",variant:"caption",display:"block",children:R.file.message})]})]}),(0,G.jsx)(i.A,{children:(0,G.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,G.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,children:A("pages.contracts.uploadTemplate.analysis.title")}),S?(0,G.jsxs)(i.A,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:4,children:[(0,G.jsx)(_.A,{size:40}),(0,G.jsx)(l.A,{variant:"body2",color:"textSecondary",sx:{mt:2},children:A("pages.contracts.uploadTemplate.analysis.analyzingText")})]}):w.length>0?(0,G.jsx)(p.A,{component:o.A,variant:"outlined",children:(0,G.jsxs)(h.A,{size:"small",children:[(0,G.jsx)(g.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(u.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.originalText")}),(0,G.jsx)(u.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.placeholder")}),(0,G.jsx)(u.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.type")}),(0,G.jsx)(u.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.description")}),(0,G.jsx)(u.A,{align:"center",children:A("pages.contracts.uploadTemplate.analysis.headers.actions")})]})}),(0,G.jsx)(m.A,{children:w.map((e,t)=>(0,G.jsxs)(x.A,{children:[(0,G.jsx)(u.A,{children:e.originalText}),(0,G.jsx)(u.A,{children:(0,G.jsx)(k.A,{size:"small",value:e.placeholder,onChange:e=>F(t,"placeholder",e.target.value),fullWidth:!0,disabled:y})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(de.A,{fullWidth:!0,size:"small",children:(0,G.jsxs)(he.A,{value:e.type,onChange:e=>F(t,"type",e.target.value),disabled:y,children:[(0,G.jsx)(H.A,{value:"text",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.text")}),(0,G.jsx)(H.A,{value:"number",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.number")}),(0,G.jsx)(H.A,{value:"date",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.date")}),(0,G.jsx)(H.A,{value:"phone",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.phone")}),(0,G.jsx)(H.A,{value:"email",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.email")}),(0,G.jsx)(H.A,{value:"taxcode",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.taxcode")})]})})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(k.A,{size:"small",value:e.description||"",onChange:e=>F(t,"description",e.target.value),fullWidth:!0,disabled:y})}),(0,G.jsx)(u.A,{align:"center",children:(0,G.jsx)(j.A,{size:"small",color:"error",onClick:()=>{const e=[...w];e.splice(t,1),N(e),U("extractedFields",e)},disabled:y,children:(0,G.jsx)(D.A,{fontSize:"small"})})})]},t))})]})}):Y?(0,G.jsx)(l.A,{variant:"body2",color:"textSecondary",children:A("pages.contracts.uploadTemplate.analysis.noFieldsFound")}):(0,G.jsx)(l.A,{variant:"body2",color:"textSecondary",children:A("pages.contracts.uploadTemplate.analysis.uploadPrompt")}),(0,G.jsxs)(i.A,{mt:3,children:[(0,G.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:A("pages.contracts.uploadTemplate.guidance.title")}),(0,G.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["- ",A("pages.contracts.uploadTemplate.guidance.items.0"),(0,G.jsx)("br",{}),"- ",A("pages.contracts.uploadTemplate.guidance.items.1"),(0,G.jsx)("br",{}),"- ",A("pages.contracts.uploadTemplate.guidance.items.2")]})]})]})})]})}),(0,G.jsxs)(T.A,{sx:{p:2,borderTop:1,borderColor:"divider"},children:[(0,G.jsx)(d.A,{onClick:E,disabled:y,children:A("pages.contracts.uploadTemplate.buttons.cancel")}),(0,G.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",disabled:y||S||0===w.length,startIcon:y?(0,G.jsx)(_.A,{size:20}):null,children:A(y?"pages.contracts.uploadTemplate.buttons.saving":"pages.contracts.uploadTemplate.buttons.save")})]})]})]})};var ue=n(53407),me=n(79693),Ae=n(99147),je=n(47951),ye=n(94084),fe=n(57488),ve=n(33699),be=n(83542),Ce=n(92292),Te=n(24793),Se=n(36600),Be=n(78255),we=n(56511);const De=e=>{let{payments:t,onPaymentsChange:n,onBack:s,onNext:r}=e;const{t:c,i18n:A}=(0,L.Bd)(),y=[{value:"pending",label:c("pages.contracts.createContract.paymentSchedule.status.pending","Pending payment")},{value:"waiting",label:c("pages.contracts.createContract.paymentSchedule.status.waiting","Awaiting payment")},{value:"paid",label:c("pages.contracts.createContract.paymentSchedule.status.paid","Paid")}],f=(e,s,i)=>{n(t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{[s]:i}):t))},v=()=>{const e=A.language||"en";return e.startsWith("ja")?Se.ja:e.startsWith("vi")?Be.vi:we.c},b=()=>{const e=A.language||"en";return e.startsWith("ja")?"JPY":e.startsWith("vi")?"VN\u0110":"USD"};return(0,G.jsxs)(i.A,{children:[(0,G.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,G.jsx)(j.A,{onClick:s,sx:{mr:1},children:(0,G.jsx)(N.A,{})}),(0,G.jsx)(l.A,{variant:"h6",children:c("pages.contracts.createContract.paymentSchedule.title","Payment items")})]}),(0,G.jsxs)(o.A,{variant:"outlined",sx:{p:2,mb:3},children:[(0,G.jsx)(l.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:c("pages.contracts.createContract.paymentSchedule.description","Add payment milestones for the contract. Each includes condition, amount, payment date, status, and notes.")}),(0,G.jsx)(p.A,{children:(0,G.jsxs)(h.A,{size:"small",children:[(0,G.jsx)(g.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(u.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.condition","Condition")}),(0,G.jsx)(u.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.amount","Amount")}),(0,G.jsx)(u.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.paymentDate","Payment date")}),(0,G.jsx)(u.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.status","Status")}),(0,G.jsx)(u.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.note","Note")}),(0,G.jsx)(u.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.delete","Delete")})]})}),(0,G.jsx)(m.A,{children:0===t.length?(0,G.jsx)(x.A,{children:(0,G.jsx)(u.A,{colSpan:6,align:"center",children:(0,G.jsx)(l.A,{variant:"body2",color:"text.secondary",children:c("pages.contracts.createContract.paymentSchedule.empty",'No payment items yet. Click "Add payment" to start.')})})}):t.map(e=>(0,G.jsxs)(x.A,{children:[(0,G.jsx)(u.A,{children:(0,G.jsx)(k.A,{fullWidth:!0,size:"small",value:e.condition,onChange:t=>f(e.id,"condition",t.target.value),placeholder:c("pages.contracts.createContract.paymentSchedule.placeholders.condition","e.g., After signing the contract")})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(k.A,{fullWidth:!0,size:"small",value:0===e.amount?"":e.amount.toString(),onChange:t=>((e,t)=>{const n=t.replace(/[^0-9]/g,""),a=n?parseInt(n,10):0;f(e,"amount",a)})(e.id,t.target.value),placeholder:"0",InputProps:{endAdornment:(0,G.jsx)(ve.A,{position:"end",children:b()})}})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(Te.$J,{dateAdapter:Ce.h,adapterLocale:v(),children:(0,G.jsx)(be.l,{value:e.paymentDate,onChange:t=>f(e.id,"paymentDate",t),slotProps:{textField:{size:"small",fullWidth:!0}}})})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(de.A,{fullWidth:!0,size:"small",children:(0,G.jsx)(he.A,{value:e.status,onChange:t=>f(e.id,"status",t.target.value),children:y.map(e=>(0,G.jsx)(H.A,{value:e.value,children:e.label},e.value))})})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(k.A,{fullWidth:!0,size:"small",value:e.note,onChange:t=>f(e.id,"note",t.target.value),placeholder:c("pages.contracts.createContract.paymentSchedule.placeholders.note","Notes")})}),(0,G.jsx)(u.A,{children:(0,G.jsx)(j.A,{color:"error",onClick:()=>{return a=e.id,void n(t.filter(e=>e.id!==a));var a},size:"small",children:(0,G.jsx)(D.A,{})})})]},e.id))})]})}),(0,G.jsx)(i.A,{sx:{mt:2},children:(0,G.jsx)(d.A,{startIcon:(0,G.jsx)(S.A,{}),variant:"outlined",onClick:()=>{const e={id:"payment-".concat(Date.now()),condition:"",amount:0,paymentDate:new Date,status:"pending",note:""};n([...t,e])},children:c("pages.contracts.createContract.paymentSchedule.actions.add","Add payment")})})]}),(0,G.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,G.jsx)(d.A,{variant:"outlined",onClick:s,children:c("common.back","Back")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",onClick:r,children:c("common.next","Next")})]})]})},Ne=e=>{let{templates:t,onBack:n,onCreate:r}=e;const{t:c}=(0,L.Bd)(),[p,h]=(0,s.useState)(0),[g,x]=(0,s.useState)(null),[u,m]=(0,s.useState)({}),[y,f]=(0,s.useState)([""]),[v,b]=(0,s.useState)([]),C=s.useCallback(()=>{const e="HD".concat((new Date).getFullYear()).concat(((new Date).getMonth()+1).toString().padStart(2,"0")).concat((new Date).getDate().toString().padStart(2,"0"),"001"),t=e=>new Intl.NumberFormat("vi-VN").format(e),n=v.length>0?'\n      <h3 style="font-weight: bold; margin-top: 30px; margin-bottom: 20px;">\u0110I\u1ec0U 2: L\u1ecaCH THANH TO\xc1N</h3>\n      <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n        <thead>\n          <tr style="background-color: #f2f2f2;">\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">STT</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">\u0110i\u1ec1u ki\u1ec7n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S\u1ed1 ti\u1ec1n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Ng\xe0y thanh to\xe1n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Ghi ch\xfa</th>\n          </tr>\n        </thead>\n        <tbody>\n          '.concat(v.map((e,n)=>'\n            <tr>\n              <td style="border: 1px solid #ddd; padding: 8px;">'.concat(n+1,'</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(e.condition,'</td>\n              <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(t(e.amount),' VN\u0110</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(e.paymentDate?new Date(e.paymentDate).toLocaleDateString("vi-VN"):"",'</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(e.note,"</td>\n            </tr>\n          ")).join(""),'\n          <tr style="font-weight: bold; background-color: #f9f9f9;">\n            <td style="border: 1px solid #ddd; padding: 8px;" colspan="2">T\u1ed5ng c\u1ed9ng</td>\n            <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(t(v.reduce((e,t)=>e+t.amount,0)),' VN\u0110</td>\n            <td style="border: 1px solid #ddd; padding: 8px;" colspan="2"></td>\n          </tr>\n        </tbody>\n      </table>\n    '):"";return'\n      <div style="text-align: center; margin-bottom: 20px;">\n        <h2 style="font-weight: bold; text-transform: uppercase;">C\u1ed9ng H\xf2a X\xe3 H\u1ed9i Ch\u1ee7 Ngh\u0129a Vi\u1ec7t Nam</h2>\n        <h3 style="font-weight: bold;">\u0110\u1ed9c L\u1eadp \u2013 T\u1ef1 Do \u2013 H\u1ea1nh Ph\xfac</h3>\n        <p style="margin-bottom: 20px;">__________</p>\n        <h1 style="font-weight: bold; text-transform: uppercase; margin-bottom: 20px;">H\u1ee2P \u0110\u1ed2NG NGUY\xcaN T\u1eaeC CUNG C\u1ea4P D\u1ecaCH V\u1ee4 PH\u1ea6N M\u1ec0M</h1>\n        <h2 style="font-weight: bold; margin-bottom: 30px;">S\u1ed1: '.concat(e,"</h2>\n      </div>\n\n      <p>\n        C\u0103n c\u1ee9 v\xe0o Lu\u1eadt Th\u01b0\u01a1ng M\u1ea1i c\u1ee7a Qu\u1ed1c h\u1ed9i n\u01b0\u1edbc C\u1ed9ng H\xf2a X\xe3 H\u1ed9i Ch\u1ee7 Ngh\u0129a Vi\u1ec7t Nam \u0111\u01b0\u1ee3c ban h\xe0nh ng\xe0y 14/06/2005, c\xf3 hi\u1ec7u l\u1ef1c t\u1eeb ng\xe0y 01/01/2006.\n      </p>\n      \n      ").concat(Object.entries(u).map(e=>{let[t,n]=e;return"<p>C\u0103n c\u1ee9 v\xe0o ".concat(t,": <strong>").concat(n,"</strong></p>")}).join("\n"),'\n\n      <h3 style="font-weight: bold; margin-top: 30px; margin-bottom: 20px;">\u0110I\u1ec0U 1: N\u1ed8I DUNG H\u1ee2P \u0110\u1ed2NG</h3>\n      <p>\n        B\xean A \u1ee7y th\xe1c cho b\xean B c\xf4ng vi\u1ec7c x\xe2y d\u1ef1ng v\xe0 ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m v\xe0 cung c\u1ea5p c\xe1c d\u1ecbch v\u1ee5 li\xean quan \u0111\u1ebfn ph\u1ea7n m\u1ec1m c\u1ee7a b\xean A.\n      </p>\n      <p>\n        B\xean B s\u1ebd ch\u1ecbu tr\xe1ch nhi\u1ec7m x\xe2y d\u1ef1ng ph\u1ea7n m\u1ec1m \u0111\xfang nh\u01b0 th\u1ecfa thu\u1eadn c\u1ee7a c\u1ea3 B\xean A v\xe0 B\xean B.\n      </p>\n      <p>\n        V\u1ec1 chi ti\u1ebft n\u1ed9i dung c\xf4ng vi\u1ec7c v\xe0 chi ph\xed th\u1ef1c hi\u1ec7n s\u1ebd \u0111\u01b0\u1ee3c tr\xecnh b\xe0y trong t\u1eebng Ph\u1ee5 l\u1ee5c c\u1ee5 th\u1ec3.\n      </p>\n      \n      ').concat(n,"\n    ")},[u,v]);(0,s.useEffect)(()=>{3===p&&Object.keys(u).length>0&&Object.values(u).some(e=>e)&&f([C()])},[u,p,C]);const T=()=>{if(!g)return;const e={id:"C".concat(Math.floor(1e3+9e3*Math.random())),name:"".concat(c("pages.contracts.createContract.generatedNamePrefix")," ").concat(null===g||void 0===g?void 0:g.name," - ").concat((new Date).toLocaleDateString()),templateId:(null===g||void 0===g?void 0:g.id)||"",templateName:(null===g||void 0===g?void 0:g.name)||"",status:"draft",partyA:c("pages.contracts.createContract.sample.partyA"),partyB:c("pages.contracts.createContract.sample.partyB"),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:c("pages.contracts.createContract.sample.currentUser"),contractData:u,payments:v};r(e),fe.oR.success(c("pages.contracts.notifications.createContractSuccess"))},S=[{label:c("pages.contracts.createContract.steps.selectTemplate"),component:()=>(0,G.jsxs)(i.A,{children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:c("pages.contracts.createContract.templateSelection.title")}),(0,G.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:t.map(e=>(0,G.jsx)("div",{style:{marginBottom:"16px"},children:(0,G.jsxs)(o.A,{elevation:(null===g||void 0===g?void 0:g.id)===e.id?4:1,sx:{p:2,cursor:"pointer",border:(null===g||void 0===g?void 0:g.id)===e.id?"2px solid #1976d2":"1px solid #e0e0e0",height:"100%",display:"flex",flexDirection:"column"},onClick:()=>x(e),children:[(0,G.jsxs)(i.A,{display:"flex",alignItems:"center",mb:1,children:[(0,G.jsx)(je.A,{color:"primary",sx:{mr:1}}),(0,G.jsx)(l.A,{variant:"subtitle1",fontWeight:"bold",children:e.name})]}),(0,G.jsxs)(l.A,{variant:"body2",color:"textSecondary",sx:{flexGrow:1},children:[e.name," - ",e.type]}),(0,G.jsx)(A.A,{label:c("pages.contracts.createContract.templateSelection.chipLabel",{count:e.placeholderCount}),size:"small",sx:{mt:1,alignSelf:"flex-start"}})]})},e.id))}),(0,G.jsx)(i.A,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:(0,G.jsx)(d.A,{variant:"contained",disabled:!g,onClick:()=>{const e={};null!==g&&void 0!==g&&g.extractedFields&&g.extractedFields.length>0?(g.extractedFields.forEach(t=>{e[t.placeholder]=""}),m(e),h(1)):fe.oR.error(c("pages.contracts.createContract.alerts.noFieldsFound"))},children:c("pages.contracts.createContract.buttons.continue")})})]})},{label:c("pages.contracts.createContract.steps.fillInfo"),component:()=>{const e=()=>0===Object.keys(u).filter(e=>!u[e]).length;return(0,G.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,G.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,G.jsx)(j.A,{onClick:()=>h(0),sx:{mr:1},children:(0,G.jsx)(N.A,{})}),(0,G.jsxs)(l.A,{variant:"h6",children:[c("pages.contracts.createContract.form.title"),": ",null===g||void 0===g?void 0:g.name]})]}),(0,G.jsxs)(o.A,{variant:"outlined",sx:{p:3,flexGrow:1,mb:2,overflowY:"auto",maxHeight:"600px"},children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:c("pages.contracts.createContract.form.sectionTitle")}),(0,G.jsx)(l.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:c("pages.contracts.createContract.form.description")}),(0,G.jsx)(i.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3,mt:2},children:Object.keys(u).map(e=>(0,G.jsx)(k.A,{label:e,variant:"outlined",fullWidth:!0,value:u[e],onChange:t=>((e,t)=>{m(n=>(0,a.A)((0,a.A)({},n),{},{[e]:t}))})(e,t.target.value),required:!0,error:!u[e],helperText:u[e]?"":c("pages.contracts.createContract.form.requiredHelper"),sx:{mb:2}},e))})]}),(0,G.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,G.jsx)(d.A,{variant:"outlined",onClick:()=>h(0),startIcon:(0,G.jsx)(N.A,{}),children:c("pages.contracts.createContract.buttons.back")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>{e()?h(2):fe.oR.error(c("pages.contracts.createContract.form.requiredHelper"))},disabled:!e(),children:c("pages.contracts.createContract.buttons.continue")})]})]})}},{label:c("pages.contracts.createContract.steps.paymentItems"),component:()=>(0,G.jsx)(De,{payments:v,onPaymentsChange:b,onBack:()=>h(1),onNext:()=>h(3)})},{label:c("pages.contracts.createContract.steps.previewConfirm"),component:()=>g?(0,G.jsxs)(i.A,{children:[(0,G.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,G.jsx)(j.A,{onClick:()=>h(2),sx:{mr:1},children:(0,G.jsx)(N.A,{})}),(0,G.jsx)(l.A,{variant:"h6",children:c("pages.contracts.createContract.preview.title")})]}),(0,G.jsx)(i.A,{sx:{border:"1px solid #e0e0e0",borderRadius:1,padding:0,overflow:"hidden",mb:3},children:(0,G.jsx)(ye.A,{initialContent:y,onSave:f,onExportPdf:()=>{fe.oR.success(c("pages.contracts.createContract.notifications.exportPdfSuccess"))}})}),(0,G.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,G.jsx)(d.A,{variant:"outlined",onClick:()=>h(1),startIcon:(0,G.jsx)(N.A,{}),children:c("pages.contracts.createContract.buttons.back")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",onClick:T,children:c("pages.contracts.createContract.buttons.create")})]})]}):null}];return(0,G.jsxs)(i.A,{sx:{width:"100%"},children:[(0,G.jsx)(ue.A,{activeStep:p,sx:{mb:4},children:S.map((e,t)=>(0,G.jsx)(me.A,{completed:p>t,children:(0,G.jsx)(Ae.A,{children:e.label})},e.label))}),(0,G.jsx)(i.A,{sx:{mt:2},children:S[p].component()})]})};var Ie=n(28330),ke=n(26582);const He=e=>{var t,n,a,r,c,p;let{contract:h,onClose:g,onDelete:x,onEdit:u}=e;const{t:m,i18n:y}=(0,L.Bd)(),[f,S]=s.useState(!1),B=e=>{if(!e)return m("common.unknown");const t=y.language||"en",n=t.startsWith("ja")?"ja-JP":t.startsWith("vi")?"vi-VN":"en-US";return new Date(e).toLocaleDateString(n)};return(0,G.jsxs)(i.A,{children:[(0,G.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:3,gap:2},children:[(0,G.jsx)(j.A,{onClick:g,children:(0,G.jsx)(N.A,{})}),(0,G.jsxs)(l.A,{variant:"h5",children:[m("pages.contracts.detail.title",{defaultValue:"Contract details"}),": ",h.name]}),(0,G.jsx)(A.A,{label:h.status.toUpperCase(),color:(e=>{switch(e){case"signed":return"success";case"pending":return"warning";case"draft":default:return"default";case"expired":case"cancelled":return"error"}})(h.status),size:"small",sx:{ml:2}})]}),(0,G.jsxs)(o.A,{sx:{p:3,mb:3},children:[(0,G.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[(0,G.jsxs)(i.A,{children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:m("pages.contracts.detail.generalInfo",{defaultValue:"General information"})}),(0,G.jsxs)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[(0,G.jsxs)(i.A,{sx:{flex:"1 1 300px"},children:[(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.contractId",{defaultValue:"Contract ID"}),":"]})," ",h.id]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.templateName",{defaultValue:"Template name"}),":"]})," ",h.templateName]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.createdAt",{defaultValue:"Created at"}),":"]})," ",B(h.createdAt)]})]}),(0,G.jsxs)(i.A,{sx:{flex:"1 1 300px"},children:[(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.createdBy",{defaultValue:"Created by"}),":"]})," ",h.createdBy]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.updatedAt",{defaultValue:"Updated at"}),":"]})," ",B(h.updatedAt)]}),h.signedAt&&(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.signedAt",{defaultValue:"Signed at"}),":"]})," ",B(h.signedAt)]}),h.expiresAt&&(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.fields.expiresAt",{defaultValue:"Expires at"}),":"]})," ",B(h.expiresAt)]})]})]})]}),(0,G.jsxs)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,G.jsx)(d.A,{variant:"outlined",startIcon:(0,G.jsx)(J.A,{}),size:"small",children:m("common.download",{defaultValue:"Download"})}),(0,G.jsx)(d.A,{variant:"outlined",startIcon:(0,G.jsx)(Ie.A,{}),size:"small",children:m("pages.contracts.detail.actions.print",{defaultValue:"Print"})}),(0,G.jsx)(d.A,{variant:"outlined",startIcon:(0,G.jsx)(ke.A,{}),size:"small",children:m("pages.contracts.detail.actions.share",{defaultValue:"Share"})}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,G.jsx)(R.A,{}),onClick:()=>u(h.id),size:"small",children:m("common.edit",{defaultValue:"Edit"})}),(0,G.jsx)(d.A,{variant:"outlined",color:"error",startIcon:(0,G.jsx)(D.A,{}),onClick:()=>S(!0),size:"small",children:m("common.delete",{defaultValue:"Delete"})})]})]}),(0,G.jsx)(E.A,{sx:{my:3}}),(0,G.jsxs)(i.A,{sx:{mb:4},children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:m("pages.contracts.detail.partiesInfo",{defaultValue:"Parties information"})}),(0,G.jsxs)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:4},children:[(0,G.jsx)(i.A,{sx:{flex:"1 1 300px"},children:(0,G.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,G.jsx)(l.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:m("pages.contracts.detail.partyA.title",{defaultValue:"Party A (Contracting party)"})}),h.contractData?(0,G.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.companyName",{defaultValue:"Company name"}),":"]})," ",h.contractData.tenBenA]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.address",{defaultValue:"Address"}),":"]})," ",h.contractData.diaChiA]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.phone",{defaultValue:"Phone"}),":"]})," ",h.contractData.dienThoaiA]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.taxId",{defaultValue:"Tax ID"}),":"]})," ",h.contractData.maSoThueA]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.representative",{defaultValue:"Representative"}),":"]})," ",h.contractData.nguoiDaiDienA]}),(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.position",{defaultValue:"Position"}),":"]})," ",h.contractData.chucVuA]})]}):(0,G.jsx)(l.A,{children:m("common.noData",{defaultValue:"No data"})})]})}),(0,G.jsx)(i.A,{sx:{flex:"1 1 300px"},children:(0,G.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,G.jsx)(l.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:m("pages.contracts.detail.partyB.title",{defaultValue:"Party B (Partner)"})}),h.contractData?(0,G.jsxs)(l.A,{children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.party.companyName",{defaultValue:"Company name"}),":"]})," ",h.contractData.tenBenB]}):(0,G.jsx)(l.A,{children:m("common.noData","No data")})]})})]})]}),(0,G.jsxs)(i.A,{children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:m("pages.contracts.detail.contractContent",{defaultValue:"Contract content"})}),(0,G.jsxs)(o.A,{variant:"outlined",sx:{p:3},children:[(0,G.jsx)(l.A,{variant:"h5",align:"center",gutterBottom:!0,children:m("pages.contracts.detail.sample.heading",{defaultValue:"SERVICE CONTRACT"})}),(0,G.jsxs)(l.A,{paragraph:!0,align:"center",children:[m("pages.contracts.detail.sample.code",{defaultValue:"No."}),": ",h.id]}),(0,G.jsxs)(l.A,{paragraph:!0,align:"center",children:[(0,G.jsx)("em",{children:"C\u0103n c\u1ee9 B\u1ed9 lu\u1eadt D\xe2n s\u1ef1 s\u1ed1 91/2015/QH13 ng\xe0y 24 th\xe1ng 11 n\u0103m 2015 c\u1ee7a Qu\u1ed1c h\u1ed9i"}),(0,G.jsx)("br",{}),(0,G.jsx)("em",{children:"C\u0103n c\u1ee9 Lu\u1eadt Th\u01b0\u01a1ng m\u1ea1i s\u1ed1 36/2005/QH11 ng\xe0y 14 th\xe1ng 6 n\u0103m 2005 c\u1ee7a Qu\u1ed1c h\u1ed9i"})]}),(0,G.jsx)(l.A,{paragraph:!0,align:"center",children:(0,G.jsxs)("strong",{children:["H\xf4m nay, ng\xe0y ",(null===(t=h.contractData)||void 0===t?void 0:t.ngayKy)||B(h.createdAt)]})}),(0,G.jsxs)(l.A,{paragraph:!0,children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.sample.partyA",{defaultValue:"PARTY A"}),":"]})," ",(null===(n=h.contractData)||void 0===n?void 0:n.tenBenA)||h.partyA]}),(0,G.jsxs)(l.A,{paragraph:!0,children:[(0,G.jsxs)("strong",{children:[m("pages.contracts.detail.sample.partyB",{defaultValue:"PARTY B"}),":"]})," ",(null===(a=h.contractData)||void 0===a?void 0:a.tenBenB)||h.partyB]}),(0,G.jsx)(l.A,{paragraph:!0,children:"Hai b\xean c\xf9ng th\u1ecfa thu\u1eadn k\xfd k\u1ebft H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 v\u1edbi nh\u1eefng n\u1ed9i dung v\xe0 \u0111i\u1ec1u kho\u1ea3n sau \u0111\xe2y:"}),(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 1: N\u1ed8I DUNG C\xd4NG VI\u1ec6C"}),(0,G.jsx)(l.A,{paragraph:!0,children:"B\xean B \u0111\u1ed3ng \xfd cung c\u1ea5p d\u1ecbch v\u1ee5 theo y\xeau c\u1ea7u c\u1ee7a B\xean A v\u1edbi n\u1ed9i dung chi ti\u1ebft nh\u01b0 trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m."}),(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 2: TH\u1edcI H\u1ea0N H\u1ee2P \u0110\u1ed2NG"}),(0,G.jsxs)(l.A,{paragraph:!0,children:["H\u1ee3p \u0111\u1ed3ng c\xf3 hi\u1ec7u l\u1ef1c t\u1eeb ng\xe0y k\xfd \u0111\u1ebfn ng\xe0y ",h.expiresAt?B(h.expiresAt):"khi ho\xe0n th\xe0nh ngh\u0129a v\u1ee5 h\u1ee3p \u0111\u1ed3ng","."]}),(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 3: GI\xc1 TR\u1eca H\u1ee2P \u0110\u1ed2NG"}),(0,G.jsxs)(l.A,{paragraph:!0,children:["T\u1ed5ng gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng: ",(null===(r=h.contractData)||void 0===r?void 0:r.giaTriHopDong)||"Theo th\u1ecfa thu\u1eadn gi\u1eefa hai b\xean"]}),(0,G.jsxs)(i.A,{sx:{mt:6,display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[(0,G.jsxs)(i.A,{sx:{textAlign:"center",minWidth:200,flex:1},children:[(0,G.jsx)(l.A,{fontWeight:"bold",children:"\u0110\u1ea0I DI\u1ec6N B\xcaN A"}),(0,G.jsx)(l.A,{fontStyle:"italic",children:"(K\xfd, ghi r\xf5 h\u1ecd t\xean)"}),(0,G.jsx)(i.A,{sx:{height:80,mt:2}}),(0,G.jsx)(l.A,{fontWeight:"bold",children:(null===(c=h.contractData)||void 0===c?void 0:c.nguoiDaiDienA)||"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"}),(0,G.jsx)(l.A,{children:(null===(p=h.contractData)||void 0===p?void 0:p.chucVuA)||"Ch\u1ee9c v\u1ee5"})]}),(0,G.jsxs)(i.A,{sx:{textAlign:"center",minWidth:200,flex:1},children:[(0,G.jsx)(l.A,{fontWeight:"bold",children:"\u0110\u1ea0I DI\u1ec6N B\xcaN B"}),(0,G.jsx)(l.A,{fontStyle:"italic",children:"(K\xfd, ghi r\xf5 h\u1ecd t\xean)"}),(0,G.jsx)(i.A,{sx:{height:80,mt:2}}),(0,G.jsx)(l.A,{fontWeight:"bold",children:"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"}),(0,G.jsx)(l.A,{children:"Ch\u1ee9c v\u1ee5"})]})]})]})]})]}),(0,G.jsxs)(v.A,{open:f,onClose:()=>S(!1),children:[(0,G.jsx)(b.A,{children:m("pages.contracts.detail.deleteDialog.title",{defaultValue:"Confirm contract deletion"})}),(0,G.jsx)(C.A,{children:(0,G.jsx)(l.A,{children:m("pages.contracts.detail.deleteDialog.text",{defaultValue:"Are you sure you want to delete this contract? This action cannot be undone."})})}),(0,G.jsxs)(T.A,{children:[(0,G.jsx)(d.A,{onClick:()=>S(!1),children:m("common.cancel",{defaultValue:"Cancel"})}),(0,G.jsx)(d.A,{onClick:()=>{x(h.id),S(!1)},color:"error",variant:"contained",children:m("pages.contracts.detail.deleteDialog.confirm",{defaultValue:"Delete"})})]})]})]})},Ve=()=>{const{t:e,i18n:t}=(0,L.Bd)(),[n,k]=(0,s.useState)("templates"),[H,V]=(0,s.useState)(!1),[P,W]=(0,s.useState)(!1),[z,U]=(0,s.useState)([]),[O,R]=(0,s.useState)([]),[Y,F]=(0,s.useState)(!1),[E,_]=(0,s.useState)(null),[q,M]=(0,s.useState)(!1),[Z,Q]=(0,s.useState)(null),[K,J]=(0,s.useState)({open:!1,message:"",severity:"success"});(0,s.useEffect)(()=>{(async()=>{F(!0);try{await new Promise(e=>setTimeout(e,1e3));U([{id:"1",name:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n",description:"Template h\u1ee3p \u0111\u1ed3ng mua b\xe1n h\xe0ng h\xf3a",type:"customer",status:"active",createdAt:"2025-06-30T10:00:00Z",updatedAt:"2025-06-30T10:00:00Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,extractedFields:[]},{id:"2",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5",description:"Template h\u1ee3p \u0111\u1ed3ng cung c\u1ea5p d\u1ecbch v\u1ee5",type:"internal",status:"active",createdAt:"2025-06-29T15:30:00Z",updatedAt:"2025-06-29T15:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,extractedFields:[]}])}catch(t){console.error("Error fetching templates:",t),J({open:!0,message:e("pages.contracts.notifications.loadError"),severity:"error"})}try{R([{id:"C001",name:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n s\u1ed1 2025/001",templateId:"1",templateName:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n",status:"signed",partyA:"C\xf4ng ty TNHH ABC",partyB:"\xd4ng Nguy\u1ec5n V\u0103n A",createdAt:"2025-07-01T09:00:00Z",updatedAt:"2025-07-01T09:30:00Z",createdBy:"Nguy\u1ec5n V\u0103n B",signedAt:"2025-07-01T10:00:00Z",expiresAt:"2025-12-31T23:59:59Z"},{id:"C002",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 s\u1ed1 2025/002",templateId:"2",templateName:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5",status:"pending",partyA:"C\xf4ng ty TNHH ABC",partyB:"C\xf4ng ty TNHH XYZ",createdAt:"2025-07-02T14:00:00Z",updatedAt:"2025-07-02T14:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb C"},{id:"C003",name:"H\u1ee3p \u0111\u1ed3ng thu\xea nh\xe0 s\u1ed1 2025/003",templateId:"3",templateName:"H\u1ee3p \u0111\u1ed3ng thu\xea nh\xe0",status:"draft",partyA:"C\xf4ng ty TNHH ABC",partyB:"B\xe0 L\xea Th\u1ecb D",createdAt:"2025-07-03T10:00:00Z",updatedAt:"2025-07-03T10:15:00Z",createdBy:"Nguy\u1ec5n V\u0103n B",expiresAt:"2026-07-02T23:59:59Z"}])}catch(t){console.error("Error loading contracts:",t)}finally{F(!1)}})()},[]);const X=()=>{J(e=>(0,a.A)((0,a.A)({},e),{},{open:!1}))},$=e=>{_(e)},ee=()=>{_(null)},te=e=>{Q(e),M(!0)};return(0,G.jsxs)(i.A,{sx:{p:3},children:[(0,G.jsx)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:(0,G.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:e("pages.contracts.title")})}),(0,G.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,G.jsxs)(r.A,{value:n,onChange:(e,t)=>{k(t)},"aria-label":"contract management tabs",children:[(0,G.jsx)(c.A,{label:e("pages.contracts.tabs.templates"),value:"templates"}),(0,G.jsx)(c.A,{label:e("pages.contracts.tabs.contracts"),value:"contracts"})]})}),"templates"===n?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(le,{templates:z,loading:Y,onUploadClick:()=>{V(!0)}}),(0,G.jsx)(xe,{open:H,onClose:()=>{V(!1)},onSubmit:async t=>{try{F(!0),console.log("Uploading template:",t),await new Promise(e=>setTimeout(e,1500));const n={id:Math.random().toString(36).substring(2,9),name:t.name,description:t.description||"",type:t.type,status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Ng\u01b0\u1eddi d\xf9ng hi\u1ec7n t\u1ea1i",placeholderCount:t.extractedFields.length,isDefault:!1,extractedFields:t.extractedFields};U(e=>[n,...e]),J({open:!0,message:e("pages.contracts.notifications.uploadTemplateSuccess"),severity:"success"})}catch(n){throw console.error("Error uploading template:",n),J({open:!0,message:e("pages.contracts.notifications.uploadTemplateError"),severity:"error"}),n}finally{F(!1)}}})]}):(0,G.jsxs)(o.A,{sx:{p:3},children:[(0,G.jsxs)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:e("pages.contracts.list.title")}),(0,G.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,G.jsx)(S.A,{}),onClick:()=>W(!0),children:e("pages.contracts.list.buttonCreate")})]}),Y?(0,G.jsx)(l.A,{color:"textSecondary",paragraph:!0,children:e("pages.contracts.loading.contracts")}):(0,G.jsx)(p.A,{children:(0,G.jsxs)(h.A,{children:[(0,G.jsx)(g.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(u.A,{children:e("pages.contracts.columns.code")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.name")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.type")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.partyA")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.partyB")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.createdAt")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.status")}),(0,G.jsx)(u.A,{children:e("pages.contracts.columns.actions")})]})}),(0,G.jsx)(m.A,{children:O.map(n=>(0,G.jsxs)(x.A,{hover:!0,onClick:()=>$(n),sx:{cursor:"pointer"},children:[(0,G.jsx)(u.A,{children:n.id}),(0,G.jsx)(u.A,{children:n.name}),(0,G.jsx)(u.A,{children:n.templateName}),(0,G.jsx)(u.A,{children:n.partyA}),(0,G.jsx)(u.A,{children:n.partyB}),(0,G.jsx)(u.A,{children:new Date(n.createdAt).toLocaleDateString(t.language)}),(0,G.jsx)(u.A,{children:(0,G.jsx)(A.A,{label:"signed"===n.status?e("pages.contracts.status.signed"):"pending"===n.status?e("pages.contracts.status.pending"):"draft"===n.status?e("pages.contracts.status.draft"):"expired"===n.status?e("pages.contracts.status.expired"):e("pages.contracts.status.cancelled"),color:"signed"===n.status?"success":"pending"===n.status?"warning":"draft"===n.status?"default":"error",size:"small"})}),(0,G.jsxs)(u.A,{children:[(0,G.jsx)(j.A,{size:"small",title:e("pages.contracts.tooltips.view"),onClick:()=>$(n),children:(0,G.jsx)(B.A,{fontSize:"small"})}),(0,G.jsx)(j.A,{size:"small",title:e("pages.contracts.tooltips.download"),children:(0,G.jsx)(w.A,{fontSize:"small"})}),(0,G.jsx)(j.A,{size:"small",title:e("pages.contracts.tooltips.delete"),onClick:e=>{e.stopPropagation(),te(n.id)},children:(0,G.jsx)(D.A,{fontSize:"small",color:"error"})})]})]},n.id))})]})})]}),(0,G.jsx)(y.A,{open:K.open,autoHideDuration:6e3,onClose:X,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,G.jsx)(f.A,{onClose:X,severity:K.severity,sx:{width:"100%"},children:K.message})}),(0,G.jsxs)(v.A,{open:!!E,onClose:ee,fullWidth:!0,maxWidth:"md",children:[(0,G.jsx)(b.A,{children:(0,G.jsxs)(i.A,{display:"flex",alignItems:"center",children:[(0,G.jsx)(j.A,{onClick:ee,sx:{mr:1},children:(0,G.jsx)(N.A,{})}),(0,G.jsx)("span",{children:e("pages.contracts.dialogs.detailTitle")})]})}),(0,G.jsx)(C.A,{dividers:!0,children:E&&(0,G.jsx)(He,{contract:(0,a.A)((0,a.A)({},E),{},{contractData:{tenBenA:E.partyA,tenBenB:E.partyB,ngayKy:new Date(E.createdAt).toLocaleDateString(t.language),diaChiA:"123 L\xea L\u1ee3i, Q.1, TP.HCM",dienThoaiA:"0901234567",maSoThueA:"0123456789",nguoiDaiDienA:"Nguy\u1ec5n V\u0103n A",chucVuA:"Gi\xe1m \u0111\u1ed1c",giaTriHopDong:"50,000,000 VN\u0110"}}),onClose:ee,onDelete:te,onEdit:t=>{J({open:!0,message:e("pages.contracts.notifications.editInfo"),severity:"info"})}})})]}),(0,G.jsxs)(v.A,{open:q,onClose:()=>M(!1),children:[(0,G.jsx)(b.A,{children:e("pages.contracts.dialogs.deleteConfirmTitle")}),(0,G.jsx)(C.A,{children:(0,G.jsx)(l.A,{children:e("pages.contracts.dialogs.deleteConfirmText")})}),(0,G.jsxs)(T.A,{children:[(0,G.jsx)(d.A,{onClick:()=>M(!1),children:e("common.cancel")}),(0,G.jsx)(d.A,{onClick:()=>{Z&&(R(e=>e.filter(e=>e.id!==Z)),M(!1),Q(null),J({open:!0,message:e("pages.contracts.notifications.deleteContractSuccess"),severity:"success"}))},color:"error",variant:"contained",children:e("common.delete")})]})]}),(0,G.jsxs)(v.A,{open:P,onClose:()=>W(!1),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",width:"95%",maxWidth:"1400px"}},children:[(0,G.jsx)(b.A,{children:(0,G.jsxs)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,G.jsx)(l.A,{variant:"h6",children:e("pages.contracts.dialogs.createTitle")}),(0,G.jsx)(j.A,{onClick:()=>W(!1),children:(0,G.jsx)(I.A,{})})]})}),(0,G.jsx)(C.A,{children:(0,G.jsx)(Ne,{templates:z,onBack:()=>W(!1),onCreate:t=>{R(e=>[t,...e]),W(!1),_(t),J({open:!0,message:e("pages.contracts.notifications.createContractSuccess"),severity:"success"})}})})]})]})}}}]);
//# sourceMappingURL=624.0b36e48a.chunk.js.map