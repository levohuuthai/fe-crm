{"version":3,"file":"static/js/496.b5237384.chunk.js","mappings":"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","sources":["components/FilterBar/index.tsx","components/EditCellModal/index.tsx","components/SmartTable/index.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Chip,\r\n  Button,\r\n  Typography,\r\n  Popover,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Avatar,\r\n  Checkbox,\r\n  TextField,\r\n  InputAdornment,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Stack,\r\n  IconButton,\r\n  Skeleton,\r\n  useTheme,\r\n  alpha\r\n} from '@mui/material';\r\nimport {\r\n  Search as SearchIcon,\r\n  KeyboardArrowDown as ArrowDownIcon,\r\n  Close as CloseIcon,\r\n  Person as PersonIcon,\r\n  CalendarToday as CalendarIcon,\r\n  Timeline as ActivityIcon,\r\n  Label as StatusIcon,\r\n  AttachMoney as MoneyIcon,\r\n  Clear as ClearIcon\r\n} from '@mui/icons-material';\r\n\r\n// Types\r\nexport interface FilterConfig {\r\n  id: string;\r\n  label: string;\r\n  type: 'owner' | 'date' | 'status' | 'amount';\r\n  icon: React.ReactNode;\r\n  enabled: boolean;\r\n  fieldName?: string; // The actual field name in the data\r\n}\r\n\r\nexport interface SavedView {\r\n  id: string;\r\n  label: string;\r\n  count?: number;\r\n}\r\n\r\nexport interface FilterOwner {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  avatar?: string;\r\n}\r\n\r\nexport interface FilterStatus {\r\n  value: string;\r\n  label: string;\r\n  color: string;\r\n}\r\n\r\nexport interface FilterQuery {\r\n  ownerIds: string[];\r\n  leadStatus: string[];\r\n  createdAt?: {\r\n    preset?: string;\r\n    start?: string;\r\n    end?: string;\r\n  };\r\n  lastActivityAt?: {\r\n    preset?: string;\r\n    start?: string;\r\n    end?: string;\r\n  };\r\n  amount?: {\r\n    min?: number;\r\n    max?: number;\r\n    currency: string;\r\n  };\r\n}\r\n\r\nexport interface FilterBarProps {\r\n  entity: 'contacts' | 'deals';\r\n  availableFilters: FilterConfig[];\r\n  owners: FilterOwner[];\r\n  statuses: FilterStatus[];\r\n  savedViews: SavedView[];\r\n  currency?: string;\r\n  onQueryChange: (query: FilterQuery) => void;\r\n  onViewChange: (viewId: string) => void;\r\n  sticky?: boolean;\r\n}\r\n\r\nconst FilterBar: React.FC<FilterBarProps> = ({\r\n  entity,\r\n  availableFilters,\r\n  owners,\r\n  statuses,\r\n  savedViews,\r\n  currency = '₫',\r\n  onQueryChange,\r\n  onViewChange,\r\n  sticky = true\r\n}) => {\r\n  const theme = useTheme();\r\n  const [activeView, setActiveView] = useState('all');\r\n  const [appliedFilters, setAppliedFilters] = useState<FilterQuery>({\r\n    ownerIds: [],\r\n    leadStatus: [],\r\n  });\r\n  const [openPopover, setOpenPopover] = useState<string | null>(null);\r\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null);\r\n  const [searchQueries, setSearchQueries] = useState<{ [key: string]: string }>({});\r\n  const [tempFilters, setTempFilters] = useState<any>({});\r\n\r\n  // Date presets\r\n  const datePresets = [\r\n    { value: 'today', label: 'Today' },\r\n    { value: 'yesterday', label: 'Yesterday' },\r\n    { value: 'last7days', label: 'Last 7 days' },\r\n    { value: 'last30days', label: 'Last 30 days' },\r\n    { value: 'thismonth', label: 'This month' },\r\n    { value: 'lastmonth', label: 'Last month' },\r\n    { value: 'custom', label: 'Custom range' }\r\n  ];\r\n\r\n  // Handle filter chip click\r\n  const handleFilterClick = (filterId: string, event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setOpenPopover(filterId);\r\n    setSearchQueries(prev => ({ ...prev, [filterId]: '' }));\r\n  };\r\n\r\n  // Handle popover close\r\n  const handlePopoverClose = () => {\r\n    setOpenPopover(null);\r\n    setAnchorEl(null);\r\n    setTempFilters({});\r\n  };\r\n\r\n  // Handle owner selection\r\n  const handleOwnerSelect = (ownerId: string) => {\r\n    const newOwnerIds = appliedFilters.ownerIds.includes(ownerId)\r\n      ? appliedFilters.ownerIds.filter(id => id !== ownerId)\r\n      : [...appliedFilters.ownerIds, ownerId];\r\n    \r\n    const newQuery = { ...appliedFilters, ownerIds: newOwnerIds };\r\n    setAppliedFilters(newQuery);\r\n    onQueryChange(newQuery);\r\n  };\r\n\r\n  // Handle status selection\r\n  const handleStatusSelect = (status: string) => {\r\n    const newStatuses = appliedFilters.leadStatus.includes(status)\r\n      ? appliedFilters.leadStatus.filter(s => s !== status)\r\n      : [...appliedFilters.leadStatus, status];\r\n    \r\n    const newQuery = { ...appliedFilters, leadStatus: newStatuses };\r\n    setAppliedFilters(newQuery);\r\n    onQueryChange(newQuery);\r\n  };\r\n\r\n  // Handle date preset selection\r\n  const handleDatePreset = (filterId: string, preset: string) => {\r\n    const filter = availableFilters.find(f => f.id === filterId);\r\n    const fieldName = filter?.fieldName || filterId;\r\n    \r\n    const newQuery = {\r\n      ...appliedFilters,\r\n      [fieldName]: { preset }\r\n    };\r\n    setAppliedFilters(newQuery);\r\n    onQueryChange(newQuery);\r\n    handlePopoverClose();\r\n  };\r\n\r\n  // Handle amount filter\r\n  const handleAmountApply = () => {\r\n    const { min, max } = tempFilters;\r\n    if (min !== undefined || max !== undefined) {\r\n      const newQuery = {\r\n        ...appliedFilters,\r\n        amount: { min, max, currency }\r\n      };\r\n      setAppliedFilters(newQuery);\r\n      onQueryChange(newQuery);\r\n    }\r\n    handlePopoverClose();\r\n  };\r\n\r\n  // Handle view change\r\n  const handleViewChange = (viewId: string) => {\r\n    setActiveView(viewId);\r\n    onViewChange(viewId);\r\n  };\r\n\r\n  // Clear all filters\r\n  const handleClearAll = () => {\r\n    const emptyQuery: FilterQuery = {\r\n      ownerIds: [],\r\n      leadStatus: [],\r\n    };\r\n    setAppliedFilters(emptyQuery);\r\n    onQueryChange(emptyQuery);\r\n  };\r\n\r\n  // Remove specific filter token\r\n  const handleRemoveToken = (tokenType: string, value?: string) => {\r\n    let newQuery = { ...appliedFilters };\r\n    \r\n    if (tokenType === 'owner') {\r\n      if (value) {\r\n        newQuery.ownerIds = newQuery.ownerIds.filter(id => id !== value);\r\n      }\r\n    } else if (tokenType === 'status') {\r\n      if (value) {\r\n        newQuery.leadStatus = newQuery.leadStatus.filter(s => s !== value);\r\n      }\r\n    } else if (tokenType === 'amount') {\r\n      delete newQuery.amount;\r\n    } else {\r\n      // Handle date fields dynamically\r\n      delete (newQuery as any)[tokenType];\r\n    }\r\n    \r\n    setAppliedFilters(newQuery);\r\n    onQueryChange(newQuery);\r\n  };\r\n\r\n  // Filter owners based on search\r\n  const filteredOwners = owners.filter(owner =>\r\n    owner.name.toLowerCase().includes((searchQueries.owner || '').toLowerCase()) ||\r\n    owner.email.toLowerCase().includes((searchQueries.owner || '').toLowerCase())\r\n  );\r\n\r\n  // Get applied filter tokens\r\n  const getAppliedTokens = () => {\r\n    const tokens: Array<{\r\n      type: string;\r\n      value?: string;\r\n      label: string;\r\n      avatar?: string;\r\n      color?: string;\r\n    }> = [];\r\n\r\n    // Owner tokens\r\n    appliedFilters.ownerIds.forEach(ownerId => {\r\n      const owner = owners.find(o => o.id === ownerId);\r\n      if (owner) {\r\n        tokens.push({\r\n          type: 'owner',\r\n          value: ownerId,\r\n          label: owner.name,\r\n          avatar: owner.avatar\r\n        });\r\n      }\r\n    });\r\n\r\n    // Status tokens\r\n    appliedFilters.leadStatus.forEach(status => {\r\n      const statusConfig = statuses.find(s => s.value === status);\r\n      if (statusConfig) {\r\n        tokens.push({\r\n          type: 'status',\r\n          value: status,\r\n          label: statusConfig.label,\r\n          color: statusConfig.color\r\n        });\r\n      }\r\n    });\r\n\r\n    // Date tokens - dynamically check for any date fields\r\n    availableFilters.forEach(filter => {\r\n      if (filter.type === 'date') {\r\n        const fieldName = filter.fieldName || filter.id;\r\n        const dateFilter = (appliedFilters as any)[fieldName];\r\n        if (dateFilter) {\r\n          tokens.push({\r\n            type: fieldName,\r\n            label: `${filter.label}: ${dateFilter.preset || 'Custom range'}`\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    // Amount token\r\n    if (appliedFilters.amount) {\r\n      const { min, max } = appliedFilters.amount;\r\n      let label = 'Amount: ';\r\n      if (min && max) {\r\n        label += `${min}${currency} - ${max}${currency}`;\r\n      } else if (min) {\r\n        label += `≥ ${min}${currency}`;\r\n      } else if (max) {\r\n        label += `≤ ${max}${currency}`;\r\n      }\r\n      tokens.push({\r\n        type: 'amount',\r\n        label\r\n      });\r\n    }\r\n\r\n    return tokens;\r\n  };\r\n\r\n  const appliedTokens = getAppliedTokens();\r\n  const hasActiveFilters = appliedTokens.length > 0;\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        position: sticky ? 'sticky' : 'relative',\r\n        top: sticky ? 0 : 'auto',\r\n        zIndex: 10,\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n        py: 2,\r\n        px: 1,\r\n        mb: 2\r\n      }}\r\n    >\r\n      {/* Saved Views */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\r\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mr: 1 }}>\r\n          View:\r\n        </Typography>\r\n        {savedViews.map(view => (\r\n          <Chip\r\n            key={view.id}\r\n            label={`${view.label}${view.count ? ` (${view.count})` : ''}`}\r\n            variant={activeView === view.id ? 'filled' : 'outlined'}\r\n            color={activeView === view.id ? 'primary' : 'default'}\r\n            size=\"small\"\r\n            onClick={() => handleViewChange(view.id)}\r\n            sx={{\r\n              cursor: 'pointer',\r\n              '&:hover': {\r\n                backgroundColor: activeView === view.id \r\n                  ? alpha(theme.palette.primary.main, 0.8)\r\n                  : alpha(theme.palette.primary.main, 0.1)\r\n              }\r\n            }}\r\n          />\r\n        ))}\r\n      </Box>\r\n\r\n      {/* Filter Chips */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: hasActiveFilters ? 2 : 0 }}>\r\n        {availableFilters.filter(f => f.enabled).map(filter => {\r\n          const fieldName = filter.fieldName || filter.id;\r\n          const isActive = (filter.type === 'owner' && appliedFilters.ownerIds.length > 0) ||\r\n                          (filter.type === 'status' && appliedFilters.leadStatus.length > 0) ||\r\n                          (filter.type === 'date' && (appliedFilters as any)[fieldName]) ||\r\n                          (filter.type === 'amount' && appliedFilters.amount);\r\n\r\n          return (\r\n            <Chip\r\n              key={filter.id}\r\n              icon={filter.icon as React.ReactElement}\r\n              label={filter.label}\r\n              variant={isActive ? 'filled' : 'outlined'}\r\n              color={isActive ? 'primary' : 'default'}\r\n              size=\"small\"\r\n              onClick={(e: React.MouseEvent<HTMLElement>) => handleFilterClick(filter.id, e)}\r\n              deleteIcon={<ArrowDownIcon />}\r\n              onDelete={(e: any) => handleFilterClick(filter.id, e)}\r\n              sx={{\r\n                cursor: 'pointer',\r\n                '& .MuiChip-deleteIcon': {\r\n                  fontSize: '16px',\r\n                  ml: 0.5\r\n                },\r\n                '&:hover': {\r\n                  backgroundColor: isActive \r\n                    ? alpha(theme.palette.primary.main, 0.8)\r\n                    : alpha(theme.palette.primary.main, 0.1)\r\n                }\r\n              }}\r\n            />\r\n          );\r\n        })}\r\n\r\n        {hasActiveFilters && (\r\n          <Button\r\n            size=\"small\"\r\n            startIcon={<ClearIcon />}\r\n            onClick={handleClearAll}\r\n            sx={{ ml: 1 }}\r\n          >\r\n            Clear all\r\n          </Button>\r\n        )}\r\n      </Box>\r\n\r\n      {/* Applied Filter Tokens */}\r\n      {hasActiveFilters && (\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mr: 1 }}>\r\n            Applied:\r\n          </Typography>\r\n          {appliedTokens.map((token, index) => (\r\n            <Chip\r\n              key={`${token.type}-${token.value || index}`}\r\n              {...(token.avatar ? { avatar: <Avatar src={token.avatar} sx={{ width: 20, height: 20 }} /> } : {})}\r\n              label={token.label}\r\n              size=\"small\"\r\n              onDelete={() => handleRemoveToken(token.type, token.value)}\r\n              sx={{\r\n                backgroundColor: token.color ? alpha(token.color, 0.1) : alpha(theme.palette.primary.main, 0.1),\r\n                color: token.color || theme.palette.primary.main,\r\n                border: token.color ? `1px solid ${alpha(token.color, 0.3)}` : `1px solid ${alpha(theme.palette.primary.main, 0.3)}`,\r\n                '& .MuiChip-deleteIcon': {\r\n                  color: token.color || theme.palette.primary.main,\r\n                  '&:hover': {\r\n                    color: theme.palette.error.main\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          ))}\r\n        </Box>\r\n      )}\r\n\r\n      {/* Owner Filter Popover */}\r\n      <Popover\r\n        open={openPopover === 'owner'}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n        PaperProps={{\r\n          sx: {\r\n            width: 350,\r\n            maxHeight: 400,\r\n            borderRadius: 2,\r\n            boxShadow: '0 8px 32px rgba(0,0,0,0.12)'\r\n          }\r\n        }}\r\n      >\r\n        <Box sx={{ p: 2 }}>\r\n          {/* Search */}\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            placeholder=\"Search owners...\"\r\n            value={searchQueries.owner || ''}\r\n            onChange={(e) => setSearchQueries((prev: { [key: string]: string }) => ({ ...prev, owner: e.target.value }))}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon fontSize=\"small\" />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n            sx={{ mb: 2 }}\r\n          />\r\n\r\n          {/* Quick options */}\r\n          <Box sx={{ mb: 2 }}>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\r\n              Quick select:\r\n            </Typography>\r\n            <Stack direction=\"row\" spacing={1}>\r\n              <Chip\r\n                label=\"Me\"\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                onClick={() => handleOwnerSelect('current-user')}\r\n                sx={{ cursor: 'pointer' }}\r\n              />\r\n              <Chip\r\n                label=\"Unassigned\"\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                onClick={() => handleOwnerSelect('unassigned')}\r\n                sx={{ cursor: 'pointer' }}\r\n              />\r\n            </Stack>\r\n          </Box>\r\n\r\n          <Divider sx={{ mb: 1 }} />\r\n\r\n          {/* Owner list */}\r\n          <List sx={{ maxHeight: 200, overflow: 'auto' }}>\r\n            {filteredOwners.length === 0 ? (\r\n              <ListItem>\r\n                <ListItemText\r\n                  primary=\"No results found\"\r\n                  primaryTypographyProps={{ color: 'text.secondary', variant: 'body2' }}\r\n                />\r\n              </ListItem>\r\n            ) : (\r\n              filteredOwners.map(owner => (\r\n                <ListItem\r\n                  key={owner.id}\r\n                  dense\r\n                  sx={{ cursor: 'pointer', borderRadius: 1 }}\r\n                  onClick={() => handleOwnerSelect(owner.id)}\r\n                >\r\n                  <Checkbox\r\n                    checked={appliedFilters.ownerIds.includes(owner.id)}\r\n                    size=\"small\"\r\n                    sx={{ mr: 1 }}\r\n                  />\r\n                  <ListItemAvatar>\r\n                    <Avatar src={owner.avatar} sx={{ width: 32, height: 32 }}>\r\n                      {owner.name.charAt(0)}\r\n                    </Avatar>\r\n                  </ListItemAvatar>\r\n                  <ListItemText\r\n                    primary={owner.name}\r\n                    secondary={owner.email}\r\n                    primaryTypographyProps={{ fontWeight: 'medium', fontSize: '0.875rem' }}\r\n                    secondaryTypographyProps={{ fontSize: '0.75rem' }}\r\n                  />\r\n                </ListItem>\r\n              ))\r\n            )}\r\n          </List>\r\n        </Box>\r\n      </Popover>\r\n\r\n      {/* Date Filter Popover */}\r\n      <Popover\r\n        open={availableFilters.some(f => f.type === 'date' && openPopover === f.id)}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n        PaperProps={{\r\n          sx: {\r\n            width: 280,\r\n            borderRadius: 2,\r\n            boxShadow: '0 8px 32px rgba(0,0,0,0.12)'\r\n          }\r\n        }}\r\n      >\r\n        <Box sx={{ p: 2 }}>\r\n          <Typography variant=\"subtitle2\" sx={{ mb: 2 }}>\r\n            {availableFilters.find(f => f.id === openPopover)?.label || 'Date Filter'}\r\n          </Typography>\r\n          \r\n          <List>\r\n            {datePresets.map(preset => (\r\n              <ListItem\r\n                key={preset.value}\r\n                dense\r\n                sx={{ cursor: 'pointer', borderRadius: 1 }}\r\n                onClick={() => handleDatePreset(openPopover!, preset.value)}\r\n              >\r\n                <ListItemText primary={preset.label} />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Box>\r\n      </Popover>\r\n\r\n      {/* Status Filter Popover */}\r\n      <Popover\r\n        open={availableFilters.some(f => f.type === 'status' && openPopover === f.id)}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n        PaperProps={{\r\n          sx: {\r\n            width: 300,\r\n            borderRadius: 2,\r\n            boxShadow: '0 8px 32px rgba(0,0,0,0.12)'\r\n          }\r\n        }}\r\n      >\r\n        <Box sx={{ p: 2 }}>\r\n          <Typography variant=\"subtitle2\" sx={{ mb: 2 }}>\r\n            {availableFilters.find(f => f.id === openPopover)?.label || 'Status Filter'}\r\n          </Typography>\r\n          \r\n          <List>\r\n            {statuses.map(status => (\r\n              <ListItem\r\n                key={status.value}\r\n                dense\r\n                sx={{ cursor: 'pointer', borderRadius: 1 }}\r\n                onClick={() => handleStatusSelect(status.value)}\r\n              >\r\n                <Checkbox\r\n                  checked={appliedFilters.leadStatus.includes(status.value)}\r\n                  size=\"small\"\r\n                  sx={{ mr: 1 }}\r\n                />\r\n                <Chip\r\n                  label={status.label}\r\n                  size=\"small\"\r\n                  sx={{\r\n                    backgroundColor: alpha(status.color, 0.1),\r\n                    color: status.color,\r\n                    border: `1px solid ${alpha(status.color, 0.3)}`\r\n                  }}\r\n                />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Box>\r\n      </Popover>\r\n\r\n      {/* Amount Filter Popover */}\r\n      <Popover\r\n        open={openPopover === 'amount'}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n        PaperProps={{\r\n          sx: {\r\n            width: 320,\r\n            borderRadius: 2,\r\n            boxShadow: '0 8px 32px rgba(0,0,0,0.12)'\r\n          }\r\n        }}\r\n      >\r\n        <Box sx={{ p: 2 }}>\r\n          <Typography variant=\"subtitle2\" sx={{ mb: 2 }}>\r\n            Amount Range\r\n          </Typography>\r\n          \r\n          <Box sx={{ display: 'flex', gap: 2, mb: 2 }}>\r\n            <TextField\r\n              label=\"Min\"\r\n              type=\"number\"\r\n              size=\"small\"\r\n              value={tempFilters.min || ''}\r\n              onChange={(e) => setTempFilters((prev: any) => ({ ...prev, min: e.target.value ? Number(e.target.value) : undefined }))}\r\n              InputProps={{\r\n                endAdornment: <InputAdornment position=\"end\">{currency}</InputAdornment>\r\n              }}\r\n            />\r\n            <TextField\r\n              label=\"Max\"\r\n              type=\"number\"\r\n              size=\"small\"\r\n              value={tempFilters.max || ''}\r\n              onChange={(e) => setTempFilters((prev: any) => ({ ...prev, max: e.target.value ? Number(e.target.value) : undefined }))}\r\n              InputProps={{\r\n                endAdornment: <InputAdornment position=\"end\">{currency}</InputAdornment>\r\n              }}\r\n            />\r\n          </Box>\r\n\r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 1 }}>\r\n            <Button size=\"small\" onClick={handlePopoverClose}>\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              size=\"small\" \r\n              variant=\"contained\" \r\n              onClick={handleAmountApply}\r\n              disabled={!tempFilters.min && !tempFilters.max}\r\n            >\r\n              Apply\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Popover>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default FilterBar;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Box,\r\n  Typography,\r\n  Avatar,\r\n  List,\r\n  ListItem,\r\n  ListItemButton,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  InputAdornment,\r\n  CircularProgress,\r\n  Alert,\r\n  Chip,\r\n  useTheme,\r\n  alpha\r\n} from '@mui/material';\r\nimport {\r\n  Search as SearchIcon,\r\n  Person as PersonIcon,\r\n  Email as EmailIcon,\r\n  Phone as PhoneIcon,\r\n  Business as BusinessIcon,\r\n  Work as WorkIcon,\r\n  AttachMoney as MoneyIcon,\r\n  Event as EventIcon,\r\n  Label as LabelIcon\r\n} from '@mui/icons-material';\r\n\r\nexport interface SmartTableColumn {\r\n  id: string;\r\n  label: string;\r\n  type: 'text' | 'email' | 'phone' | 'number' | 'currency' | 'date' | 'select' | 'userSelect' | 'actions';\r\n  editable?: boolean;\r\n  sortable?: boolean;\r\n  width?: number;\r\n  minWidth?: number;\r\n  align?: 'left' | 'center' | 'right';\r\n  format?: (value: any) => string;\r\n  validate?: (value: any) => string | null;\r\n  required?: boolean;\r\n  options?: Array<{\r\n    value: any;\r\n    label: string;\r\n    color?: string;\r\n  }>;\r\n}\r\n\r\nexport interface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  avatar?: string;\r\n}\r\n\r\nexport interface EditCellModalProps {\r\n  open: boolean;\r\n  column: SmartTableColumn;\r\n  value: any;\r\n  rowData: any;\r\n  users?: User[];\r\n  onSave: (value: any) => Promise<boolean>;\r\n  onClose: () => void;\r\n}\r\n\r\nconst EditCellModal: React.FC<EditCellModalProps> = ({\r\n  open,\r\n  column,\r\n  value: initialValue,\r\n  rowData,\r\n  users = [],\r\n  onSave,\r\n  onClose\r\n}) => {\r\n  const theme = useTheme();\r\n  const [value, setValue] = useState(initialValue);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [saving, setSaving] = useState(false);\r\n  const [userSearchQuery, setUserSearchQuery] = useState('');\r\n\r\n  // Reset value when modal opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setValue(initialValue);\r\n      setError(null);\r\n      setUserSearchQuery('');\r\n    }\r\n  }, [open, initialValue]);\r\n\r\n  // Validate value\r\n  const validateValue = (val: any): string | null => {\r\n    if (column.required && (!val || val.toString().trim() === '')) {\r\n      return `${column.label} là bắt buộc`;\r\n    }\r\n    \r\n    if (column.validate) {\r\n      return column.validate(val);\r\n    }\r\n    \r\n    return null;\r\n  };\r\n\r\n  // Handle save\r\n  const handleSave = async () => {\r\n    const validationError = validateValue(value);\r\n    if (validationError) {\r\n      setError(validationError);\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const success = await onSave(value);\r\n      if (success) {\r\n        onClose();\r\n      } else {\r\n        setError('Không thể lưu thay đổi. Vui lòng thử lại.');\r\n      }\r\n    } catch (err) {\r\n      setError('Có lỗi xảy ra khi lưu dữ liệu.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // Handle cancel\r\n  const handleCancel = () => {\r\n    setValue(initialValue);\r\n    setError(null);\r\n    onClose();\r\n  };\r\n\r\n  // Filter users for userSelect\r\n  const filteredUsers = users.filter(user =>\r\n    user.name.toLowerCase().includes(userSearchQuery.toLowerCase()) ||\r\n    user.email.toLowerCase().includes(userSearchQuery.toLowerCase())\r\n  );\r\n\r\n  // Get field icon\r\n  const getFieldIcon = () => {\r\n    switch (column.type) {\r\n      case 'email': return <EmailIcon fontSize=\"small\" />;\r\n      case 'phone': return <PhoneIcon fontSize=\"small\" />;\r\n      case 'currency': return <MoneyIcon fontSize=\"small\" />;\r\n      case 'date': return <EventIcon fontSize=\"small\" />;\r\n      case 'userSelect': return <PersonIcon fontSize=\"small\" />;\r\n      case 'select': return <LabelIcon fontSize=\"small\" />;\r\n      default: return <BusinessIcon fontSize=\"small\" />;\r\n    }\r\n  };\r\n\r\n  // Render input field based on column type\r\n  const renderInputField = () => {\r\n    switch (column.type) {\r\n      case 'select':\r\n        return (\r\n          <FormControl fullWidth variant=\"standard\">\r\n            <InputLabel>{column.label}</InputLabel>\r\n            <Select\r\n              value={value || ''}\r\n              onChange={(e) => setValue(e.target.value)}\r\n            >\r\n              {column.options?.map(option => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                    {option.color && (\r\n                      <Box\r\n                        sx={{\r\n                          width: 12,\r\n                          height: 12,\r\n                          borderRadius: '50%',\r\n                          backgroundColor: option.color\r\n                        }}\r\n                      />\r\n                    )}\r\n                    {option.label}\r\n                  </Box>\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        );\r\n\r\n      case 'userSelect':\r\n        return (\r\n          <Box>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Tìm kiếm người dùng\"\r\n              value={userSearchQuery}\r\n              onChange={(e) => setUserSearchQuery(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchIcon fontSize=\"small\" />\r\n                  </InputAdornment>\r\n                )\r\n              }}\r\n              sx={{ mb: 2 }}\r\n            />\r\n            \r\n            <Box sx={{ maxHeight: 200, overflow: 'auto' }}>\r\n              <List dense>\r\n                {filteredUsers.map(user => (\r\n                  <ListItem key={user.id} sx={{ p: 0, mb: 0.5 }}>\r\n                    <ListItemButton\r\n                      selected={value === user.id}\r\n                      onClick={() => setValue(user.id)}\r\n                      sx={{\r\n                        borderRadius: 1,\r\n                        '&.Mui-selected': {\r\n                          backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n                          '&:hover': {\r\n                            backgroundColor: alpha(theme.palette.primary.main, 0.2),\r\n                          }\r\n                        }\r\n                      }}\r\n                    >\r\n                    <ListItemAvatar>\r\n                      <Avatar sx={{ width: 32, height: 32 }} src={user.avatar}>\r\n                        {user.name.charAt(0)}\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    <ListItemText\r\n                      primary={user.name}\r\n                      secondary={user.email}\r\n                      primaryTypographyProps={{ variant: 'body2' }}\r\n                      secondaryTypographyProps={{ variant: 'caption' }}\r\n                    />\r\n                    </ListItemButton>\r\n                  </ListItem>\r\n                ))}\r\n                \r\n                {filteredUsers.length === 0 && (\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ p: 2, textAlign: 'center' }}>\r\n                    Không tìm thấy người dùng nào\r\n                  </Typography>\r\n                )}\r\n              </List>\r\n            </Box>\r\n          </Box>\r\n        );\r\n\r\n      case 'date':\r\n        return (\r\n          <TextField\r\n            fullWidth\r\n            type=\"date\"\r\n            label={column.label}\r\n            value={value || ''}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  {getFieldIcon()}\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        );\r\n\r\n      case 'number':\r\n      case 'currency':\r\n        return (\r\n          <TextField\r\n            fullWidth\r\n            type=\"number\"\r\n            label={column.label}\r\n            value={value || ''}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  {getFieldIcon()}\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: column.type === 'currency' ? (\r\n                <InputAdornment position=\"end\">₫</InputAdornment>\r\n              ) : undefined\r\n            }}\r\n          />\r\n        );\r\n\r\n      case 'email':\r\n        return (\r\n          <TextField\r\n            fullWidth\r\n            type=\"email\"\r\n            label={column.label}\r\n            value={value || ''}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <EmailIcon fontSize=\"small\" />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        );\r\n\r\n      case 'phone':\r\n        return (\r\n          <TextField\r\n            fullWidth\r\n            type=\"tel\"\r\n            label={column.label}\r\n            value={value || ''}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <PhoneIcon fontSize=\"small\" />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <TextField\r\n            fullWidth\r\n            label={column.label}\r\n            value={value || ''}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            multiline={column.type === 'text' && column.id === 'description'}\r\n            rows={column.id === 'description' ? 3 : 1}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  {getFieldIcon()}\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        );\r\n    }\r\n  };\r\n\r\n  // Get current display value for selected option/user\r\n  const getCurrentDisplayValue = () => {\r\n    if (column.type === 'select' && column.options) {\r\n      const option = column.options.find(opt => opt.value === value);\r\n      return option ? (\r\n        <Chip\r\n          label={option.label}\r\n          size=\"small\"\r\n          sx={{\r\n            backgroundColor: option.color ? alpha(option.color, 0.1) : undefined,\r\n            color: option.color,\r\n            border: option.color ? `1px solid ${alpha(option.color, 0.3)}` : undefined\r\n          }}\r\n        />\r\n      ) : null;\r\n    }\r\n    \r\n    if (column.type === 'userSelect' && users) {\r\n      const user = users.find(u => u.id === value);\r\n      return user ? (\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <Avatar sx={{ width: 24, height: 24 }} src={user.avatar}>\r\n            {user.name.charAt(0)}\r\n          </Avatar>\r\n          <Typography variant=\"body2\">{user.name}</Typography>\r\n        </Box>\r\n      ) : null;\r\n    }\r\n    \r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"xs\"\r\n      fullWidth\r\n      PaperProps={{\r\n        sx: {\r\n          borderRadius: 2\r\n        }\r\n      }}\r\n    >\r\n      <DialogTitle sx={{ pb: 1, pt: 2 }}>\r\n        <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\r\n          Chỉnh sửa cho {rowData.name || rowData.id}\r\n        </Typography>\r\n      </DialogTitle>\r\n\r\n      <DialogContent sx={{ pt: 3, pb: 2, px: 3 }}>\r\n        {/* Input field */}\r\n        <Box sx={{ mt: 1 }}>\r\n          {renderInputField()}\r\n        </Box>\r\n\r\n        {/* Error message */}\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Help text for validation */}\r\n        {column.type === 'email' && (\r\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\r\n            Ví dụ: example@company.com\r\n          </Typography>\r\n        )}\r\n        \r\n        {column.type === 'phone' && (\r\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\r\n            Ví dụ: 0901234567 (10-11 số)\r\n          </Typography>\r\n        )}\r\n      </DialogContent>\r\n\r\n      <DialogActions sx={{ px: 2, pb: 2, pt: 1 }}>\r\n        <Button onClick={handleCancel} size=\"small\">\r\n          Hủy\r\n        </Button>\r\n        <Button \r\n          onClick={handleSave}\r\n          variant=\"contained\"\r\n          size=\"small\"\r\n          disabled={saving}\r\n        >\r\n          {saving ? 'Đang lưu...' : 'Lưu'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditCellModal;\r\n","import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport {\r\n  Box,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TablePagination,\r\n  Checkbox,\r\n  IconButton,\r\n  Menu,\r\n  MenuItem,\r\n  TextField,\r\n  Button,\r\n  Chip,\r\n  Avatar,\r\n  Typography,\r\n  Tooltip,\r\n  CircularProgress,\r\n  Alert,\r\n  Skeleton,\r\n  FormControl,\r\n  Select,\r\n  Popover,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  InputAdornment,\r\n  InputLabel,\r\n  Paper,\r\n  Divider,\r\n  Pagination,\r\n  useTheme,\r\n  alpha\r\n} from '@mui/material';\r\nimport EditCellModal from '../EditCellModal';\r\nimport {\r\n  Search as SearchIcon,\r\n  FilterList as FilterIcon,\r\n  Refresh as RefreshIcon,\r\n  MoreVert as MoreVertIcon,\r\n  ArrowUpward as ArrowUpwardIcon,\r\n  ArrowDownward as ArrowDownwardIcon,\r\n  PushPin as PushPinIcon,\r\n  VisibilityOff as VisibilityOffIcon,\r\n  Edit as EditIcon,\r\n  Delete as DeleteIcon,\r\n  Save as SaveIcon,\r\n  Close as CloseIcon,\r\n  Visibility as PreviewIcon,\r\n  Check as CheckIcon,\r\n  Error as ErrorIcon\r\n} from '@mui/icons-material';\r\n\r\n// Types\r\nexport interface SmartTableColumn {\r\n  id: string;\r\n  label: string;\r\n  type: 'text' | 'email' | 'phone' | 'number' | 'currency' | 'date' | 'select' | 'userSelect' | 'actions';\r\n  width?: number;\r\n  minWidth?: number;\r\n  sortable?: boolean;\r\n  editable?: boolean;\r\n  required?: boolean;\r\n  options?: { value: string; label: string; color?: string }[]; // for select type\r\n  format?: (value: any) => string;\r\n  validate?: (value: any) => string | null;\r\n  frozen?: 'left' | 'right' | null;\r\n  hidden?: boolean;\r\n}\r\n\r\nexport interface SmartTableRow {\r\n  id: string;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface SmartTableProps {\r\n  columns: SmartTableColumn[];\r\n  data: SmartTableRow[];\r\n  loading?: boolean;\r\n  error?: string;\r\n  searchable?: boolean;\r\n  filterable?: boolean;\r\n  selectable?: boolean;\r\n  pagination?: boolean;\r\n  rowsPerPageOptions?: number[];\r\n  defaultRowsPerPage?: number;\r\n  emptyMessage?: string;\r\n  onRowDoubleClick?: (row: SmartTableRow) => void;\r\n  onCellEdit?: (rowId: string, columnId: string, value: any) => Promise<boolean>;\r\n  onRowSelect?: (selectedRows: string[]) => void;\r\n  onBulkAction?: (action: string, selectedRows: string[]) => void;\r\n  onPreviewContact?: (contact: SmartTableRow) => void;\r\n  users?: { id: string; name: string; email: string; avatar?: string }[]; // for userSelect\r\n  zebra?: boolean;\r\n}\r\n\r\nconst SmartTable: React.FC<SmartTableProps> = ({\r\n  columns,\r\n  data,\r\n  loading = false,\r\n  error,\r\n  searchable = true,\r\n  filterable = true,\r\n  selectable = true,\r\n  pagination = true,\r\n  rowsPerPageOptions = [10, 20, 50],\r\n  defaultRowsPerPage = 10,\r\n  emptyMessage = \"Chưa có dữ liệu\",\r\n  onRowDoubleClick,\r\n  onCellEdit,\r\n  onRowSelect,\r\n  onBulkAction,\r\n  onPreviewContact,\r\n  users = [],\r\n  zebra = true\r\n}) => {\r\n  const theme = useTheme();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' | null }>({ key: '', direction: null });\r\n  const [selectedRows, setSelectedRows] = useState<string[]>([]);\r\n  const [editModalOpen, setEditModalOpen] = useState(false);\r\n  const [editModalData, setEditModalData] = useState<{ rowId: string; columnId: string; value: any; rowData: SmartTableRow } | null>(null);\r\n  const [columnMenuAnchor, setColumnMenuAnchor] = useState<{ element: HTMLElement; columnId: string } | null>(null);\r\n  const [hoveredCell, setHoveredCell] = useState<{ rowId: string; columnId: string } | null>(null);\r\n  const [userSelectAnchor, setUserSelectAnchor] = useState<{ element: HTMLElement; rowId: string; columnId: string } | null>(null);\r\n  const [userSearchQuery, setUserSearchQuery] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [rowsPerPage, setRowsPerPage] = useState(defaultRowsPerPage);\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(columns.map(col => col.id));\r\n  const [frozenColumns, setFrozenColumns] = useState<{ [key: string]: 'left' | 'right' | null }>({});\r\n  \r\n  const editInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Filter and sort data\r\n  const filteredAndSortedData = useMemo(() => {\r\n    let filtered = data;\r\n\r\n    // Search filter\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(row =>\r\n        Object.values(row).some(value =>\r\n          String(value).toLowerCase().includes(searchQuery.toLowerCase())\r\n        )\r\n      );\r\n    }\r\n\r\n    // Sort\r\n    if (sortConfig.key && sortConfig.direction) {\r\n      filtered = [...filtered].sort((a, b) => {\r\n        const aValue = a[sortConfig.key];\r\n        const bValue = b[sortConfig.key];\r\n        \r\n        if (aValue < bValue) {\r\n          return sortConfig.direction === 'asc' ? -1 : 1;\r\n        }\r\n        if (aValue > bValue) {\r\n          return sortConfig.direction === 'asc' ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [data, searchQuery, sortConfig]);\r\n\r\n  // Pagination\r\n  const paginatedData = useMemo(() => {\r\n    if (!pagination) return filteredAndSortedData;\r\n    const startIndex = (page - 1) * rowsPerPage;\r\n    return filteredAndSortedData.slice(startIndex, startIndex + rowsPerPage);\r\n  }, [filteredAndSortedData, page, rowsPerPage, pagination]);\r\n\r\n  const totalPages = Math.ceil(filteredAndSortedData.length / rowsPerPage);\r\n\r\n  // Handle sort\r\n  const handleSort = (columnId: string) => {\r\n    const column = columns.find(col => col.id === columnId);\r\n    if (!column?.sortable) return;\r\n\r\n    setSortConfig(prev => {\r\n      if (prev.key !== columnId) {\r\n        return { key: columnId, direction: 'asc' };\r\n      }\r\n      if (prev.direction === 'asc') {\r\n        return { key: columnId, direction: 'desc' };\r\n      }\r\n      if (prev.direction === 'desc') {\r\n        return { key: '', direction: null };\r\n      }\r\n      return { key: columnId, direction: 'asc' };\r\n    });\r\n  };\r\n\r\n  // Handle row selection\r\n  const handleRowSelect = (rowId: string) => {\r\n    const newSelected = selectedRows.includes(rowId)\r\n      ? selectedRows.filter(id => id !== rowId)\r\n      : [...selectedRows, rowId];\r\n    \r\n    setSelectedRows(newSelected);\r\n    onRowSelect?.(newSelected);\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    const allRowIds = paginatedData.map(row => row.id);\r\n    const newSelected = selectedRows.length === allRowIds.length ? [] : allRowIds;\r\n    setSelectedRows(newSelected);\r\n    onRowSelect?.(newSelected);\r\n  };\r\n\r\n  // Handle cell click for editing\r\n  const handleCellClick = (row: SmartTableRow, column: SmartTableColumn) => {\r\n    if (!column.editable || column.type === 'actions') return;\r\n\r\n    setEditModalData({\r\n      rowId: row.id,\r\n      columnId: column.id,\r\n      value: row[column.id],\r\n      rowData: row\r\n    });\r\n    setEditModalOpen(true);\r\n  };\r\n\r\n  // Handle modal save\r\n  const handleModalSave = async (value: any): Promise<boolean> => {\r\n    if (!editModalData || !onCellEdit) return false;\r\n\r\n    try {\r\n      const success = await onCellEdit(editModalData.rowId, editModalData.columnId, value);\r\n      return success;\r\n    } catch (error) {\r\n      console.error('Save error:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Handle modal close\r\n  const handleModalClose = () => {\r\n    setEditModalOpen(false);\r\n    setEditModalData(null);\r\n  };\r\n\r\n  // Handle user selection\r\n  const handleUserSelect = (userId: string) => {\r\n    if (!userSelectAnchor || !onCellEdit) return;\r\n\r\n    const user = users.find(u => u.id === userId);\r\n    if (user) {\r\n      onCellEdit(userSelectAnchor.rowId, userSelectAnchor.columnId, userId);\r\n    }\r\n    \r\n    setUserSelectAnchor(null);\r\n    setUserSearchQuery('');\r\n  };\r\n\r\n  // Filter users for popover\r\n  const filteredUsers = useMemo(() => {\r\n    if (!userSearchQuery) return users;\r\n    return users.filter(user =>\r\n      user.name.toLowerCase().includes(userSearchQuery.toLowerCase()) ||\r\n      user.email.toLowerCase().includes(userSearchQuery.toLowerCase())\r\n    );\r\n  }, [users, userSearchQuery]);\r\n\r\n  // Handle column menu\r\n  const handleColumnMenu = (event: React.MouseEvent<HTMLElement>, columnId: string) => {\r\n    event.stopPropagation();\r\n    setColumnMenuAnchor({ element: event.currentTarget, columnId });\r\n  };\r\n\r\n  const handleColumnMenuAction = (action: string, columnId: string) => {\r\n    switch (action) {\r\n      case 'sort-asc':\r\n        setSortConfig({ key: columnId, direction: 'asc' });\r\n        break;\r\n      case 'sort-desc':\r\n        setSortConfig({ key: columnId, direction: 'desc' });\r\n        break;\r\n      case 'hide':\r\n        setVisibleColumns(prev => prev.filter(id => id !== columnId));\r\n        break;\r\n    }\r\n    setColumnMenuAnchor(null);\r\n  };\r\n\r\n  // Render cell content\r\n  const renderCellContent = (row: SmartTableRow, column: SmartTableColumn) => {\r\n    const value = row[column.id];\r\n    const isHovered = hoveredCell?.rowId === row.id && hoveredCell?.columnId === column.id;\r\n\r\n    // Special handling for Name column with preview button\r\n    if (column.id === 'name' && onPreviewContact) {\r\n      return (\r\n        <Box \r\n          sx={{ \r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            justifyContent: 'space-between',\r\n            width: '100%'\r\n          }}\r\n          onMouseEnter={() => setHoveredCell({ rowId: row.id, columnId: column.id })}\r\n          onMouseLeave={() => setHoveredCell(null)}\r\n        >\r\n          <Typography variant=\"body2\" sx={{ flex: 1, mr: 1 }}>\r\n            {value}\r\n          </Typography>\r\n          {isHovered && (\r\n            <Tooltip title=\"Preview Contact\">\r\n              <IconButton\r\n                size=\"small\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onPreviewContact(row);\r\n                }}\r\n                sx={{\r\n                  opacity: 0.7,\r\n                  '&:hover': {\r\n                    opacity: 1,\r\n                    backgroundColor: alpha(theme.palette.primary.main, 0.1)\r\n                  }\r\n                }}\r\n              >\r\n                <PreviewIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </Tooltip>\r\n          )}\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    switch (column.type) {\r\n      case 'select':\r\n        const option = column.options?.find(opt => opt.value === value);\r\n        return option ? (\r\n          <Chip\r\n            label={option.label}\r\n            size=\"small\"\r\n            sx={{\r\n              backgroundColor: option.color ? alpha(option.color, 0.1) : undefined,\r\n              color: option.color,\r\n              border: option.color ? `1px solid ${alpha(option.color, 0.3)}` : undefined\r\n            }}\r\n          />\r\n        ) : value;\r\n      \r\n      case 'userSelect':\r\n        const user = users.find(u => u.id === value);\r\n        return user ? (\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <Avatar sx={{ width: 24, height: 24 }} src={user.avatar}>\r\n              {user.name.charAt(0)}\r\n            </Avatar>\r\n            <Typography variant=\"body2\">{user.name}</Typography>\r\n          </Box>\r\n        ) : value;\r\n      \r\n      case 'currency':\r\n        return column.format ? column.format(value) : `${value}₫`;\r\n      \r\n      case 'actions':\r\n        return (\r\n          <Box sx={{ display: 'flex', gap: 0.5 }}>\r\n            <IconButton size=\"small\">\r\n              <EditIcon fontSize=\"small\" />\r\n            </IconButton>\r\n            <IconButton size=\"small\" color=\"error\">\r\n              <DeleteIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </Box>\r\n        );\r\n      \r\n      default:\r\n        return column.format ? column.format(value) : value;\r\n    }\r\n  };\r\n\r\n  // Render edit input\r\n  const renderEditInput = (column: SmartTableColumn, value: any, onChange: (value: any) => void) => {\r\n    switch (column.type) {\r\n      case 'select':\r\n        return (\r\n          <FormControl size=\"small\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => onChange(e.target.value)}\r\n              autoFocus\r\n            >\r\n              {column.options?.map(option => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        );\r\n      \r\n      case 'date':\r\n        return (\r\n          <TextField\r\n            ref={editInputRef}\r\n            type=\"date\"\r\n            size=\"small\"\r\n            fullWidth\r\n            value={value}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') handleModalSave(value);\r\n              if (e.key === 'Escape') handleModalClose();\r\n            }}\r\n          />\r\n        );\r\n      \r\n      case 'number':\r\n      case 'currency':\r\n        return (\r\n          <TextField\r\n            ref={editInputRef}\r\n            type=\"number\"\r\n            size=\"small\"\r\n            fullWidth\r\n            value={value}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') handleModalSave(value);\r\n              if (e.key === 'Escape') handleModalClose();\r\n            }}\r\n          />\r\n        );\r\n      \r\n      default:\r\n        return (\r\n          <TextField\r\n            ref={editInputRef}\r\n            size=\"small\"\r\n            fullWidth\r\n            value={value}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') handleModalSave(value);\r\n              if (e.key === 'Escape') handleModalClose();\r\n            }}\r\n          />\r\n        );\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box>\r\n        {/* Toolbar skeleton */}\r\n        <Box sx={{ display: 'flex', gap: 2, mb: 2 }}>\r\n          <Skeleton variant=\"rectangular\" width={200} height={40} />\r\n          <Skeleton variant=\"rectangular\" width={100} height={40} />\r\n          <Skeleton variant=\"rectangular\" width={100} height={40} />\r\n        </Box>\r\n        \r\n        {/* Table skeleton */}\r\n        <TableContainer component={Paper}>\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map(column => (\r\n                  <TableCell key={column.id}>\r\n                    <Skeleton variant=\"text\" />\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {Array.from({ length: 5 }).map((_, index) => (\r\n                <TableRow key={index}>\r\n                  {columns.map(column => (\r\n                    <TableCell key={column.id}>\r\n                      <Skeleton variant=\"text\" />\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ \r\n      width: '100%', \r\n      height: '100%',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      overflow: 'hidden'\r\n    }}>\r\n      {/* Error Alert */}\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Toolbar */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        gap: 2, \r\n        mb: 2,\r\n        flexWrap: 'wrap',\r\n        alignItems: 'center',\r\n        flexShrink: 0,\r\n        px: 1\r\n      }}>\r\n        {searchable && (\r\n          <TextField\r\n            placeholder=\"Search...\"\r\n            size=\"small\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n            sx={{ minWidth: 200 }}\r\n          />\r\n        )}\r\n        \r\n        {filterable && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<FilterIcon />}\r\n            size=\"small\"\r\n          >\r\n            Filters\r\n          </Button>\r\n        )}\r\n\r\n        <Box sx={{ \r\n          ml: 'auto', \r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          gap: 2,\r\n          flexShrink: 0\r\n        }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            {filteredAndSortedData.length} rows\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Bulk Actions Bar */}\r\n      {selectedRows.length > 0 && (\r\n        <Box sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 2,\r\n          p: 2,\r\n          mb: 2,\r\n          backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n          borderRadius: 1\r\n        }}>\r\n          <Typography variant=\"body2\">\r\n            {selectedRows.length} selected\r\n          </Typography>\r\n          <Button size=\"small\" onClick={() => onBulkAction?.('delete', selectedRows)}>\r\n            Delete\r\n          </Button>\r\n          <Button size=\"small\" onClick={() => onBulkAction?.('assign', selectedRows)}>\r\n            Assign Owner\r\n          </Button>\r\n        </Box>\r\n      )}\r\n\r\n      {/* Table Container */}\r\n      <Box sx={{\r\n        flex: 1,\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <TableContainer \r\n          component={Paper} \r\n          sx={{ \r\n            flex: 1,\r\n            width: '100%',\r\n            overflow: 'auto',\r\n            '&::-webkit-scrollbar': {\r\n              height: '8px',\r\n              width: '8px',\r\n            },\r\n            '&::-webkit-scrollbar-track': {\r\n              backgroundColor: alpha(theme.palette.grey[300], 0.2),\r\n              borderRadius: '4px',\r\n            },\r\n            '&::-webkit-scrollbar-thumb': {\r\n              backgroundColor: alpha(theme.palette.primary.main, 0.4),\r\n              borderRadius: '4px',\r\n              border: '2px solid transparent',\r\n              backgroundClip: 'padding-box',\r\n              '&:hover': {\r\n                backgroundColor: alpha(theme.palette.primary.main, 0.6),\r\n              }\r\n            },\r\n            '&::-webkit-scrollbar-corner': {\r\n              backgroundColor: 'transparent',\r\n            }\r\n          }}\r\n        >\r\n        <Table \r\n          stickyHeader \r\n          sx={{ \r\n            minWidth: 1650, \r\n            width: '100%',\r\n            tableLayout: 'fixed'\r\n          }}\r\n        >\r\n          <TableHead>\r\n            <TableRow>\r\n              {selectable && (\r\n                <TableCell \r\n                  padding=\"checkbox\"\r\n                  sx={{\r\n                    minWidth: 50\r\n                  }}\r\n                >\r\n                  <Checkbox\r\n                    indeterminate={selectedRows.length > 0 && selectedRows.length < paginatedData.length}\r\n                    checked={paginatedData.length > 0 && selectedRows.length === paginatedData.length}\r\n                    onChange={handleSelectAll}\r\n                  />\r\n                </TableCell>\r\n              )}\r\n              \r\n              {columns\r\n                .filter(column => visibleColumns.includes(column.id))\r\n                .map(column => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    sx={{\r\n                      minWidth: column.width || column.minWidth || 150,\r\n                      cursor: column.sortable ? 'pointer' : 'default',\r\n                      userSelect: 'none',\r\n                      overflow: 'hidden',\r\n                      textOverflow: 'ellipsis',\r\n                      whiteSpace: 'nowrap'\r\n                    }}\r\n                    onClick={() => handleSort(column.id)}\r\n                  >\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                      <Typography variant=\"subtitle2\" fontWeight=\"bold\">\r\n                        {column.label}\r\n                      </Typography>\r\n                      \r\n                      {column.sortable && sortConfig.key === column.id && (\r\n                        sortConfig.direction === 'asc' ? (\r\n                          <ArrowUpwardIcon fontSize=\"small\" />\r\n                        ) : (\r\n                          <ArrowDownwardIcon fontSize=\"small\" />\r\n                        )\r\n                      )}\r\n                      \r\n                      <IconButton\r\n                        size=\"small\"\r\n                        onClick={(e) => handleColumnMenu(e, column.id)}\r\n                        sx={{ ml: 'auto' }}\r\n                      >\r\n                        <MoreVertIcon fontSize=\"small\" />\r\n                      </IconButton>\r\n                    </Box>\r\n                  </TableCell>\r\n                ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          \r\n          <TableBody>\r\n            {paginatedData.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell \r\n                  colSpan={columns.length + (selectable ? 1 : 0)} \r\n                  sx={{ textAlign: 'center', py: 8 }}\r\n                >\r\n                  <Typography variant=\"body1\" color=\"text.secondary\">\r\n                    {emptyMessage}\r\n                  </Typography>\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              paginatedData.map((row, index) => (\r\n                <TableRow\r\n                  key={row.id}\r\n                  hover\r\n                  selected={selectedRows.includes(row.id)}\r\n                  onDoubleClick={() => onRowDoubleClick?.(row)}\r\n                  sx={{\r\n                    cursor: onRowDoubleClick ? 'pointer' : 'default',\r\n                    backgroundColor: zebra && index % 2 === 1 ? alpha(theme.palette.primary.main, 0.04) : 'transparent'\r\n                  }}\r\n                >\r\n                  {selectable && (\r\n                    <TableCell \r\n                      padding=\"checkbox\"\r\n                      sx={{\r\n                        minWidth: 50\r\n                      }}\r\n                    >\r\n                      <Checkbox\r\n                        checked={selectedRows.includes(row.id)}\r\n                        onChange={() => handleRowSelect(row.id)}\r\n                      />\r\n                    </TableCell>\r\n                  )}\r\n                  \r\n                  {columns\r\n                    .filter(column => visibleColumns.includes(column.id))\r\n                    .map(column => (\r\n                      <TableCell\r\n                        key={column.id}\r\n                        data-cell={`${row.id}-${column.id}`}\r\n                        onClick={() => handleCellClick(row, column)}\r\n                        sx={{\r\n                          minWidth: column.width || column.minWidth || 150,\r\n                          cursor: column.editable ? 'pointer' : 'default',\r\n                          overflow: 'hidden',\r\n                          textOverflow: 'ellipsis',\r\n                          whiteSpace: 'nowrap',\r\n                          '&:hover': column.editable ? {\r\n                            backgroundColor: alpha(theme.palette.primary.main, 0.04)\r\n                          } : {}\r\n                        }}\r\n                      >\r\n                        {renderCellContent(row, column)}\r\n                      </TableCell>\r\n                    ))}\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n        </TableContainer>\r\n      </Box>\r\n\r\n      {/* Pagination */}\r\n      {pagination && totalPages > 1 && (\r\n        <Box sx={{ \r\n          display: 'flex', \r\n          justifyContent: 'center', \r\n          alignItems: 'center',\r\n          mt: 2,\r\n          py: 2,\r\n          px: 1,\r\n          flexShrink: 0,\r\n          borderTop: `1px solid ${theme.palette.divider}`\r\n        }}>\r\n          <Pagination\r\n            count={totalPages}\r\n            page={page}\r\n            onChange={(_: React.ChangeEvent<unknown>, newPage: number) => setPage(newPage)}\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            showFirstButton\r\n            showLastButton\r\n          />\r\n        </Box>\r\n      )}\r\n\r\n      {/* Column Menu */}\r\n      <Menu\r\n        anchorEl={columnMenuAnchor?.element}\r\n        open={Boolean(columnMenuAnchor)}\r\n        onClose={() => setColumnMenuAnchor(null)}\r\n      >\r\n        <MenuItem onClick={() => handleColumnMenuAction('sort-asc', columnMenuAnchor!.columnId)}>\r\n          <ArrowUpwardIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n          Sort Ascending\r\n        </MenuItem>\r\n        <MenuItem onClick={() => handleColumnMenuAction('sort-desc', columnMenuAnchor!.columnId)}>\r\n          <ArrowDownwardIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n          Sort Descending\r\n        </MenuItem>\r\n        <Divider />\r\n        <MenuItem onClick={() => handleColumnMenuAction('hide', columnMenuAnchor!.columnId)}>\r\n          <VisibilityOffIcon fontSize=\"small\" sx={{ mr: 1 }} />\r\n          Hide Column\r\n        </MenuItem>\r\n      </Menu>\r\n\r\n      {/* User Select Popover */}\r\n      <Popover\r\n        open={Boolean(userSelectAnchor)}\r\n        anchorEl={userSelectAnchor?.element}\r\n        onClose={() => {\r\n          setUserSelectAnchor(null);\r\n          setUserSearchQuery('');\r\n        }}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n      >\r\n        <Box sx={{ width: 300, maxHeight: 400 }}>\r\n          <Box sx={{ p: 2, borderBottom: `1px solid ${theme.palette.divider}` }}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Search users...\"\r\n              value={userSearchQuery}\r\n              onChange={(e) => setUserSearchQuery(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchIcon />\r\n                  </InputAdornment>\r\n                )\r\n              }}\r\n            />\r\n          </Box>\r\n          \r\n          <List sx={{ maxHeight: 300, overflow: 'auto' }}>\r\n            {filteredUsers.map(user => (\r\n              <ListItem\r\n                key={user.id}\r\n                component=\"div\"\r\n                sx={{ cursor: 'pointer' }}\r\n                onClick={() => handleUserSelect(user.id)}\r\n              >\r\n                <ListItemAvatar>\r\n                  <Avatar src={user.avatar} sx={{ width: 32, height: 32 }}>\r\n                    {user.name.charAt(0)}\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText\r\n                  primary={user.name}\r\n                  secondary={user.email}\r\n                  primaryTypographyProps={{ fontWeight: 'bold' }}\r\n                />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Box>\r\n      </Popover>\r\n\r\n      {/* Edit Cell Modal */}\r\n      {editModalData && (\r\n        <EditCellModal\r\n          open={editModalOpen}\r\n          column={columns.find(col => col.id === editModalData.columnId && col.type !== 'actions')!}\r\n          value={editModalData.value}\r\n          rowData={editModalData.rowData}\r\n          users={users}\r\n          onSave={handleModalSave}\r\n          onClose={handleModalClose}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SmartTable;\r\n"],"names":["_ref","_availableFilters$fin","_availableFilters$fin2","entity","availableFilters","owners","statuses","savedViews","currency","onQueryChange","onViewChange","sticky","theme","useTheme","activeView","setActiveView","useState","appliedFilters","setAppliedFilters","ownerIds","leadStatus","openPopover","setOpenPopover","anchorEl","setAnchorEl","searchQueries","setSearchQueries","tempFilters","setTempFilters","handleFilterClick","filterId","event","currentTarget","prev","_objectSpread","handlePopoverClose","handleOwnerSelect","ownerId","newOwnerIds","includes","filter","id","newQuery","filteredOwners","owner","name","toLowerCase","email","appliedTokens","getAppliedTokens","tokens","forEach","find","o","push","type","value","label","avatar","status","statusConfig","s","color","fieldName","dateFilter","concat","preset","amount","min","max","hasActiveFilters","length","_jsxs","Box","sx","position","top","zIndex","backgroundColor","palette","background","paper","borderBottom","divider","py","px","mb","children","display","alignItems","gap","_jsx","Typography","variant","mr","map","view","Chip","count","size","onClick","handleViewChange","viewId","cursor","alpha","primary","main","f","enabled","isActive","icon","e","deleteIcon","ArrowDownIcon","onDelete","fontSize","ml","Button","startIcon","ClearIcon","handleClearAll","emptyQuery","flexWrap","token","index","Avatar","src","width","height","handleRemoveToken","tokenType","border","error","Popover","open","onClose","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","maxHeight","borderRadius","boxShadow","p","TextField","fullWidth","placeholder","onChange","target","InputProps","startAdornment","InputAdornment","SearchIcon","Stack","direction","spacing","Divider","List","overflow","ListItem","ListItemText","primaryTypographyProps","dense","Checkbox","checked","ListItemAvatar","charAt","secondary","fontWeight","secondaryTypographyProps","some","handleDatePreset","newStatuses","handleStatusSelect","Number","undefined","endAdornment","justifyContent","handleAmountApply","disabled","column","initialValue","rowData","users","onSave","setValue","setError","saving","setSaving","userSearchQuery","setUserSearchQuery","useEffect","filteredUsers","user","getFieldIcon","EmailIcon","PhoneIcon","MoneyIcon","EventIcon","PersonIcon","LabelIcon","BusinessIcon","Dialog","maxWidth","DialogTitle","pb","pt","DialogContent","mt","renderInputField","_column$options","FormControl","InputLabel","Select","options","option","MenuItem","ListItemButton","selected","textAlign","InputLabelProps","shrink","multiline","rows","Alert","severity","DialogActions","handleCancel","async","validationError","val","required","toString","trim","validate","err","columns","data","loading","searchable","filterable","selectable","pagination","rowsPerPageOptions","defaultRowsPerPage","emptyMessage","onRowDoubleClick","onCellEdit","onRowSelect","onBulkAction","onPreviewContact","zebra","searchQuery","setSearchQuery","sortConfig","setSortConfig","key","selectedRows","setSelectedRows","editModalOpen","setEditModalOpen","editModalData","setEditModalData","columnMenuAnchor","setColumnMenuAnchor","hoveredCell","setHoveredCell","userSelectAnchor","setUserSelectAnchor","page","setPage","rowsPerPage","setRowsPerPage","visibleColumns","setVisibleColumns","col","frozenColumns","setFrozenColumns","filteredAndSortedData","useRef","useMemo","filtered","row","Object","values","String","sort","a","b","aValue","bValue","paginatedData","startIndex","slice","totalPages","Math","ceil","handleModalSave","rowId","columnId","console","handleModalClose","handleColumnMenuAction","action","renderCellContent","isHovered","onMouseEnter","onMouseLeave","flex","Tooltip","title","IconButton","stopPropagation","opacity","PreviewIcon","opt","u","format","EditIcon","DeleteIcon","Skeleton","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","Array","from","_","flexDirection","flexShrink","minWidth","FilterIcon","grey","backgroundClip","stickyHeader","tableLayout","padding","indeterminate","handleSelectAll","allRowIds","newSelected","sortable","userSelect","textOverflow","whiteSpace","handleSort","ArrowUpwardIcon","ArrowDownwardIcon","handleColumnMenu","element","MoreVertIcon","colSpan","hover","onDoubleClick","handleRowSelect","handleCellClick","editable","borderTop","Pagination","newPage","showFirstButton","showLastButton","Menu","Boolean","VisibilityOffIcon","userId","handleUserSelect","EditCellModal"],"sourceRoot":""}