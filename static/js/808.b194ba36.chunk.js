"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[808],{4573:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(14057),r=t(70579);const l=(0,i.A)((0,r.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},51692:(e,n,t)=>{t.d(n,{A:()=>j});var i=t(89379),r=t(80045),l=t(65043),s=t(58387),o=t(31807),a=t(83392),d=t(58128),c=t(28301),h=t(79857),x=t(86061);function u(e){return(0,x.Ay)("MuiTableFooter",e)}(0,h.A)("MuiTableFooter",["root"]);var m=t(70579);const g=["className","component"],p=(0,d.Ay)("tfoot",{name:"MuiTableFooter",slot:"Root"})({display:"table-footer-group"}),A={variant:"footer"},f="tfoot",j=l.forwardRef(function(e,n){const t=(0,c.b)({props:e,name:"MuiTableFooter"}),{className:l,component:d=f}=t,h=(0,r.A)(t,g),x=(0,i.A)((0,i.A)({},t),{},{component:d}),j=(e=>{const{classes:n}=e;return(0,o.A)({root:["root"]},u,n)})(x);return(0,m.jsx)(a.A.Provider,{value:A,children:(0,m.jsx)(p,(0,i.A)({as:d,className:(0,s.A)(j.root,l),ref:n,role:d===f?null:"rowgroup",ownerState:x},h))})})},70298:(e,n,t)=>{t.d(n,{A:()=>T});var i=t(80045),r=t(89379),l=t(65043),s=t(58387),o=t(53129),a=t(86061),d=t(31807),c=t(70883),h=t(94943),x=t(85227),u=t(79049),m=t(16167),g=t(71834),p=t(70579);const A=["component","direction","spacing","divider","children","className","useFlexGap"],f=(0,u.A)(),j=(0,c.A)("div",{name:"MuiStack",slot:"Root"});function b(e){return(0,h.A)({props:e,name:"MuiStack",defaultTheme:f})}function v(e,n){const t=l.Children.toArray(e).filter(Boolean);return t.reduce((e,i,r)=>(e.push(i),r<t.length-1&&e.push(l.cloneElement(n,{key:"separator-".concat(r)})),e),[])}const y=e=>{let{ownerState:n,theme:t}=e,i=(0,r.A)({display:"flex",flexDirection:"column"},(0,m.NI)({theme:t},(0,m.kW)({values:n.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(n.spacing){const e=(0,g.LX)(t),r=Object.keys(t.breakpoints.values).reduce((e,t)=>(("object"===typeof n.spacing&&null!=n.spacing[t]||"object"===typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e),{}),l=(0,m.kW)({values:n.direction,base:r}),s=(0,m.kW)({values:n.spacing,base:r});"object"===typeof l&&Object.keys(l).forEach((e,n,t)=>{if(!l[e]){const i=n>0?l[t[n-1]]:"column";l[e]=i}});const a=(t,i)=>{return n.useFlexGap?{gap:(0,g._W)(e,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((r=i?l[i]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[r]))]:(0,g._W)(e,t)}};var r};i=(0,o.A)(i,(0,m.NI)({theme:t},s,a))}return i=(0,m.iZ)(t.breakpoints,i),i};var C=t(58128),k=t(28301);const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=j,useThemeProps:t=b,componentName:o="MuiStack"}=e,c=n(y),h=l.forwardRef(function(e,n){const l=t(e),h=(0,x.A)(l),{component:u="div",direction:m="column",spacing:g=0,divider:f,children:j,className:b,useFlexGap:y=!1}=h,C=(0,i.A)(h,A),k={direction:m,spacing:g,useFlexGap:y},w=(0,d.A)({root:["root"]},e=>(0,a.Ay)(o,e),{});return(0,p.jsx)(c,(0,r.A)((0,r.A)({as:u,ownerState:k,ref:n,className:(0,s.A)(w.root,b)},C),{},{children:f?v(j,f):j}))});return h}({createStyledComponent:(0,C.Ay)("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>(0,k.b)({props:e,name:"MuiStack"})}),T=w},70883:(e,n,t)=>{t.d(n,{A:()=>i});const i=(0,t(37675).Ay)()},87808:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ze});var i=t(89379),r=t(65043),l=t(53969),s=t(55895),o=t(41859),a=t(14333),d=t(12843),c=t(94799),h=t(70298),x=t(24343),u=t(17060),m=t(10256),g=t(3353),p=t(67203),A=t(47471),f=t(22950),j=t(63745),b=t(50103),v=t(38517),y=t(81911),C=t(78776),k=t(53407),w=t(79693),T=t(99147),I=t(22947),S=t(28259),N=t(87443),D=t(10756),M=t(86172),z=t(81341),E=t(34375),W=t(85877),q=t(47951),P=t(14057),F=t(70579);const B=(0,P.A)((0,F.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var V=t(22672),H=t(43971),R=t(46261),L=t(1725),G=t(68826),O=t(94527),U=t(32911),_=t(91449),K=t(80045),X=t(59526),Q=t(42579),Y=t(26529),Z=t(51692),J=t(89174);const $=(0,P.A)((0,F.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator"),ee=(0,P.A)((0,F.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var ne=t(61773),te=t(5362);const ie=[{name:"Feature",isFixed:!0},{name:"Detail",isFixed:!0},{name:"Description",isFixed:!0},{name:"Notes",isFixed:!0},{name:"IT Req",isFixed:!0,isEffort:!0},{name:"UX/UI",isFixed:!0,isEffort:!0}],re=e=>{let{rows:n=[],effortColumns:t=[],onRowsChange:a,onColumnsChange:d}=e;const[h,u]=(0,r.useState)(0),[m,g]=(0,r.useState)(10),[p,A]=(0,r.useState)(""),[j,b]=(0,r.useState)(null),[v,y]=(0,r.useState)(""),C=(e,t,r)=>{const l=n.map(n=>n.id===e?t.startsWith("effort-")?(0,i.A)((0,i.A)({},n),{},{efforts:(0,i.A)((0,i.A)({},n.efforts),{},{[t]:Number(r)||0})}):(0,i.A)((0,i.A)({},n),{},{[t]:r}):n);a(l)},k=ie.map((e,n)=>(0,i.A)((0,i.A)({},e),{},{id:"fixed-".concat(n),key:e.name.toLowerCase().replace(/\s+/g,"-"),order:n})),w=t.filter(e=>!k.some(n=>n.key===e.key)),T=[...k,...w,{id:"subtotal-column",name:"Subtotal (days)",key:"subtotal",order:950,isFixed:!0}].sort((e,n)=>e.order-n.order);return(0,F.jsxs)(l.A,{children:[(0,F.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,F.jsx)(l.A,{children:(0,F.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,F.jsx)(f.A,{}),onClick:()=>{const e={id:"row-".concat(Date.now()),feature:"",detail:"",description:"",notes:"",itReq:"",uxUi:"",efforts:{}};a([...n,e])},size:"small",sx:{mr:1},children:"Th\xeam d\xf2ng"})}),(0,F.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(x.A,{size:"small",placeholder:"T\xean c\u1ed9t m\u1edbi",value:p,onChange:e=>A(e.target.value),sx:{mr:1,minWidth:150}}),(0,F.jsx)(o.A,{variant:"outlined",startIcon:(0,F.jsx)(f.A,{}),onClick:()=>{if(!p.trim())return;const e={id:"col-".concat(Date.now()),name:p.trim(),key:"effort-".concat(Date.now()),order:900,isFixed:!1,color:"#ffffff"};d([...t,e]),A("")},size:"small",disabled:!p.trim(),children:"Th\xeam c\u1ed9t"})]})]}),(0,F.jsx)(S.A,{component:c.A,sx:{maxHeight:600,overflow:"auto"},children:(0,F.jsxs)(N.A,{stickyHeader:!0,size:"small",children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{width:50,children:"#"}),T.map(e=>(0,F.jsx)(z.A,{children:(0,F.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)($,{sx:{mr:1,cursor:"move",opacity:e.isFixed?.3:1,"&:hover":{opacity:1}}}),j===e.id?(0,F.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(x.A,{value:v,onChange:e=>y(e.target.value),size:"small",sx:{mr:1}}),(0,F.jsx)(Q.A,{size:"small",onClick:()=>(e=>{const n=t.map(n=>n.id===e?(0,i.A)((0,i.A)({},n),{},{name:v}):n);d(n),b(null)})(e.id),color:"primary",children:(0,F.jsx)(V.A,{fontSize:"small"})}),(0,F.jsx)(Q.A,{size:"small",onClick:()=>b(null),color:"error",children:(0,F.jsx)(ee,{fontSize:"small"})})]}):(0,F.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(s.A,{variant:"subtitle2",children:e.name}),!e.isFixed&&(0,F.jsxs)(l.A,{sx:{ml:1},children:[(0,F.jsx)(Q.A,{size:"small",onClick:()=>{return n=e.id,t=e.name,b(n),void y(t);var n,t},sx:{p:.5},children:(0,F.jsx)(ne.A,{fontSize:"small"})}),(0,F.jsx)(Q.A,{size:"small",onClick:()=>(e=>{const r=t.find(n=>n.id===e);if(null===r||void 0===r||!r.isFixed){const l=t.filter(n=>n.id!==e);d(l);const s=n.map(e=>{const n=e.efforts||{},t=(null===r||void 0===r?void 0:r.key)||"",{[t]:l}=n,s=(0,K.A)(n,[t].map(X.A));return(0,i.A)((0,i.A)({},e),{},{efforts:s})});a(s)}})(e.id),sx:{p:.5},color:"error",children:(0,F.jsx)(te.A,{fontSize:"small"})})]})]})]})},e.id)),(0,F.jsx)(z.A,{width:80,children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,F.jsx)(E.A,{children:n.slice(h*m,h*m+m).map((e,t)=>(0,F.jsxs)(M.A,{hover:!0,children:[(0,F.jsx)(z.A,{children:h*m+t+1}),T.map(n=>{var t;const i="it-req"===n.key||"ux/ui"===n.key||n.key.startsWith("effort-")||!0===n.isEffort;console.log("Column key:",n.key,"isEffort:",i);const r="subtotal"===n.key;return(0,F.jsx)(z.A,{children:i?(0,F.jsx)(x.A,{type:"number",value:"it-req"===n.key?e.itReq||"":"ux/ui"===n.key?e.uxUi||"":(null===(t=e.efforts)||void 0===t?void 0:t[n.key])||"",onChange:t=>{const i=t.target.value;"it-req"===n.key?C(e.id,"itReq",i):"ux/ui"===n.key?C(e.id,"uxUi",i):C(e.id,n.key,i)},size:"small",fullWidth:!0,inputProps:{min:0,step:.5}}):r?(0,F.jsx)(s.A,{variant:"body2",fontWeight:"bold",children:Object.keys(e.efforts||{}).reduce((n,t)=>{var i;return n+(Number(null===(i=e.efforts)||void 0===i?void 0:i[t])||0)},0)+(Number(e.itReq)||0)+(Number(e.uxUi)||0)}):(0,F.jsx)(x.A,{value:e[n.key]||"",onChange:t=>C(e.id,n.key,t.target.value),size:"small",fullWidth:!0,multiline:!0,maxRows:4})},"".concat(e.id,"-").concat(n.key))}),(0,F.jsx)(z.A,{children:(0,F.jsx)(Y.A,{title:"X\xf3a d\xf2ng",children:(0,F.jsx)(Q.A,{size:"small",color:"error",onClick:()=>{return t=e.id,void a(n.filter(e=>e.id!==t));var t},children:(0,F.jsx)(te.A,{fontSize:"small"})})})})]},e.id))}),(0,F.jsxs)(Z.A,{children:[(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{colSpan:ie.length+1,align:"right",children:(0,F.jsx)("strong",{children:"T\u1ed5ng c\u1ed9ng:"})}),t.map(e=>{return(0,F.jsx)(z.A,{children:(0,F.jsx)("strong",{children:(t=e.key,n.reduce((e,n)=>{var i;return e+(Number(null===(i=n.efforts)||void 0===i?void 0:i[t])||0)},0))})},"total-".concat(e.key));var t}),(0,F.jsx)(z.A,{children:(0,F.jsx)("strong",{children:n.reduce((e,n)=>e+(Object.keys(n.efforts||{}).reduce((e,t)=>{var i;return e+(Number(null===(i=n.efforts)||void 0===i?void 0:i[t])||0)},0)+(Number(n.itReq)||0)+(Number(n.uxUi)||0)),0)})}),(0,F.jsx)(z.A,{})]}),(0,F.jsxs)(M.A,{sx:{backgroundColor:"#f5f5f5"},children:[(0,F.jsx)(z.A,{colSpan:ie.length+t.length+1,align:"right",children:(0,F.jsx)("strong",{children:"T\u1ed5ng c\u1ed9ng - Theo giai \u0111o\u1ea1n (ng\xe0y c\xf4ng):"})}),(0,F.jsx)(z.A,{children:(0,F.jsx)("strong",{children:n.reduce((e,n)=>e+(Object.keys(n.efforts||{}).reduce((e,t)=>{var i;return e+(Number(null===(i=n.efforts)||void 0===i?void 0:i[t])||0)},0)+(Number(n.itReq)||0)+(Number(n.uxUi)||0)),0)})}),(0,F.jsx)(z.A,{})]})]})]})}),(0,F.jsx)(J.A,{rowsPerPageOptions:[5,10,25,50],component:"div",count:n.length,rowsPerPage:m,page:h,onPageChange:(e,n)=>{u(n)},onRowsPerPageChange:e=>{g(parseInt(e.target.value,10)),u(0)},labelRowsPerPage:"S\u1ed1 d\xf2ng m\u1ed7i trang:",labelDisplayedRows:e=>{let{from:n,to:t,count:i}=e;return"".concat(n,"-").concat(t," trong t\u1ed5ng s\u1ed1 ").concat(i)}})]})},le=["Project Manager","Business Analyst","Developer","Tester","UI/UX Designer","DevOps","System Architect","Technical Lead"],se=e=>{let{rates:n=[],onRatesChange:t}=e;const[a,d]=(0,r.useState)(0),[h,u]=(0,r.useState)(10),[j,b]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),C=(e,r,l)=>{const s=n.map(n=>n.id===e?(0,i.A)((0,i.A)({},n),{},{[r]:l}):n);t(s)},k=()=>n.reduce((e,n)=>{const t="hour"===n.unit?1:8;return e+(n.rate||0)*t},0);return(0,F.jsxs)(l.A,{children:[(0,F.jsx)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:(0,F.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,F.jsxs)(m.A,{variant:"outlined",size:"small",sx:{minWidth:200},children:[(0,F.jsx)(g.A,{children:"Ch\u1ecdn vai tr\xf2"}),(0,F.jsxs)(p.A,{value:j,onChange:e=>b(e.target.value),label:"Ch\u1ecdn vai tr\xf2",children:[(0,F.jsx)(A.A,{value:"",children:(0,F.jsx)("em",{children:"Ch\u1ecdn vai tr\xf2"})}),le.map(e=>(0,F.jsx)(A.A,{value:e,children:e},e)),(0,F.jsx)(A.A,{value:"custom",children:(0,F.jsx)("em",{children:"+ Th\xeam vai tr\xf2 kh\xe1c"})})]})]}),"custom"===j&&(0,F.jsx)(x.A,{size:"small",label:"T\xean vai tr\xf2",value:v,onChange:e=>y(e.target.value),sx:{minWidth:200}}),(0,F.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,F.jsx)(f.A,{}),onClick:()=>{if(!j&&!v)return;const e="custom"===j?v:j;if(n.some(n=>n.role.toLowerCase()===e.toLowerCase()))return void alert("Vai tr\xf2 n\xe0y \u0111\xe3 t\u1ed3n t\u1ea1i");const i={id:"rate-".concat(Date.now()),role:e,rate:0,unit:"hour",description:""};t([...n,i]),b(""),y("")},disabled:!j||"custom"===j&&!v.trim(),children:"Th\xeam"})]})}),(0,F.jsx)(S.A,{component:c.A,children:(0,F.jsxs)(N.A,{size:"small",children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{width:50,children:"#"}),(0,F.jsx)(z.A,{children:"Vai tr\xf2"}),(0,F.jsx)(z.A,{align:"right",children:"S\u1ed1 gi\u1edd/MD"}),(0,F.jsx)(z.A,{children:"\u0110\u01a1n v\u1ecb"}),(0,F.jsx)(z.A,{align:"right",children:"\u0110\u01a1n gi\xe1"}),(0,F.jsx)(z.A,{align:"right",children:"Th\xe0nh ti\u1ec1n"}),(0,F.jsx)(z.A,{width:80})]})}),(0,F.jsx)(E.A,{children:n.slice(a*h,a*h+h).map((e,i)=>(0,F.jsxs)(M.A,{hover:!0,children:[(0,F.jsx)(z.A,{children:a*h+i+1}),(0,F.jsx)(z.A,{children:(0,F.jsx)(x.A,{value:e.role,onChange:n=>C(e.id,"role",n.target.value),size:"small",fullWidth:!0})}),(0,F.jsx)(z.A,{children:(0,F.jsx)(x.A,{type:"number",value:e.rate||"",onChange:n=>C(e.id,"rate",Number(n.target.value)),size:"small",fullWidth:!0,inputProps:{min:0,step:.01}})}),(0,F.jsx)(z.A,{children:(0,F.jsxs)(p.A,{value:e.unit,onChange:n=>C(e.id,"unit",n.target.value),size:"small",fullWidth:!0,children:[(0,F.jsx)(A.A,{value:"hour",children:"Gi\u1edd"}),(0,F.jsx)(A.A,{value:"day",children:"Ng\xe0y c\xf4ng (MD)"})]})}),(0,F.jsxs)(z.A,{align:"right",children:[new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.rate||0),(0,F.jsxs)(s.A,{variant:"caption",display:"block",color:"text.secondary",children:["/","hour"===e.unit?"gi\u1edd":"MD"]})]}),(0,F.jsxs)(z.A,{align:"right",children:[new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.rate*("hour"===e.unit?1:8)||0),(0,F.jsxs)(s.A,{variant:"caption",display:"block",color:"text.secondary",children:["(","hour"===e.unit?"1 gi\u1edd":"1 MD = 8 gi\u1edd",")"]})]}),(0,F.jsx)(z.A,{align:"center",children:(0,F.jsx)(Y.A,{title:"X\xf3a",children:(0,F.jsx)(Q.A,{size:"small",color:"error",onClick:()=>{return i=e.id,void t(n.filter(e=>e.id!==i));var i},children:(0,F.jsx)(te.A,{fontSize:"small"})})})})]},e.id))}),(0,F.jsx)(Z.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{colSpan:4,align:"right",children:(0,F.jsx)("strong",{children:"T\u1ed5ng c\u1ed9ng:"})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n.reduce((e,n)=>e+(n.rate||0),0))})}),(0,F.jsxs)(z.A,{align:"right",children:[(0,F.jsx)("strong",{children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(k())}),(0,F.jsxs)(s.A,{variant:"caption",display:"block",color:"text.secondary",children:["(",k()," gi\u1edd)"]})]}),(0,F.jsx)(z.A,{})]})})]})}),(0,F.jsx)(J.A,{rowsPerPageOptions:[5,10,25,50],component:"div",count:n.length,rowsPerPage:h,page:a,onPageChange:(e,n)=>{d(n)},onRowsPerPageChange:e=>{u(parseInt(e.target.value,10)),d(0)},labelRowsPerPage:"S\u1ed1 d\xf2ng m\u1ed7i trang:",labelDisplayedRows:e=>{let{from:n,to:t,count:i}=e;return"".concat(n,"-").concat(t," trong t\u1ed5ng s\u1ed1 ").concat(i)}})]})},oe=[],ae=[{id:"rate-1",role:"Developer",rate:50,unit:"hour",description:"Senior Developer"},{id:"rate-2",role:"Designer",rate:40,unit:"hour",description:"UI/UX Designer"}],de=e=>{let{mode:n,onModeChange:t,onEstimationDataChange:o,initialData:a}=e;const[d,h]=(0,r.useState)([]),[x,u]=(0,r.useState)(oe),[g,p]=(0,r.useState)(ae),[A,f]=(0,r.useState)({open:!1,message:"",severity:"success"});(0,r.useEffect)(()=>{if(null!==a&&void 0!==a&&a.rows&&a.rows.length>0&&0===d.length){const e=a.rows.map(e=>({id:"row-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,5)),feature:e.feature||"",detail:e.detail||"",description:e.description||"",notes:e.note||"",itReq:"",uxUi:"",efforts:{}}));h(e)}else 0===d.length&&h([j()])},[d.length,a]);const j=()=>({id:"row-".concat(Date.now()),feature:"",detail:"",description:"",notes:"",itReq:"",uxUi:"",efforts:{}}),b=(e,n)=>{h(e),u(n),o&&o({mode:"fixed",rows:e,columns:n})},v=()=>{f((0,i.A)((0,i.A)({},A),{},{open:!1}))};return(0,F.jsxs)(l.A,{sx:{mt:3},children:[(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"B\u1ea3ng \u01b0\u1edbc t\xednh"}),(0,F.jsx)(c.A,{elevation:0,sx:{p:3,mb:3,border:"1px solid #e0e0e0",borderRadius:1},children:(0,F.jsxs)(m.A,{component:"fieldset",fullWidth:!0,children:[(0,F.jsx)(H.A,{component:"legend",sx:{mb:2,fontWeight:"bold",color:"text.primary"},children:"Ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c \u01b0\u1edbc t\xednh"}),(0,F.jsxs)(R.A,{row:!0,"aria-label":"estimation-mode",name:"estimation-mode",value:n,onChange:e=>{const n=e.target.value;t(n),f({open:!0,message:"\u0110\xe3 chuy\u1ec3n sang ch\u1ebf \u0111\u1ed9 ".concat("fixed"===n?"Fix Price":"Time & Material"),severity:"info"})},children:[(0,F.jsx)(L.A,{value:"fixed",control:(0,F.jsx)(G.A,{color:"primary"}),label:"Fix Price",sx:{mr:4,"& .MuiFormControlLabel-label":{fontWeight:500}}}),(0,F.jsx)(L.A,{value:"timeAndMaterial",control:(0,F.jsx)(G.A,{color:"primary"}),label:"Time & Material",sx:{"& .MuiFormControlLabel-label":{fontWeight:500}}})]}),(0,F.jsx)(O.A,{sx:{my:2}}),(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"fixed"===n?"Ch\u1ebf \u0111\u1ed9 Fix Price: T\u1ea1o b\u1ea3ng \u01b0\u1edbc t\xednh chi ti\u1ebft v\u1edbi c\xe1c c\u1ed9t effort t\xf9y ch\u1ec9nh.":"Ch\u1ebf \u0111\u1ed9 Time & Material: T\u1ea1o b\u1ea3ng \u01b0\u1edbc t\xednh d\u1ef1a tr\xean s\u1ed1 gi\u1edd v\xe0 \u0111\u01a1n gi\xe1."})]})}),"fixed"===n?(0,F.jsx)(re,{rows:d,effortColumns:x,onRowsChange:e=>b(e,x),onColumnsChange:e=>b(d,e)}):(0,F.jsx)(se,{rates:g,onRatesChange:e=>{p(e),o&&o({mode:"timeAndMaterial",rates:e})}}),(0,F.jsx)(U.A,{open:A.open,autoHideDuration:3e3,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,F.jsx)(_.A,{onClose:v,severity:A.severity,children:A.message})})]})},ce=e=>{var n;let{open:t,onClose:a,onSave:d,customers:h,deals:f,requirements:j,templates:b}=e;const[P,H]=(0,r.useState)(0),[R,L]=(0,r.useState)({}),[G,O]=(0,r.useState)("fixed"),[U,_]=(0,r.useState)({name:"",customer:"",dealId:0,dealName:"",requirementId:0,requirementName:"",status:"draft",createdDate:(new Date).toISOString().split("T")[0],note:"",items:[],totalEffort:0,totalAmount:0,templateId:"",templateName:"",estimationMode:"fixed"});(0,r.useEffect)(()=>{t&&L({})},[t]);const[K,X]=(0,r.useState)(f),[Q,Y]=(0,r.useState)(j),[Z,J]=(0,r.useState)([]);(0,r.useEffect)(()=>{U.customer?X(f.filter(e=>e.customer===U.customer)):X(f)},[U.customer,f]),(0,r.useEffect)(()=>{U.dealId?Y(j.filter(e=>e.dealId===U.dealId)):Y(j)},[U.dealId,j]),(0,r.useEffect)(()=>{if(U.requirementId){const e=j.find(e=>e.id===U.requirementId);if(e&&e.features&&e.features.length>0){console.log("Requirement features found:",e.features);const n=e.features.map((e,n)=>({id:n+1,feature:e.feature||"",detail:e.detail||"",description:e.description||"",note:e.notes||e.note||"",frontendEffort:0,backendEffort:0,qcEffort:0,pmEffort:0,totalMD:0,totalMM:0}));J(n)}else console.log("No features found for requirement ID:",U.requirementId),J([])}else J([])},[U.requirementId,j]);const $=e=>{J(e);const n=e.reduce((e,n)=>e+n.totalMD,0),t=5e5*n;_((0,i.A)((0,i.A)({},U),{},{totalEffort:n,totalAmount:t}))};return(0,F.jsxs)(v.A,{open:t,onClose:a,maxWidth:"lg",fullWidth:!0,children:[(0,F.jsx)(y.A,{children:"T\u1ea1o b\xe1o gi\xe1 m\u1edbi"}),(0,F.jsxs)(C.A,{children:[(0,F.jsx)(k.A,{activeStep:P,sx:{pt:3,pb:5},children:["Th\xf4ng tin b\xe1o gi\xe1","B\u1ea3ng \u01b0\u1edbc t\xednh","Xem tr\u01b0\u1edbc b\xe1o gi\xe1"].map(e=>(0,F.jsx)(w.A,{children:(0,F.jsx)(T.A,{children:e})},e))}),0===P&&(0,F.jsxs)(l.A,{children:[(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,F.jsxs)(l.A,{sx:{mb:3,border:"1px solid #e0e0e0",borderRadius:1,p:2,bgcolor:"#f9f9f9"},children:[(0,F.jsxs)(s.A,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(q.A,{fontSize:"small",sx:{mr:1}}),"Ch\u1ecdn m\u1eabu b\xe1o gi\xe1"]}),(0,F.jsxs)(m.A,{fullWidth:!0,margin:"dense",required:!0,error:R.templateId&&!U.templateId,children:[(0,F.jsx)(g.A,{id:"template-select-label",children:"M\u1eabu b\xe1o gi\xe1"}),(0,F.jsxs)(p.A,{labelId:"template-select-label",id:"template-select",value:U.templateId||"",label:"M\u1eabu b\xe1o gi\xe1",onChange:e=>{const n=e.target.value,t=b.find(e=>e.id===n);_((0,i.A)((0,i.A)({},U),{},{templateId:n,templateName:(null===t||void 0===t?void 0:t.name)||""})),L(e=>(0,i.A)((0,i.A)({},e),{},{templateId:!0}))},onBlur:()=>L(e=>(0,i.A)((0,i.A)({},e),{},{templateId:!0})),size:"small",children:[(0,F.jsx)(A.A,{value:"",children:(0,F.jsx)("em",{children:"Ch\u1ecdn m\u1eabu b\xe1o gi\xe1"})}),b.map(e=>(0,F.jsxs)(A.A,{value:e.id,children:[e.name," ","internal"===e.type?"(N\u1ed9i b\u1ed9)":"(Kh\xe1ch h\xe0ng)"]},e.id))]}),R.templateId&&!U.templateId&&(0,F.jsx)(I.A,{children:"Vui l\xf2ng ch\u1ecdn m\u1eabu b\xe1o gi\xe1"})]})]}),(0,F.jsx)(x.A,{label:"T\xean b\xe1o gi\xe1",fullWidth:!0,required:!0,value:U.name||"",onChange:e=>_((0,i.A)((0,i.A)({},U),{},{name:e.target.value})),margin:"normal",size:"small",placeholder:"Nh\u1eadp t\xean b\xe1o gi\xe1"}),(0,F.jsxs)(l.A,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[(0,F.jsx)(u.A,{options:h,value:U.customer||null,onChange:(e,n)=>{_((0,i.A)((0,i.A)({},U),{},{customer:n||"",dealId:0,dealName:"",requirementId:0,requirementName:""}))},renderInput:e=>(0,F.jsx)(x.A,(0,i.A)((0,i.A)({},e),{},{label:"Kh\xe1ch h\xe0ng",size:"small",sx:{minWidth:250,flex:1},required:!0})),sx:{minWidth:250,flex:1}}),(0,F.jsx)(u.A,{options:K,getOptionLabel:e=>e.name,value:U.dealId&&K.find(e=>e.id===U.dealId)||null,onChange:(e,n)=>{_((0,i.A)((0,i.A)({},U),{},{dealId:(null===n||void 0===n?void 0:n.id)||0,dealName:(null===n||void 0===n?void 0:n.name)||"",requirementId:0,requirementName:""}))},renderInput:e=>(0,F.jsx)(x.A,(0,i.A)((0,i.A)({},e),{},{label:"Deal",size:"small",sx:{minWidth:250,flex:1},required:!0})),sx:{minWidth:250,flex:1},disabled:!U.customer})]}),(0,F.jsx)(l.A,{sx:{mb:3},children:(0,F.jsx)(u.A,{options:Q,getOptionLabel:e=>e.name,value:U.requirementId&&Q.find(e=>e.id===U.requirementId)||null,onChange:(e,n)=>{_((0,i.A)((0,i.A)({},U),{},{requirementId:(null===n||void 0===n?void 0:n.id)||0,requirementName:(null===n||void 0===n?void 0:n.name)||""}))},renderInput:e=>(0,F.jsx)(x.A,(0,i.A)((0,i.A)({},e),{},{label:"Requirement",size:"small",required:!0})),disabled:!U.dealId})}),(0,F.jsx)(x.A,{label:"Tr\u1ea1ng th\xe1i",value:"Draft",size:"small",disabled:!0,fullWidth:!0,margin:"normal"}),(0,F.jsx)(x.A,{label:"Ghi ch\xfa",multiline:!0,rows:4,fullWidth:!0,placeholder:"Nh\u1eadp ghi ch\xfa (n\u1ebfu c\xf3)...",variant:"outlined",sx:{mb:2,mt:2},value:U.note||"",onChange:e=>_((0,i.A)((0,i.A)({},U),{},{note:e.target.value}))})]}),1===P&&(0,F.jsx)(l.A,{children:(0,F.jsxs)(c.A,{variant:"outlined",sx:{p:2,mb:2},children:[(0,F.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c \u01b0\u1edbc t\xednh"}),(0,F.jsx)(de,{mode:G,onModeChange:e=>{O(e),_(n=>(0,i.A)((0,i.A)({},n),{},{estimationMode:e}))},initialData:{rows:Z},onEstimationDataChange:e=>{if("fixed"===e.mode){const n=e.rows.map(e=>({id:e.id,feature:e.feature||"",detail:e.detail||"",description:e.description||"",note:e.notes||"",frontendEffort:0,backendEffort:0,qcEffort:0,pmEffort:0,totalMD:Object.values(e.efforts||{}).reduce((e,n)=>e+(Number(n)||0),0),totalMM:0}));J(n),$(n),_(n=>(0,i.A)((0,i.A)({},n),{},{estimationMode:"fixed",estimationConfig:{rows:e.rows,columns:e.columns}}))}else{const n=e.rates.map(e=>({id:e.id,feature:e.role||"",detail:e.description||"",description:"",note:"",frontendEffort:0,backendEffort:0,qcEffort:0,pmEffort:0,totalMD:e.rate||0,totalMM:0}));J(n),$(n),_(n=>(0,i.A)((0,i.A)({},n),{},{estimationMode:"timeAndMaterial",estimationConfig:{rates:e.rates}}))}}})]})}),2===P&&(0,F.jsxs)(l.A,{children:[(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Xem tr\u01b0\u1edbc b\xe1o gi\xe1"}),(0,F.jsxs)(c.A,{variant:"outlined",sx:{p:3},children:[(0,F.jsx)(s.A,{variant:"h5",gutterBottom:!0,sx:{mb:3,textAlign:"center",fontWeight:"bold"},children:"B\xc1O GI\xc1 D\u1ecaCH V\u1ee4"}),(0,F.jsxs)(l.A,{sx:{mb:3},children:[(0,F.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,F.jsxs)(l.A,{sx:{pl:2},children:[(0,F.jsxs)(s.A,{children:[(0,F.jsx)("strong",{children:"T\xean kh\xe1ch h\xe0ng:"})," ",U.customer]}),(0,F.jsxs)(s.A,{children:[(0,F.jsx)("strong",{children:"D\u1ef1 \xe1n:"})," ",U.dealName]}),(0,F.jsxs)(s.A,{children:[(0,F.jsx)("strong",{children:"Y\xeau c\u1ea7u:"})," ",U.requirementName]})]})]}),(0,F.jsxs)(l.A,{sx:{mb:3},children:[(0,F.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Chi ti\u1ebft b\xe1o gi\xe1"}),(0,F.jsx)(S.A,{component:c.A,variant:"outlined",children:(0,F.jsxs)(N.A,{size:"small",children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:"STT"}),(0,F.jsx)(z.A,{children:"H\u1ea1ng m\u1ee5c"}),(0,F.jsx)(z.A,{children:"M\xf4 t\u1ea3"}),(0,F.jsx)(z.A,{children:"S\u1ed1 ng\xe0y"}),(0,F.jsx)(z.A,{children:"\u0110\u01a1n gi\xe1"}),(0,F.jsx)(z.A,{children:"Th\xe0nh ti\u1ec1n"})]})}),(0,F.jsxs)(E.A,{children:[Z.map((e,n)=>(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:n+1}),(0,F.jsx)(z.A,{children:e.feature}),(0,F.jsx)(z.A,{children:e.detail}),(0,F.jsx)(z.A,{children:e.totalMD}),(0,F.jsx)(z.A,{children:"500,000 VN\u0110/ng\xe0y"}),(0,F.jsxs)(z.A,{children:[(5e5*e.totalMD).toLocaleString("vi-VN")," VN\u0110"]})]},e.id)),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{colSpan:5,align:"right",children:(0,F.jsx)("strong",{children:"T\u1ed5ng c\u1ed9ng:"})}),(0,F.jsx)(z.A,{children:(0,F.jsxs)("strong",{children:[null===(n=U.totalAmount)||void 0===n?void 0:n.toLocaleString("vi-VN")," VN\u0110"]})})]})]})]})})]}),(0,F.jsxs)(l.A,{sx:{mb:3},children:[(0,F.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Ghi ch\xfa"}),(0,F.jsx)(s.A,{variant:"body2",sx:{fontStyle:"italic"},children:U.note||"Kh\xf4ng c\xf3 ghi ch\xfa"})]})]})]})]}),(0,F.jsxs)(W.A,{sx:{p:2,pt:3},children:[(0,F.jsx)(o.A,{onClick:a,children:"H\u1ee7y"}),P>0&&(0,F.jsx)(o.A,{onClick:()=>{H(e=>e-1)},children:"Quay l\u1ea1i"}),P<2?(0,F.jsx)(o.A,{variant:"contained",onClick:()=>{H(e=>e+1)},endIcon:(0,F.jsx)(B,{}),disabled:0===P&&!(U.name&&U.customer&&U.dealId&&U.requirementId&&U.templateId),children:1===P?"Xem tr\u01b0\u1edbc b\xe1o gi\xe1":"Ti\u1ebfp theo"}):(0,F.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>{U.name&&U.customer&&U.templateId&&d((0,i.A)((0,i.A)({},U),{},{items:Z}))},startIcon:(0,F.jsx)(V.A,{}),children:"L\u01b0u b\xe1o gi\xe1"})]})]})};var he=t(83759),xe=t(74917),ue=t(4573);const me=e=>{let{items:n,onItemsChange:t,readOnly:a=!1,disableFeatureFields:d=!1}=e;const[h,u]=(0,r.useState)(n);(0,r.useEffect)(()=>{u(n)},[n]);const m=(e,n,r)=>{const l=h.map(t=>{if(t.id===e){const e=(0,i.A)((0,i.A)({},t),{},{[n]:r});if(["frontendEffort","backendEffort","qcEffort","pmEffort"].includes(n)){const t=("frontendEffort"===n?Number(r)||0:e.frontendEffort)+("backendEffort"===n?Number(r)||0:e.backendEffort)+("qcEffort"===n?Number(r)||0:e.qcEffort)+("pmEffort"===n?Number(r)||0:e.pmEffort),l=t/20;return(0,i.A)((0,i.A)({},e),{},{totalMD:t,totalMM:l})}return e}return t});u(l),t(l)},g=h.reduce((e,n)=>e+n.frontendEffort,0),p=h.reduce((e,n)=>e+n.backendEffort,0),A=h.reduce((e,n)=>e+n.qcEffort,0),j=h.reduce((e,n)=>e+n.pmEffort,0),b=h.reduce((e,n)=>e+n.totalMD,0),v=h.reduce((e,n)=>e+n.totalMM,0);return(0,F.jsxs)(l.A,{children:[(0,F.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2,alignItems:"center"},children:[(0,F.jsx)(s.A,{variant:"h6",children:"Chi ti\u1ebft \u01b0\u1edbc t\xednh"}),!a&&(0,F.jsx)(o.A,{variant:"outlined",startIcon:(0,F.jsx)(f.A,{}),onClick:()=>{const e={id:h.length>0?Math.max(...h.map(e=>e.id))+1:1,feature:"",detail:"",description:"",note:"",frontendEffort:0,backendEffort:0,qcEffort:0,pmEffort:0,totalMD:0,totalMM:0},n=[...h,e];u(n),t(n)},size:"small",children:"Th\xeam d\xf2ng"})]}),(0,F.jsx)(l.A,{sx:{width:"100%",overflow:"hidden"},children:(0,F.jsx)(S.A,{component:c.A,variant:"outlined",sx:{maxWidth:"100%",overflowX:"auto"},children:(0,F.jsxs)(N.A,{size:"small",sx:{tableLayout:"fixed"},children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{width:"50px",sx:{position:"sticky",left:0,backgroundColor:"#fff",zIndex:1},children:"STT"}),(0,F.jsx)(z.A,{width:"150px",sx:{position:"sticky",left:"50px",backgroundColor:"#fff",zIndex:1},children:"Feature"}),(0,F.jsx)(z.A,{width:"200px",sx:{position:"sticky",left:"200px",backgroundColor:"#fff",zIndex:1},children:"Chi ti\u1ebft"}),(0,F.jsx)(z.A,{width:"250px",sx:{position:"sticky",left:"400px",backgroundColor:"#fff",zIndex:1},children:"M\xf4 t\u1ea3"}),(0,F.jsx)(z.A,{width:"200px",sx:{position:"sticky",left:"650px",backgroundColor:"#fff",zIndex:1},children:"Ghi ch\xfa"}),(0,F.jsx)(z.A,{align:"right",width:"80px",children:"FE (MD)"}),(0,F.jsx)(z.A,{align:"right",width:"80px",children:"BE (MD)"}),(0,F.jsx)(z.A,{align:"right",width:"80px",children:"QC (MD)"}),(0,F.jsx)(z.A,{align:"right",width:"80px",children:"PM (MD)"}),(0,F.jsx)(z.A,{align:"right",width:"80px",children:"T\u1ed5ng MD"}),(0,F.jsx)(z.A,{align:"right",width:"80px",children:"T\u1ed5ng MM"}),!a&&(0,F.jsx)(z.A,{align:"center",width:"80px",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,F.jsxs)(E.A,{children:[h.map((e,n)=>(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{sx:{position:"sticky",left:0,backgroundColor:"#fff",zIndex:1},children:n+1}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"50px",backgroundColor:"#fff",zIndex:1},children:a?(0,F.jsx)(Y.A,{title:e.feature,arrow:!0,placement:"top",children:(0,F.jsx)("div",{style:{maxWidth:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.feature})}):(0,F.jsx)(x.A,{variant:"outlined",size:"small",value:e.feature,onChange:n=>m(e.id,"feature",n.target.value),fullWidth:!0,multiline:!0,maxRows:3,disabled:d})}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"200px",backgroundColor:"#fff",zIndex:1},children:a?(0,F.jsx)(Y.A,{title:e.detail,arrow:!0,placement:"top",children:(0,F.jsx)("div",{style:{maxWidth:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.detail})}):(0,F.jsx)(x.A,{variant:"outlined",size:"small",value:e.detail,onChange:n=>m(e.id,"detail",n.target.value),fullWidth:!0,multiline:!0,maxRows:3,disabled:d})}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"400px",backgroundColor:"#fff",zIndex:1},children:a?(0,F.jsx)(Y.A,{title:e.description,arrow:!0,placement:"top",children:(0,F.jsx)("div",{style:{maxWidth:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.description})}):(0,F.jsx)(x.A,{variant:"outlined",size:"small",value:e.description,onChange:n=>m(e.id,"description",n.target.value),fullWidth:!0,multiline:!0,maxRows:3,disabled:d})}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"650px",backgroundColor:"#fff",zIndex:1},children:a?(0,F.jsx)(Y.A,{title:e.note,arrow:!0,placement:"top",children:(0,F.jsx)("div",{style:{maxWidth:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.note})}):(0,F.jsx)(x.A,{variant:"outlined",size:"small",value:e.note,onChange:n=>m(e.id,"note",n.target.value),fullWidth:!0,multiline:!0,maxRows:3,disabled:d})}),(0,F.jsx)(z.A,{align:"right",children:a?e.frontendEffort:(0,F.jsx)(x.A,{variant:"outlined",size:"small",type:"number",value:e.frontendEffort,onChange:n=>m(e.id,"frontendEffort",Number(n.target.value)),inputProps:{min:0},sx:{width:"50px","& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"& input[type=number]":{"-moz-appearance":"textfield"}}})}),(0,F.jsx)(z.A,{align:"right",children:a?e.backendEffort:(0,F.jsx)(x.A,{variant:"outlined",size:"small",type:"number",value:e.backendEffort,onChange:n=>m(e.id,"backendEffort",Number(n.target.value)),inputProps:{min:0},sx:{width:"50px","& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"& input[type=number]":{"-moz-appearance":"textfield"}}})}),(0,F.jsx)(z.A,{align:"right",children:a?e.qcEffort:(0,F.jsx)(x.A,{variant:"outlined",size:"small",type:"number",value:e.qcEffort,onChange:n=>m(e.id,"qcEffort",Number(n.target.value)),inputProps:{min:0},sx:{width:"50px","& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"& input[type=number]":{"-moz-appearance":"textfield"}}})}),(0,F.jsx)(z.A,{align:"right",children:a?e.pmEffort:(0,F.jsx)(x.A,{variant:"outlined",size:"small",type:"number",value:e.pmEffort,onChange:n=>m(e.id,"pmEffort",Number(n.target.value)),inputProps:{min:0},sx:{width:"50px","& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"& input[type=number]":{"-moz-appearance":"textfield"}}})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:e.totalMD.toFixed(1)})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:e.totalMM.toFixed(2)})}),!a&&(0,F.jsx)(z.A,{align:"center",children:(0,F.jsx)(Q.A,{size:"small",color:"error",onClick:()=>(e=>{const n=h.filter(n=>n.id!==e);u(n),t(n)})(e.id),disabled:h.length<=1,children:(0,F.jsx)(te.A,{fontSize:"small"})})})]},e.id)),(0,F.jsxs)(M.A,{sx:{backgroundColor:"action.hover"},children:[(0,F.jsx)(z.A,{sx:{position:"sticky",left:0,backgroundColor:"#f5f5f5",zIndex:1}}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"50px",backgroundColor:"#f5f5f5",zIndex:1}}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"200px",backgroundColor:"#f5f5f5",zIndex:1}}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"400px",backgroundColor:"#f5f5f5",zIndex:1}}),(0,F.jsx)(z.A,{sx:{position:"sticky",left:"650px",backgroundColor:"#f5f5f5",zIndex:1},align:"right",children:(0,F.jsx)("strong",{children:"T\u1ed5ng"})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:g.toFixed(1)})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:p.toFixed(1)})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:A.toFixed(1)})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:j.toFixed(1)})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:b.toFixed(1)})}),(0,F.jsx)(z.A,{align:"right",children:(0,F.jsx)("strong",{children:v.toFixed(2)})}),!a&&(0,F.jsx)(z.A,{})]})]})]})})}),(0,F.jsxs)(l.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end",gap:2},children:[(0,F.jsxs)(s.A,{variant:"body2",children:[(0,F.jsx)("strong",{children:"T\u1ed5ng MD:"})," ",b.toFixed(1)]}),(0,F.jsxs)(s.A,{variant:"body2",children:[(0,F.jsx)("strong",{children:"T\u1ed5ng MM:"})," ",v.toFixed(2)]}),(0,F.jsxs)(s.A,{variant:"body2",children:[(0,F.jsx)("strong",{children:"T\u1ed5ng ti\u1ec1n:"})," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(5e5*b)]})]})]})},ge=e=>{let{open:n,onClose:t,quotation:i}=e;if(!i)return null;return(0,F.jsxs)(v.A,{open:n,onClose:t,maxWidth:"lg",fullWidth:!0,children:[(0,F.jsx)(y.A,{children:(0,F.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsx)(s.A,{variant:"h6",children:"Chi ti\u1ebft b\xe1o gi\xe1"}),(e=>{const n={draft:{label:"Draft",color:"default"},sent:{label:"\u0110\xe3 g\u1eedi",color:"info"},approved:{label:"\u0110\xe3 duy\u1ec7t",color:"success"},rejected:{label:"T\u1eeb ch\u1ed1i",color:"error"}}[e];return(0,F.jsx)(he.A,{label:n.label,color:n.color,size:"small"})})(i.status)]})}),(0,F.jsxs)(C.A,{children:[(0,F.jsxs)(c.A,{variant:"outlined",sx:{p:3,mb:3},children:[(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,F.jsxs)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"T\xean b\xe1o gi\xe1"}),(0,F.jsx)(s.A,{variant:"body1",sx:{fontWeight:"medium"},children:i.name})]}),(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"Kh\xe1ch h\xe0ng"}),(0,F.jsx)(s.A,{variant:"body1",children:i.customer})]}),(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"Deal"}),(0,F.jsx)(s.A,{variant:"body1",children:i.dealName})]}),(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"Requirement"}),(0,F.jsx)(s.A,{variant:"body1",children:i.requirementName})]})]}),(0,F.jsxs)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:3,mt:3},children:[(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"Ng\xe0y t\u1ea1o"}),(0,F.jsx)(s.A,{variant:"body1",children:i.createdDate})]}),(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"T\u1ed5ng Effort"}),(0,F.jsxs)(s.A,{variant:"body1",children:[i.totalEffort," MD"]})]}),(0,F.jsxs)(l.A,{sx:{minWidth:"200px",flex:1},children:[(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"T\u1ed5ng ti\u1ec1n"}),(0,F.jsx)(s.A,{variant:"body1",sx:{fontWeight:"bold",color:"primary.main"},children:(r=i.totalAmount,new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r))})]})]})]}),i.note&&(0,F.jsxs)(c.A,{variant:"outlined",sx:{p:3,mb:3},children:[(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Ghi ch\xfa"}),(0,F.jsx)(s.A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:i.note})]}),(0,F.jsx)(O.A,{sx:{my:3}}),(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main",mb:2},children:"Chi ti\u1ebft \u01b0\u1edbc t\xednh"}),i.items&&i.items.length>0?(0,F.jsx)(me,{items:i.items,onItemsChange:()=>{},readOnly:!0}):(0,F.jsx)(c.A,{variant:"outlined",sx:{p:2},children:(0,F.jsx)(s.A,{variant:"body1",color:"text.secondary",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u \u01b0\u1edbc t\xednh."})}),i.executiveSummary&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(O.A,{sx:{my:3}}),(0,F.jsxs)(c.A,{variant:"outlined",sx:{p:3,mb:3},children:[(0,F.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"T\xf3m t\u1eaft \u0111i\u1ec1u h\xe0nh"}),(0,F.jsx)(s.A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:i.executiveSummary})]})]})]}),(0,F.jsxs)(W.A,{sx:{p:2},children:[(0,F.jsx)(o.A,{onClick:t,children:"\u0110\xf3ng"}),(0,F.jsx)(o.A,{startIcon:(0,F.jsx)(ne.A,{}),variant:"outlined",onClick:()=>console.log("Edit quotation"),children:"Ch\u1ec9nh s\u1eeda"}),(0,F.jsx)(o.A,{startIcon:(0,F.jsx)(xe.A,{}),variant:"outlined",color:"secondary",onClick:()=>console.log("Download PDF"),children:"T\u1ea3i PDF"}),(0,F.jsx)(o.A,{startIcon:(0,F.jsx)(ue.A,{}),variant:"contained",color:"primary",onClick:()=>console.log("Send email"),children:"G\u1eedi Email"})]})]});var r};var pe=t(94084);const Ae=e=>{let{open:n,onClose:t,quotation:a,onSaveDraft:d,onExportPdf:c}=e;const[h,x]=(0,r.useState)([""]);(0,r.useEffect)(()=>{if(a){const e=a.pages;e&&Array.isArray(e)&&e.length>0?x(e):x(['\n          <div style="padding: 20mm;">\n            <h1 style="text-align: center; margin-bottom: 30px;">B\xc1O GI\xc1 D\u1ecaCH V\u1ee4</h1>\n            <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">\n              <div>\n                <p><strong>Kh\xe1ch h\xe0ng:</strong> '.concat(a.customer||"Qu\xfd kh\xe1ch h\xe0ng","</p>\n                <p><strong>D\u1ef1 \xe1n:</strong> ").concat(a.name||"D\u1ef1 \xe1n ph\u1ea7n m\u1ec1m",'</p>\n              </div>\n              <div style="text-align: right;">\n                <p><strong>M\xe3 b\xe1o gi\xe1:</strong> ').concat(a.id||"N/A","</p>\n                <p><strong>Ng\xe0y t\u1ea1o:</strong> ").concat(new Date(a.createdDate||new Date).toLocaleDateString("vi-VN"),'</p>\n              </div>\n            </div>\n            \n            \x3c!-- Quotation items table --\x3e\n            <div style="margin: 20px 0;">\n              <h3>CHI TI\u1ebeT D\u1ecaCH V\u1ee4</h3>\n              <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">\n                <thead>\n                  <tr style="background-color: #f5f5f5;">\n                    <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">STT</th>\n                    <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">M\xf4 t\u1ea3 c\xf4ng vi\u1ec7c</th>\n                    <th style="border: 1px solid #ddd; padding: 8px; text-align: right;">S\u1ed1 ng\xe0y c\xf4ng</th>\n                    <th style="border: 1px solid #ddd; padding: 8px; text-align: right;">\u0110\u01a1n gi\xe1 (VND)</th>\n                    <th style="border: 1px solid #ddd; padding: 8px; text-align: right;">Th\xe0nh ti\u1ec1n (VND)</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ').concat((a.items||[]).map((e,n)=>{const t=e.qcEffort||0,i=e.rate||0,r=t*i;return'\n                      <tr>\n                        <td style="border: 1px solid #ddd; padding: 8px;">'.concat(n+1,'</td>\n                        <td style="border: 1px solid #ddd; padding: 8px;">').concat(e.description||"",'</td>\n                        <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(t,'</td>\n                        <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(i.toLocaleString("vi-VN"),'</td>\n                        <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(r.toLocaleString("vi-VN"),"</td>\n                      </tr>\n                    ")}).join(""),'\n                  <tr>\n                    <td colspan="4" style="border: 1px solid #ddd; padding: 8px; text-align: right;"><strong>T\u1ed5ng c\u1ed9ng:</strong></td>\n                    <td style="border: 1px solid #ddd; padding: 8px; text-align: right; font-weight: bold;">\n                      ').concat((a.items||[]).reduce((e,n)=>e+(n.qcEffort||0)*(n.rate||0),0).toLocaleString("vi-VN"),' VND\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            \n            <div style="margin-top: 30px;">\n              <div style="margin-bottom: 20px;">\n                <h3>\u0110I\u1ec0U KHO\u1ea2N THANH TO\xc1N</h3>\n                <div>').concat(a.paymentTerms||"Thanh to\xe1n 100% khi k\xfd h\u1ee3p \u0111\u1ed3ng.",'</div>\n              </div>\n              <div style="margin-top: 60px; display: flex; justify-content: space-between;">\n                <div style="text-align: center; width: 50%;">\n                  <p><strong>\u0110\u1ea0I DI\u1ec6N B\xcaN B\xc1N</strong></p>\n                  <p style="font-style: italic; margin-top: 50px;">(K\xfd, ghi r\xf5 h\u1ecd t\xean)</p>\n                </div>\n                <div style="text-align: center; width: 50%;">\n                  <p><strong>\u0110\u1ea0I DI\u1ec6N B\xcaN MUA</strong></p>\n                  <p style="font-style: italic; margin-top: 50px;">(K\xfd, ghi r\xf5 h\u1ecd t\xean)</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          ')])}},[a]);return(0,F.jsxs)(v.A,{open:n,onClose:t,maxWidth:"xl",fullWidth:!0,sx:{"& .MuiDialog-paper":{maxWidth:"95%",height:"95vh"}},children:[(0,F.jsx)(y.A,{children:(0,F.jsx)(s.A,{variant:"h6",children:"Xem tr\u01b0\u1edbc v\xe0 ch\u1ec9nh s\u1eeda b\xe1o gi\xe1"})}),(0,F.jsx)(C.A,{sx:{p:0,display:"flex",flexDirection:"column",height:"100%"},children:a?(0,F.jsx)(pe.z,{initialContent:h,onSave:e=>{x(e)},onExportPdf:()=>c&&c(a)}):(0,F.jsx)(l.A,{sx:{p:3,textAlign:"center"},children:(0,F.jsx)(s.A,{children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u b\xe1o gi\xe1..."})})}),(0,F.jsxs)(W.A,{children:[(0,F.jsx)(o.A,{onClick:t,color:"inherit",children:"\u0110\xf3ng"}),(0,F.jsx)(o.A,{onClick:()=>{if(d&&a){const e=(0,i.A)((0,i.A)({},a),h.length>0&&{pages:h});d(e)}},variant:"contained",color:"primary",startIcon:(0,F.jsx)(V.A,{}),disabled:!a,children:"L\u01b0u nh\xe1p"})]})]})};var fe=t(3665);const je=e=>{let{quotations:n,page:t,rowsPerPage:i,totalCount:r,onPageChange:l,onRowsPerPageChange:s,onViewDetail:o,onDownloadPdf:a,onSendEmail:d}=e;const h=e=>{const n={draft:{label:"Draft",color:"default"},sent:{label:"\u0110\xe3 g\u1eedi",color:"info"},approved:{label:"\u0110\xe3 duy\u1ec7t",color:"success"},rejected:{label:"T\u1eeb ch\u1ed1i",color:"error"}}[e];return(0,F.jsx)(he.A,{label:n.label,color:n.color,size:"small"})};return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(S.A,{component:c.A,children:[(0,F.jsxs)(N.A,{children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:"T\xean b\xe1o gi\xe1"}),(0,F.jsx)(z.A,{children:"Kh\xe1ch h\xe0ng"}),(0,F.jsx)(z.A,{children:"Deal"}),(0,F.jsx)(z.A,{children:"Tr\u1ea1ng th\xe1i"}),(0,F.jsx)(z.A,{children:"Ng\xe0y t\u1ea1o"}),(0,F.jsx)(z.A,{align:"right",children:"T\u1ed5ng Effort (MD)"}),(0,F.jsx)(z.A,{align:"right",children:"T\u1ed5ng ti\u1ec1n"}),(0,F.jsx)(z.A,{align:"center",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,F.jsxs)(E.A,{children:[n.map(e=>{return(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:e.name}),(0,F.jsx)(z.A,{children:e.customer}),(0,F.jsx)(z.A,{children:e.dealName}),(0,F.jsx)(z.A,{children:h(e.status)}),(0,F.jsx)(z.A,{children:e.createdDate}),(0,F.jsx)(z.A,{align:"right",children:e.totalEffort}),(0,F.jsx)(z.A,{align:"right",children:(n=e.totalAmount,new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n))}),(0,F.jsxs)(z.A,{align:"center",children:[(0,F.jsx)(Q.A,{size:"small",color:"primary",onClick:()=>o(e.id),title:"Xem chi ti\u1ebft",children:(0,F.jsx)(fe.A,{fontSize:"small"})}),(0,F.jsx)(Q.A,{size:"small",color:"secondary",onClick:()=>a(e.id),title:"T\u1ea3i PDF",children:(0,F.jsx)(xe.A,{fontSize:"small"})}),(0,F.jsx)(Q.A,{size:"small",color:"info",onClick:()=>d(e.id),title:"G\u1eedi Email",children:(0,F.jsx)(ue.A,{fontSize:"small"})})]})]},e.id);var n}),0===n.length&&(0,F.jsx)(M.A,{children:(0,F.jsx)(z.A,{colSpan:8,align:"center",children:"Kh\xf4ng c\xf3 b\xe1o gi\xe1 n\xe0o"})})]})]}),(0,F.jsx)(J.A,{component:"div",count:r,page:t,onPageChange:(e,n)=>l(e,n),rowsPerPage:i,onRowsPerPageChange:e=>s(e),rowsPerPageOptions:[5,10,25],labelRowsPerPage:"S\u1ed1 h\xe0ng m\u1ed7i trang:"})]})})};var be=t(27421),ve=t(17171);const ye=e=>{let{open:n,onClose:t,onSend:a,customerName:d,serviceName:c,responsiblePerson:h,pdfFileName:u}=e;const[m,g]=(0,r.useState)({to:"",cc:"",subject:"B\xe1o gi\xe1 d\u1ecbch v\u1ee5 ".concat(c),content:"K\xednh g\u1eedi Anh/Ch\u1ecb ".concat(d||"Qu\xfd kh\xe1ch",",\n\nInnotech Vietnam xin g\u1eedi Anh/Ch\u1ecb b\xe1o gi\xe1 cho d\u1ecbch v\u1ee5 ").concat(c||"d\u1ecbch v\u1ee5"," nh\u01b0 \u0111\xednh k\xe8m.\n\nN\u1ebfu c\u1ea7n th\xeam th\xf4ng tin, xin vui l\xf2ng li\xean h\u1ec7 ch\xfang t\xf4i.\n\nTr\xe2n tr\u1ecdng,  \n").concat(h||"\u0110\u1ed9i ng\u0169 Innotech Vietnam")}),p=e=>n=>{g(t=>(0,i.A)((0,i.A)({},t),{},{[e]:n.target.value}))};return(0,F.jsxs)(v.A,{open:n,onClose:t,maxWidth:"md",fullWidth:!0,children:[(0,F.jsx)(y.A,{children:(0,F.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,F.jsx)(s.A,{variant:"h6",children:"G\u1eedi b\xe1o gi\xe1 cho kh\xe1ch h\xe0ng"}),(0,F.jsx)(Q.A,{onClick:t,size:"small",children:(0,F.jsx)(be.A,{})})]})}),(0,F.jsx)(C.A,{dividers:!0,children:(0,F.jsxs)(l.A,{mb:3,children:[(0,F.jsx)(x.A,{fullWidth:!0,label:"\u0110\u1ebfn (Email)",value:m.to,onChange:p("to"),margin:"normal",variant:"outlined"}),(0,F.jsx)(x.A,{fullWidth:!0,label:"CC (T\xf9y ch\u1ecdn)",value:m.cc,onChange:p("cc"),margin:"normal",variant:"outlined"}),(0,F.jsx)(x.A,{fullWidth:!0,label:"Ti\xeau \u0111\u1ec1",value:m.subject,onChange:p("subject"),margin:"normal",variant:"outlined"}),(0,F.jsxs)(l.A,{mt:2,mb:2,display:"flex",alignItems:"center",children:[(0,F.jsxs)(s.A,{variant:"body1",sx:{mr:2},children:["File \u0111\xednh k\xe8m: ",u]}),(0,F.jsx)(Q.A,{size:"small",onClick:()=>window.open("/preview/".concat(u),"_blank"),children:(0,F.jsx)(fe.A,{})})]}),(0,F.jsx)(x.A,{fullWidth:!0,label:"N\u1ed9i dung email",value:m.content,onChange:p("content"),margin:"normal",variant:"outlined",multiline:!0,rows:8})]})}),(0,F.jsxs)(W.A,{sx:{p:2},children:[(0,F.jsx)(o.A,{onClick:t,children:"H\u1ee7y"}),(0,F.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,F.jsx)(ve.A,{}),onClick:()=>{a(m),t()},disabled:!m.to,children:"G\u1eedi email"})]})]})},Ce=e=>{let{templates:n,loading:t,onUploadClick:i,onViewTemplate:r,onDeleteTemplate:a,onDownloadTemplate:d}=e;return(0,F.jsxs)(c.A,{sx:{p:3},children:[(0,F.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,F.jsx)(s.A,{variant:"h6",children:"M\u1eabu b\xe1o gi\xe1"}),(0,F.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,F.jsx)(f.A,{}),onClick:i,children:"T\u1ea3i l\xean m\u1eabu b\xe1o gi\xe1"})]}),(0,F.jsx)(S.A,{children:(0,F.jsxs)(N.A,{children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:"T\xean m\u1eabu"}),(0,F.jsx)(z.A,{children:"M\xf4 t\u1ea3"}),(0,F.jsx)(z.A,{children:"Lo\u1ea1i"}),(0,F.jsx)(z.A,{children:"Tr\u1ea1ng th\xe1i"}),(0,F.jsx)(z.A,{children:"Ng\xe0y t\u1ea1o"}),(0,F.jsx)(z.A,{children:"Ng\u01b0\u1eddi t\u1ea1o"}),(0,F.jsx)(z.A,{children:"S\u1ed1 tr\u01b0\u1eddng"}),(0,F.jsx)(z.A,{align:"center",children:"Thao t\xe1c"})]})}),(0,F.jsx)(E.A,{children:t?(0,F.jsx)(M.A,{children:(0,F.jsx)(z.A,{colSpan:8,align:"center",children:"\u0110ang t\u1ea3i..."})}):0===n.length?(0,F.jsx)(M.A,{children:(0,F.jsx)(z.A,{colSpan:8,align:"center",children:"Ch\u01b0a c\xf3 m\u1eabu b\xe1o gi\xe1 n\xe0o. H\xe3y t\u1ea3i l\xean m\u1eabu b\xe1o gi\xe1 \u0111\u1ea7u ti\xean c\u1ee7a b\u1ea1n!"})}):n.map(e=>(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:e.name}),(0,F.jsx)(z.A,{children:e.description||"-"}),(0,F.jsx)(z.A,{children:"customer"===e.type?"Kh\xe1ch h\xe0ng":"N\u1ed9i b\u1ed9"}),(0,F.jsxs)(z.A,{children:[(0,F.jsx)(he.A,{label:"active"===e.status?"\u0110ang s\u1eed d\u1ee5ng":"Kh\xf4ng s\u1eed d\u1ee5ng",color:"active"===e.status?"success":"default",size:"small"}),e.isDefault&&(0,F.jsx)(he.A,{label:"M\u1eb7c \u0111\u1ecbnh",color:"primary",size:"small",sx:{ml:1}})]}),(0,F.jsx)(z.A,{children:new Date(e.createdAt).toLocaleDateString("vi-VN")}),(0,F.jsx)(z.A,{children:e.createdBy}),(0,F.jsx)(z.A,{children:e.placeholderCount}),(0,F.jsx)(z.A,{align:"center",children:(0,F.jsxs)(l.A,{children:[r&&(0,F.jsx)(Y.A,{title:"Xem chi ti\u1ebft",children:(0,F.jsx)(Q.A,{size:"small",onClick:()=>r(e.id),children:(0,F.jsx)(fe.A,{fontSize:"small"})})}),d&&(0,F.jsx)(Y.A,{title:"T\u1ea3i xu\u1ed1ng",children:(0,F.jsx)(Q.A,{size:"small",onClick:()=>d(e.id),children:(0,F.jsx)(b.A,{fontSize:"small"})})}),a&&(0,F.jsx)(Y.A,{title:"X\xf3a",children:(0,F.jsx)(Q.A,{size:"small",color:"error",onClick:()=>a(e.id),children:(0,F.jsx)(te.A,{fontSize:"small"})})})]})})]},e.id))})]})})]})};var ke=t(80172),we=t(51697);const Te=e=>{let{open:n,onClose:t,onSubmit:a}=e;const[d,h]=(0,r.useState)({name:"",description:"",type:"customer",file:null,extractedFields:[]}),[u,f]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[k,w]=(0,r.useState)([]),T=e=>{const{name:n,value:t}=e.target;n&&h(e=>(0,i.A)((0,i.A)({},e),{},{[n]:t}))},I=(e,n,t)=>{const r=[...k];r[e]=(0,i.A)((0,i.A)({},r[e]),{},{[n]:t}),w(r),h(e=>(0,i.A)((0,i.A)({},e),{},{extractedFields:r}))},q=()=>{h({name:"",description:"",type:"customer",file:null,extractedFields:[]}),w([]),t()};return(0,F.jsxs)(v.A,{open:n,onClose:q,maxWidth:"lg",fullWidth:!0,children:[(0,F.jsx)(y.A,{children:(0,F.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,F.jsx)(s.A,{variant:"h6",children:"T\u1ea3i l\xean m\u1eabu b\xe1o gi\xe1"}),(0,F.jsx)(Q.A,{onClick:q,size:"small",children:(0,F.jsx)(be.A,{})})]})}),(0,F.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.name.trim())if(d.file)try{f(!0),await a(d),q()}catch(n){console.error("Error submitting template:",n)}finally{f(!1)}else alert("Vui l\xf2ng ch\u1ecdn file m\u1eabu b\xe1o gi\xe1");else alert("Vui l\xf2ng nh\u1eadp t\xean m\u1eabu b\xe1o gi\xe1")},children:[(0,F.jsx)(C.A,{dividers:!0,children:(0,F.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 2fr"},gap:3},children:[(0,F.jsxs)(l.A,{children:[(0,F.jsx)(x.A,{label:"T\xean m\u1eabu b\xe1o gi\xe1",name:"name",value:d.name,onChange:T,fullWidth:!0,margin:"normal",required:!0,disabled:u}),(0,F.jsx)(x.A,{label:"M\xf4 t\u1ea3",name:"description",value:d.description,onChange:T,fullWidth:!0,multiline:!0,rows:3,margin:"normal",disabled:u}),(0,F.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,F.jsx)(g.A,{children:"Lo\u1ea1i m\u1eabu"}),(0,F.jsxs)(p.A,{label:"Lo\u1ea1i m\u1eabu",name:"type",value:d.type,onChange:T,disabled:u,children:[(0,F.jsx)(A.A,{value:"customer",children:"Cho kh\xe1ch h\xe0ng"}),(0,F.jsx)(A.A,{value:"internal",children:"N\u1ed9i b\u1ed9"})]})]}),(0,F.jsxs)(l.A,{mt:2,mb:2,children:[(0,F.jsx)("input",{accept:".docx,.doc,.pdf",style:{display:"none"},id:"template-upload",type:"file",onChange:e=>{var n;const t=(null===(n=e.target.files)||void 0===n?void 0:n[0])||null;if(t){if(!t.name.endsWith(".docx")&&!t.name.endsWith(".doc")&&!t.name.endsWith(".pdf"))return void alert("Ch\u1ec9 ch\u1ea5p nh\u1eadn file .doc, .docx ho\u1eb7c .pdf");if(t.size>5242880)return void alert("K\xedch th\u01b0\u1edbc file kh\xf4ng \u0111\u01b0\u1ee3c v\u01b0\u1ee3t qu\xe1 5MB");h(e=>(0,i.A)((0,i.A)({},e),{},{file:t})),b(!0),setTimeout(()=>{const e=[{originalText:"C\xd4NG TY TNHH GI\u1ea4Y CAO PH\xc1T",placeholder:"TEN_CONG_TY_A",type:"text",description:"T\xean c\xf4ng ty b\xean A",required:!0,example:"C\xf4ng ty TNHH ABC"},{originalText:"S\u1ed1 352, Khu Ph\u1ed1 M\u1ef9 Hi\u1ec7p, Ph\u01b0\u1eddng Th\xe1i Ho\xe0, Th\xe0nh ph\u1ed1 T\xe2n Uy\xean, T\u1ec9nh B\xecnh D\u01b0\u01a1ng",placeholder:"DIA_CHI_A",type:"text",description:"\u0110\u1ecba ch\u1ec9 b\xean A",required:!0,example:"S\u1ed1 123, \u0110\u01b0\u1eddng ABC, Qu\u1eadn 1, TP.HCM"},{originalText:"0274 3775 179",placeholder:"DIEN_THOAI_A",type:"phone",description:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\xean A",required:!0,example:"0901234567"},{originalText:"3701711279",placeholder:"MA_SO_THUE_A",type:"taxcode",description:"M\xe3 s\u1ed1 thu\u1ebf b\xean A",required:!0,example:"0123456789"},{originalText:"L\xca TH\u1eca KIM CHI",placeholder:"NGUOI_DAI_DIEN_A",type:"text",description:"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n b\xean A",required:!0,example:"Nguy\u1ec5n V\u0103n A"},{originalText:"Gi\xe1m \u0111\u1ed1c",placeholder:"CHUC_VU_A",type:"text",description:"Ch\u1ee9c v\u1ee5 ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n b\xean A",required:!0,example:"Gi\xe1m \u0111\u1ed1c"},{originalText:"10.000.000 VN\u0110",placeholder:"GIA_TRI_HOP_DONG",type:"number",description:"Gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng",required:!0,example:"50.000.000 VN\u0110"},{originalText:"01/08/2025",placeholder:"NGAY_BAT_DAU",type:"date",description:"Ng\xe0y b\u1eaft \u0111\u1ea7u h\u1ee3p \u0111\u1ed3ng",required:!0,example:"01/01/2025"}];w(e),h(n=>(0,i.A)((0,i.A)({},n),{},{extractedFields:e})),b(!1)},2e3)}},disabled:u||j}),(0,F.jsx)("label",{htmlFor:"template-upload",children:(0,F.jsx)(o.A,{variant:"outlined",component:"span",startIcon:(0,F.jsx)(we.A,{}),disabled:u||j,children:"Ch\u1ecdn file m\u1eabu (.docx, .doc, .pdf)"})}),d.file&&(0,F.jsxs)(s.A,{variant:"body2",sx:{mt:1},children:["\u0110\xe3 ch\u1ecdn: ",d.file.name]})]})]}),(0,F.jsx)(l.A,{children:(0,F.jsxs)(c.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,F.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"C\xe1c tr\u01b0\u1eddng \u0111\u01b0\u1ee3c ph\xe2n t\xedch t\u1eeb m\u1eabu b\xe1o gi\xe1:"}),j?(0,F.jsxs)(l.A,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:4,children:[(0,F.jsx)(ke.A,{size:40}),(0,F.jsx)(s.A,{variant:"body2",color:"textSecondary",sx:{mt:2},children:"\u0110ang ph\xe2n t\xedch n\u1ed9i dung m\u1eabu b\xe1o gi\xe1..."})]}):k.length>0?(0,F.jsx)(S.A,{component:c.A,variant:"outlined",children:(0,F.jsxs)(N.A,{size:"small",children:[(0,F.jsx)(D.A,{children:(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:"Tr\u01b0\u1eddng g\u1ed1c trong file"}),(0,F.jsx)(z.A,{children:"Placeholder g\u1ee3i \xfd"}),(0,F.jsx)(z.A,{children:"Ki\u1ec3u d\u1eef li\u1ec7u"}),(0,F.jsx)(z.A,{children:"M\xf4 t\u1ea3"}),(0,F.jsx)(z.A,{align:"center",children:"Thao t\xe1c"})]})}),(0,F.jsx)(E.A,{children:k.map((e,n)=>(0,F.jsxs)(M.A,{children:[(0,F.jsx)(z.A,{children:e.originalText}),(0,F.jsx)(z.A,{children:(0,F.jsx)(x.A,{size:"small",value:e.placeholder,onChange:e=>I(n,"placeholder",e.target.value),fullWidth:!0,disabled:u})}),(0,F.jsx)(z.A,{children:(0,F.jsx)(m.A,{fullWidth:!0,size:"small",children:(0,F.jsxs)(p.A,{value:e.type,onChange:e=>I(n,"type",e.target.value),disabled:u,children:[(0,F.jsx)(A.A,{value:"text",children:"V\u0103n b\u1ea3n"}),(0,F.jsx)(A.A,{value:"number",children:"S\u1ed1"}),(0,F.jsx)(A.A,{value:"date",children:"Ng\xe0y th\xe1ng"}),(0,F.jsx)(A.A,{value:"phone",children:"\u0110i\u1ec7n tho\u1ea1i"}),(0,F.jsx)(A.A,{value:"email",children:"Email"}),(0,F.jsx)(A.A,{value:"taxcode",children:"M\xe3 s\u1ed1 thu\u1ebf"})]})})}),(0,F.jsx)(z.A,{children:(0,F.jsx)(x.A,{size:"small",value:e.description||"",onChange:e=>I(n,"description",e.target.value),fullWidth:!0,disabled:u})}),(0,F.jsx)(z.A,{align:"center",children:(0,F.jsx)(Q.A,{size:"small",color:"error",onClick:()=>{const e=[...k];e.splice(n,1),w(e),h(n=>(0,i.A)((0,i.A)({},n),{},{extractedFields:e}))},disabled:u,children:(0,F.jsx)(te.A,{fontSize:"small"})})})]},n))})]})}):d.file?(0,F.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Kh\xf4ng t\xecm th\u1ea5y tr\u01b0\u1eddng n\xe0o c\xf3 th\u1ec3 tr\xedch xu\u1ea5t t\u1eeb file. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i n\u1ed9i dung file."}):(0,F.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Vui l\xf2ng t\u1ea3i l\xean file m\u1eabu b\xe1o gi\xe1 \u0111\u1ec3 AI ph\xe2n t\xedch v\xe0 \u0111\u1ec1 xu\u1ea5t c\xe1c tr\u01b0\u1eddng d\u1eef li\u1ec7u."}),(0,F.jsxs)(l.A,{mt:3,children:[(0,F.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng:"}),(0,F.jsxs)(s.A,{variant:"body2",color:"textSecondary",children:["- AI s\u1ebd t\u1ef1 \u0111\u1ed9ng ph\xe2n t\xedch n\u1ed9i dung m\u1eabu b\xe1o gi\xe1 v\xe0 \u0111\u1ec1 xu\u1ea5t c\xe1c tr\u01b0\u1eddng c\u1ea7n \u0111i\u1ec1n",(0,F.jsx)("br",{}),"- B\u1ea1n c\xf3 th\u1ec3 ch\u1ec9nh s\u1eeda t\xean placeholder v\xe0 m\xf4 t\u1ea3 cho ph\xf9 h\u1ee3p",(0,F.jsx)("br",{}),"- Khi t\u1ea1o b\xe1o gi\xe1, h\u1ec7 th\u1ed1ng s\u1ebd t\u1ef1 \u0111\u1ed9ng \u0111i\u1ec1n c\xe1c th\xf4ng tin v\xe0o c\xe1c v\u1ecb tr\xed t\u01b0\u01a1ng \u1ee9ng"]})]})]})})]})}),(0,F.jsxs)(W.A,{sx:{p:2,borderTop:1,borderColor:"divider"},children:[(0,F.jsx)(o.A,{onClick:q,disabled:u,children:"H\u1ee7y"}),(0,F.jsx)(o.A,{type:"submit",variant:"contained",color:"primary",disabled:u||j||0===k.length,startIcon:u?(0,F.jsx)(ke.A,{size:20}):null,children:u?"\u0110ang t\u1ea3i l\xean...":"L\u01b0u m\u1eabu b\xe1o gi\xe1"})]})]})]})},Ie=["C\xf4ng ty A","C\xf4ng ty B","C\xf4ng ty C","C\xf4ng ty D"],Se=[{id:1,name:"Deal A1",customer:"C\xf4ng ty A"},{id:2,name:"Deal A2",customer:"C\xf4ng ty A"},{id:3,name:"Deal B1",customer:"C\xf4ng ty B"},{id:4,name:"Deal C1",customer:"C\xf4ng ty C"}],Ne=[{id:1,name:"Y\xeau c\u1ea7u A1.1",dealId:1,description:"X\xe2y d\u1ef1ng website b\xe1n h\xe0ng cho C\xf4ng ty A",features:[{feature:"Trang ch\u1ee7",detail:"Thi\u1ebft k\u1ebf trang ch\u1ee7 hi\u1ec7n \u0111\u1ea1i",description:"Trang ch\u1ee7 v\u1edbi slider banner, danh m\u1ee5c s\u1ea3n ph\u1ea9m n\u1ed5i b\u1eadt, s\u1ea3n ph\u1ea9m m\u1edbi",notes:"T\xedch h\u1ee3p animation cho banner"},{feature:"Trang s\u1ea3n ph\u1ea9m",detail:"Danh s\xe1ch s\u1ea3n ph\u1ea9m c\xf3 b\u1ed9 l\u1ecdc",description:"Hi\u1ec3n th\u1ecb s\u1ea3n ph\u1ea9m d\u1ea1ng l\u01b0\u1edbi, c\xf3 b\u1ed9 l\u1ecdc theo danh m\u1ee5c, gi\xe1, th\u01b0\u01a1ng hi\u1ec7u",notes:"C\xf3 ch\u1ee9c n\u0103ng so s\xe1nh s\u1ea3n ph\u1ea9m"},{feature:"Gi\u1ecf h\xe0ng",detail:"Ch\u1ee9c n\u0103ng gi\u1ecf h\xe0ng \u0111\u1ea7y \u0111\u1ee7",description:"Th\xeam, s\u1eeda, x\xf3a s\u1ea3n ph\u1ea9m trong gi\u1ecf h\xe0ng, t\xednh t\u1ed5ng ti\u1ec1n",notes:"L\u01b0u gi\u1ecf h\xe0ng v\xe0o localStorage"},{feature:"Thanh to\xe1n",detail:"Quy tr\xecnh thanh to\xe1n",description:"Form nh\u1eadp th\xf4ng tin giao h\xe0ng, ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n",notes:"T\xedch h\u1ee3p thanh to\xe1n qua VNPay"}]},{id:2,name:"Y\xeau c\u1ea7u A1.2",dealId:1,description:"X\xe2y d\u1ef1ng h\u1ec7 th\u1ed1ng qu\u1ea3n l\xfd kho cho C\xf4ng ty A",features:[{feature:"Qu\u1ea3n l\xfd s\u1ea3n ph\u1ea9m",detail:"CRUD s\u1ea3n ph\u1ea9m",description:"Th\xeam, s\u1eeda, x\xf3a, xem chi ti\u1ebft s\u1ea3n ph\u1ea9m trong kho",notes:"H\u1ed7 tr\u1ee3 import/export Excel"},{feature:"Qu\u1ea3n l\xfd nh\u1eadp kho",detail:"Quy tr\xecnh nh\u1eadp kho",description:"T\u1ea1o phi\u1ebfu nh\u1eadp kho, x\xe1c nh\u1eadn nh\u1eadp kho, c\u1eadp nh\u1eadt s\u1ed1 l\u01b0\u1ee3ng t\u1ed3n",notes:"T\xedch h\u1ee3p v\u1edbi m\xe3 v\u1ea1ch"},{feature:"Qu\u1ea3n l\xfd xu\u1ea5t kho",detail:"Quy tr\xecnh xu\u1ea5t kho",description:"T\u1ea1o phi\u1ebfu xu\u1ea5t kho, x\xe1c nh\u1eadn xu\u1ea5t kho, c\u1eadp nh\u1eadt s\u1ed1 l\u01b0\u1ee3ng t\u1ed3n",notes:"T\u1ef1 \u0111\u1ed9ng xu\u1ea5t kho khi c\xf3 \u0111\u01a1n h\xe0ng"},{feature:"B\xe1o c\xe1o th\u1ed1ng k\xea",detail:"B\xe1o c\xe1o t\u1ed3n kho, nh\u1eadp xu\u1ea5t",description:"B\xe1o c\xe1o t\u1ed3n kho theo th\u1eddi gian, b\xe1o c\xe1o nh\u1eadp xu\u1ea5t theo s\u1ea3n ph\u1ea9m",notes:"Xu\u1ea5t b\xe1o c\xe1o d\u1ea1ng PDF, Excel"}]},{id:3,name:"Y\xeau c\u1ea7u A2.1",dealId:2,description:"X\xe2y d\u1ef1ng app mobile cho C\xf4ng ty A",features:[{feature:"\u0110\u0103ng nh\u1eadp/\u0110\u0103ng k\xfd",detail:"H\u1ec7 th\u1ed1ng x\xe1c th\u1ef1c",description:"\u0110\u0103ng nh\u1eadp b\u1eb1ng email/password, \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n m\u1edbi, qu\xean m\u1eadt kh\u1ea9u",notes:"H\u1ed7 tr\u1ee3 \u0111\u0103ng nh\u1eadp b\u1eb1ng Google, Facebook"},{feature:"Trang c\xe1 nh\xe2n",detail:"Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng",description:"Xem, c\u1eadp nh\u1eadt th\xf4ng tin c\xe1 nh\xe2n, \u0111\u1ed5i m\u1eadt kh\u1ea9u",notes:"Upload avatar"},{feature:"Th\xf4ng b\xe1o",detail:"H\u1ec7 th\u1ed1ng th\xf4ng b\xe1o",description:"Nh\u1eadn th\xf4ng b\xe1o realtime, xem l\u1ecbch s\u1eed th\xf4ng b\xe1o",notes:"S\u1eed d\u1ee5ng Firebase Cloud Messaging"}]},{id:4,name:"Y\xeau c\u1ea7u B1.1",dealId:3,description:"X\xe2y d\u1ef1ng h\u1ec7 th\u1ed1ng Qu\u1ea3n l\xfd Kho cho C\xf4ng ty B",features:[{feature:"Qu\u1ea3n l\xfd Kho",detail:"Nh\u1eadp kho",description:"Cho ph\xe9p ng\u01b0\u1eddi d\xf9ng nh\u1eadp h\xe0ng m\u1edbi v\xe0o kho",notes:"T\u1eeb AI (m\u1eabu)"},{feature:"Qu\u1ea3n l\xfd Kho",detail:"Xu\u1ea5t kho",description:"Ghi nh\u1eadn xu\u1ea5t kho khi giao h\xe0ng ho\u1eb7c b\xe1n",notes:"T\u1eeb AI (m\u1eabu)"},{feature:"Gi\xe1m s\xe1t Kho",detail:"C\u1ea3nh b\xe1o t\u1ed3n kho th\u1ea5p",description:"Th\xf4ng b\xe1o khi s\u1ed1 l\u01b0\u1ee3ng h\xe0ng t\u1ed3n d\u01b0\u1edbi m\u1ee9c t\u1ed1i thi\u1ec3u",notes:"T\u1eeb AI (m\u1eabu)"}]}],De=e=>Array.from({length:e},(e,n)=>({id:n+1,name:"B\xe1o gi\xe1 ".concat(n+1," - ").concat(["Website b\xe1n h\xe0ng","H\u1ec7 th\u1ed1ng kho","App di \u0111\u1ed9ng","Ph\u1ea7n m\u1ec1m k\u1ebf to\xe1n"][n%4]),customer:Ie[Math.floor(Math.random()*Ie.length)],dealId:n%4+1,dealName:Se[n%4].name,requirementId:n%4+1,requirementName:Ne[n%4].name,status:["draft","sent","approved","rejected"][Math.floor(4*Math.random())],createdDate:new Date(Date.now()-24*Math.floor(90*Math.random())*60*60*1e3).toISOString().split("T")[0],note:"",items:[],totalEffort:Math.floor(100*Math.random())+20,totalAmount:5e5*(Math.floor(100*Math.random())+20)})),Me=[{value:"draft",label:"Draft",color:"default"},{value:"sent",label:"\u0110\xe3 g\u1eedi",color:"info"},{value:"approved",label:"\u0110\xe3 duy\u1ec7t",color:"success"},{value:"rejected",label:"T\u1eeb ch\u1ed1i",color:"error"}],ze=()=>{const[e,n]=(0,r.useState)("quotes"),[t,v]=(0,r.useState)(""),[y,C]=(0,r.useState)(null),[k,w]=(0,r.useState)("all"),[T,I]=(0,r.useState)(0),[S,N]=(0,r.useState)(10),[D,M]=(0,r.useState)(!1),[z,E]=(0,r.useState)([]),[W,q]=(0,r.useState)(!1),[P,B]=(0,r.useState)(null),[V,H]=(0,r.useState)(De(25)),[R,L]=(0,r.useState)(!1),[G,O]=(0,r.useState)(!1),[U,_]=(0,r.useState)(null),[K,X]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(!1),[Z,J]=(0,r.useState)(null);(0,r.useEffect)(()=>{M(!0),H(De(25));E([{id:"1",name:"M\u1eabu b\xe1o gi\xe1 d\u1ef1 \xe1n ph\u1ea7n m\u1ec1m",description:"Template b\xe1o gi\xe1 d\u1ef1 \xe1n ph\u1ea7n m\u1ec1m ti\xeau chu\u1ea9n",type:"customer",status:"active",createdAt:"2025-06-30T10:00:00Z",updatedAt:"2025-06-30T10:00:00Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,extractedFields:[]},{id:"2",name:"M\u1eabu b\xe1o gi\xe1 d\u1ecbch v\u1ee5 IT",description:"Template b\xe1o gi\xe1 d\u1ecbch v\u1ee5 IT outsourcing",type:"internal",status:"active",createdAt:"2025-06-29T15:30:00Z",updatedAt:"2025-06-29T15:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,extractedFields:[]}]),M(!1)},[]);const $=V.filter(e=>{const n=e.name.toLowerCase().includes(t.toLowerCase())||e.customer.toLowerCase().includes(t.toLowerCase()),i=!y||e.customer===y,r="all"===k||e.status===k;return n&&i&&r}),ee=$.slice(T*S,T*S+S);return(0,F.jsxs)(l.A,{sx:{p:3},children:[Z&&(0,F.jsx)(ye,{open:Q,onClose:()=>Y(!1),onSend:e=>{if(console.log("Sending email:",e),"draft"===(null===Z||void 0===Z?void 0:Z.status)){const e=V.map(e=>e.id===Z.id?(0,i.A)((0,i.A)({},e),{},{status:"sent"}):e);H(e)}alert("Email \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi th\xe0nh c\xf4ng!"),Y(!1)},customerName:Z.customer,serviceName:Z.name,responsiblePerson:"Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch",pdfFileName:"BaoGia_".concat(Z.id,".pdf")}),(0,F.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,flexWrap:"wrap",gap:2},children:[(0,F.jsx)(s.A,{variant:"h4",component:"h1",children:"Qu\u1ea3n l\xfd b\xe1o gi\xe1/\u01b0\u1edbc t\xednh"}),"quotes"===e&&(0,F.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,F.jsx)(f.A,{}),onClick:()=>{L(!0)},children:"T\u1ea1o b\xe1o gi\xe1 m\u1edbi"})]}),(0,F.jsx)(l.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,F.jsxs)(a.A,{value:e,onChange:(e,t)=>{n(t),I(0)},"aria-label":"quotation management tabs",children:[(0,F.jsx)(d.A,{label:"M\u1eabu b\xe1o gi\xe1",value:"templates"}),(0,F.jsx)(d.A,{label:"B\xe1o gi\xe1",value:"quotes"})]})}),"templates"===e?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ce,{templates:z,loading:D,onUploadClick:()=>{q(!0)},onViewTemplate:e=>{const n=z.find(n=>n.id===e);n&&(B(n),console.log("Viewing template:",n))},onDeleteTemplate:e=>{E(n=>n.filter(n=>n.id!==e)),console.log("Deleted template with ID:",e)},onDownloadTemplate:e=>{const n=z.find(n=>n.id===e);n&&console.log("Downloading template:",n)}}),(0,F.jsx)(Te,{open:W,onClose:()=>{q(!1)},onSubmit:async e=>{try{M(!0),console.log("Uploading template:",e),await new Promise(e=>setTimeout(e,1e3));const n={id:"template-".concat(Date.now()),name:e.name,description:e.description,type:e.type,status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Ng\u01b0\u1eddi d\xf9ng hi\u1ec7n t\u1ea1i",placeholderCount:Math.floor(10*Math.random())+3,isDefault:!1,extractedFields:[]};E(e=>[n,...e]),q(!1)}catch(n){console.error("Error uploading template:",n)}finally{M(!1)}}})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(c.A,{sx:{p:2,mb:3},children:(0,F.jsxs)(h.A,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[(0,F.jsx)(x.A,{label:"T\xecm ki\u1ebfm",variant:"outlined",size:"small",value:t,onChange:e=>{v(e.target.value),I(0)},sx:{minWidth:200,flex:1},InputProps:{startAdornment:(0,F.jsx)(j.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}})}}),(0,F.jsx)(u.A,{options:Ie,value:y,onChange:(e,n)=>{C(n),I(0)},renderInput:e=>(0,F.jsx)(x.A,(0,i.A)((0,i.A)({},e),{},{label:"Kh\xe1ch h\xe0ng",size:"small"})),sx:{minWidth:200}}),(0,F.jsxs)(m.A,{size:"small",sx:{minWidth:150},children:[(0,F.jsx)(g.A,{id:"status-filter-label",children:"Tr\u1ea1ng th\xe1i"}),(0,F.jsxs)(p.A,{labelId:"status-filter-label",value:k,label:"Tr\u1ea1ng th\xe1i",onChange:e=>{w(e.target.value),I(0)},children:[(0,F.jsx)(A.A,{value:"all",children:"T\u1ea5t c\u1ea3"}),Me.map(e=>(0,F.jsx)(A.A,{value:e.value,children:e.label},e.value))]})]}),(0,F.jsx)(o.A,{variant:"outlined",startIcon:(0,F.jsx)(b.A,{}),onClick:()=>console.log("Export data"),children:"Xu\u1ea5t Excel"})]})}),(0,F.jsx)(je,{quotations:ee,onViewDetail:e=>{const n=V.find(n=>n.id===e);n&&(_(n),O(!0))},onDownloadPdf:e=>{const n=V.find(n=>n.id===e);n&&(_(n),X(!0))},onSendEmail:e=>{const n=V.find(n=>n.id===e);n&&(J(n),Y(!0))},page:T,rowsPerPage:S,onPageChange:(e,n)=>{I(n)},onRowsPerPageChange:e=>{N(parseInt(e.target.value,10)),I(0)},totalCount:$.length})]}),(0,F.jsx)(ce,{open:R,onClose:()=>{L(!1)},onSave:e=>{const n=(0,i.A)((0,i.A)({},e),{},{id:Math.max(...V.map(e=>e.id),0)+1});H([n,...V]),L(!1)},customers:Ie,deals:Se,requirements:Ne,templates:z}),(0,F.jsx)(ge,{open:G,onClose:()=>O(!1),quotation:U}),(0,F.jsx)(Ae,{open:K,onClose:()=>X(!1),quotation:U,onSaveDraft:e=>{const n=V.map(n=>n.id===e.id?e:n);H(n),X(!1),alert("\u0110\xe3 l\u01b0u nh\xe1p b\xe1o gi\xe1")},onExportPdf:e=>{console.log("Export PDF",e),alert("\u0110\xe3 xu\u1ea5t file PDF b\xe1o gi\xe1")},onEdit:()=>{X(!1)}})]})}}}]);
//# sourceMappingURL=808.b194ba36.chunk.js.map