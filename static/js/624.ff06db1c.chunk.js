"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[624],{63624:(n,e,t)=>{t.r(e),t.d(e,{default:()=>Vn});var i=t(89379),a=t(65043),l=t(53969),s=t(55895),r=t(14333),c=t(12843),o=t(94799),h=t(41859),d=t(28259),x=t(87443),g=t(10756),p=t(86172),u=t(81341),A=t(34375),m=t(83759),j=t(42579),y=t(32911),v=t(91449),f=t(38517),b=t(81911),C=t(78776),T=t(85877),N=t(22950),B=t(3665),H=t(50103),S=t(5362),w=t(58315),D=t(27421),I=t(24343),k=t(47471),V=t(63745),P=t(1422),z=t(70579);const W=n=>{let{filters:e,onFilterChange:t,onUploadClick:a,onCreateWithAIClick:s=()=>console.log("Create with AI clicked")}=n;return(0,z.jsxs)(l.A,{sx:{mb:3},children:[(0,z.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr 1fr"},gap:2,alignItems:"center",mb:2},children:[(0,z.jsx)(l.A,{children:(0,z.jsx)(I.A,{fullWidth:!0,variant:"outlined",placeholder:"T\xecm ki\u1ebfm template...",value:e.search,onChange:n=>{t((0,i.A)((0,i.A)({},e),{},{search:n.target.value}))},InputProps:{startAdornment:(0,z.jsx)(V.A,{sx:{color:"text.secondary",mr:1}})}})}),(0,z.jsx)(l.A,{children:(0,z.jsxs)(I.A,{select:!0,fullWidth:!0,label:"Lo\u1ea1i template",value:e.type,onChange:n=>{t((0,i.A)((0,i.A)({},e),{},{type:n.target.value}))},variant:"outlined",children:[(0,z.jsx)(k.A,{value:"all",children:"T\u1ea5t c\u1ea3"}),(0,z.jsx)(k.A,{value:"internal",children:"N\u1ed9i b\u1ed9"}),(0,z.jsx)(k.A,{value:"customer",children:"Kh\xe1ch h\xe0ng"}),(0,z.jsx)(k.A,{value:"AI",children:"AI"})]})}),(0,z.jsx)(l.A,{children:(0,z.jsxs)(I.A,{select:!0,fullWidth:!0,label:"Tr\u1ea1ng th\xe1i",value:e.status,onChange:n=>{t((0,i.A)((0,i.A)({},e),{},{status:n.target.value}))},variant:"outlined",children:[(0,z.jsx)(k.A,{value:"all",children:"T\u1ea5t c\u1ea3"}),(0,z.jsx)(k.A,{value:"active",children:"\u0110ang ho\u1ea1t \u0111\u1ed9ng"}),(0,z.jsx)(k.A,{value:"inactive",children:"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"})]})})]}),(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:{xs:2,md:0}},children:[(0,z.jsx)(h.A,{variant:"contained",color:"primary",startIcon:(0,z.jsx)(N.A,{}),onClick:a,sx:{width:{xs:"100%",md:"auto"},maxWidth:"250px"},children:"T\u1ea3i l\xean Template"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",startIcon:(0,z.jsx)(P.A,{}),onClick:s,sx:{width:{xs:"100%",md:"auto"},maxWidth:"250px"},children:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng b\u1eb1ng AI"})]})]})};var G=t(26529),L=t(89174),U=t(27601),M=t(61773),Y=t(96659);const F=n=>{let{templates:e,page:t,rowsPerPage:i,totalRows:a,onPageChange:r,onRowsPerPageChange:c,onView:h,onEdit:y,onSetDefault:v,onDelete:f}=n;return(0,z.jsxs)(o.A,{sx:{width:"100%",overflow:"hidden"},children:[(0,z.jsx)(d.A,{children:(0,z.jsxs)(x.A,{children:[(0,z.jsx)(g.A,{children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(u.A,{children:"T\xean template"}),(0,z.jsx)(u.A,{align:"center",children:"Lo\u1ea1i"}),(0,z.jsx)(u.A,{align:"center",children:"Tr\u1ea1ng th\xe1i"}),(0,z.jsx)(u.A,{align:"center",children:"S\u1ed1 tr\u01b0\u1eddng"}),(0,z.jsx)(u.A,{align:"center",children:"Ng\xe0y t\u1ea1o"}),(0,z.jsx)(u.A,{align:"center",children:"Ng\u01b0\u1eddi t\u1ea1o"}),(0,z.jsx)(u.A,{align:"center",children:"Thao t\xe1c"})]})}),(0,z.jsx)(A.A,{children:e.length>0?e.map(n=>(0,z.jsxs)(p.A,{hover:!0,children:[(0,z.jsx)(u.A,{children:(0,z.jsxs)(l.A,{display:"flex",alignItems:"center",children:[n.isDefault&&(0,z.jsx)(U.A,{color:"primary",sx:{fontSize:"1rem",mr:1}}),(0,z.jsx)(s.A,{variant:"body2",children:n.name})]})}),(0,z.jsx)(u.A,{align:"center",children:(0,z.jsx)(m.A,{label:"internal"===n.type?"N\u1ed9i b\u1ed9":"Kh\xe1ch h\xe0ng",color:"internal"===n.type?"primary":"default",size:"small",variant:"outlined"})}),(0,z.jsx)(u.A,{align:"center",children:(0,z.jsx)(m.A,{label:"active"===n.status?"Ho\u1ea1t \u0111\u1ed9ng":"Ng\u1eebng",color:"active"===n.status?"success":"default",size:"small"})}),(0,z.jsx)(u.A,{align:"center",children:n.placeholderCount}),(0,z.jsx)(u.A,{align:"center",children:new Date(n.createdAt).toLocaleDateString()}),(0,z.jsx)(u.A,{align:"center",children:n.createdBy}),(0,z.jsx)(u.A,{align:"center",children:(0,z.jsxs)(l.A,{display:"flex",justifyContent:"center",children:[(0,z.jsx)(G.A,{title:"Xem chi ti\u1ebft",children:(0,z.jsx)(j.A,{size:"small",onClick:()=>h(n.id),children:(0,z.jsx)(B.A,{fontSize:"small"})})}),(0,z.jsx)(G.A,{title:"Ch\u1ec9nh s\u1eeda",children:(0,z.jsx)(j.A,{size:"small",onClick:()=>y(n.id),children:(0,z.jsx)(M.A,{fontSize:"small"})})}),(0,z.jsx)(G.A,{title:n.isDefault?"M\u1eb7c \u0111\u1ecbnh":"\u0110\u1eb7t l\xe0m m\u1eb7c \u0111\u1ecbnh",children:(0,z.jsx)("span",{children:(0,z.jsx)(j.A,{size:"small",onClick:()=>v(n.id),disabled:n.isDefault,color:n.isDefault?"primary":"default",children:n.isDefault?(0,z.jsx)(U.A,{fontSize:"small"}):(0,z.jsx)(Y.A,{fontSize:"small"})})})}),(0,z.jsx)(G.A,{title:"X\xf3a",children:(0,z.jsx)(j.A,{size:"small",onClick:()=>f(n.id),color:"error",children:(0,z.jsx)(S.A,{fontSize:"small"})})})]})})]},n.id)):(0,z.jsx)(p.A,{children:(0,z.jsx)(u.A,{colSpan:7,align:"center",sx:{py:4},children:(0,z.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})})})})]})}),(0,z.jsx)(L.A,{rowsPerPageOptions:[5,10,25],component:"div",count:a,rowsPerPage:i,page:t,onPageChange:(n,e)=>{r(e)},onRowsPerPageChange:n=>{c(parseInt(n.target.value,10))},labelRowsPerPage:"S\u1ed1 d\xf2ng m\u1ed7i trang:",labelDisplayedRows:n=>{let{from:e,to:t,count:i}=n;return"".concat(e,"-").concat(t," trong ").concat(i)}})]})};var _=t(94527),O=t(80172),E=t(17171),Z=t(90160);const R=["D\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m","H\u1ee3p \u0111\u1ed3ng th\u01b0\u01a1ng m\u1ea1i","B\u1ea3o tr\xec ph\u1ea7n m\u1ec1m","H\u1ee3p \u0111\u1ed3ng NDA","H\u1ee3p \u0111\u1ed3ng \u0111\u1ea1i l\xfd"],X=n=>{let{onSubmit:e,loading:t,chatHistory:i}=n;const[r,c]=(0,a.useState)("");return(0,z.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",height:"100%",p:0},children:[(0,z.jsx)(l.A,{sx:{flexGrow:1,overflowY:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:0===i.length?(0,z.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",textAlign:"center",p:3},children:[(0,z.jsx)(P.A,{sx:{fontSize:60,mb:2,opacity:.7}}),(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng b\u1eb1ng AI"}),(0,z.jsx)(s.A,{variant:"body1",sx:{maxWidth:"80%",mx:"auto"},children:"Nh\u1eadp y\xeau c\u1ea7u c\u1ee7a b\u1ea1n d\u01b0\u1edbi d\u1ea1ng v\u0103n b\u1ea3n t\u1ef1 nhi\xean \u0111\u1ec3 AI t\u1ea1o h\u1ee3p \u0111\u1ed3ng ph\xf9 h\u1ee3p v\u1edbi nhu c\u1ea7u c\u1ee7a b\u1ea1n."}),(0,z.jsx)(s.A,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:'V\xed d\u1ee5: "T\u1ea1o h\u1ee3p \u0111\u1ed3ng ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m gi\u1eefa ITV v\xe0 C\xf4ng ty ABC, gi\xe1 tr\u1ecb 500 tri\u1ec7u, th\u1eddi gian 6 th\xe1ng, thanh to\xe1n t\u1eebng giai \u0111o\u1ea1n..."'})]}):i.map((n,e)=>(0,z.jsx)(o.A,{elevation:0,sx:{p:2,backgroundColor:"assistant"===n.role?"rgba(0, 0, 0, 0.04)":"transparent",borderRadius:2,maxWidth:"90%",alignSelf:"assistant"===n.role?"flex-start":"flex-end"},children:(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,z.jsx)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"assistant"===n.role?"primary.main":"secondary.main",borderRadius:"50%",width:32,height:32,color:"white"},children:"assistant"===n.role?(0,z.jsx)(P.A,{fontSize:"small"}):(0,z.jsx)(Z.A,{fontSize:"small"})}),(0,z.jsx)(s.A,{variant:"body1",children:n.content})]})},e))}),0===i.length&&(0,z.jsxs)(l.A,{sx:{px:2,py:1},children:[(0,z.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"G\u1ee3i \xfd:"}),(0,z.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:R.map((n,e)=>(0,z.jsx)(m.A,{label:n,onClick:()=>(n=>{const e="T\u1ea1o h\u1ee3p \u0111\u1ed3ng ".concat(n);c(e)})(n),color:"primary",variant:"outlined",clickable:!0},e))})]}),(0,z.jsx)(_.A,{}),(0,z.jsxs)(l.A,{component:"form",onSubmit:n=>{n.preventDefault(),r.trim()&&!t&&(e(r.trim()),c(""))},sx:{p:2,display:"flex",alignItems:"flex-end",gap:1},children:[(0,z.jsx)(I.A,{multiline:!0,maxRows:4,placeholder:"Nh\u1eadp y\xeau c\u1ea7u t\u1ea1o h\u1ee3p \u0111\u1ed3ng...",value:r,onChange:n=>c(n.target.value),fullWidth:!0,variant:"outlined",disabled:t,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",endIcon:t?(0,z.jsx)(O.A,{size:20,color:"inherit"}):(0,z.jsx)(E.A,{}),disabled:!r.trim()||t,type:"submit",sx:{height:56,borderRadius:2,px:3},children:t?"\u0110ang x\u1eed l\xfd...":"Sinh h\u1ee3p \u0111\u1ed3ng"})]})]})};var q=t(73849),Q=t(22672),K=t(37305);const $=n=>{let{content:e,onUpdate:t,loading:i,onSaveTemplate:a}=n;return(0,z.jsxs)(l.A,{sx:{height:"100%",display:"flex",flexDirection:"column",p:0},children:[(0,z.jsxs)(l.A,{sx:{p:2,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,z.jsx)(s.A,{variant:"h6",children:"Xem tr\u01b0\u1edbc h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsxs)(l.A,{sx:{display:"flex",gap:1},children:[(0,z.jsx)(h.A,{variant:"outlined",size:"small",startIcon:(0,z.jsx)(M.A,{}),disabled:!e||i,children:"Ch\u1ec9nh s\u1eeda"}),(0,z.jsx)(h.A,{variant:"outlined",size:"small",startIcon:(0,z.jsx)(K.A,{}),disabled:!e||i,children:"T\u1ea3i xu\u1ed1ng"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",size:"small",startIcon:(0,z.jsx)(Q.A,{}),disabled:!e||i,onClick:()=>{a&&e&&a(e)},children:"L\u01b0u th\xe0nh Template"})]})]}),(0,z.jsx)(l.A,{sx:{flexGrow:1,overflowY:"auto",p:2},children:i?(0,z.jsxs)(l.A,{children:[(0,z.jsx)(q.A,{variant:"text",height:40,width:"60%"}),(0,z.jsx)(q.A,{variant:"text",height:20}),(0,z.jsx)(q.A,{variant:"text",height:20}),(0,z.jsx)(q.A,{variant:"text",height:20,width:"80%"}),(0,z.jsx)(l.A,{sx:{my:2},children:(0,z.jsx)(_.A,{})}),(0,z.jsx)(q.A,{variant:"text",height:30,width:"40%"}),(0,z.jsx)(q.A,{variant:"text",height:20}),(0,z.jsx)(q.A,{variant:"text",height:20}),(0,z.jsx)(q.A,{variant:"text",height:20,width:"90%"}),(0,z.jsx)(l.A,{sx:{my:2},children:(0,z.jsx)(_.A,{})}),(0,z.jsx)(q.A,{variant:"text",height:30,width:"40%"}),(0,z.jsx)(q.A,{variant:"text",height:20}),(0,z.jsx)(q.A,{variant:"text",height:20})]}):e?(0,z.jsx)(o.A,{elevation:0,sx:{height:"100%",p:2,backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:(0,z.jsx)("textarea",{value:e,onChange:n=>{t(n.target.value)},style:{width:"100%",height:"100%",padding:"16px",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"8px",resize:"none",fontFamily:"inherit",fontSize:"14px",lineHeight:"1.5",backgroundColor:"white"}})}):(0,z.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",textAlign:"center",p:3},children:[(0,z.jsx)(M.A,{sx:{fontSize:60,mb:2,opacity:.7}}),(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Ch\u01b0a c\xf3 n\u1ed9i dung h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)(s.A,{variant:"body1",children:'Nh\u1eadp y\xeau c\u1ea7u c\u1ee7a b\u1ea1n \u1edf b\xean tr\xe1i v\xe0 nh\u1ea5n "Sinh h\u1ee3p \u0111\u1ed3ng" \u0111\u1ec3 AI t\u1ea1o n\u1ed9i dung h\u1ee3p \u0111\u1ed3ng.'})]})})]})},J=n=>{const e=n.includes("ITV")?"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV":"";let t="";const i=n.match(/(?:v\xe0|gi\u1eefa)(?:\s+C\xf4ng\s+ty)?\s+([A-Za-z0-9\s]+)(?:,|\.|$)/i);return i&&i[1]&&(t="C\xd4NG TY ".concat(i[1].trim().toUpperCase())),{party1:e,party2:t}},nn=n=>n.toLowerCase().includes("ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m")?"ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m":n.toLowerCase().includes("d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m")?"d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m":n.toLowerCase().includes("b\u1ea3o tr\xec")?"b\u1ea3o tr\xec ph\u1ea7n m\u1ec1m":n.toLowerCase().includes("th\u01b0\u01a1ng m\u1ea1i")?"th\u01b0\u01a1ng m\u1ea1i":n.toLowerCase().includes("nda")||n.toLowerCase().includes("b\u1ea3o m\u1eadt")?"b\u1ea3o m\u1eadt th\xf4ng tin (NDA)":"d\u1ecbch v\u1ee5",en=n=>{const e=n.match(/(\d+(?:\.\d+)?)\s*(tri\u1ec7u|t\u1ef7|trieu|ty)/i);if(e){const n=parseFloat(e[1]),t=e[2].toLowerCase();return"t\u1ef7"===t||"ty"===t?"".concat(n.toLocaleString("vi-VN"),".000.000.000 VN\u0110 (").concat(n," t\u1ef7 \u0111\u1ed3ng)"):"".concat(n.toLocaleString("vi-VN"),".000.000 VN\u0110 (").concat(n," tri\u1ec7u \u0111\u1ed3ng)")}return"500.000.000 VN\u0110 (N\u0103m tr\u0103m tri\u1ec7u \u0111\u1ed3ng)"},tn=n=>{const e=n.match(/(\d+)\s*(th\xe1ng|n\u0103m|thang|nam)/i);if(e){const n=parseInt(e[1]),t=e[2].toLowerCase();return"".concat(n,"n\u0103m"===t||"nam"===t?" n\u0103m":" th\xe1ng")}return"6 th\xe1ng"},an=(n,e)=>{const t=n?n.match(/(\d+(?:\.\d+)?)/g):null;if(t&&t.length>0){const n=(parseFloat(t[0].replace(/\./g,""))*e/100).toLocaleString("vi-VN");return"".concat(n,".000 VN\u0110")}return{30:"150.000.000 VN\u0110",40:"200.000.000 VN\u0110",50:"250.000.000 VN\u0110"}[e]||"".concat(e,"% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng")},ln=n=>{let{open:e,onClose:t,onSaveTemplate:i=()=>console.log("Template saved")}=n;const[r,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),[x,g]=(0,a.useState)([]),[p,u]=(0,a.useState)(!1),[A,m]=(0,a.useState)(""),[y,v]=(0,a.useState)(!1);return(0,z.jsxs)(f.A,{open:e,onClose:t,fullWidth:!0,maxWidth:"xl",PaperProps:{sx:{height:"90vh",maxHeight:"90vh",m:2,borderRadius:2}},children:[(0,z.jsxs)(b.A,{sx:{m:0,p:2,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[(0,z.jsx)(s.A,{variant:"h6",component:"div",children:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng b\u1eb1ng AI"}),(0,z.jsx)(j.A,{edge:"end",color:"inherit",onClick:t,"aria-label":"close",children:(0,z.jsx)(D.A,{})})]}),(0,z.jsxs)(C.A,{sx:{p:0,display:"flex",overflow:"hidden"},children:[(0,z.jsx)(l.A,{sx:{width:"50%",height:"100%",borderRight:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column"},children:(0,z.jsx)(X,{onSubmit:async n=>{g(e=>[...e,{role:"user",content:n}]),c(!0);try{setTimeout(()=>{const e=(n=>{const e=J(n),t=nn(n),i=en(n),a=tn(n);return"\nH\u1ee2P \u0110\u1ed2NG ".concat(t.toUpperCase(),"\n\nS\u1ed1: ").concat(Math.floor(1e3*Math.random()),"/2025/H\u0110DV\n\nGI\u1eeeA\n\n").concat(e.party1||"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV"," (B\xean A)\n\nV\xc0\n\n").concat(e.party2||"C\xd4NG TY ABC"," (B\xean B)\n\nH\xf4m nay, ng\xe0y ").concat((new Date).getDate()," th\xe1ng ").concat((new Date).getMonth()+1," n\u0103m ").concat((new Date).getFullYear(),", t\u1ea1i Th\xe0nh ph\u1ed1 H\u1ed3 Ch\xed Minh, ch\xfang t\xf4i g\u1ed3m:\n\nB\xcaN A: ").concat(e.party1||"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV","\n- \u0110\u1ecba ch\u1ec9: 123 \u0110\u01b0\u1eddng Nguy\u1ec5n V\u0103n Linh, Qu\u1eadn 7, TP.HCM\n- \u0110i\u1ec7n tho\u1ea1i: 028.1234.5678\n- M\xe3 s\u1ed1 thu\u1ebf: 0123456789\n- \u0110\u1ea1i di\u1ec7n: \xd4ng Nguy\u1ec5n V\u0103n A\n- Ch\u1ee9c v\u1ee5: Gi\xe1m \u0111\u1ed1c\n\nB\xcaN B: ").concat(e.party2||"C\xd4NG TY ABC","\n- \u0110\u1ecba ch\u1ec9: 456 \u0110\u01b0\u1eddng L\xea L\u1ee3i, Qu\u1eadn 1, TP.HCM\n- \u0110i\u1ec7n tho\u1ea1i: 028.8765.4321\n- M\xe3 s\u1ed1 thu\u1ebf: 9876543210\n- \u0110\u1ea1i di\u1ec7n: B\xe0 Tr\u1ea7n Th\u1ecb B\n- Ch\u1ee9c v\u1ee5: Gi\xe1m \u0111\u1ed1c\n\nSau khi b\xe0n b\u1ea1c, hai b\xean th\u1ed1ng nh\u1ea5t k\xfd k\u1ebft H\u1ee3p \u0111\u1ed3ng ").concat(t," v\u1edbi c\xe1c \u0111i\u1ec1u kho\u1ea3n sau:\n\n\u0110I\u1ec0U 1: N\u1ed8I DUNG H\u1ee2P \u0110\u1ed2NG\n\n1.1. B\xean A \u0111\u1ed3ng \xfd cung c\u1ea5p cho B\xean B d\u1ecbch v\u1ee5 ").concat(t," theo c\xe1c y\xeau c\u1ea7u v\xe0 ti\xeau chu\u1ea9n \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m H\u1ee3p \u0111\u1ed3ng n\xe0y.\n\n1.2. B\xean B \u0111\u1ed3ng \xfd s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 v\xe0 thanh to\xe1n cho B\xean A theo quy \u0111\u1ecbnh t\u1ea1i H\u1ee3p \u0111\u1ed3ng n\xe0y.\n\n\u0110I\u1ec0U 2: GI\xc1 TR\u1eca H\u1ee2P \u0110\u1ed2NG V\xc0 PH\u01af\u01a0NG TH\u1ee8C THANH TO\xc1N\n\n2.1. T\u1ed5ng gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng: ").concat(i||"500.000.000 VN\u0110 (N\u0103m tr\u0103m tri\u1ec7u \u0111\u1ed3ng)",".\n\n2.2. Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: Thanh to\xe1n theo t\u1eebng giai \u0111o\u1ea1n nh\u01b0 sau:\n   - \u0110\u1ee3t 1: 30% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(an(i,30)," - Thanh to\xe1n sau khi k\xfd h\u1ee3p \u0111\u1ed3ng.\n   - \u0110\u1ee3t 2: 40% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(an(i,40)," - Thanh to\xe1n sau khi ho\xe0n th\xe0nh giai \u0111o\u1ea1n 1.\n   - \u0110\u1ee3t 3: 30% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(an(i,30)," - Thanh to\xe1n sau khi nghi\u1ec7m thu v\xe0 b\xe0n giao.\n\n2.3. H\xecnh th\u1ee9c thanh to\xe1n: Chuy\u1ec3n kho\u1ea3n ng\xe2n h\xe0ng.\n\n\u0110I\u1ec0U 3: TH\u1edcI GIAN TH\u1ef0C HI\u1ec6N\n\n3.1. Th\u1eddi gian th\u1ef1c hi\u1ec7n h\u1ee3p \u0111\u1ed3ng: ").concat(a||"6 th\xe1ng"," k\u1ec3 t\u1eeb ng\xe0y k\xfd.\n\n3.2. L\u1ecbch tr\xecnh th\u1ef1c hi\u1ec7n chi ti\u1ebft \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m.\n\n\u0110I\u1ec0U 4: QUY\u1ec0N V\xc0 NGH\u0128A V\u1ee4 C\u1ee6A B\xcaN A\n\n4.1. Quy\u1ec1n c\u1ee7a B\xean A:\n   - Y\xeau c\u1ea7u B\xean B thanh to\xe1n \u0111\xfang h\u1ea1n theo quy \u0111\u1ecbnh t\u1ea1i H\u1ee3p \u0111\u1ed3ng.\n   - Y\xeau c\u1ea7u B\xean B cung c\u1ea5p th\xf4ng tin, t\xe0i li\u1ec7u c\u1ea7n thi\u1ebft \u0111\u1ec3 th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n4.2. Ngh\u0129a v\u1ee5 c\u1ee7a B\xean A:\n   - Cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xfang ti\u1ebfn \u0111\u1ed9 v\xe0 ch\u1ea5t l\u01b0\u1ee3ng theo th\u1ecfa thu\u1eadn.\n   - B\u1ea3o m\u1eadt th\xf4ng tin c\u1ee7a B\xean B trong qu\xe1 tr\xecnh th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n\u0110I\u1ec0U 5: QUY\u1ec0N V\xc0 NGH\u0128A V\u1ee4 C\u1ee6A B\xcaN B\n\n5.1. Quy\u1ec1n c\u1ee7a B\xean B:\n   - Y\xeau c\u1ea7u B\xean A cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xfang ti\u1ebfn \u0111\u1ed9 v\xe0 ch\u1ea5t l\u01b0\u1ee3ng.\n   - \u0110\u01b0\u1ee3c cung c\u1ea5p th\xf4ng tin v\u1ec1 ti\u1ebfn \u0111\u1ed9 th\u1ef1c hi\u1ec7n d\u1ef1 \xe1n.\n\n5.2. Ngh\u0129a v\u1ee5 c\u1ee7a B\xean B:\n   - Thanh to\xe1n \u0111\u1ea7y \u0111\u1ee7 v\xe0 \u0111\xfang h\u1ea1n cho B\xean A.\n   - Cung c\u1ea5p th\xf4ng tin, t\xe0i li\u1ec7u c\u1ea7n thi\u1ebft cho B\xean A \u0111\u1ec3 th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n\u0110I\u1ec0U 6: \u0110I\u1ec0U KHO\u1ea2N CHUNG\n\n6.1. H\u1ee3p \u0111\u1ed3ng n\xe0y c\xf3 hi\u1ec7u l\u1ef1c k\u1ec3 t\u1eeb ng\xe0y k\xfd v\xe0 s\u1ebd ch\u1ea5m d\u1ee9t sau khi hai b\xean ho\xe0n th\xe0nh ngh\u0129a v\u1ee5.\n\n6.2. M\u1ecdi tranh ch\u1ea5p ph\xe1t sinh s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft th\xf4ng qua th\u01b0\u01a1ng l\u01b0\u1ee3ng. Tr\u01b0\u1eddng h\u1ee3p kh\xf4ng th\u1ec3 th\u01b0\u01a1ng l\u01b0\u1ee3ng \u0111\u01b0\u1ee3c, tranh ch\u1ea5p s\u1ebd \u0111\u01b0\u1ee3c \u0111\u01b0a ra T\xf2a \xe1n c\xf3 th\u1ea9m quy\u1ec1n \u0111\u1ec3 gi\u1ea3i quy\u1ebft.\n\n6.3. H\u1ee3p \u0111\u1ed3ng n\xe0y \u0111\u01b0\u1ee3c l\u1eadp th\xe0nh 04 b\u1ea3n, m\u1ed7i b\xean gi\u1eef 02 b\u1ea3n c\xf3 gi\xe1 tr\u1ecb ph\xe1p l\xfd nh\u01b0 nhau.\n\n\u0110\u1ea0I DI\u1ec6N B\xcaN A                                  \u0110\u1ea0I DI\u1ec6N B\xcaN B\n")})(n);d(e),g(n=>[...n,{role:"assistant",content:"T\xf4i \u0111\xe3 t\u1ea1o h\u1ee3p \u0111\u1ed3ng d\u1ef1a tr\xean y\xeau c\u1ea7u c\u1ee7a b\u1ea1n. B\u1ea1n c\xf3 th\u1ec3 xem v\xe0 ch\u1ec9nh s\u1eeda \u1edf b\xean ph\u1ea3i."}]),c(!1)},2e3)}catch(e){console.error("Error generating contract:",e),c(!1),g(n=>[...n,{role:"assistant",content:"\u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea1o h\u1ee3p \u0111\u1ed3ng. Vui l\xf2ng th\u1eed l\u1ea1i."}])}},loading:r,chatHistory:x})}),(0,z.jsx)(l.A,{sx:{width:"50%",height:"100%"},children:(0,z.jsx)($,{content:o,onUpdate:n=>{d(n)},loading:r,onSaveTemplate:n=>{if(n){u(!0);const e=n.split("\n")[0];m(e||"H\u1ee3p \u0111\u1ed3ng m\u1edbi")}}})})]}),(0,z.jsxs)(f.A,{open:p,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[(0,z.jsx)(b.A,{children:"L\u01b0u th\xe0nh Template"}),(0,z.jsx)(C.A,{children:(0,z.jsxs)(l.A,{sx:{pt:1},children:[(0,z.jsx)(s.A,{variant:"body2",gutterBottom:!0,children:"\u0110\u1eb7t t\xean cho template h\u1ee3p \u0111\u1ed3ng n\xe0y \u0111\u1ec3 l\u01b0u v\xe0o h\u1ec7 th\u1ed1ng"}),(0,z.jsx)(I.A,{autoFocus:!0,margin:"dense",label:"T\xean template",fullWidth:!0,variant:"outlined",value:A,onChange:n=>m(n.target.value),sx:{mb:3,mt:2}}),(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[(0,z.jsx)(h.A,{onClick:()=>u(!1),disabled:y,children:"H\u1ee7y"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>{if(o&&A){v(!0);const n=/\{\{([^}]+)\}\}/g,e=o.match(n)||[],a={name:A,type:"AI",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Ng\u01b0\u1eddi d\xf9ng hi\u1ec7n t\u1ea1i",placeholderCount:e.length,isDefault:!1,status:"active",content:o};i(a),v(!1),u(!1),t()}},disabled:!A.trim()||y,children:y?"\u0110ang l\u01b0u...":"L\u01b0u template"})]})]})})]})]})},sn=[{id:"1",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m",type:"internal",createdAt:"2025-01-15T00:00:00.000Z",updatedAt:"2025-01-15T00:00:00.000Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,status:"active"},{id:"2",name:"H\u1ee3p \u0111\u1ed3ng b\u1ea3o tr\xec",type:"customer",createdAt:"2025-02-20T00:00:00.000Z",updatedAt:"2025-02-20T00:00:00.000Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,status:"active"},{id:"3",name:"H\u1ee3p \u0111\u1ed3ng NDA",type:"internal",createdAt:"2025-03-10T00:00:00.000Z",updatedAt:"2025-03-10T00:00:00.000Z",createdBy:"L\xea V\u0103n C",placeholderCount:6,isDefault:!1,status:"inactive"}],rn=n=>{let{onUploadClick:e,templates:t=[],loading:r=!1}=n;const[c,h]=(0,a.useState)({search:"",type:"all",status:"all"}),[d,x]=(0,a.useState)(0),[g,p]=(0,a.useState)(10),[u,A]=(0,a.useState)(!1),[m,j]=(0,a.useState)(null),y=t.length>0?t:sn,v=r,[f,b]=(0,a.useState)([]),[C,T]=(0,a.useState)(0);(0,a.useEffect)(()=>{(async()=>{try{let n=[...y];if(c.search){const e=c.search.toLowerCase();n=n.filter(n=>n.name.toLowerCase().includes(e))}"all"!==c.type&&(n=n.filter(n=>n.type===c.type)),"all"!==c.status&&(n=n.filter(n=>n.status===c.status)),T(n.length);const e=d*g,t=n.slice(e,e+g);b(t)}catch(n){console.error("Error filtering templates:",n)}})()},[c,d,g,y]);return(0,z.jsxs)(l.A,{children:[(0,z.jsxs)(l.A,{mb:3,children:[(0,z.jsx)(s.A,{variant:"h5",component:"h2",gutterBottom:!0,children:"Danh s\xe1ch Template H\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Qu\u1ea3n l\xfd v\xe0 t\u1ea1o m\u1edbi c\xe1c m\u1eabu h\u1ee3p \u0111\u1ed3ng"})]}),(0,z.jsxs)(o.A,{sx:{p:3,mb:3},children:[(0,z.jsx)(W,{filters:c,onFilterChange:n=>{h(n),x(0)},onUploadClick:e,onCreateWithAIClick:()=>A(!0)}),(0,z.jsx)(ln,{open:u,onClose:()=>A(!1),onSaveTemplate:n=>{try{const e="ai-".concat(Date.now()),t=(0,i.A)((0,i.A)({},n),{},{id:e});return b(n=>[t,...n]),T(n=>n+1),j(e),alert("Template \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u th\xe0nh c\xf4ng!"),!0}catch(e){return console.error("Error saving AI template:",e),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi l\u01b0u template!"),!1}}}),v?(0,z.jsx)(l.A,{py:4,textAlign:"center",children:(0,z.jsx)(s.A,{children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."})}):(0,z.jsx)(F,{templates:f,page:d,rowsPerPage:g,totalRows:C,onPageChange:n=>{x(n)},onRowsPerPageChange:n=>{p(n),x(0)},onView:n=>{console.log("View template:",n)},onEdit:n=>{console.log("Edit template:",n)},onSetDefault:n=>{console.log("Set default template:",n)},onDelete:n=>{window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a template n\xe0y?")&&(console.log("Delete template:",n),T(n=>n-1))}})]})]})};var cn=t(24858),on=t(18403),hn=t(80899),dn=t(10256),xn=t(3353),gn=t(67203),pn=t(51697);const un=hn.Ik({name:hn.Yj().required("T\xean template l\xe0 b\u1eaft bu\u1ed9c"),description:hn.Yj().optional(),type:hn.Yj().oneOf(["internal","customer"]).required("Lo\u1ea1i template l\xe0 b\u1eaft bu\u1ed9c"),file:hn.gl().required("File template l\xe0 b\u1eaft bu\u1ed9c").test("fileType","Ch\u1ec9 ch\u1ea5p nh\u1eadn file .docx",n=>{if(!n)return!1;return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===n.type}),extractedFields:hn.YO().of(hn.Ik({originalText:hn.Yj().required(),placeholder:hn.Yj().required(),type:hn.Yj().required(),description:hn.Yj().optional()})).default([])}).required(),An=n=>{var e;let{open:t,onClose:r,onSubmit:c}=n;const[m,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),[B,H]=(0,a.useState)([]),{register:w,handleSubmit:V,reset:P,setValue:W,watch:G,formState:{errors:L}}=(0,cn.mN)({resolver:(0,on.t)(un),defaultValues:{name:"",description:"",type:"customer",file:void 0,extractedFields:[]}}),U=G("file"),M=(n,e,t)=>{const a=[...B];a[n]=(0,i.A)((0,i.A)({},a[n]),{},{[e]:t}),H(a),W("extractedFields",a)},Y=()=>{P(),H([]),r()};return(0,z.jsxs)(f.A,{open:t,onClose:Y,maxWidth:"lg",fullWidth:!0,children:[(0,z.jsx)(b.A,{children:(0,z.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,z.jsx)(s.A,{variant:"h6",children:"T\u1ea3i l\xean Template m\u1edbi"}),(0,z.jsx)(j.A,{onClick:Y,size:"small",children:(0,z.jsx)(D.A,{})})]})}),(0,z.jsxs)("form",{onSubmit:V(async n=>{try{y(!0),await c(n),Y()}catch(e){console.error("Error uploading template:",e)}finally{y(!1)}}),children:[(0,z.jsx)(C.A,{dividers:!0,children:(0,z.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 2fr"},gap:3},children:[(0,z.jsxs)(l.A,{children:[(0,z.jsx)(I.A,(0,i.A)((0,i.A)({},w("name")),{},{label:"T\xean template",fullWidth:!0,margin:"normal",error:!!L.name,helperText:null===(e=L.name)||void 0===e?void 0:e.message,disabled:m})),(0,z.jsx)(I.A,(0,i.A)((0,i.A)({},w("description")),{},{label:"M\xf4 t\u1ea3",fullWidth:!0,multiline:!0,rows:3,margin:"normal",disabled:m})),(0,z.jsxs)(dn.A,{fullWidth:!0,margin:"normal",error:!!L.type,children:[(0,z.jsx)(xn.A,{children:"Lo\u1ea1i template"}),(0,z.jsxs)(gn.A,(0,i.A)((0,i.A)({label:"Lo\u1ea1i template",defaultValue:"customer",disabled:m},w("type")),{},{children:[(0,z.jsx)(k.A,{value:"customer",children:"Cho kh\xe1ch h\xe0ng"}),(0,z.jsx)(k.A,{value:"internal",children:"N\u1ed9i b\u1ed9"})]}))]}),(0,z.jsxs)(l.A,{mt:2,mb:2,children:[(0,z.jsx)("input",{accept:".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document",style:{display:"none"},id:"template-upload",type:"file",onChange:n=>{var e;const t=null===(e=n.target.files)||void 0===e?void 0:e[0];t&&(W("file",t),N(!0),setTimeout(()=>{const n=[{originalText:"C\xd4NG TY TNHH GI\u1ea4Y CAO PH\xc1T",placeholder:"TEN_CONG_TY_A",type:"text",description:"T\xean c\xf4ng ty b\xean A"},{originalText:"Th\u1eeda \u0111\u1ea5t s\u1ed1 352, T\u1edd b\u1ea3n \u0111\u1ed3 s\u1ed1 14, Khu Ph\u1ed1 M\u1ef9 Hi\u1ec7p, Ph\u01b0\u1eddng Th\xe1i Ho\xe0, Th\xe0nh ph\u1ed1 T\xe2n Uy\xean, T\u1ec9nh B\xecnh D\u01b0\u01a1ng",placeholder:"DIA_CHI_A",type:"text",description:"\u0110\u1ecba ch\u1ec9 b\xean A"},{originalText:"0274 3775 179",placeholder:"DIEN_THOAI_A",type:"phone",description:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\xean A"},{originalText:"3701711279",placeholder:"MA_SO_THUE_A",type:"taxcode",description:"M\xe3 s\u1ed1 thu\u1ebf b\xean A"},{originalText:"L\xca TH\u1eca KIM CHI",placeholder:"NGUOI_DAI_DIEN_A",type:"text",description:"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n b\xean A"},{originalText:"Gi\xe1m \u0111\u1ed1c",placeholder:"CHUC_VU_A",type:"text",description:"Ch\u1ee9c v\u1ee5 ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n b\xean A"}];H(n),W("extractedFields",n),N(!1)},2e3))},disabled:m||v}),(0,z.jsx)("label",{htmlFor:"template-upload",children:(0,z.jsx)(h.A,{variant:"outlined",component:"span",startIcon:(0,z.jsx)(pn.A,{}),disabled:m||v,children:"Ch\u1ecdn file template (.docx)"})}),U&&(0,z.jsxs)(s.A,{variant:"body2",sx:{mt:1},children:["\u0110\xe3 ch\u1ecdn: ",U.name]}),L.file&&(0,z.jsx)(s.A,{color:"error",variant:"caption",display:"block",children:L.file.message})]})]}),(0,z.jsx)(l.A,{children:(0,z.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,z.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"C\xe1c tr\u01b0\u1eddng \u0111\u01b0\u1ee3c ph\xe2n t\xedch t\u1eeb h\u1ee3p \u0111\u1ed3ng:"}),v?(0,z.jsxs)(l.A,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:4,children:[(0,z.jsx)(O.A,{size:40}),(0,z.jsx)(s.A,{variant:"body2",color:"textSecondary",sx:{mt:2},children:"\u0110ang ph\xe2n t\xedch n\u1ed9i dung h\u1ee3p \u0111\u1ed3ng..."})]}):B.length>0?(0,z.jsx)(d.A,{component:o.A,variant:"outlined",children:(0,z.jsxs)(x.A,{size:"small",children:[(0,z.jsx)(g.A,{children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(u.A,{children:"Tr\u01b0\u1eddng g\u1ed1c trong file"}),(0,z.jsx)(u.A,{children:"Placeholder g\u1ee3i \xfd"}),(0,z.jsx)(u.A,{children:"Ki\u1ec3u d\u1eef li\u1ec7u"}),(0,z.jsx)(u.A,{children:"M\xf4 t\u1ea3"}),(0,z.jsx)(u.A,{align:"center",children:"Thao t\xe1c"})]})}),(0,z.jsx)(A.A,{children:B.map((n,e)=>(0,z.jsxs)(p.A,{children:[(0,z.jsx)(u.A,{children:n.originalText}),(0,z.jsx)(u.A,{children:(0,z.jsx)(I.A,{size:"small",value:n.placeholder,onChange:n=>M(e,"placeholder",n.target.value),fullWidth:!0,disabled:m})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(dn.A,{fullWidth:!0,size:"small",children:(0,z.jsxs)(gn.A,{value:n.type,onChange:n=>M(e,"type",n.target.value),disabled:m,children:[(0,z.jsx)(k.A,{value:"text",children:"V\u0103n b\u1ea3n"}),(0,z.jsx)(k.A,{value:"number",children:"S\u1ed1"}),(0,z.jsx)(k.A,{value:"date",children:"Ng\xe0y th\xe1ng"}),(0,z.jsx)(k.A,{value:"phone",children:"\u0110i\u1ec7n tho\u1ea1i"}),(0,z.jsx)(k.A,{value:"email",children:"Email"}),(0,z.jsx)(k.A,{value:"taxcode",children:"M\xe3 s\u1ed1 thu\u1ebf"})]})})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(I.A,{size:"small",value:n.description||"",onChange:n=>M(e,"description",n.target.value),fullWidth:!0,disabled:m})}),(0,z.jsx)(u.A,{align:"center",children:(0,z.jsx)(j.A,{size:"small",color:"error",onClick:()=>{const n=[...B];n.splice(e,1),H(n),W("extractedFields",n)},disabled:m,children:(0,z.jsx)(S.A,{fontSize:"small"})})})]},e))})]})}):U?(0,z.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Kh\xf4ng t\xecm th\u1ea5y tr\u01b0\u1eddng n\xe0o c\xf3 th\u1ec3 tr\xedch xu\u1ea5t t\u1eeb file. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i n\u1ed9i dung file."}):(0,z.jsx)(s.A,{variant:"body2",color:"textSecondary",children:"Vui l\xf2ng t\u1ea3i l\xean file h\u1ee3p \u0111\u1ed3ng \u0111\u1ec3 AI ph\xe2n t\xedch v\xe0 \u0111\u1ec1 xu\u1ea5t c\xe1c tr\u01b0\u1eddng d\u1eef li\u1ec7u."}),(0,z.jsxs)(l.A,{mt:3,children:[(0,z.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng:"}),(0,z.jsxs)(s.A,{variant:"body2",color:"textSecondary",children:["- AI s\u1ebd t\u1ef1 \u0111\u1ed9ng ph\xe2n t\xedch n\u1ed9i dung h\u1ee3p \u0111\u1ed3ng v\xe0 \u0111\u1ec1 xu\u1ea5t c\xe1c tr\u01b0\u1eddng c\u1ea7n \u0111i\u1ec1n",(0,z.jsx)("br",{}),"- B\u1ea1n c\xf3 th\u1ec3 ch\u1ec9nh s\u1eeda t\xean placeholder v\xe0 m\xf4 t\u1ea3 cho ph\xf9 h\u1ee3p",(0,z.jsx)("br",{}),"- Khi t\u1ea1o h\u1ee3p \u0111\u1ed3ng, h\u1ec7 th\u1ed1ng s\u1ebd t\u1ef1 \u0111\u1ed9ng \u0111i\u1ec1n c\xe1c th\xf4ng tin v\xe0o c\xe1c v\u1ecb tr\xed t\u01b0\u01a1ng \u1ee9ng"]})]})]})})]})}),(0,z.jsxs)(T.A,{sx:{p:2,borderTop:1,borderColor:"divider"},children:[(0,z.jsx)(h.A,{onClick:Y,disabled:m,children:"H\u1ee7y"}),(0,z.jsx)(h.A,{type:"submit",variant:"contained",color:"primary",disabled:m||v||0===B.length,startIcon:m?(0,z.jsx)(O.A,{size:20}):null,children:m?"\u0110ang t\u1ea3i l\xean...":"L\u01b0u Template"})]})]})]})};var mn=t(53407),jn=t(79693),yn=t(99147),vn=t(47951),fn=t(94084),bn=t(57488),Cn=t(33699),Tn=t(83542),Nn=t(92292),Bn=t(24793),Hn=t(78255);const Sn=n=>{let{payments:e,onPaymentsChange:t,onBack:a,onNext:r}=n;const c=[{value:"pending",label:"Ch\u01b0a thanh to\xe1n"},{value:"waiting",label:"Ch\u1edd thanh to\xe1n"},{value:"paid",label:"\u0110\xe3 thanh to\xe1n"}],m=(n,a,l)=>{t(e.map(e=>e.id===n?(0,i.A)((0,i.A)({},e),{},{[a]:l}):e))};return(0,z.jsxs)(l.A,{children:[(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,z.jsx)(j.A,{onClick:a,sx:{mr:1},children:(0,z.jsx)(w.A,{})}),(0,z.jsx)(s.A,{variant:"h6",children:"H\u1ea1ng m\u1ee5c thanh to\xe1n"})]}),(0,z.jsxs)(o.A,{variant:"outlined",sx:{p:2,mb:3},children:[(0,z.jsx)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Th\xeam c\xe1c \u0111\u1ee3t thanh to\xe1n cho h\u1ee3p \u0111\u1ed3ng. M\u1ed7i \u0111\u1ee3t thanh to\xe1n bao g\u1ed3m \u0111i\u1ec1u ki\u1ec7n, s\u1ed1 ti\u1ec1n, ng\xe0y thanh to\xe1n, tr\u1ea1ng th\xe1i v\xe0 ghi ch\xfa."}),(0,z.jsx)(d.A,{children:(0,z.jsxs)(x.A,{size:"small",children:[(0,z.jsx)(g.A,{children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(u.A,{children:"\u0110i\u1ec1u ki\u1ec7n"}),(0,z.jsx)(u.A,{children:"S\u1ed1 ti\u1ec1n"}),(0,z.jsx)(u.A,{children:"Ng\xe0y thanh to\xe1n"}),(0,z.jsx)(u.A,{children:"Tr\u1ea1ng th\xe1i"}),(0,z.jsx)(u.A,{children:"Ghi ch\xfa"}),(0,z.jsx)(u.A,{children:"X\xf3a"})]})}),(0,z.jsx)(A.A,{children:0===e.length?(0,z.jsx)(p.A,{children:(0,z.jsx)(u.A,{colSpan:6,align:"center",children:(0,z.jsx)(s.A,{variant:"body2",color:"text.secondary",children:'Ch\u01b0a c\xf3 \u0111\u1ee3t thanh to\xe1n n\xe0o. Nh\u1ea5n "Th\xeam \u0111\u1ee3t thanh to\xe1n" \u0111\u1ec3 b\u1eaft \u0111\u1ea7u.'})})}):e.map(n=>(0,z.jsxs)(p.A,{children:[(0,z.jsx)(u.A,{children:(0,z.jsx)(I.A,{fullWidth:!0,size:"small",value:n.condition,onChange:e=>m(n.id,"condition",e.target.value),placeholder:"V\xed d\u1ee5: Sau khi k\xfd H\u0110"})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(I.A,{fullWidth:!0,size:"small",value:0===n.amount?"":n.amount.toString(),onChange:e=>((n,e)=>{const t=e.replace(/[^0-9]/g,""),i=t?parseInt(t,10):0;m(n,"amount",i)})(n.id,e.target.value),placeholder:"0",InputProps:{endAdornment:(0,z.jsx)(Cn.A,{position:"end",children:"VN\u0110"})}})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(Bn.$J,{dateAdapter:Nn.h,adapterLocale:Hn.vi,children:(0,z.jsx)(Tn.l,{value:n.paymentDate,onChange:e=>m(n.id,"paymentDate",e),slotProps:{textField:{size:"small",fullWidth:!0}}})})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(dn.A,{fullWidth:!0,size:"small",children:(0,z.jsx)(gn.A,{value:n.status,onChange:e=>m(n.id,"status",e.target.value),children:c.map(n=>(0,z.jsx)(k.A,{value:n.value,children:n.label},n.value))})})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(I.A,{fullWidth:!0,size:"small",value:n.note,onChange:e=>m(n.id,"note",e.target.value),placeholder:"Ghi ch\xfa"})}),(0,z.jsx)(u.A,{children:(0,z.jsx)(j.A,{color:"error",onClick:()=>{return i=n.id,void t(e.filter(n=>n.id!==i));var i},size:"small",children:(0,z.jsx)(S.A,{})})})]},n.id))})]})}),(0,z.jsx)(l.A,{sx:{mt:2},children:(0,z.jsx)(h.A,{startIcon:(0,z.jsx)(N.A,{}),variant:"outlined",onClick:()=>{const n={id:"payment-".concat(Date.now()),condition:"",amount:0,paymentDate:new Date,status:"pending",note:""};t([...e,n])},children:"Th\xeam \u0111\u1ee3t thanh to\xe1n"})})]}),(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,z.jsx)(h.A,{variant:"outlined",onClick:a,children:"Quay l\u1ea1i"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",onClick:r,children:"Ti\u1ebfp t\u1ee5c"})]})]})},wn=n=>{let{templates:e,onBack:t,onCreate:r}=n;const[c,d]=(0,a.useState)(0),[x,g]=(0,a.useState)(null),[p,u]=(0,a.useState)({}),[A,y]=(0,a.useState)([""]),[v,f]=(0,a.useState)([]),b=a.useCallback(()=>{const n="HD".concat((new Date).getFullYear()).concat(((new Date).getMonth()+1).toString().padStart(2,"0")).concat((new Date).getDate().toString().padStart(2,"0"),"001"),e=n=>new Intl.NumberFormat("vi-VN").format(n),t=v.length>0?'\n      <h3 style="font-weight: bold; margin-top: 30px; margin-bottom: 20px;">\u0110I\u1ec0U 2: L\u1ecaCH THANH TO\xc1N</h3>\n      <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n        <thead>\n          <tr style="background-color: #f2f2f2;">\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">STT</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">\u0110i\u1ec1u ki\u1ec7n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S\u1ed1 ti\u1ec1n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Ng\xe0y thanh to\xe1n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Ghi ch\xfa</th>\n          </tr>\n        </thead>\n        <tbody>\n          '.concat(v.map((n,t)=>'\n            <tr>\n              <td style="border: 1px solid #ddd; padding: 8px;">'.concat(t+1,'</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(n.condition,'</td>\n              <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(e(n.amount),' VN\u0110</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(n.paymentDate?new Date(n.paymentDate).toLocaleDateString("vi-VN"):"",'</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(n.note,"</td>\n            </tr>\n          ")).join(""),'\n          <tr style="font-weight: bold; background-color: #f9f9f9;">\n            <td style="border: 1px solid #ddd; padding: 8px;" colspan="2">T\u1ed5ng c\u1ed9ng</td>\n            <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(e(v.reduce((n,e)=>n+e.amount,0)),' VN\u0110</td>\n            <td style="border: 1px solid #ddd; padding: 8px;" colspan="2"></td>\n          </tr>\n        </tbody>\n      </table>\n    '):"";return'\n      <div style="text-align: center; margin-bottom: 20px;">\n        <h2 style="font-weight: bold; text-transform: uppercase;">C\u1ed9ng H\xf2a X\xe3 H\u1ed9i Ch\u1ee7 Ngh\u0129a Vi\u1ec7t Nam</h2>\n        <h3 style="font-weight: bold;">\u0110\u1ed9c L\u1eadp \u2013 T\u1ef1 Do \u2013 H\u1ea1nh Ph\xfac</h3>\n        <p style="margin-bottom: 20px;">__________</p>\n        <h1 style="font-weight: bold; text-transform: uppercase; margin-bottom: 20px;">H\u1ee2P \u0110\u1ed2NG NGUY\xcaN T\u1eaeC CUNG C\u1ea4P D\u1ecaCH V\u1ee4 PH\u1ea6N M\u1ec0M</h1>\n        <h2 style="font-weight: bold; margin-bottom: 30px;">S\u1ed1: '.concat(n,"</h2>\n      </div>\n\n      <p>\n        C\u0103n c\u1ee9 v\xe0o Lu\u1eadt Th\u01b0\u01a1ng M\u1ea1i c\u1ee7a Qu\u1ed1c h\u1ed9i n\u01b0\u1edbc C\u1ed9ng H\xf2a X\xe3 H\u1ed9i Ch\u1ee7 Ngh\u0129a Vi\u1ec7t Nam \u0111\u01b0\u1ee3c ban h\xe0nh ng\xe0y 14/06/2005, c\xf3 hi\u1ec7u l\u1ef1c t\u1eeb ng\xe0y 01/01/2006.\n      </p>\n      \n      ").concat(Object.entries(p).map(n=>{let[e,t]=n;return"<p>C\u0103n c\u1ee9 v\xe0o ".concat(e,": <strong>").concat(t,"</strong></p>")}).join("\n"),'\n\n      <h3 style="font-weight: bold; margin-top: 30px; margin-bottom: 20px;">\u0110I\u1ec0U 1: N\u1ed8I DUNG H\u1ee2P \u0110\u1ed2NG</h3>\n      <p>\n        B\xean A \u1ee7y th\xe1c cho b\xean B c\xf4ng vi\u1ec7c x\xe2y d\u1ef1ng v\xe0 ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m v\xe0 cung c\u1ea5p c\xe1c d\u1ecbch v\u1ee5 li\xean quan \u0111\u1ebfn ph\u1ea7n m\u1ec1m c\u1ee7a b\xean A.\n      </p>\n      <p>\n        B\xean B s\u1ebd ch\u1ecbu tr\xe1ch nhi\u1ec7m x\xe2y d\u1ef1ng ph\u1ea7n m\u1ec1m \u0111\xfang nh\u01b0 th\u1ecfa thu\u1eadn c\u1ee7a c\u1ea3 B\xean A v\xe0 B\xean B.\n      </p>\n      <p>\n        V\u1ec1 chi ti\u1ebft n\u1ed9i dung c\xf4ng vi\u1ec7c v\xe0 chi ph\xed th\u1ef1c hi\u1ec7n s\u1ebd \u0111\u01b0\u1ee3c tr\xecnh b\xe0y trong t\u1eebng Ph\u1ee5 l\u1ee5c c\u1ee5 th\u1ec3.\n      </p>\n      \n      ').concat(t,"\n    ")},[p,v]);(0,a.useEffect)(()=>{3===c&&Object.keys(p).length>0&&Object.values(p).some(n=>n)&&y([b()])},[p,c,b]);const C=()=>{if(!x)return;const n={id:"C".concat(Math.floor(1e3+9e3*Math.random())),name:"H\u1ee3p \u0111\u1ed3ng ".concat(null===x||void 0===x?void 0:x.name," - ").concat((new Date).toLocaleDateString()),templateId:(null===x||void 0===x?void 0:x.id)||"",templateName:(null===x||void 0===x?void 0:x.name)||"",status:"draft",partyA:"C\xf4ng ty TNHH ABC",partyB:"C\xf4ng ty TNHH XYZ",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Ng\u01b0\u1eddi d\xf9ng hi\u1ec7n t\u1ea1i",contractData:p,payments:v};r(n),bn.oR.success("T\u1ea1o h\u1ee3p \u0111\u1ed3ng th\xe0nh c\xf4ng!")},T=[{label:"Ch\u1ecdn m\u1eabu h\u1ee3p \u0111\u1ed3ng",component:()=>(0,z.jsxs)(l.A,{children:[(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Ch\u1ecdn m\u1eabu h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:e.map(n=>(0,z.jsx)("div",{style:{marginBottom:"16px"},children:(0,z.jsxs)(o.A,{elevation:(null===x||void 0===x?void 0:x.id)===n.id?4:1,sx:{p:2,cursor:"pointer",border:(null===x||void 0===x?void 0:x.id)===n.id?"2px solid #1976d2":"1px solid #e0e0e0",height:"100%",display:"flex",flexDirection:"column"},onClick:()=>g(n),children:[(0,z.jsxs)(l.A,{display:"flex",alignItems:"center",mb:1,children:[(0,z.jsx)(vn.A,{color:"primary",sx:{mr:1}}),(0,z.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",children:n.name})]}),(0,z.jsxs)(s.A,{variant:"body2",color:"textSecondary",sx:{flexGrow:1},children:[n.name," - ",n.type]}),(0,z.jsx)(m.A,{label:"".concat(n.placeholderCount," tr\u01b0\u1eddng"),size:"small",sx:{mt:1,alignSelf:"flex-start"}})]})},n.id))}),(0,z.jsx)(l.A,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:(0,z.jsx)(h.A,{variant:"contained",disabled:!x,onClick:()=>{const n={};null!==x&&void 0!==x&&x.extractedFields&&x.extractedFields.length>0?(x.extractedFields.forEach(e=>{n[e.placeholder]=""}),u(n),d(1)):alert("Kh\xf4ng t\xecm th\u1ea5y tr\u01b0\u1eddng n\xe0o trong m\u1eabu h\u1ee3p \u0111\u1ed3ng. Vui l\xf2ng ch\u1ecdn m\u1eabu kh\xe1c.")},children:"Ti\u1ebfp t\u1ee5c"})})]})},{label:"\u0110i\u1ec1n th\xf4ng tin",component:()=>{const n=()=>0===Object.keys(p).filter(n=>!p[n]).length;return(0,z.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,z.jsx)(j.A,{onClick:()=>d(0),sx:{mr:1},children:(0,z.jsx)(w.A,{})}),(0,z.jsxs)(s.A,{variant:"h6",children:["T\u1ea1o h\u1ee3p \u0111\u1ed3ng: ",null===x||void 0===x?void 0:x.name]})]}),(0,z.jsxs)(o.A,{variant:"outlined",sx:{p:3,flexGrow:1,mb:2,overflowY:"auto",maxHeight:"600px"},children:[(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Th\xf4ng tin h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 c\xe1c th\xf4ng tin sau \u0111\u1ec3 t\u1ea1o h\u1ee3p \u0111\u1ed3ng."}),(0,z.jsx)(l.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3,mt:2},children:Object.keys(p).map(n=>(0,z.jsx)(I.A,{label:n,variant:"outlined",fullWidth:!0,value:p[n],onChange:e=>((n,e)=>{u(t=>(0,i.A)((0,i.A)({},t),{},{[n]:e}))})(n,e.target.value),required:!0,error:!p[n],helperText:p[n]?"":"Tr\u01b0\u1eddng n\xe0y l\xe0 b\u1eaft bu\u1ed9c",sx:{mb:2}},n))})]}),(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,z.jsx)(h.A,{variant:"outlined",onClick:()=>d(0),startIcon:(0,z.jsx)(w.A,{}),children:"Quay l\u1ea1i"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>{n()?d(2):alert("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin tr\u01b0\u1edbc khi ti\u1ebfp t\u1ee5c.")},disabled:!n(),children:"Ti\u1ebfp t\u1ee5c"})]})]})}},{label:"H\u1ea1ng m\u1ee5c thanh to\xe1n",component:()=>(0,z.jsx)(Sn,{payments:v,onPaymentsChange:f,onBack:()=>d(1),onNext:()=>d(3)})},{label:"Xem tr\u01b0\u1edbc & X\xe1c nh\u1eadn",component:()=>x?(0,z.jsxs)(l.A,{children:[(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,z.jsx)(j.A,{onClick:()=>d(2),sx:{mr:1},children:(0,z.jsx)(w.A,{})}),(0,z.jsx)(s.A,{variant:"h6",children:"Xem tr\u01b0\u1edbc & X\xe1c nh\u1eadn"})]}),(0,z.jsx)(l.A,{sx:{border:"1px solid #e0e0e0",borderRadius:1,padding:0,overflow:"hidden",mb:3},children:(0,z.jsx)(fn.A,{initialContent:A,onSave:y,onExportPdf:()=>{bn.oR.success("Xu\u1ea5t PDF th\xe0nh c\xf4ng!")}})}),(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,z.jsx)(h.A,{variant:"outlined",onClick:()=>d(1),startIcon:(0,z.jsx)(w.A,{}),children:"Quay l\u1ea1i"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",onClick:C,children:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng"})]})]}):null}];return(0,z.jsxs)(l.A,{sx:{width:"100%"},children:[(0,z.jsx)(mn.A,{activeStep:c,sx:{mb:4},children:T.map((n,e)=>(0,z.jsx)(jn.A,{completed:c>e,children:(0,z.jsx)(yn.A,{children:n.label})},n.label))}),(0,z.jsx)(l.A,{sx:{mt:2},children:T[c].component()})]})};var Dn=t(28330),In=t(26582);const kn=n=>{var e,t,i,r,c,d;let{contract:x,onClose:g,onDelete:p,onEdit:u}=n;const[A,y]=a.useState(!1),v=n=>n?new Date(n).toLocaleDateString("vi-VN"):"Ch\u01b0a x\xe1c \u0111\u1ecbnh";return(0,z.jsxs)(l.A,{children:[(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:3,gap:2},children:[(0,z.jsx)(j.A,{onClick:g,children:(0,z.jsx)(w.A,{})}),(0,z.jsxs)(s.A,{variant:"h5",children:["Chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng: ",x.name]}),(0,z.jsx)(m.A,{label:x.status.toUpperCase(),color:(n=>{switch(n){case"signed":return"success";case"pending":return"warning";case"draft":default:return"default";case"expired":case"cancelled":return"error"}})(x.status),size:"small",sx:{ml:2}})]}),(0,z.jsxs)(o.A,{sx:{p:3,mb:3},children:[(0,z.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[(0,z.jsxs)(l.A,{children:[(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Th\xf4ng tin chung"}),(0,z.jsxs)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[(0,z.jsxs)(l.A,{sx:{flex:"1 1 300px"},children:[(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"M\xe3 h\u1ee3p \u0111\u1ed3ng:"})," ",x.id]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"M\u1eabu h\u1ee3p \u0111\u1ed3ng:"})," ",x.templateName]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"Ng\xe0y t\u1ea1o:"})," ",v(x.createdAt)]})]}),(0,z.jsxs)(l.A,{sx:{flex:"1 1 300px"},children:[(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"Ng\u01b0\u1eddi t\u1ea1o:"})," ",x.createdBy]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i:"})," ",v(x.updatedAt)]}),x.signedAt&&(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"Ng\xe0y k\xfd:"})," ",v(x.signedAt)]}),x.expiresAt&&(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"Ng\xe0y h\u1ebft h\u1ea1n:"})," ",v(x.expiresAt)]})]})]})]}),(0,z.jsxs)(l.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,z.jsx)(h.A,{variant:"outlined",startIcon:(0,z.jsx)(K.A,{}),size:"small",children:"T\u1ea3i xu\u1ed1ng"}),(0,z.jsx)(h.A,{variant:"outlined",startIcon:(0,z.jsx)(Dn.A,{}),size:"small",children:"In"}),(0,z.jsx)(h.A,{variant:"outlined",startIcon:(0,z.jsx)(In.A,{}),size:"small",children:"Chia s\u1ebb"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",startIcon:(0,z.jsx)(M.A,{}),onClick:()=>u(x.id),size:"small",children:"Ch\u1ec9nh s\u1eeda"}),(0,z.jsx)(h.A,{variant:"outlined",color:"error",startIcon:(0,z.jsx)(S.A,{}),onClick:()=>y(!0),size:"small",children:"X\xf3a"})]})]}),(0,z.jsx)(_.A,{sx:{my:3}}),(0,z.jsxs)(l.A,{sx:{mb:4},children:[(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Th\xf4ng tin c\xe1c b\xean"}),(0,z.jsxs)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:4},children:[(0,z.jsx)(l.A,{sx:{flex:"1 1 300px"},children:(0,z.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,z.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"B\xean A (B\xean giao k\u1ebft h\u1ee3p \u0111\u1ed3ng)"}),x.contractData?(0,z.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"T\xean c\xf4ng ty:"})," ",x.contractData.tenBenA]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"\u0110\u1ecba ch\u1ec9:"})," ",x.contractData.diaChiA]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"\u0110i\u1ec7n tho\u1ea1i:"})," ",x.contractData.dienThoaiA]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"M\xe3 s\u1ed1 thu\u1ebf:"})," ",x.contractData.maSoThueA]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n:"})," ",x.contractData.nguoiDaiDienA]}),(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"Ch\u1ee9c v\u1ee5:"})," ",x.contractData.chucVuA]})]}):(0,z.jsx)(s.A,{children:"Kh\xf4ng c\xf3 th\xf4ng tin chi ti\u1ebft"})]})}),(0,z.jsx)(l.A,{sx:{flex:"1 1 300px"},children:(0,z.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,z.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"B\xean B (\u0110\u1ed1i t\xe1c)"}),x.contractData?(0,z.jsxs)(s.A,{children:[(0,z.jsx)("strong",{children:"T\xean c\xf4ng ty:"})," ",x.contractData.tenBenB]}):(0,z.jsx)(s.A,{children:"Kh\xf4ng c\xf3 th\xf4ng tin chi ti\u1ebft"})]})})]})]}),(0,z.jsxs)(l.A,{children:[(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"N\u1ed9i dung h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsxs)(o.A,{variant:"outlined",sx:{p:3},children:[(0,z.jsx)(s.A,{variant:"h5",align:"center",gutterBottom:!0,children:"H\u1ee2P \u0110\u1ed2NG D\u1ecaCH V\u1ee4"}),(0,z.jsxs)(s.A,{paragraph:!0,align:"center",children:["S\u1ed1: ",x.id]}),(0,z.jsxs)(s.A,{paragraph:!0,align:"center",children:[(0,z.jsx)("em",{children:"C\u0103n c\u1ee9 B\u1ed9 lu\u1eadt D\xe2n s\u1ef1 s\u1ed1 91/2015/QH13 ng\xe0y 24 th\xe1ng 11 n\u0103m 2015 c\u1ee7a Qu\u1ed1c h\u1ed9i"}),(0,z.jsx)("br",{}),(0,z.jsx)("em",{children:"C\u0103n c\u1ee9 Lu\u1eadt Th\u01b0\u01a1ng m\u1ea1i s\u1ed1 36/2005/QH11 ng\xe0y 14 th\xe1ng 6 n\u0103m 2005 c\u1ee7a Qu\u1ed1c h\u1ed9i"})]}),(0,z.jsx)(s.A,{paragraph:!0,align:"center",children:(0,z.jsxs)("strong",{children:["H\xf4m nay, ng\xe0y ",(null===(e=x.contractData)||void 0===e?void 0:e.ngayKy)||v(x.createdAt)]})}),(0,z.jsxs)(s.A,{paragraph:!0,children:[(0,z.jsx)("strong",{children:"B\xcaN A:"})," ",(null===(t=x.contractData)||void 0===t?void 0:t.tenBenA)||x.partyA]}),(0,z.jsxs)(s.A,{paragraph:!0,children:[(0,z.jsx)("strong",{children:"B\xcaN B:"})," ",(null===(i=x.contractData)||void 0===i?void 0:i.tenBenB)||x.partyB]}),(0,z.jsx)(s.A,{paragraph:!0,children:"Hai b\xean c\xf9ng th\u1ecfa thu\u1eadn k\xfd k\u1ebft H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 v\u1edbi nh\u1eefng n\u1ed9i dung v\xe0 \u0111i\u1ec1u kho\u1ea3n sau \u0111\xe2y:"}),(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 1: N\u1ed8I DUNG C\xd4NG VI\u1ec6C"}),(0,z.jsx)(s.A,{paragraph:!0,children:"B\xean B \u0111\u1ed3ng \xfd cung c\u1ea5p d\u1ecbch v\u1ee5 theo y\xeau c\u1ea7u c\u1ee7a B\xean A v\u1edbi n\u1ed9i dung chi ti\u1ebft nh\u01b0 trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m."}),(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 2: TH\u1edcI H\u1ea0N H\u1ee2P \u0110\u1ed2NG"}),(0,z.jsxs)(s.A,{paragraph:!0,children:["H\u1ee3p \u0111\u1ed3ng c\xf3 hi\u1ec7u l\u1ef1c t\u1eeb ng\xe0y k\xfd \u0111\u1ebfn ng\xe0y ",x.expiresAt?v(x.expiresAt):"khi ho\xe0n th\xe0nh ngh\u0129a v\u1ee5 h\u1ee3p \u0111\u1ed3ng","."]}),(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 3: GI\xc1 TR\u1eca H\u1ee2P \u0110\u1ed2NG"}),(0,z.jsxs)(s.A,{paragraph:!0,children:["T\u1ed5ng gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng: ",(null===(r=x.contractData)||void 0===r?void 0:r.giaTriHopDong)||"Theo th\u1ecfa thu\u1eadn gi\u1eefa hai b\xean"]}),(0,z.jsxs)(l.A,{sx:{mt:6,display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[(0,z.jsxs)(l.A,{sx:{textAlign:"center",minWidth:200,flex:1},children:[(0,z.jsx)(s.A,{fontWeight:"bold",children:"\u0110\u1ea0I DI\u1ec6N B\xcaN A"}),(0,z.jsx)(s.A,{fontStyle:"italic",children:"(K\xfd, ghi r\xf5 h\u1ecd t\xean)"}),(0,z.jsx)(l.A,{sx:{height:80,mt:2}}),(0,z.jsx)(s.A,{fontWeight:"bold",children:(null===(c=x.contractData)||void 0===c?void 0:c.nguoiDaiDienA)||"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"}),(0,z.jsx)(s.A,{children:(null===(d=x.contractData)||void 0===d?void 0:d.chucVuA)||"Ch\u1ee9c v\u1ee5"})]}),(0,z.jsxs)(l.A,{sx:{textAlign:"center",minWidth:200,flex:1},children:[(0,z.jsx)(s.A,{fontWeight:"bold",children:"\u0110\u1ea0I DI\u1ec6N B\xcaN B"}),(0,z.jsx)(s.A,{fontStyle:"italic",children:"(K\xfd, ghi r\xf5 h\u1ecd t\xean)"}),(0,z.jsx)(l.A,{sx:{height:80,mt:2}}),(0,z.jsx)(s.A,{fontWeight:"bold",children:"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"}),(0,z.jsx)(s.A,{children:"Ch\u1ee9c v\u1ee5"})]})]})]})]})]}),(0,z.jsxs)(f.A,{open:A,onClose:()=>y(!1),children:[(0,z.jsx)(b.A,{children:"X\xe1c nh\u1eadn x\xf3a h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)(C.A,{children:(0,z.jsx)(s.A,{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a h\u1ee3p \u0111\u1ed3ng n\xe0y? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c."})}),(0,z.jsxs)(T.A,{children:[(0,z.jsx)(h.A,{onClick:()=>y(!1),children:"H\u1ee7y"}),(0,z.jsx)(h.A,{onClick:()=>{p(x.id),y(!1)},color:"error",variant:"contained",children:"X\xe1c nh\u1eadn x\xf3a"})]})]})]})},Vn=()=>{const[n,e]=(0,a.useState)("templates"),[t,I]=(0,a.useState)(!1),[k,V]=(0,a.useState)(!1),[P,W]=(0,a.useState)([]),[G,L]=(0,a.useState)([]),[U,M]=(0,a.useState)(!1),[Y,F]=(0,a.useState)(null),[_,O]=(0,a.useState)(!1),[E,Z]=(0,a.useState)(null),[R,X]=(0,a.useState)({open:!1,message:"",severity:"success"});(0,a.useEffect)(()=>{(async()=>{M(!0);try{await new Promise(n=>setTimeout(n,1e3));W([{id:"1",name:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n",description:"Template h\u1ee3p \u0111\u1ed3ng mua b\xe1n h\xe0ng h\xf3a",type:"customer",status:"active",createdAt:"2025-06-30T10:00:00Z",updatedAt:"2025-06-30T10:00:00Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,extractedFields:[]},{id:"2",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5",description:"Template h\u1ee3p \u0111\u1ed3ng cung c\u1ea5p d\u1ecbch v\u1ee5",type:"internal",status:"active",createdAt:"2025-06-29T15:30:00Z",updatedAt:"2025-06-29T15:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,extractedFields:[]}])}catch(n){console.error("Error fetching templates:",n),X({open:!0,message:"C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea3i d\u1eef li\u1ec7u. Vui l\xf2ng th\u1eed l\u1ea1i.",severity:"error"})}try{L([{id:"C001",name:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n s\u1ed1 2025/001",templateId:"1",templateName:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n",status:"signed",partyA:"C\xf4ng ty TNHH ABC",partyB:"\xd4ng Nguy\u1ec5n V\u0103n A",createdAt:"2025-07-01T09:00:00Z",updatedAt:"2025-07-01T09:30:00Z",createdBy:"Nguy\u1ec5n V\u0103n B",signedAt:"2025-07-01T10:00:00Z",expiresAt:"2025-12-31T23:59:59Z"},{id:"C002",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 s\u1ed1 2025/002",templateId:"2",templateName:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5",status:"pending",partyA:"C\xf4ng ty TNHH ABC",partyB:"C\xf4ng ty TNHH XYZ",createdAt:"2025-07-02T14:00:00Z",updatedAt:"2025-07-02T14:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb C"},{id:"C003",name:"H\u1ee3p \u0111\u1ed3ng thu\xea nh\xe0 s\u1ed1 2025/003",templateId:"3",templateName:"H\u1ee3p \u0111\u1ed3ng thu\xea nh\xe0",status:"draft",partyA:"C\xf4ng ty TNHH ABC",partyB:"B\xe0 L\xea Th\u1ecb D",createdAt:"2025-07-03T10:00:00Z",updatedAt:"2025-07-03T10:15:00Z",createdBy:"Nguy\u1ec5n V\u0103n B",expiresAt:"2026-07-02T23:59:59Z"}])}catch(n){console.error("Error loading contracts:",n)}finally{M(!1)}})()},[]);const q=()=>{X(n=>(0,i.A)((0,i.A)({},n),{},{open:!1}))},Q=n=>{F(n)},K=()=>{F(null)},$=n=>{Z(n),O(!0)};return(0,z.jsxs)(l.A,{sx:{p:3},children:[(0,z.jsx)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:(0,z.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Qu\u1ea3n l\xfd H\u1ee3p \u0111\u1ed3ng"})}),(0,z.jsx)(l.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,z.jsxs)(r.A,{value:n,onChange:(n,t)=>{e(t)},"aria-label":"contract management tabs",children:[(0,z.jsx)(c.A,{label:"M\u1eabu h\u1ee3p \u0111\u1ed3ng",value:"templates"}),(0,z.jsx)(c.A,{label:"H\u1ee3p \u0111\u1ed3ng",value:"contracts"})]})}),"templates"===n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(rn,{templates:P,loading:U,onUploadClick:()=>{I(!0)}}),(0,z.jsx)(An,{open:t,onClose:()=>{I(!1)},onSubmit:async n=>{try{M(!0),console.log("Uploading template:",n),await new Promise(n=>setTimeout(n,1500));const e={id:Math.random().toString(36).substring(2,9),name:n.name,description:n.description||"",type:n.type,status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Ng\u01b0\u1eddi d\xf9ng hi\u1ec7n t\u1ea1i",placeholderCount:n.extractedFields.length,isDefault:!1,extractedFields:n.extractedFields};W(n=>[e,...n]),X({open:!0,message:"T\u1ea3i l\xean template th\xe0nh c\xf4ng!",severity:"success"})}catch(e){throw console.error("Error uploading template:",e),X({open:!0,message:"C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea3i l\xean template. Vui l\xf2ng th\u1eed l\u1ea1i.",severity:"error"}),e}finally{M(!1)}}})]}):(0,z.jsxs)(o.A,{sx:{p:3},children:[(0,z.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,z.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Danh s\xe1ch H\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)(h.A,{variant:"contained",color:"primary",startIcon:(0,z.jsx)(N.A,{}),onClick:()=>V(!0),children:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng m\u1edbi"})]}),U?(0,z.jsx)(s.A,{color:"textSecondary",paragraph:!0,children:"\u0110ang t\u1ea3i danh s\xe1ch h\u1ee3p \u0111\u1ed3ng..."}):(0,z.jsx)(d.A,{children:(0,z.jsxs)(x.A,{children:[(0,z.jsx)(g.A,{children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(u.A,{children:"M\xe3 H\u0110"}),(0,z.jsx)(u.A,{children:"T\xean h\u1ee3p \u0111\u1ed3ng"}),(0,z.jsx)(u.A,{children:"Lo\u1ea1i H\u0110"}),(0,z.jsx)(u.A,{children:"B\xean A"}),(0,z.jsx)(u.A,{children:"B\xean B"}),(0,z.jsx)(u.A,{children:"Ng\xe0y t\u1ea1o"}),(0,z.jsx)(u.A,{children:"Tr\u1ea1ng th\xe1i"}),(0,z.jsx)(u.A,{children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,z.jsx)(A.A,{children:G.map(n=>(0,z.jsxs)(p.A,{hover:!0,onClick:()=>Q(n),sx:{cursor:"pointer"},children:[(0,z.jsx)(u.A,{children:n.id}),(0,z.jsx)(u.A,{children:n.name}),(0,z.jsx)(u.A,{children:n.templateName}),(0,z.jsx)(u.A,{children:n.partyA}),(0,z.jsx)(u.A,{children:n.partyB}),(0,z.jsx)(u.A,{children:new Date(n.createdAt).toLocaleDateString()}),(0,z.jsx)(u.A,{children:(0,z.jsx)(m.A,{label:"signed"===n.status?"\u0110\xe3 k\xfd":"pending"===n.status?"Ch\u1edd k\xfd":"draft"===n.status?"Nh\xe1p":"expired"===n.status?"H\u1ebft h\u1ea1n":"\u0110\xe3 h\u1ee7y",color:"signed"===n.status?"success":"pending"===n.status?"warning":"draft"===n.status?"default":"error",size:"small"})}),(0,z.jsxs)(u.A,{children:[(0,z.jsx)(j.A,{size:"small",title:"Xem chi ti\u1ebft",onClick:()=>Q(n),children:(0,z.jsx)(B.A,{fontSize:"small"})}),(0,z.jsx)(j.A,{size:"small",title:"T\u1ea3i v\u1ec1",children:(0,z.jsx)(H.A,{fontSize:"small"})}),(0,z.jsx)(j.A,{size:"small",title:"X\xf3a",onClick:e=>{e.stopPropagation(),$(n.id)},children:(0,z.jsx)(S.A,{fontSize:"small",color:"error"})})]})]},n.id))})]})})]}),(0,z.jsx)(y.A,{open:R.open,autoHideDuration:6e3,onClose:q,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,z.jsx)(v.A,{onClose:q,severity:R.severity,sx:{width:"100%"},children:R.message})}),(0,z.jsxs)(f.A,{open:!!Y,onClose:K,fullWidth:!0,maxWidth:"md",children:[(0,z.jsx)(b.A,{children:(0,z.jsxs)(l.A,{display:"flex",alignItems:"center",children:[(0,z.jsx)(j.A,{onClick:K,sx:{mr:1},children:(0,z.jsx)(w.A,{})}),(0,z.jsx)("span",{children:"Chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng"})]})}),(0,z.jsx)(C.A,{dividers:!0,children:Y&&(0,z.jsx)(kn,{contract:(0,i.A)((0,i.A)({},Y),{},{contractData:{tenBenA:Y.partyA,tenBenB:Y.partyB,ngayKy:new Date(Y.createdAt).toLocaleDateString("vi-VN"),diaChiA:"123 L\xea L\u1ee3i, Q.1, TP.HCM",dienThoaiA:"0901234567",maSoThueA:"0123456789",nguoiDaiDienA:"Nguy\u1ec5n V\u0103n A",chucVuA:"Gi\xe1m \u0111\u1ed1c",giaTriHopDong:"50,000,000 VN\u0110"}}),onClose:K,onDelete:$,onEdit:n=>{X({open:!0,message:"Ch\u1ee9c n\u0103ng ch\u1ec9nh s\u1eeda h\u1ee3p \u0111\u1ed3ng \u0111ang \u0111\u01b0\u1ee3c ph\xe1t tri\u1ec3n",severity:"info"})}})})]}),(0,z.jsxs)(f.A,{open:_,onClose:()=>O(!1),children:[(0,z.jsx)(b.A,{children:"X\xe1c nh\u1eadn x\xf3a"}),(0,z.jsx)(C.A,{children:(0,z.jsx)(s.A,{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a h\u1ee3p \u0111\u1ed3ng n\xe0y? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c."})}),(0,z.jsxs)(T.A,{children:[(0,z.jsx)(h.A,{onClick:()=>O(!1),children:"H\u1ee7y"}),(0,z.jsx)(h.A,{onClick:()=>{E&&(L(n=>n.filter(n=>n.id!==E)),O(!1),F(null),X({open:!0,message:"\u0110\xe3 x\xf3a h\u1ee3p \u0111\u1ed3ng th\xe0nh c\xf4ng!",severity:"success"}))},color:"error",variant:"contained",children:"X\xe1c nh\u1eadn x\xf3a"})]})]}),(0,z.jsxs)(f.A,{open:k,onClose:()=>V(!1),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",width:"95%",maxWidth:"1400px"}},children:[(0,z.jsx)(b.A,{children:(0,z.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,z.jsx)(s.A,{variant:"h6",children:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng m\u1edbi"}),(0,z.jsx)(j.A,{onClick:()=>V(!1),children:(0,z.jsx)(D.A,{})})]})}),(0,z.jsx)(C.A,{children:(0,z.jsx)(wn,{templates:P,onBack:()=>V(!1),onCreate:n=>{L(e=>[n,...e]),V(!1),F(n),X({open:!0,message:"T\u1ea1o h\u1ee3p \u0111\u1ed3ng m\u1edbi th\xe0nh c\xf4ng!",severity:"success"})}})})]})]})}}}]);
//# sourceMappingURL=624.ff06db1c.chunk.js.map