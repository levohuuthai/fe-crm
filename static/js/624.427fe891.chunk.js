"use strict";(self.webpackChunkfe_crm=self.webpackChunkfe_crm||[]).push([[624],{63624:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Pt});var a=n(89379),s=n(65043),i=n(53969),r=n(55895),l=n(14333),c=n(12843),o=n(94799),d=n(41859),p=n(28259),h=n(87443),g=n(10756),x=n(86172),m=n(81341),u=n(34375),A=n(83759),j=n(42579),y=n(32911),v=n(91449),f=n(38517),b=n(81911),C=n(78776),T=n(85877),S=n(22950),B=n(3665),w=n(50103),D=n(5362),N=n(58315),I=n(27421),k=n(24343),H=n(47471),P=n(63745),L=n(1422),G=n(74117),W=n(70579);const z=t=>{let{filters:e,onFilterChange:n,onUploadClick:s,onCreateWithAIClick:r=()=>console.log("Create with AI clicked")}=t;const{t:l}=(0,G.Bd)();return(0,W.jsxs)(i.A,{sx:{mb:3},children:[(0,W.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr 1fr"},gap:2,alignItems:"center",mb:2},children:[(0,W.jsx)(i.A,{children:(0,W.jsx)(k.A,{fullWidth:!0,variant:"outlined",placeholder:l("pages.contracts.templateList.filters.searchPlaceholder"),value:e.search,onChange:t=>{n((0,a.A)((0,a.A)({},e),{},{search:t.target.value}))},InputProps:{startAdornment:(0,W.jsx)(P.A,{sx:{color:"text.secondary",mr:1}})}})}),(0,W.jsx)(i.A,{children:(0,W.jsxs)(k.A,{select:!0,fullWidth:!0,label:l("pages.contracts.templateList.filters.typeLabel"),value:e.type,onChange:t=>{n((0,a.A)((0,a.A)({},e),{},{type:t.target.value}))},variant:"outlined",children:[(0,W.jsx)(H.A,{value:"all",children:l("pages.contracts.templateList.filters.typeOptions.all")}),(0,W.jsx)(H.A,{value:"internal",children:l("pages.contracts.templateList.table.chips.type.internal")}),(0,W.jsx)(H.A,{value:"customer",children:l("pages.contracts.templateList.table.chips.type.customer")}),(0,W.jsx)(H.A,{value:"AI",children:"AI"})]})}),(0,W.jsx)(i.A,{children:(0,W.jsxs)(k.A,{select:!0,fullWidth:!0,label:l("pages.contracts.templateList.filters.statusLabel"),value:e.status,onChange:t=>{n((0,a.A)((0,a.A)({},e),{},{status:t.target.value}))},variant:"outlined",children:[(0,W.jsx)(H.A,{value:"all",children:l("pages.contracts.templateList.filters.statusOptions.all")}),(0,W.jsx)(H.A,{value:"active",children:l("pages.contracts.templateList.table.chips.status.active")}),(0,W.jsx)(H.A,{value:"inactive",children:l("pages.contracts.templateList.table.chips.status.inactive")})]})})]}),(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:{xs:2,md:0}},children:[(0,W.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,W.jsx)(S.A,{}),onClick:s,sx:{width:{xs:"100%",md:"auto"},maxWidth:"250px"},children:l("pages.contracts.templateList.filters.buttons.uploadTemplate")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,W.jsx)(L.A,{}),onClick:r,sx:{width:{xs:"100%",md:"auto"},maxWidth:"250px"},children:l("pages.contracts.templateList.filters.buttons.createWithAI")})]})]})};var V=n(26529),U=n(89174),O=n(27601),R=n(61773),Y=n(96659);const F=t=>{let{templates:e,page:n,rowsPerPage:a,totalRows:s,onPageChange:l,onRowsPerPageChange:c,onView:d,onEdit:y,onSetDefault:v,onDelete:f}=t;const{t:b,i18n:C}=(0,G.Bd)();return(0,W.jsxs)(o.A,{sx:{width:"100%",overflow:"hidden"},children:[(0,W.jsx)(p.A,{children:(0,W.jsxs)(h.A,{children:[(0,W.jsx)(g.A,{children:(0,W.jsxs)(x.A,{children:[(0,W.jsx)(m.A,{children:b("pages.contracts.templateList.table.columns.name")}),(0,W.jsx)(m.A,{align:"center",children:b("pages.contracts.templateList.table.columns.type")}),(0,W.jsx)(m.A,{align:"center",children:b("pages.contracts.templateList.table.columns.status")}),(0,W.jsx)(m.A,{align:"center",children:b("pages.contracts.templateList.table.columns.fields")}),(0,W.jsx)(m.A,{align:"center",children:b("pages.contracts.templateList.table.columns.createdAt")}),(0,W.jsx)(m.A,{align:"center",children:b("pages.contracts.templateList.table.columns.createdBy")}),(0,W.jsx)(m.A,{align:"center",children:b("pages.contracts.templateList.table.columns.actions")})]})}),(0,W.jsx)(u.A,{children:e.length>0?e.map(t=>(0,W.jsxs)(x.A,{hover:!0,children:[(0,W.jsx)(m.A,{children:(0,W.jsxs)(i.A,{display:"flex",alignItems:"center",children:[t.isDefault&&(0,W.jsx)(O.A,{color:"primary",sx:{fontSize:"1rem",mr:1}}),(0,W.jsx)(r.A,{variant:"body2",children:t.name})]})}),(0,W.jsx)(m.A,{align:"center",children:(0,W.jsx)(A.A,{label:"internal"===t.type?b("pages.contracts.templateList.table.chips.type.internal"):b("pages.contracts.templateList.table.chips.type.customer"),color:"internal"===t.type?"primary":"default",size:"small",variant:"outlined"})}),(0,W.jsx)(m.A,{align:"center",children:(0,W.jsx)(A.A,{label:"active"===t.status?b("pages.contracts.templateList.table.chips.status.active"):b("pages.contracts.templateList.table.chips.status.inactive"),color:"active"===t.status?"success":"default",size:"small"})}),(0,W.jsx)(m.A,{align:"center",children:t.placeholderCount}),(0,W.jsx)(m.A,{align:"center",children:new Date(t.createdAt).toLocaleDateString(C.language)}),(0,W.jsx)(m.A,{align:"center",children:t.createdBy}),(0,W.jsx)(m.A,{align:"center",children:(0,W.jsxs)(i.A,{display:"flex",justifyContent:"center",children:[(0,W.jsx)(V.A,{title:b("pages.contracts.templateList.table.tooltips.view"),children:(0,W.jsx)(j.A,{size:"small",onClick:()=>d(t.id),children:(0,W.jsx)(B.A,{fontSize:"small"})})}),(0,W.jsx)(V.A,{title:b("pages.contracts.templateList.table.tooltips.edit"),children:(0,W.jsx)(j.A,{size:"small",onClick:()=>y(t.id),children:(0,W.jsx)(R.A,{fontSize:"small"})})}),(0,W.jsx)(V.A,{title:t.isDefault?b("pages.contracts.templateList.table.tooltips.default"):b("pages.contracts.templateList.table.tooltips.setDefault"),children:(0,W.jsx)("span",{children:(0,W.jsx)(j.A,{size:"small",onClick:()=>v(t.id),disabled:t.isDefault,color:t.isDefault?"primary":"default",children:t.isDefault?(0,W.jsx)(O.A,{fontSize:"small"}):(0,W.jsx)(Y.A,{fontSize:"small"})})})}),(0,W.jsx)(V.A,{title:b("pages.contracts.templateList.table.tooltips.delete"),children:(0,W.jsx)(j.A,{size:"small",onClick:()=>f(t.id),color:"error",children:(0,W.jsx)(D.A,{fontSize:"small"})})})]})})]},t.id)):(0,W.jsx)(x.A,{children:(0,W.jsx)(m.A,{colSpan:7,align:"center",sx:{py:4},children:(0,W.jsx)(r.A,{variant:"body2",color:"textSecondary",children:b("pages.contracts.templateList.table.empty")})})})})]})}),(0,W.jsx)(U.A,{rowsPerPageOptions:[5,10,25],component:"div",count:s,rowsPerPage:a,page:n,onPageChange:(t,e)=>{l(e)},onRowsPerPageChange:t=>{c(parseInt(t.target.value,10))},labelRowsPerPage:b("pages.contracts.templateList.table.pagination.rowsPerPage"),labelDisplayedRows:t=>{let{from:e,to:n,count:a}=t;return b("pages.contracts.templateList.table.pagination.displayedRows",{from:e,to:n,count:a})}})]})};var E=n(94527),_=n(80172),q=n(17171),M=n(90160);const Z=t=>{let{onSubmit:e,loading:n,chatHistory:a}=t;const{t:l}=(0,G.Bd)(),[c,p]=(0,s.useState)(""),h=l("pages.contracts.aiGeneration.prompt.suggestions.items",{returnObjects:!0});return(0,W.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:"100%",p:0},children:[(0,W.jsx)(i.A,{sx:{flexGrow:1,overflowY:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:0===a.length?(0,W.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",textAlign:"center",p:3},children:[(0,W.jsx)(L.A,{sx:{fontSize:60,mb:2,opacity:.7}}),(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:l("pages.contracts.aiGeneration.prompt.emptyState.title")}),(0,W.jsx)(r.A,{variant:"body1",sx:{maxWidth:"80%",mx:"auto"},children:l("pages.contracts.aiGeneration.prompt.emptyState.description")}),(0,W.jsx)(r.A,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:l("pages.contracts.aiGeneration.prompt.emptyState.example")})]}):a.map((t,e)=>(0,W.jsx)(o.A,{elevation:0,sx:{p:2,backgroundColor:"assistant"===t.role?"rgba(0, 0, 0, 0.04)":"transparent",borderRadius:2,maxWidth:"90%",alignSelf:"assistant"===t.role?"flex-start":"flex-end"},children:(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,W.jsx)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"assistant"===t.role?"primary.main":"secondary.main",borderRadius:"50%",width:32,height:32,color:"white"},children:"assistant"===t.role?(0,W.jsx)(L.A,{fontSize:"small"}):(0,W.jsx)(M.A,{fontSize:"small"})}),(0,W.jsx)(r.A,{variant:"body1",children:t.content})]})},e))}),0===a.length&&(0,W.jsxs)(i.A,{sx:{px:2,py:1},children:[(0,W.jsx)(r.A,{variant:"subtitle2",gutterBottom:!0,children:l("pages.contracts.aiGeneration.prompt.suggestions.title")}),(0,W.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:h.map((t,e)=>(0,W.jsx)(A.A,{label:t,onClick:()=>(t=>{const e=l("pages.contracts.aiGeneration.prompt.suggestions.compose",{suggestion:t});p(e)})(t),color:"primary",variant:"outlined",clickable:!0},e))})]}),(0,W.jsx)(E.A,{}),(0,W.jsxs)(i.A,{component:"form",onSubmit:t=>{t.preventDefault(),c.trim()&&!n&&(e(c.trim()),p(""))},sx:{p:2,display:"flex",alignItems:"flex-end",gap:1},children:[(0,W.jsx)(k.A,{multiline:!0,maxRows:4,placeholder:l("pages.contracts.aiGeneration.input.placeholder"),value:c,onChange:t=>p(t.target.value),fullWidth:!0,variant:"outlined",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",endIcon:n?(0,W.jsx)(_.A,{size:20,color:"inherit"}):(0,W.jsx)(q.A,{}),disabled:!c.trim()||n,type:"submit",sx:{height:56,borderRadius:2,px:3},children:l(n?"pages.contracts.aiGeneration.input.generating":"pages.contracts.aiGeneration.input.generate")})]})]})};var Q=n(73849),K=n(22672),J=n(37305);const X=t=>{let{content:e,onUpdate:n,loading:a,onSaveTemplate:s}=t;const{t:l}=(0,G.Bd)();return(0,W.jsxs)(i.A,{sx:{height:"100%",display:"flex",flexDirection:"column",p:0},children:[(0,W.jsxs)(i.A,{sx:{p:2,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,W.jsx)(r.A,{variant:"h6",children:l("pages.contracts.aiGeneration.preview.title")}),(0,W.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,W.jsx)(d.A,{variant:"outlined",size:"small",startIcon:(0,W.jsx)(R.A,{}),disabled:!e||a,children:l("pages.contracts.aiGeneration.preview.buttons.edit")}),(0,W.jsx)(d.A,{variant:"outlined",size:"small",startIcon:(0,W.jsx)(J.A,{}),disabled:!e||a,children:l("pages.contracts.aiGeneration.preview.buttons.download")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",size:"small",startIcon:(0,W.jsx)(K.A,{}),disabled:!e||a,onClick:()=>{s&&e&&s(e)},children:l("pages.contracts.aiGeneration.preview.buttons.saveAsTemplate")})]})]}),(0,W.jsx)(i.A,{sx:{flexGrow:1,overflowY:"auto",p:2},children:a?(0,W.jsxs)(i.A,{children:[(0,W.jsx)(Q.A,{variant:"text",height:40,width:"60%"}),(0,W.jsx)(Q.A,{variant:"text",height:20}),(0,W.jsx)(Q.A,{variant:"text",height:20}),(0,W.jsx)(Q.A,{variant:"text",height:20,width:"80%"}),(0,W.jsx)(i.A,{sx:{my:2},children:(0,W.jsx)(E.A,{})}),(0,W.jsx)(Q.A,{variant:"text",height:30,width:"40%"}),(0,W.jsx)(Q.A,{variant:"text",height:20}),(0,W.jsx)(Q.A,{variant:"text",height:20}),(0,W.jsx)(Q.A,{variant:"text",height:20,width:"90%"}),(0,W.jsx)(i.A,{sx:{my:2},children:(0,W.jsx)(E.A,{})}),(0,W.jsx)(Q.A,{variant:"text",height:30,width:"40%"}),(0,W.jsx)(Q.A,{variant:"text",height:20}),(0,W.jsx)(Q.A,{variant:"text",height:20})]}):e?(0,W.jsx)(o.A,{elevation:0,sx:{height:"100%",p:2,backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:(0,W.jsx)("textarea",{value:e,onChange:t=>{n(t.target.value)},style:{width:"100%",height:"100%",padding:"16px",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"8px",resize:"none",fontFamily:"inherit",fontSize:"14px",lineHeight:"1.5",backgroundColor:"white"}})}):(0,W.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary",textAlign:"center",p:3},children:[(0,W.jsx)(R.A,{sx:{fontSize:60,mb:2,opacity:.7}}),(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:l("pages.contracts.aiGeneration.preview.empty.title")}),(0,W.jsx)(r.A,{variant:"body1",children:l("pages.contracts.aiGeneration.preview.empty.description")})]})})]})},$=t=>{const e=t.includes("ITV")?"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV":"";let n="";const a=t.match(/(?:v\xe0|gi\u1eefa)(?:\s+C\xf4ng\s+ty)?\s+([A-Za-z0-9\s]+)(?:,|\.|$)/i);return a&&a[1]&&(n="C\xd4NG TY ".concat(a[1].trim().toUpperCase())),{party1:e,party2:n}},tt=t=>t.toLowerCase().includes("ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m")?"ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m":t.toLowerCase().includes("d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m")?"d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m":t.toLowerCase().includes("b\u1ea3o tr\xec")?"b\u1ea3o tr\xec ph\u1ea7n m\u1ec1m":t.toLowerCase().includes("th\u01b0\u01a1ng m\u1ea1i")?"th\u01b0\u01a1ng m\u1ea1i":t.toLowerCase().includes("nda")||t.toLowerCase().includes("b\u1ea3o m\u1eadt")?"b\u1ea3o m\u1eadt th\xf4ng tin (NDA)":"d\u1ecbch v\u1ee5",et=t=>{const e=t.match(/(\d+(?:\.\d+)?)\s*(tri\u1ec7u|t\u1ef7|trieu|ty)/i);if(e){const t=parseFloat(e[1]),n=e[2].toLowerCase();return"t\u1ef7"===n||"ty"===n?"".concat(t.toLocaleString("vi-VN"),".000.000.000 VN\u0110 (").concat(t," t\u1ef7 \u0111\u1ed3ng)"):"".concat(t.toLocaleString("vi-VN"),".000.000 VN\u0110 (").concat(t," tri\u1ec7u \u0111\u1ed3ng)")}return"500.000.000 VN\u0110 (N\u0103m tr\u0103m tri\u1ec7u \u0111\u1ed3ng)"},nt=t=>{const e=t.match(/(\d+)\s*(th\xe1ng|n\u0103m|thang|nam)/i);if(e){const t=parseInt(e[1]),n=e[2].toLowerCase();return"".concat(t,"n\u0103m"===n||"nam"===n?" n\u0103m":" th\xe1ng")}return"6 th\xe1ng"},at=(t,e)=>{const n=t?t.match(/(\d+(?:\.\d+)?)/g):null;if(n&&n.length>0){const t=(parseFloat(n[0].replace(/\./g,""))*e/100).toLocaleString("vi-VN");return"".concat(t,".000 VN\u0110")}return{30:"150.000.000 VN\u0110",40:"200.000.000 VN\u0110",50:"250.000.000 VN\u0110"}[e]||"".concat(e,"% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng")},st=t=>{let{open:e,onClose:n,onSaveTemplate:a=()=>console.log("Template saved")}=t;const[l,c]=(0,s.useState)(!1),[o,p]=(0,s.useState)(""),[h,g]=(0,s.useState)([]),[x,m]=(0,s.useState)(!1),[u,A]=(0,s.useState)(""),[y,v]=(0,s.useState)(!1),{t:T}=(0,G.Bd)();return(0,W.jsxs)(f.A,{open:e,onClose:n,fullWidth:!0,maxWidth:"xl",PaperProps:{sx:{height:"90vh",maxHeight:"90vh",m:2,borderRadius:2}},children:[(0,W.jsxs)(b.A,{sx:{m:0,p:2,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[(0,W.jsx)(r.A,{variant:"h6",component:"div",children:T("pages.contracts.aiGeneration.title")}),(0,W.jsx)(j.A,{edge:"end",color:"inherit",onClick:n,"aria-label":"close",children:(0,W.jsx)(I.A,{})})]}),(0,W.jsxs)(C.A,{sx:{p:0,display:"flex",overflow:"hidden"},children:[(0,W.jsx)(i.A,{sx:{width:"50%",height:"100%",borderRight:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column"},children:(0,W.jsx)(Z,{onSubmit:async t=>{g(e=>[...e,{role:"user",content:t}]),c(!0);try{setTimeout(()=>{const e=(t=>{const e=$(t),n=tt(t),a=et(t),s=nt(t);return"\nH\u1ee2P \u0110\u1ed2NG ".concat(n.toUpperCase(),"\n\nS\u1ed1: ").concat(Math.floor(1e3*Math.random()),"/2025/H\u0110DV\n\nGI\u1eeeA\n\n").concat(e.party1||"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV"," (B\xean A)\n\nV\xc0\n\n").concat(e.party2||"C\xd4NG TY ABC"," (B\xean B)\n\nH\xf4m nay, ng\xe0y ").concat((new Date).getDate()," th\xe1ng ").concat((new Date).getMonth()+1," n\u0103m ").concat((new Date).getFullYear(),", t\u1ea1i Th\xe0nh ph\u1ed1 H\u1ed3 Ch\xed Minh, ch\xfang t\xf4i g\u1ed3m:\n\nB\xcaN A: ").concat(e.party1||"C\xd4NG TY C\u1ed4 PH\u1ea6N ITV","\n- \u0110\u1ecba ch\u1ec9: 123 \u0110\u01b0\u1eddng Nguy\u1ec5n V\u0103n Linh, Qu\u1eadn 7, TP.HCM\n- \u0110i\u1ec7n tho\u1ea1i: 028.1234.5678\n- M\xe3 s\u1ed1 thu\u1ebf: 0123456789\n- \u0110\u1ea1i di\u1ec7n: \xd4ng Nguy\u1ec5n V\u0103n A\n- Ch\u1ee9c v\u1ee5: Gi\xe1m \u0111\u1ed1c\n\nB\xcaN B: ").concat(e.party2||"C\xd4NG TY ABC","\n- \u0110\u1ecba ch\u1ec9: 456 \u0110\u01b0\u1eddng L\xea L\u1ee3i, Qu\u1eadn 1, TP.HCM\n- \u0110i\u1ec7n tho\u1ea1i: 028.8765.4321\n- M\xe3 s\u1ed1 thu\u1ebf: 9876543210\n- \u0110\u1ea1i di\u1ec7n: B\xe0 Tr\u1ea7n Th\u1ecb B\n- Ch\u1ee9c v\u1ee5: Gi\xe1m \u0111\u1ed1c\n\nSau khi b\xe0n b\u1ea1c, hai b\xean th\u1ed1ng nh\u1ea5t k\xfd k\u1ebft H\u1ee3p \u0111\u1ed3ng ").concat(n," v\u1edbi c\xe1c \u0111i\u1ec1u kho\u1ea3n sau:\n\n\u0110I\u1ec0U 1: N\u1ed8I DUNG H\u1ee2P \u0110\u1ed2NG\n\n1.1. B\xean A \u0111\u1ed3ng \xfd cung c\u1ea5p cho B\xean B d\u1ecbch v\u1ee5 ").concat(n," theo c\xe1c y\xeau c\u1ea7u v\xe0 ti\xeau chu\u1ea9n \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m H\u1ee3p \u0111\u1ed3ng n\xe0y.\n\n1.2. B\xean B \u0111\u1ed3ng \xfd s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 v\xe0 thanh to\xe1n cho B\xean A theo quy \u0111\u1ecbnh t\u1ea1i H\u1ee3p \u0111\u1ed3ng n\xe0y.\n\n\u0110I\u1ec0U 2: GI\xc1 TR\u1eca H\u1ee2P \u0110\u1ed2NG V\xc0 PH\u01af\u01a0NG TH\u1ee8C THANH TO\xc1N\n\n2.1. T\u1ed5ng gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng: ").concat(a||"500.000.000 VN\u0110 (N\u0103m tr\u0103m tri\u1ec7u \u0111\u1ed3ng)",".\n\n2.2. Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: Thanh to\xe1n theo t\u1eebng giai \u0111o\u1ea1n nh\u01b0 sau:\n   - \u0110\u1ee3t 1: 30% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(at(a,30)," - Thanh to\xe1n sau khi k\xfd h\u1ee3p \u0111\u1ed3ng.\n   - \u0110\u1ee3t 2: 40% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(at(a,40)," - Thanh to\xe1n sau khi ho\xe0n th\xe0nh giai \u0111o\u1ea1n 1.\n   - \u0110\u1ee3t 3: 30% gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng ").concat(at(a,30)," - Thanh to\xe1n sau khi nghi\u1ec7m thu v\xe0 b\xe0n giao.\n\n2.3. H\xecnh th\u1ee9c thanh to\xe1n: Chuy\u1ec3n kho\u1ea3n ng\xe2n h\xe0ng.\n\n\u0110I\u1ec0U 3: TH\u1edcI GIAN TH\u1ef0C HI\u1ec6N\n\n3.1. Th\u1eddi gian th\u1ef1c hi\u1ec7n h\u1ee3p \u0111\u1ed3ng: ").concat(s||"6 th\xe1ng"," k\u1ec3 t\u1eeb ng\xe0y k\xfd.\n\n3.2. L\u1ecbch tr\xecnh th\u1ef1c hi\u1ec7n chi ti\u1ebft \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m.\n\n\u0110I\u1ec0U 4: QUY\u1ec0N V\xc0 NGH\u0128A V\u1ee4 C\u1ee6A B\xcaN A\n\n4.1. Quy\u1ec1n c\u1ee7a B\xean A:\n   - Y\xeau c\u1ea7u B\xean B thanh to\xe1n \u0111\xfang h\u1ea1n theo quy \u0111\u1ecbnh t\u1ea1i H\u1ee3p \u0111\u1ed3ng.\n   - Y\xeau c\u1ea7u B\xean B cung c\u1ea5p th\xf4ng tin, t\xe0i li\u1ec7u c\u1ea7n thi\u1ebft \u0111\u1ec3 th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n4.2. Ngh\u0129a v\u1ee5 c\u1ee7a B\xean A:\n   - Cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xfang ti\u1ebfn \u0111\u1ed9 v\xe0 ch\u1ea5t l\u01b0\u1ee3ng theo th\u1ecfa thu\u1eadn.\n   - B\u1ea3o m\u1eadt th\xf4ng tin c\u1ee7a B\xean B trong qu\xe1 tr\xecnh th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n\u0110I\u1ec0U 5: QUY\u1ec0N V\xc0 NGH\u0128A V\u1ee4 C\u1ee6A B\xcaN B\n\n5.1. Quy\u1ec1n c\u1ee7a B\xean B:\n   - Y\xeau c\u1ea7u B\xean A cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xfang ti\u1ebfn \u0111\u1ed9 v\xe0 ch\u1ea5t l\u01b0\u1ee3ng.\n   - \u0110\u01b0\u1ee3c cung c\u1ea5p th\xf4ng tin v\u1ec1 ti\u1ebfn \u0111\u1ed9 th\u1ef1c hi\u1ec7n d\u1ef1 \xe1n.\n\n5.2. Ngh\u0129a v\u1ee5 c\u1ee7a B\xean B:\n   - Thanh to\xe1n \u0111\u1ea7y \u0111\u1ee7 v\xe0 \u0111\xfang h\u1ea1n cho B\xean A.\n   - Cung c\u1ea5p th\xf4ng tin, t\xe0i li\u1ec7u c\u1ea7n thi\u1ebft cho B\xean A \u0111\u1ec3 th\u1ef1c hi\u1ec7n H\u1ee3p \u0111\u1ed3ng.\n\n\u0110I\u1ec0U 6: \u0110I\u1ec0U KHO\u1ea2N CHUNG\n\n6.1. H\u1ee3p \u0111\u1ed3ng n\xe0y c\xf3 hi\u1ec7u l\u1ef1c k\u1ec3 t\u1eeb ng\xe0y k\xfd v\xe0 s\u1ebd ch\u1ea5m d\u1ee9t sau khi hai b\xean ho\xe0n th\xe0nh ngh\u0129a v\u1ee5.\n\n6.2. M\u1ecdi tranh ch\u1ea5p ph\xe1t sinh s\u1ebd \u0111\u01b0\u1ee3c gi\u1ea3i quy\u1ebft th\xf4ng qua th\u01b0\u01a1ng l\u01b0\u1ee3ng. Tr\u01b0\u1eddng h\u1ee3p kh\xf4ng th\u1ec3 th\u01b0\u01a1ng l\u01b0\u1ee3ng \u0111\u01b0\u1ee3c, tranh ch\u1ea5p s\u1ebd \u0111\u01b0\u1ee3c \u0111\u01b0a ra T\xf2a \xe1n c\xf3 th\u1ea9m quy\u1ec1n \u0111\u1ec3 gi\u1ea3i quy\u1ebft.\n\n6.3. H\u1ee3p \u0111\u1ed3ng n\xe0y \u0111\u01b0\u1ee3c l\u1eadp th\xe0nh 04 b\u1ea3n, m\u1ed7i b\xean gi\u1eef 02 b\u1ea3n c\xf3 gi\xe1 tr\u1ecb ph\xe1p l\xfd nh\u01b0 nhau.\n\n\u0110\u1ea0I DI\u1ec6N B\xcaN A                                  \u0110\u1ea0I DI\u1ec6N B\xcaN B\n")})(t);p(e),g(t=>[...t,{role:"assistant",content:T("pages.contracts.aiGeneration.messages.generated")}]),c(!1)},2e3)}catch(e){console.error("Error generating contract:",e),c(!1),g(t=>[...t,{role:"assistant",content:T("pages.contracts.aiGeneration.messages.error")}])}},loading:l,chatHistory:h})}),(0,W.jsx)(i.A,{sx:{width:"50%",height:"100%"},children:(0,W.jsx)(X,{content:o,onUpdate:t=>{p(t)},loading:l,onSaveTemplate:t=>{if(t){m(!0);const e=t.split("\n")[0];A(e||T("pages.contracts.aiGeneration.saveDialog.defaultTemplateName"))}}})})]}),(0,W.jsxs)(f.A,{open:x,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(b.A,{children:T("pages.contracts.aiGeneration.saveDialog.title")}),(0,W.jsx)(C.A,{children:(0,W.jsxs)(i.A,{sx:{pt:1},children:[(0,W.jsx)(r.A,{variant:"body2",gutterBottom:!0,children:T("pages.contracts.aiGeneration.saveDialog.description")}),(0,W.jsx)(k.A,{autoFocus:!0,margin:"dense",label:T("pages.contracts.aiGeneration.saveDialog.nameLabel"),fullWidth:!0,variant:"outlined",value:u,onChange:t=>A(t.target.value),sx:{mb:3,mt:2}}),(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[(0,W.jsx)(d.A,{onClick:()=>m(!1),disabled:y,children:T("common.cancel")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>{if(o&&u){v(!0);const t=/\{\{([^}]+)\}\}/g,e=o.match(t)||[],s={name:u,type:"AI",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:T("pages.contracts.aiGeneration.saveDialog.currentUser"),placeholderCount:e.length,isDefault:!1,status:"active",content:o};a(s),v(!1),m(!1),n()}},disabled:!u.trim()||y,children:T(y?"pages.contracts.aiGeneration.saveDialog.saving":"pages.contracts.aiGeneration.saveDialog.save")})]})]})})]})]})},it=[{id:"1",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 ph\u1ea7n m\u1ec1m",type:"internal",createdAt:"2025-01-15T00:00:00.000Z",updatedAt:"2025-01-15T00:00:00.000Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,status:"active"},{id:"2",name:"H\u1ee3p \u0111\u1ed3ng b\u1ea3o tr\xec",type:"customer",createdAt:"2025-02-20T00:00:00.000Z",updatedAt:"2025-02-20T00:00:00.000Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,status:"active"},{id:"3",name:"H\u1ee3p \u0111\u1ed3ng NDA",type:"internal",createdAt:"2025-03-10T00:00:00.000Z",updatedAt:"2025-03-10T00:00:00.000Z",createdBy:"L\xea V\u0103n C",placeholderCount:6,isDefault:!1,status:"inactive"}],rt=t=>{let{onUploadClick:e,templates:n=[],loading:l=!1}=t;const{t:c}=(0,G.Bd)(),[d,p]=(0,s.useState)({search:"",type:"all",status:"all"}),[h,g]=(0,s.useState)(0),[x,m]=(0,s.useState)(10),[u,A]=(0,s.useState)(!1),[j,y]=(0,s.useState)(null),v=n.length>0?n:it,f=l,[b,C]=(0,s.useState)([]),[T,S]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{try{let t=[...v];if(d.search){const e=d.search.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e))}"all"!==d.type&&(t=t.filter(t=>t.type===d.type)),"all"!==d.status&&(t=t.filter(t=>t.status===d.status)),S(t.length);const e=h*x,n=t.slice(e,e+x);C(n)}catch(t){console.error("Error filtering templates:",t)}})()},[d,h,x,v]);return(0,W.jsxs)(i.A,{children:[(0,W.jsxs)(i.A,{mb:3,children:[(0,W.jsx)(r.A,{variant:"h5",component:"h2",gutterBottom:!0,children:c("pages.contracts.templateList.title")}),(0,W.jsx)(r.A,{variant:"body2",color:"textSecondary",children:c("pages.contracts.templateList.subtitle")})]}),(0,W.jsxs)(o.A,{sx:{p:3,mb:3},children:[(0,W.jsx)(z,{filters:d,onFilterChange:t=>{p(t),g(0)},onUploadClick:e,onCreateWithAIClick:()=>A(!0)}),(0,W.jsx)(st,{open:u,onClose:()=>A(!1),onSaveTemplate:t=>{try{const e="ai-".concat(Date.now()),n=(0,a.A)((0,a.A)({},t),{},{id:e});return C(t=>[n,...t]),S(t=>t+1),y(e),alert(c("pages.contracts.templateList.alerts.saveAiSuccess")),!0}catch(e){return console.error("Error saving AI template:",e),alert(c("pages.contracts.templateList.alerts.saveAiError")),!1}}}),f?(0,W.jsx)(i.A,{py:4,textAlign:"center",children:(0,W.jsx)(r.A,{children:c("pages.contracts.templateList.loading")})}):(0,W.jsx)(F,{templates:b,page:h,rowsPerPage:x,totalRows:T,onPageChange:t=>{g(t)},onRowsPerPageChange:t=>{m(t),g(0)},onView:t=>{console.log("View template:",t)},onEdit:t=>{console.log("Edit template:",t)},onSetDefault:t=>{console.log("Set default template:",t)},onDelete:t=>{window.confirm(c("pages.contracts.templateList.confirmDelete"))&&(console.log("Delete template:",t),S(t=>t-1))}})]})]})};var lt=n(24858),ct=n(18403),ot=n(80899),dt=n(10256),pt=n(3353),ht=n(67203),gt=n(51697);const xt=t=>{var e;let{open:n,onClose:l,onSubmit:c}=t;const{t:A}=(0,G.Bd)(),[y,v]=(0,s.useState)(!1),[S,B]=(0,s.useState)(!1),[w,N]=(0,s.useState)([]),P=(0,s.useMemo)(()=>ot.Ik({name:ot.Yj().required(A("pages.contracts.uploadTemplate.validation.nameRequired")),description:ot.Yj().optional(),type:ot.Yj().oneOf(["internal","customer"]).required(A("pages.contracts.uploadTemplate.validation.typeRequired")),file:ot.gl().required(A("pages.contracts.uploadTemplate.validation.fileRequired")).test("fileType",A("pages.contracts.uploadTemplate.validation.fileType"),t=>{if(!t)return!1;return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===t.type}),extractedFields:ot.YO().of(ot.Ik({originalText:ot.Yj().required(),placeholder:ot.Yj().required(),type:ot.Yj().required(),description:ot.Yj().optional()})).default([])}),[A]),{register:L,handleSubmit:z,reset:V,setValue:U,watch:O,formState:{errors:R}}=(0,lt.mN)({resolver:(0,ct.t)(P),defaultValues:{name:"",description:"",type:"customer",file:void 0,extractedFields:[]}}),Y=O("file"),F=(t,e,n)=>{const s=[...w];s[t]=(0,a.A)((0,a.A)({},s[t]),{},{[e]:n}),N(s),U("extractedFields",s)},E=()=>{V(),N([]),l()};return(0,W.jsxs)(f.A,{open:n,onClose:E,maxWidth:"lg",fullWidth:!0,children:[(0,W.jsx)(b.A,{children:(0,W.jsxs)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,W.jsx)(r.A,{variant:"h6",children:A("pages.contracts.uploadTemplate.title")}),(0,W.jsx)(j.A,{onClick:E,size:"small",children:(0,W.jsx)(I.A,{})})]})}),(0,W.jsxs)("form",{onSubmit:z(async t=>{try{v(!0),await c(t),E()}catch(e){console.error("Error uploading template:",e)}finally{v(!1)}}),children:[(0,W.jsx)(C.A,{dividers:!0,children:(0,W.jsxs)(i.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 2fr"},gap:3},children:[(0,W.jsxs)(i.A,{children:[(0,W.jsx)(k.A,(0,a.A)((0,a.A)({},L("name")),{},{label:A("pages.contracts.uploadTemplate.fields.name"),fullWidth:!0,margin:"normal",error:!!R.name,helperText:null===(e=R.name)||void 0===e?void 0:e.message,disabled:y})),(0,W.jsx)(k.A,(0,a.A)((0,a.A)({},L("description")),{},{label:A("pages.contracts.uploadTemplate.fields.description"),fullWidth:!0,multiline:!0,rows:3,margin:"normal",disabled:y})),(0,W.jsxs)(dt.A,{fullWidth:!0,margin:"normal",error:!!R.type,children:[(0,W.jsx)(pt.A,{children:A("pages.contracts.uploadTemplate.fields.type")}),(0,W.jsxs)(ht.A,(0,a.A)((0,a.A)({label:A("pages.contracts.uploadTemplate.fields.type"),defaultValue:"customer",disabled:y},L("type")),{},{children:[(0,W.jsx)(H.A,{value:"customer",children:A("pages.contracts.uploadTemplate.fields.typeOptions.customer")}),(0,W.jsx)(H.A,{value:"internal",children:A("pages.contracts.uploadTemplate.fields.typeOptions.internal")})]}))]}),(0,W.jsxs)(i.A,{mt:2,mb:2,children:[(0,W.jsx)("input",{accept:".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document",style:{display:"none"},id:"template-upload",type:"file",onChange:t=>{var e;const n=null===(e=t.target.files)||void 0===e?void 0:e[0];n&&(U("file",n),B(!0),setTimeout(()=>{const t=[{originalText:"C\xd4NG TY TNHH GI\u1ea4Y CAO PH\xc1T",placeholder:"TEN_CONG_TY_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyAName")},{originalText:"Th\u1eeda \u0111\u1ea5t s\u1ed1 352, T\u1edd b\u1ea3n \u0111\u1ed3 s\u1ed1 14, Khu Ph\u1ed1 M\u1ef9 Hi\u1ec7p, Ph\u01b0\u1eddng Th\xe1i Ho\xe0, Th\xe0nh ph\u1ed1 T\xe2n Uy\xean, T\u1ec9nh B\xecnh D\u01b0\u01a1ng",placeholder:"DIA_CHI_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyAAddress")},{originalText:"0274 3775 179",placeholder:"DIEN_THOAI_A",type:"phone",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyAPhone")},{originalText:"3701711279",placeholder:"MA_SO_THUE_A",type:"taxcode",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyATax")},{originalText:"L\xca TH\u1eca KIM CHI",placeholder:"NGUOI_DAI_DIEN_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyARepresentative")},{originalText:"Gi\xe1m \u0111\u1ed1c",placeholder:"CHUC_VU_A",type:"text",description:A("pages.contracts.uploadTemplate.sample.descriptions.partyATitle")}];N(t),U("extractedFields",t),B(!1)},2e3))},disabled:y||S}),(0,W.jsx)("label",{htmlFor:"template-upload",children:(0,W.jsx)(d.A,{variant:"outlined",component:"span",startIcon:(0,W.jsx)(gt.A,{}),disabled:y||S,children:A("pages.contracts.uploadTemplate.fields.fileButton")})}),Y&&(0,W.jsxs)(r.A,{variant:"body2",sx:{mt:1},children:[A("pages.contracts.uploadTemplate.fields.selectedFilePrefix")," ",Y.name]}),R.file&&(0,W.jsx)(r.A,{color:"error",variant:"caption",display:"block",children:R.file.message})]})]}),(0,W.jsx)(i.A,{children:(0,W.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,W.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:A("pages.contracts.uploadTemplate.analysis.title")}),S?(0,W.jsxs)(i.A,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:4,children:[(0,W.jsx)(_.A,{size:40}),(0,W.jsx)(r.A,{variant:"body2",color:"textSecondary",sx:{mt:2},children:A("pages.contracts.uploadTemplate.analysis.analyzingText")})]}):w.length>0?(0,W.jsx)(p.A,{component:o.A,variant:"outlined",children:(0,W.jsxs)(h.A,{size:"small",children:[(0,W.jsx)(g.A,{children:(0,W.jsxs)(x.A,{children:[(0,W.jsx)(m.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.originalText")}),(0,W.jsx)(m.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.placeholder")}),(0,W.jsx)(m.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.type")}),(0,W.jsx)(m.A,{children:A("pages.contracts.uploadTemplate.analysis.headers.description")}),(0,W.jsx)(m.A,{align:"center",children:A("pages.contracts.uploadTemplate.analysis.headers.actions")})]})}),(0,W.jsx)(u.A,{children:w.map((t,e)=>(0,W.jsxs)(x.A,{children:[(0,W.jsx)(m.A,{children:t.originalText}),(0,W.jsx)(m.A,{children:(0,W.jsx)(k.A,{size:"small",value:t.placeholder,onChange:t=>F(e,"placeholder",t.target.value),fullWidth:!0,disabled:y})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(dt.A,{fullWidth:!0,size:"small",children:(0,W.jsxs)(ht.A,{value:t.type,onChange:t=>F(e,"type",t.target.value),disabled:y,children:[(0,W.jsx)(H.A,{value:"text",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.text")}),(0,W.jsx)(H.A,{value:"number",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.number")}),(0,W.jsx)(H.A,{value:"date",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.date")}),(0,W.jsx)(H.A,{value:"phone",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.phone")}),(0,W.jsx)(H.A,{value:"email",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.email")}),(0,W.jsx)(H.A,{value:"taxcode",children:A("pages.contracts.uploadTemplate.analysis.typeOptions.taxcode")})]})})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(k.A,{size:"small",value:t.description||"",onChange:t=>F(e,"description",t.target.value),fullWidth:!0,disabled:y})}),(0,W.jsx)(m.A,{align:"center",children:(0,W.jsx)(j.A,{size:"small",color:"error",onClick:()=>{const t=[...w];t.splice(e,1),N(t),U("extractedFields",t)},disabled:y,children:(0,W.jsx)(D.A,{fontSize:"small"})})})]},e))})]})}):Y?(0,W.jsx)(r.A,{variant:"body2",color:"textSecondary",children:A("pages.contracts.uploadTemplate.analysis.noFieldsFound")}):(0,W.jsx)(r.A,{variant:"body2",color:"textSecondary",children:A("pages.contracts.uploadTemplate.analysis.uploadPrompt")}),(0,W.jsxs)(i.A,{mt:3,children:[(0,W.jsx)(r.A,{variant:"subtitle2",gutterBottom:!0,children:A("pages.contracts.uploadTemplate.guidance.title")}),(0,W.jsxs)(r.A,{variant:"body2",color:"textSecondary",children:["- ",A("pages.contracts.uploadTemplate.guidance.items.0"),(0,W.jsx)("br",{}),"- ",A("pages.contracts.uploadTemplate.guidance.items.1"),(0,W.jsx)("br",{}),"- ",A("pages.contracts.uploadTemplate.guidance.items.2")]})]})]})})]})}),(0,W.jsxs)(T.A,{sx:{p:2,borderTop:1,borderColor:"divider"},children:[(0,W.jsx)(d.A,{onClick:E,disabled:y,children:A("pages.contracts.uploadTemplate.buttons.cancel")}),(0,W.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",disabled:y||S||0===w.length,startIcon:y?(0,W.jsx)(_.A,{size:20}):null,children:A(y?"pages.contracts.uploadTemplate.buttons.saving":"pages.contracts.uploadTemplate.buttons.save")})]})]})]})};var mt=n(53407),ut=n(79693),At=n(99147),jt=n(47951),yt=n(94084),vt=n(57488),ft=n(33699),bt=n(83542),Ct=n(92292),Tt=n(24793),St=n(36600),Bt=n(78255),wt=n(56511);const Dt=t=>{let{payments:e,onPaymentsChange:n,onBack:s,onNext:l}=t;const{t:c,i18n:A}=(0,G.Bd)(),y=[{value:"pending",label:c("pages.contracts.createContract.paymentSchedule.status.pending","Pending payment")},{value:"waiting",label:c("pages.contracts.createContract.paymentSchedule.status.waiting","Awaiting payment")},{value:"paid",label:c("pages.contracts.createContract.paymentSchedule.status.paid","Paid")}],v=(t,s,i)=>{n(e.map(e=>e.id===t?(0,a.A)((0,a.A)({},e),{},{[s]:i}):e))},f=()=>{const t=A.language||"en";return t.startsWith("ja")?St.ja:t.startsWith("vi")?Bt.vi:wt.c},b=()=>{const t=A.language||"en";return t.startsWith("ja")?"JPY":t.startsWith("vi")?"VN\u0110":"USD"};return(0,W.jsxs)(i.A,{children:[(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,W.jsx)(j.A,{onClick:s,sx:{mr:1},children:(0,W.jsx)(N.A,{})}),(0,W.jsx)(r.A,{variant:"h6",children:c("pages.contracts.createContract.paymentSchedule.title","Payment items")})]}),(0,W.jsxs)(o.A,{variant:"outlined",sx:{p:2,mb:3},children:[(0,W.jsx)(r.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:c("pages.contracts.createContract.paymentSchedule.description","Add payment milestones for the contract. Each includes condition, amount, payment date, status, and notes.")}),(0,W.jsx)(p.A,{children:(0,W.jsxs)(h.A,{size:"small",children:[(0,W.jsx)(g.A,{children:(0,W.jsxs)(x.A,{children:[(0,W.jsx)(m.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.condition","Condition")}),(0,W.jsx)(m.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.amount","Amount")}),(0,W.jsx)(m.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.paymentDate","Payment date")}),(0,W.jsx)(m.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.status","Status")}),(0,W.jsx)(m.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.note","Note")}),(0,W.jsx)(m.A,{children:c("pages.contracts.createContract.paymentSchedule.columns.delete","Delete")})]})}),(0,W.jsx)(u.A,{children:0===e.length?(0,W.jsx)(x.A,{children:(0,W.jsx)(m.A,{colSpan:6,align:"center",children:(0,W.jsx)(r.A,{variant:"body2",color:"text.secondary",children:c("pages.contracts.createContract.paymentSchedule.empty",'No payment items yet. Click "Add payment" to start.')})})}):e.map(t=>(0,W.jsxs)(x.A,{children:[(0,W.jsx)(m.A,{children:(0,W.jsx)(k.A,{fullWidth:!0,size:"small",value:t.condition,onChange:e=>v(t.id,"condition",e.target.value),placeholder:c("pages.contracts.createContract.paymentSchedule.placeholders.condition","e.g., After signing the contract")})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(k.A,{fullWidth:!0,size:"small",value:0===t.amount?"":t.amount.toString(),onChange:e=>((t,e)=>{const n=e.replace(/[^0-9]/g,""),a=n?parseInt(n,10):0;v(t,"amount",a)})(t.id,e.target.value),placeholder:"0",InputProps:{endAdornment:(0,W.jsx)(ft.A,{position:"end",children:b()})}})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(Tt.$J,{dateAdapter:Ct.h,adapterLocale:f(),children:(0,W.jsx)(bt.l,{value:t.paymentDate,onChange:e=>v(t.id,"paymentDate",e),slotProps:{textField:{size:"small",fullWidth:!0}}})})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(dt.A,{fullWidth:!0,size:"small",children:(0,W.jsx)(ht.A,{value:t.status,onChange:e=>v(t.id,"status",e.target.value),children:y.map(t=>(0,W.jsx)(H.A,{value:t.value,children:t.label},t.value))})})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(k.A,{fullWidth:!0,size:"small",value:t.note,onChange:e=>v(t.id,"note",e.target.value),placeholder:c("pages.contracts.createContract.paymentSchedule.placeholders.note","Notes")})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(j.A,{color:"error",onClick:()=>{return a=t.id,void n(e.filter(t=>t.id!==a));var a},size:"small",children:(0,W.jsx)(D.A,{})})})]},t.id))})]})}),(0,W.jsx)(i.A,{sx:{mt:2},children:(0,W.jsx)(d.A,{startIcon:(0,W.jsx)(S.A,{}),variant:"outlined",onClick:()=>{const t={id:"payment-".concat(Date.now()),condition:"",amount:0,paymentDate:new Date,status:"pending",note:""};n([...e,t])},children:c("pages.contracts.createContract.paymentSchedule.actions.add","Add payment")})})]}),(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,W.jsx)(d.A,{variant:"outlined",onClick:s,children:c("common.back","Back")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",onClick:l,children:c("common.next","Next")})]})]})},Nt=t=>{let{templates:e,onBack:n,onCreate:l}=t;const{t:c}=(0,G.Bd)(),[p,h]=(0,s.useState)(0),[g,x]=(0,s.useState)(null),[m,u]=(0,s.useState)({}),[y,v]=(0,s.useState)([""]),[f,b]=(0,s.useState)([]),C=s.useCallback(()=>{const t="HD".concat((new Date).getFullYear()).concat(((new Date).getMonth()+1).toString().padStart(2,"0")).concat((new Date).getDate().toString().padStart(2,"0"),"001"),e=t=>new Intl.NumberFormat("vi-VN").format(t),n=f.length>0?'\n      <h3 style="font-weight: bold; margin-top: 30px; margin-bottom: 20px;">\u0110I\u1ec0U 2: L\u1ecaCH THANH TO\xc1N</h3>\n      <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n        <thead>\n          <tr style="background-color: #f2f2f2;">\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">STT</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">\u0110i\u1ec1u ki\u1ec7n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S\u1ed1 ti\u1ec1n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Ng\xe0y thanh to\xe1n</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Ghi ch\xfa</th>\n          </tr>\n        </thead>\n        <tbody>\n          '.concat(f.map((t,n)=>'\n            <tr>\n              <td style="border: 1px solid #ddd; padding: 8px;">'.concat(n+1,'</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.condition,'</td>\n              <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(e(t.amount),' VN\u0110</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.paymentDate?new Date(t.paymentDate).toLocaleDateString("vi-VN"):"",'</td>\n              <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.note,"</td>\n            </tr>\n          ")).join(""),'\n          <tr style="font-weight: bold; background-color: #f9f9f9;">\n            <td style="border: 1px solid #ddd; padding: 8px;" colspan="2">T\u1ed5ng c\u1ed9ng</td>\n            <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">').concat(e(f.reduce((t,e)=>t+e.amount,0)),' VN\u0110</td>\n            <td style="border: 1px solid #ddd; padding: 8px;" colspan="2"></td>\n          </tr>\n        </tbody>\n      </table>\n    '):"";return'\n      <div style="text-align: center; margin-bottom: 20px;">\n        <h2 style="font-weight: bold; text-transform: uppercase;">C\u1ed9ng H\xf2a X\xe3 H\u1ed9i Ch\u1ee7 Ngh\u0129a Vi\u1ec7t Nam</h2>\n        <h3 style="font-weight: bold;">\u0110\u1ed9c L\u1eadp \u2013 T\u1ef1 Do \u2013 H\u1ea1nh Ph\xfac</h3>\n        <p style="margin-bottom: 20px;">__________</p>\n        <h1 style="font-weight: bold; text-transform: uppercase; margin-bottom: 20px;">H\u1ee2P \u0110\u1ed2NG NGUY\xcaN T\u1eaeC CUNG C\u1ea4P D\u1ecaCH V\u1ee4 PH\u1ea6N M\u1ec0M</h1>\n        <h2 style="font-weight: bold; margin-bottom: 30px;">S\u1ed1: '.concat(t,"</h2>\n      </div>\n\n      <p>\n        C\u0103n c\u1ee9 v\xe0o Lu\u1eadt Th\u01b0\u01a1ng M\u1ea1i c\u1ee7a Qu\u1ed1c h\u1ed9i n\u01b0\u1edbc C\u1ed9ng H\xf2a X\xe3 H\u1ed9i Ch\u1ee7 Ngh\u0129a Vi\u1ec7t Nam \u0111\u01b0\u1ee3c ban h\xe0nh ng\xe0y 14/06/2005, c\xf3 hi\u1ec7u l\u1ef1c t\u1eeb ng\xe0y 01/01/2006.\n      </p>\n      \n      ").concat(Object.entries(m).map(t=>{let[e,n]=t;return"<p>C\u0103n c\u1ee9 v\xe0o ".concat(e,": <strong>").concat(n,"</strong></p>")}).join("\n"),'\n\n      <h3 style="font-weight: bold; margin-top: 30px; margin-bottom: 20px;">\u0110I\u1ec0U 1: N\u1ed8I DUNG H\u1ee2P \u0110\u1ed2NG</h3>\n      <p>\n        B\xean A \u1ee7y th\xe1c cho b\xean B c\xf4ng vi\u1ec7c x\xe2y d\u1ef1ng v\xe0 ph\xe1t tri\u1ec3n ph\u1ea7n m\u1ec1m v\xe0 cung c\u1ea5p c\xe1c d\u1ecbch v\u1ee5 li\xean quan \u0111\u1ebfn ph\u1ea7n m\u1ec1m c\u1ee7a b\xean A.\n      </p>\n      <p>\n        B\xean B s\u1ebd ch\u1ecbu tr\xe1ch nhi\u1ec7m x\xe2y d\u1ef1ng ph\u1ea7n m\u1ec1m \u0111\xfang nh\u01b0 th\u1ecfa thu\u1eadn c\u1ee7a c\u1ea3 B\xean A v\xe0 B\xean B.\n      </p>\n      <p>\n        V\u1ec1 chi ti\u1ebft n\u1ed9i dung c\xf4ng vi\u1ec7c v\xe0 chi ph\xed th\u1ef1c hi\u1ec7n s\u1ebd \u0111\u01b0\u1ee3c tr\xecnh b\xe0y trong t\u1eebng Ph\u1ee5 l\u1ee5c c\u1ee5 th\u1ec3.\n      </p>\n      \n      ').concat(n,"\n    ")},[m,f]);(0,s.useEffect)(()=>{3===p&&Object.keys(m).length>0&&Object.values(m).some(t=>t)&&v([C()])},[m,p,C]);const T=()=>{if(!g)return;const t={id:"C".concat(Math.floor(1e3+9e3*Math.random())),name:"".concat(c("pages.contracts.createContract.generatedNamePrefix")," ").concat(null===g||void 0===g?void 0:g.name," - ").concat((new Date).toLocaleDateString()),templateId:(null===g||void 0===g?void 0:g.id)||"",templateName:(null===g||void 0===g?void 0:g.name)||"",status:"draft",partyA:c("pages.contracts.createContract.sample.partyA"),partyB:c("pages.contracts.createContract.sample.partyB"),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:c("pages.contracts.createContract.sample.currentUser"),contractData:m,payments:f};l(t),vt.oR.success(c("pages.contracts.notifications.createContractSuccess"))},S=[{label:c("pages.contracts.createContract.steps.selectTemplate"),component:()=>(0,W.jsxs)(i.A,{children:[(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:c("pages.contracts.createContract.templateSelection.title")}),(0,W.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:e.map(t=>(0,W.jsx)("div",{style:{marginBottom:"16px"},children:(0,W.jsxs)(o.A,{elevation:(null===g||void 0===g?void 0:g.id)===t.id?4:1,sx:{p:2,cursor:"pointer",border:(null===g||void 0===g?void 0:g.id)===t.id?"2px solid #1976d2":"1px solid #e0e0e0",height:"100%",display:"flex",flexDirection:"column"},onClick:()=>x(t),children:[(0,W.jsxs)(i.A,{display:"flex",alignItems:"center",mb:1,children:[(0,W.jsx)(jt.A,{color:"primary",sx:{mr:1}}),(0,W.jsx)(r.A,{variant:"subtitle1",fontWeight:"bold",children:t.name})]}),(0,W.jsxs)(r.A,{variant:"body2",color:"textSecondary",sx:{flexGrow:1},children:[t.name," - ",t.type]}),(0,W.jsx)(A.A,{label:c("pages.contracts.createContract.templateSelection.chipLabel",{count:t.placeholderCount}),size:"small",sx:{mt:1,alignSelf:"flex-start"}})]})},t.id))}),(0,W.jsx)(i.A,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:(0,W.jsx)(d.A,{variant:"contained",disabled:!g,onClick:()=>{const t={};null!==g&&void 0!==g&&g.extractedFields&&g.extractedFields.length>0?(g.extractedFields.forEach(e=>{t[e.placeholder]=""}),u(t),h(1)):vt.oR.error(c("pages.contracts.createContract.alerts.noFieldsFound"))},children:c("pages.contracts.createContract.buttons.continue")})})]})},{label:c("pages.contracts.createContract.steps.fillInfo"),component:()=>{const t=()=>0===Object.keys(m).filter(t=>!m[t]).length;return(0,W.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,W.jsx)(j.A,{onClick:()=>h(0),sx:{mr:1},children:(0,W.jsx)(N.A,{})}),(0,W.jsxs)(r.A,{variant:"h6",children:[c("pages.contracts.createContract.form.title"),": ",null===g||void 0===g?void 0:g.name]})]}),(0,W.jsxs)(o.A,{variant:"outlined",sx:{p:3,flexGrow:1,mb:2,overflowY:"auto",maxHeight:"600px"},children:[(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:c("pages.contracts.createContract.form.sectionTitle")}),(0,W.jsx)(r.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:c("pages.contracts.createContract.form.description")}),(0,W.jsx)(i.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3,mt:2},children:Object.keys(m).map(t=>(0,W.jsx)(k.A,{label:t,variant:"outlined",fullWidth:!0,value:m[t],onChange:e=>((t,e)=>{u(n=>(0,a.A)((0,a.A)({},n),{},{[t]:e}))})(t,e.target.value),required:!0,error:!m[t],helperText:m[t]?"":c("pages.contracts.createContract.form.requiredHelper"),sx:{mb:2}},t))})]}),(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,W.jsx)(d.A,{variant:"outlined",onClick:()=>h(0),startIcon:(0,W.jsx)(N.A,{}),children:c("pages.contracts.createContract.buttons.back")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>{t()?h(2):vt.oR.error(c("pages.contracts.createContract.form.requiredHelper"))},disabled:!t(),children:c("pages.contracts.createContract.buttons.continue")})]})]})}},{label:c("pages.contracts.createContract.steps.paymentItems"),component:()=>(0,W.jsx)(Dt,{payments:f,onPaymentsChange:b,onBack:()=>h(1),onNext:()=>h(3)})},{label:c("pages.contracts.createContract.steps.previewConfirm"),component:()=>g?(0,W.jsxs)(i.A,{children:[(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,W.jsx)(j.A,{onClick:()=>h(2),sx:{mr:1},children:(0,W.jsx)(N.A,{})}),(0,W.jsx)(r.A,{variant:"h6",children:c("pages.contracts.createContract.preview.title")})]}),(0,W.jsx)(i.A,{sx:{border:"1px solid #e0e0e0",borderRadius:1,padding:0,overflow:"hidden",mb:3},children:(0,W.jsx)(yt.A,{initialContent:y,onSave:v,onExportPdf:()=>{vt.oR.success(c("pages.contracts.createContract.notifications.exportPdfSuccess"))}})}),(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,W.jsx)(d.A,{variant:"outlined",onClick:()=>h(1),startIcon:(0,W.jsx)(N.A,{}),children:c("pages.contracts.createContract.buttons.back")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",onClick:T,children:c("pages.contracts.createContract.buttons.create")})]})]}):null}];return(0,W.jsxs)(i.A,{sx:{width:"100%"},children:[(0,W.jsx)(mt.A,{activeStep:p,sx:{mb:4},children:S.map((t,e)=>(0,W.jsx)(ut.A,{completed:p>e,children:(0,W.jsx)(At.A,{children:t.label})},t.label))}),(0,W.jsx)(i.A,{sx:{mt:2},children:S[p].component()})]})};var It=n(28330),kt=n(26582);const Ht=t=>{var e,n,a,l,c,p;let{contract:h,onClose:g,onDelete:x,onEdit:m}=t;const{t:u,i18n:y}=(0,G.Bd)(),[v,S]=s.useState(!1),B=t=>{if(!t)return u("common.unknown");const e=y.language||"en",n=e.startsWith("ja")?"ja-JP":e.startsWith("vi")?"vi-VN":"en-US";return new Date(t).toLocaleDateString(n)};return(0,W.jsxs)(i.A,{children:[(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:3,gap:2},children:[(0,W.jsx)(j.A,{onClick:g,children:(0,W.jsx)(N.A,{})}),(0,W.jsxs)(r.A,{variant:"h5",children:[u("pages.contracts.detail.title","Contract details"),": ",h.name]}),(0,W.jsx)(A.A,{label:h.status.toUpperCase(),color:(t=>{switch(t){case"signed":return"success";case"pending":return"warning";case"draft":default:return"default";case"expired":case"cancelled":return"error"}})(h.status),size:"small",sx:{ml:2}})]}),(0,W.jsxs)(o.A,{sx:{p:3,mb:3},children:[(0,W.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[(0,W.jsxs)(i.A,{children:[(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:u("pages.contracts.detail.generalInfo","General information")}),(0,W.jsxs)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[(0,W.jsxs)(i.A,{sx:{flex:"1 1 300px"},children:[(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.contractId","Contract ID"),":"]})," ",h.id]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.templateName","Template name"),":"]})," ",h.templateName]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.createdAt","Created at"),":"]})," ",B(h.createdAt)]})]}),(0,W.jsxs)(i.A,{sx:{flex:"1 1 300px"},children:[(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.createdBy","Created by"),":"]})," ",h.createdBy]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.updatedAt","Updated at"),":"]})," ",B(h.updatedAt)]}),h.signedAt&&(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.signedAt","Signed at"),":"]})," ",B(h.signedAt)]}),h.expiresAt&&(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.fields.expiresAt","Expires at"),":"]})," ",B(h.expiresAt)]})]})]})]}),(0,W.jsxs)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,W.jsx)(d.A,{variant:"outlined",startIcon:(0,W.jsx)(J.A,{}),size:"small",children:u("common.download","Download")}),(0,W.jsx)(d.A,{variant:"outlined",startIcon:(0,W.jsx)(It.A,{}),size:"small",children:u("pages.contracts.detail.actions.print","Print")}),(0,W.jsx)(d.A,{variant:"outlined",startIcon:(0,W.jsx)(kt.A,{}),size:"small",children:u("pages.contracts.detail.actions.share","Share")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,W.jsx)(R.A,{}),onClick:()=>m(h.id),size:"small",children:u("common.edit","Edit")}),(0,W.jsx)(d.A,{variant:"outlined",color:"error",startIcon:(0,W.jsx)(D.A,{}),onClick:()=>S(!0),size:"small",children:u("common.delete","Delete")})]})]}),(0,W.jsx)(E.A,{sx:{my:3}}),(0,W.jsxs)(i.A,{sx:{mb:4},children:[(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:u("pages.contracts.detail.partiesInfo","Parties information")}),(0,W.jsxs)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:4},children:[(0,W.jsx)(i.A,{sx:{flex:"1 1 300px"},children:(0,W.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,W.jsx)(r.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:u("pages.contracts.detail.partyA.title","Party A (Contracting party)")}),h.contractData?(0,W.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.companyName","Company name"),":"]})," ",h.contractData.tenBenA]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.address","Address"),":"]})," ",h.contractData.diaChiA]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.phone","Phone"),":"]})," ",h.contractData.dienThoaiA]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.taxId","Tax ID"),":"]})," ",h.contractData.maSoThueA]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.representative","Representative"),":"]})," ",h.contractData.nguoiDaiDienA]}),(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.position","Position"),":"]})," ",h.contractData.chucVuA]})]}):(0,W.jsx)(r.A,{children:u("common.noData","No data")})]})}),(0,W.jsx)(i.A,{sx:{flex:"1 1 300px"},children:(0,W.jsxs)(o.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,W.jsx)(r.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:u("pages.contracts.detail.partyB.title","Party B (Partner)")}),h.contractData?(0,W.jsxs)(r.A,{children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.party.companyName","Company name"),":"]})," ",h.contractData.tenBenB]}):(0,W.jsx)(r.A,{children:u("common.noData","No data")})]})})]})]}),(0,W.jsxs)(i.A,{children:[(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:u("pages.contracts.detail.contractContent","Contract content")}),(0,W.jsxs)(o.A,{variant:"outlined",sx:{p:3},children:[(0,W.jsx)(r.A,{variant:"h5",align:"center",gutterBottom:!0,children:u("pages.contracts.detail.sample.heading","SERVICE CONTRACT")}),(0,W.jsxs)(r.A,{paragraph:!0,align:"center",children:[u("pages.contracts.detail.sample.code","No."),": ",h.id]}),(0,W.jsxs)(r.A,{paragraph:!0,align:"center",children:[(0,W.jsx)("em",{children:"C\u0103n c\u1ee9 B\u1ed9 lu\u1eadt D\xe2n s\u1ef1 s\u1ed1 91/2015/QH13 ng\xe0y 24 th\xe1ng 11 n\u0103m 2015 c\u1ee7a Qu\u1ed1c h\u1ed9i"}),(0,W.jsx)("br",{}),(0,W.jsx)("em",{children:"C\u0103n c\u1ee9 Lu\u1eadt Th\u01b0\u01a1ng m\u1ea1i s\u1ed1 36/2005/QH11 ng\xe0y 14 th\xe1ng 6 n\u0103m 2005 c\u1ee7a Qu\u1ed1c h\u1ed9i"})]}),(0,W.jsx)(r.A,{paragraph:!0,align:"center",children:(0,W.jsxs)("strong",{children:["H\xf4m nay, ng\xe0y ",(null===(e=h.contractData)||void 0===e?void 0:e.ngayKy)||B(h.createdAt)]})}),(0,W.jsxs)(r.A,{paragraph:!0,children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.sample.partyA","PARTY A"),":"]})," ",(null===(n=h.contractData)||void 0===n?void 0:n.tenBenA)||h.partyA]}),(0,W.jsxs)(r.A,{paragraph:!0,children:[(0,W.jsxs)("strong",{children:[u("pages.contracts.detail.sample.partyB","PARTY B"),":"]})," ",(null===(a=h.contractData)||void 0===a?void 0:a.tenBenB)||h.partyB]}),(0,W.jsx)(r.A,{paragraph:!0,children:"Hai b\xean c\xf9ng th\u1ecfa thu\u1eadn k\xfd k\u1ebft H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 v\u1edbi nh\u1eefng n\u1ed9i dung v\xe0 \u0111i\u1ec1u kho\u1ea3n sau \u0111\xe2y:"}),(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 1: N\u1ed8I DUNG C\xd4NG VI\u1ec6C"}),(0,W.jsx)(r.A,{paragraph:!0,children:"B\xean B \u0111\u1ed3ng \xfd cung c\u1ea5p d\u1ecbch v\u1ee5 theo y\xeau c\u1ea7u c\u1ee7a B\xean A v\u1edbi n\u1ed9i dung chi ti\u1ebft nh\u01b0 trong Ph\u1ee5 l\u1ee5c \u0111\xednh k\xe8m."}),(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 2: TH\u1edcI H\u1ea0N H\u1ee2P \u0110\u1ed2NG"}),(0,W.jsxs)(r.A,{paragraph:!0,children:["H\u1ee3p \u0111\u1ed3ng c\xf3 hi\u1ec7u l\u1ef1c t\u1eeb ng\xe0y k\xfd \u0111\u1ebfn ng\xe0y ",h.expiresAt?B(h.expiresAt):"khi ho\xe0n th\xe0nh ngh\u0129a v\u1ee5 h\u1ee3p \u0111\u1ed3ng","."]}),(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"\u0110I\u1ec0U 3: GI\xc1 TR\u1eca H\u1ee2P \u0110\u1ed2NG"}),(0,W.jsxs)(r.A,{paragraph:!0,children:["T\u1ed5ng gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng: ",(null===(l=h.contractData)||void 0===l?void 0:l.giaTriHopDong)||"Theo th\u1ecfa thu\u1eadn gi\u1eefa hai b\xean"]}),(0,W.jsxs)(i.A,{sx:{mt:6,display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[(0,W.jsxs)(i.A,{sx:{textAlign:"center",minWidth:200,flex:1},children:[(0,W.jsx)(r.A,{fontWeight:"bold",children:"\u0110\u1ea0I DI\u1ec6N B\xcaN A"}),(0,W.jsx)(r.A,{fontStyle:"italic",children:"(K\xfd, ghi r\xf5 h\u1ecd t\xean)"}),(0,W.jsx)(i.A,{sx:{height:80,mt:2}}),(0,W.jsx)(r.A,{fontWeight:"bold",children:(null===(c=h.contractData)||void 0===c?void 0:c.nguoiDaiDienA)||"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"}),(0,W.jsx)(r.A,{children:(null===(p=h.contractData)||void 0===p?void 0:p.chucVuA)||"Ch\u1ee9c v\u1ee5"})]}),(0,W.jsxs)(i.A,{sx:{textAlign:"center",minWidth:200,flex:1},children:[(0,W.jsx)(r.A,{fontWeight:"bold",children:"\u0110\u1ea0I DI\u1ec6N B\xcaN B"}),(0,W.jsx)(r.A,{fontStyle:"italic",children:"(K\xfd, ghi r\xf5 h\u1ecd t\xean)"}),(0,W.jsx)(i.A,{sx:{height:80,mt:2}}),(0,W.jsx)(r.A,{fontWeight:"bold",children:"Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n"}),(0,W.jsx)(r.A,{children:"Ch\u1ee9c v\u1ee5"})]})]})]})]})]}),(0,W.jsxs)(f.A,{open:v,onClose:()=>S(!1),children:[(0,W.jsx)(b.A,{children:u("pages.contracts.detail.deleteDialog.title","Confirm contract deletion")}),(0,W.jsx)(C.A,{children:(0,W.jsx)(r.A,{children:u("pages.contracts.detail.deleteDialog.text","Are you sure you want to delete this contract? This action cannot be undone.")})}),(0,W.jsxs)(T.A,{children:[(0,W.jsx)(d.A,{onClick:()=>S(!1),children:u("common.cancel","Cancel")}),(0,W.jsx)(d.A,{onClick:()=>{x(h.id),S(!1)},color:"error",variant:"contained",children:u("pages.contracts.detail.deleteDialog.confirm","Delete")})]})]})]})},Pt=()=>{const{t:t,i18n:e}=(0,G.Bd)(),[n,k]=(0,s.useState)("templates"),[H,P]=(0,s.useState)(!1),[L,z]=(0,s.useState)(!1),[V,U]=(0,s.useState)([]),[O,R]=(0,s.useState)([]),[Y,F]=(0,s.useState)(!1),[E,_]=(0,s.useState)(null),[q,M]=(0,s.useState)(!1),[Z,Q]=(0,s.useState)(null),[K,J]=(0,s.useState)({open:!1,message:"",severity:"success"});(0,s.useEffect)(()=>{(async()=>{F(!0);try{await new Promise(t=>setTimeout(t,1e3));U([{id:"1",name:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n",description:"Template h\u1ee3p \u0111\u1ed3ng mua b\xe1n h\xe0ng h\xf3a",type:"customer",status:"active",createdAt:"2025-06-30T10:00:00Z",updatedAt:"2025-06-30T10:00:00Z",createdBy:"Nguy\u1ec5n V\u0103n A",placeholderCount:8,isDefault:!0,extractedFields:[]},{id:"2",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5",description:"Template h\u1ee3p \u0111\u1ed3ng cung c\u1ea5p d\u1ecbch v\u1ee5",type:"internal",status:"active",createdAt:"2025-06-29T15:30:00Z",updatedAt:"2025-06-29T15:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb B",placeholderCount:5,isDefault:!1,extractedFields:[]}])}catch(e){console.error("Error fetching templates:",e),J({open:!0,message:t("pages.contracts.notifications.loadError"),severity:"error"})}try{R([{id:"C001",name:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n s\u1ed1 2025/001",templateId:"1",templateName:"H\u1ee3p \u0111\u1ed3ng mua b\xe1n",status:"signed",partyA:"C\xf4ng ty TNHH ABC",partyB:"\xd4ng Nguy\u1ec5n V\u0103n A",createdAt:"2025-07-01T09:00:00Z",updatedAt:"2025-07-01T09:30:00Z",createdBy:"Nguy\u1ec5n V\u0103n B",signedAt:"2025-07-01T10:00:00Z",expiresAt:"2025-12-31T23:59:59Z"},{id:"C002",name:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5 s\u1ed1 2025/002",templateId:"2",templateName:"H\u1ee3p \u0111\u1ed3ng d\u1ecbch v\u1ee5",status:"pending",partyA:"C\xf4ng ty TNHH ABC",partyB:"C\xf4ng ty TNHH XYZ",createdAt:"2025-07-02T14:00:00Z",updatedAt:"2025-07-02T14:30:00Z",createdBy:"Tr\u1ea7n Th\u1ecb C"},{id:"C003",name:"H\u1ee3p \u0111\u1ed3ng thu\xea nh\xe0 s\u1ed1 2025/003",templateId:"3",templateName:"H\u1ee3p \u0111\u1ed3ng thu\xea nh\xe0",status:"draft",partyA:"C\xf4ng ty TNHH ABC",partyB:"B\xe0 L\xea Th\u1ecb D",createdAt:"2025-07-03T10:00:00Z",updatedAt:"2025-07-03T10:15:00Z",createdBy:"Nguy\u1ec5n V\u0103n B",expiresAt:"2026-07-02T23:59:59Z"}])}catch(e){console.error("Error loading contracts:",e)}finally{F(!1)}})()},[]);const X=()=>{J(t=>(0,a.A)((0,a.A)({},t),{},{open:!1}))},$=t=>{_(t)},tt=()=>{_(null)},et=t=>{Q(t),M(!0)};return(0,W.jsxs)(i.A,{sx:{p:3},children:[(0,W.jsx)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:(0,W.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:t("pages.contracts.title")})}),(0,W.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,W.jsxs)(l.A,{value:n,onChange:(t,e)=>{k(e)},"aria-label":"contract management tabs",children:[(0,W.jsx)(c.A,{label:t("pages.contracts.tabs.templates"),value:"templates"}),(0,W.jsx)(c.A,{label:t("pages.contracts.tabs.contracts"),value:"contracts"})]})}),"templates"===n?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(rt,{templates:V,loading:Y,onUploadClick:()=>{P(!0)}}),(0,W.jsx)(xt,{open:H,onClose:()=>{P(!1)},onSubmit:async e=>{try{F(!0),console.log("Uploading template:",e),await new Promise(t=>setTimeout(t,1500));const n={id:Math.random().toString(36).substring(2,9),name:e.name,description:e.description||"",type:e.type,status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"Ng\u01b0\u1eddi d\xf9ng hi\u1ec7n t\u1ea1i",placeholderCount:e.extractedFields.length,isDefault:!1,extractedFields:e.extractedFields};U(t=>[n,...t]),J({open:!0,message:t("pages.contracts.notifications.uploadTemplateSuccess"),severity:"success"})}catch(n){throw console.error("Error uploading template:",n),J({open:!0,message:t("pages.contracts.notifications.uploadTemplateError"),severity:"error"}),n}finally{F(!1)}}})]}):(0,W.jsxs)(o.A,{sx:{p:3},children:[(0,W.jsxs)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,W.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:t("pages.contracts.list.title")}),(0,W.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,W.jsx)(S.A,{}),onClick:()=>z(!0),children:t("pages.contracts.list.buttonCreate")})]}),Y?(0,W.jsx)(r.A,{color:"textSecondary",paragraph:!0,children:t("pages.contracts.loading.contracts")}):(0,W.jsx)(p.A,{children:(0,W.jsxs)(h.A,{children:[(0,W.jsx)(g.A,{children:(0,W.jsxs)(x.A,{children:[(0,W.jsx)(m.A,{children:t("pages.contracts.columns.code")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.name")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.type")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.partyA")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.partyB")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.createdAt")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.status")}),(0,W.jsx)(m.A,{children:t("pages.contracts.columns.actions")})]})}),(0,W.jsx)(u.A,{children:O.map(n=>(0,W.jsxs)(x.A,{hover:!0,onClick:()=>$(n),sx:{cursor:"pointer"},children:[(0,W.jsx)(m.A,{children:n.id}),(0,W.jsx)(m.A,{children:n.name}),(0,W.jsx)(m.A,{children:n.templateName}),(0,W.jsx)(m.A,{children:n.partyA}),(0,W.jsx)(m.A,{children:n.partyB}),(0,W.jsx)(m.A,{children:new Date(n.createdAt).toLocaleDateString(e.language)}),(0,W.jsx)(m.A,{children:(0,W.jsx)(A.A,{label:"signed"===n.status?t("pages.contracts.status.signed"):"pending"===n.status?t("pages.contracts.status.pending"):"draft"===n.status?t("pages.contracts.status.draft"):"expired"===n.status?t("pages.contracts.status.expired"):t("pages.contracts.status.cancelled"),color:"signed"===n.status?"success":"pending"===n.status?"warning":"draft"===n.status?"default":"error",size:"small"})}),(0,W.jsxs)(m.A,{children:[(0,W.jsx)(j.A,{size:"small",title:t("pages.contracts.tooltips.view"),onClick:()=>$(n),children:(0,W.jsx)(B.A,{fontSize:"small"})}),(0,W.jsx)(j.A,{size:"small",title:t("pages.contracts.tooltips.download"),children:(0,W.jsx)(w.A,{fontSize:"small"})}),(0,W.jsx)(j.A,{size:"small",title:t("pages.contracts.tooltips.delete"),onClick:t=>{t.stopPropagation(),et(n.id)},children:(0,W.jsx)(D.A,{fontSize:"small",color:"error"})})]})]},n.id))})]})})]}),(0,W.jsx)(y.A,{open:K.open,autoHideDuration:6e3,onClose:X,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,W.jsx)(v.A,{onClose:X,severity:K.severity,sx:{width:"100%"},children:K.message})}),(0,W.jsxs)(f.A,{open:!!E,onClose:tt,fullWidth:!0,maxWidth:"md",children:[(0,W.jsx)(b.A,{children:(0,W.jsxs)(i.A,{display:"flex",alignItems:"center",children:[(0,W.jsx)(j.A,{onClick:tt,sx:{mr:1},children:(0,W.jsx)(N.A,{})}),(0,W.jsx)("span",{children:t("pages.contracts.dialogs.detailTitle")})]})}),(0,W.jsx)(C.A,{dividers:!0,children:E&&(0,W.jsx)(Ht,{contract:(0,a.A)((0,a.A)({},E),{},{contractData:{tenBenA:E.partyA,tenBenB:E.partyB,ngayKy:new Date(E.createdAt).toLocaleDateString(e.language),diaChiA:"123 L\xea L\u1ee3i, Q.1, TP.HCM",dienThoaiA:"0901234567",maSoThueA:"0123456789",nguoiDaiDienA:"Nguy\u1ec5n V\u0103n A",chucVuA:"Gi\xe1m \u0111\u1ed1c",giaTriHopDong:"50,000,000 VN\u0110"}}),onClose:tt,onDelete:et,onEdit:e=>{J({open:!0,message:t("pages.contracts.notifications.editInfo"),severity:"info"})}})})]}),(0,W.jsxs)(f.A,{open:q,onClose:()=>M(!1),children:[(0,W.jsx)(b.A,{children:t("pages.contracts.dialogs.deleteConfirmTitle")}),(0,W.jsx)(C.A,{children:(0,W.jsx)(r.A,{children:t("pages.contracts.dialogs.deleteConfirmText")})}),(0,W.jsxs)(T.A,{children:[(0,W.jsx)(d.A,{onClick:()=>M(!1),children:t("common.cancel")}),(0,W.jsx)(d.A,{onClick:()=>{Z&&(R(t=>t.filter(t=>t.id!==Z)),M(!1),Q(null),J({open:!0,message:t("pages.contracts.notifications.deleteContractSuccess"),severity:"success"}))},color:"error",variant:"contained",children:t("common.delete")})]})]}),(0,W.jsxs)(f.A,{open:L,onClose:()=>z(!1),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",width:"95%",maxWidth:"1400px"}},children:[(0,W.jsx)(b.A,{children:(0,W.jsxs)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,W.jsx)(r.A,{variant:"h6",children:t("pages.contracts.dialogs.createTitle")}),(0,W.jsx)(j.A,{onClick:()=>z(!1),children:(0,W.jsx)(I.A,{})})]})}),(0,W.jsx)(C.A,{children:(0,W.jsx)(Nt,{templates:V,onBack:()=>z(!1),onCreate:e=>{R(t=>[e,...t]),z(!1),_(e),J({open:!0,message:t("pages.contracts.notifications.createContractSuccess"),severity:"success"})}})})]})]})}}}]);
//# sourceMappingURL=624.427fe891.chunk.js.map